(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(t,e,n){var i=n("b622"),r=i("toStringTag"),s={};s[r]="z",t.exports="[object z]"===String(s)},"0366":function(t,e,n){var i=n("59ed");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},"04d1":function(t,e,n){var i=n("342f"),r=i.match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},"057f":function(t,e,n){var i=n("fc6a"),r=n("241c").f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==s.call(t)?a(t):r(i(t))}},"06cf":function(t,e,n){var i=n("83ab"),r=n("d1e7"),s=n("5c6c"),o=n("fc6a"),a=n("a04b"),c=n("5135"),l=n("0cfb"),h=Object.getOwnPropertyDescriptor;e.f=i?h:function(t,e){if(t=o(t),e=a(e),l)try{return h(t,e)}catch(n){}if(c(t,e))return s(!r.f.call(t,e),t[e])}},"0829":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Pl})),n.d(e,"b",(function(){return Oc})),n.d(e,"c",(function(){return dc})),n.d(e,"d",(function(){return ec})),n.d(e,"e",(function(){return ol})),n.d(e,"f",(function(){return kc})),n.d(e,"g",(function(){return T})),n.d(e,"h",(function(){return Ec})),n.d(e,"i",(function(){return al})),n.d(e,"j",(function(){return cl})),n.d(e,"k",(function(){return L})),n.d(e,"l",(function(){return Rl})),n.d(e,"m",(function(){return qa})),n.d(e,"n",(function(){return st})),n.d(e,"o",(function(){return H})),n.d(e,"p",(function(){return Xa})),n.d(e,"q",(function(){return w})),n.d(e,"r",(function(){return K})),n.d(e,"s",(function(){return m})),n.d(e,"t",(function(){return Ga})),n.d(e,"u",(function(){return Gl})),n.d(e,"v",(function(){return nh})),n.d(e,"w",(function(){return eh})),n.d(e,"x",(function(){return bc})),n.d(e,"y",(function(){return rc})),n.d(e,"z",(function(){return sc})),n.d(e,"A",(function(){return tc})),n.d(e,"B",(function(){return Hl})),n.d(e,"C",(function(){return Zl})),n.d(e,"D",(function(){return xc})),n.d(e,"E",(function(){return oc})),n.d(e,"F",(function(){return mc})),n.d(e,"G",(function(){return yc})),n.d(e,"H",(function(){return _c})),n.d(e,"I",(function(){return kl})),n.d(e,"J",(function(){return Cl})),n.d(e,"K",(function(){return fc})),n.d(e,"L",(function(){return Yl})),n.d(e,"M",(function(){return Dl})),n.d(e,"N",(function(){return Fl})),n.d(e,"O",(function(){return Ul})),n.d(e,"P",(function(){return Bl})),n.d(e,"Q",(function(){return Vl})),n.d(e,"R",(function(){return zl})),n.d(e,"S",(function(){return ih})),n.d(e,"T",(function(){return bl})),n.d(e,"U",(function(){return wl})),n.d(e,"V",(function(){return Tc})),n.d(e,"W",(function(){return Sc})),n.d(e,"X",(function(){return Kl})),n.d(e,"Y",(function(){return $l})),n.d(e,"Z",(function(){return yl})),n.d(e,"ab",(function(){return pl})),n.d(e,"bb",(function(){return cc})),n.d(e,"cb",(function(){return ac})),n.d(e,"db",(function(){return Jl})),n.d(e,"eb",(function(){return th})),n.d(e,"fb",(function(){return ql})),n.d(e,"gb",(function(){return p})),n.d(e,"hb",(function(){return hl})),n.d(e,"ib",(function(){return Tl})),n.d(e,"jb",(function(){return xl})),n.d(e,"kb",(function(){return Wl})),n.d(e,"lb",(function(){return wc})),n.d(e,"mb",(function(){return gl}));var i=n("5606"),r=n("ffa6"),s=n("4fc1"),o=n("1fd5"),a=n("8f6b");const c="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}l.UNAUTHENTICATED=new l(null),l.GOOGLE_CREDENTIALS=new l("google-credentials-uid"),l.FIRST_PARTY=new l("first-party-uid"),l.MOCK_USER=new l("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let h="9.2.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u=new s["b"]("@firebase/firestore");function d(){return u.logLevel}function p(t){u.setLogLevel(t)}function f(t,...e){if(u.logLevel<=s["a"].DEBUG){const n=e.map(y);u.debug(`Firestore (${h}): ${t}`,...n)}}function g(t,...e){if(u.logLevel<=s["a"].ERROR){const n=e.map(y);u.error(`Firestore (${h}): ${t}`,...n)}}function m(t,...e){if(u.logLevel<=s["a"].WARN){const n=e.map(y);u.warn(`Firestore (${h}): ${t}`,...n)}}function y(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(t="Unexpected state"){const e=`FIRESTORE (${h}) INTERNAL ASSERTION FAILED: `+t;throw g(e),new Error(e)}function b(t,e){t||v()}function w(t,e){t||v()}function _(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C{constructor(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}}class k{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(l.UNAUTHENTICATED))}shutdown(){}}class O{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class I{constructor(t){this.t=t,this.currentUser=l.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new S;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new S,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const e=r;t.enqueueRetryable(async()=>{await e.promise,await i(this.currentUser)})},o=t=>{f("FirebaseCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(t=>o(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(f("FirebaseCredentialsProvider","Auth not yet detected"),r.resolve(),r=new S)}},0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(b("string"==typeof e.accessToken),new C(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return b(null===t||"string"==typeof t),new l(t)}}class E{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=l.FIRST_PARTY}get authHeaders(){const t={"X-Goog-AuthUser":this.l},e=this.h.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.m&&(t["X-Goog-Iam-Authorization-Token"]=this.m),t}}class A{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new E(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(l.FIRST_PARTY))}shutdown(){}invalidateToken(){}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.g(t),this.p=t=>e.writeSequenceNumber(t))}g(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.p&&this.p(t),t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */P.T=-1;class j{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=N(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function R(t,e){return t<e?-1:t>e?1:0}function M(t,e,n){return t.length===e.length&&t.every((t,i)=>n(t,e[i]))}function D(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new T(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new T(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new T(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new T(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return L.fromMillis(Date.now())}static fromDate(t){return L.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new L(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?R(this.nanoseconds,t.nanoseconds):R(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(t){this.timestamp=t}static fromTimestamp(t){return new F(t)}static min(){return new F(new L(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function B(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function V(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(t,e,n){void 0===e?e=0:e>t.length&&v(),void 0===n?n=t.length-e:n>t.length-e&&v(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===z.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof z?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class q extends z{construct(t,e,n){return new q(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new T(x.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(t=>t.length>0))}return new q(e)}static emptyPath(){return new q([])}}const W=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class H extends z{construct(t,e,n){return new H(t,e,n)}static isValidIdentifier(t){return W.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),H.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new H(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new T(x.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new T(x.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new T(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new T(x.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new H(e)}static emptyPath(){return new H([])}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.fields=t,t.sort(H.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return M(this.fields,t.fields,(t,e)=>t.isEqual(e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new $(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new $(e)}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return R(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$.EMPTY_BYTE_STRING=new $("");const Y=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function X(t){if(b(!!t),"string"==typeof t){let e=0;const n=Y.exec(t);if(b(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Q(t.seconds),nanos:Q(t.nanos)}}function Q(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function J(t){return"string"==typeof t?$.fromBase64String(t):$.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tt(t){const e=t.mapValue.fields.__previous_value__;return Z(e)?tt(e):e}function et(t){const e=X(t.mapValue.fields.__local_write_time__.timestampValue);return new L(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){return null==t}function it(t){return 0===t&&1/t==-1/0}function rt(t){return"number"==typeof t&&Number.isInteger(t)&&!it(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t){this.path=t}static fromPath(t){return new st(q.fromString(t))}static fromName(t){return new st(q.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===q.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return q.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new st(new q(t.slice()))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Z(t)?4:10:v()}function at(t,e){const n=ot(t);if(n!==ot(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return et(t).isEqual(et(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=X(t.timestampValue),i=X(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return J(t.bytesValue).isEqual(J(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Q(t.geoPointValue.latitude)===Q(e.geoPointValue.latitude)&&Q(t.geoPointValue.longitude)===Q(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Q(t.integerValue)===Q(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Q(t.doubleValue),i=Q(e.doubleValue);return n===i?it(n)===it(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return M(t.arrayValue.values||[],e.arrayValue.values||[],at);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(U(n)!==U(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!at(n[r],i[r])))return!1;return!0}(t,e);default:return v()}}function ct(t,e){return void 0!==(t.values||[]).find(t=>at(t,e))}function lt(t,e){const n=ot(t),i=ot(e);if(n!==i)return R(n,i);switch(n){case 0:return 0;case 1:return R(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Q(t.integerValue||t.doubleValue),i=Q(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return ht(t.timestampValue,e.timestampValue);case 4:return ht(et(t),et(e));case 5:return R(t.stringValue,e.stringValue);case 6:return function(t,e){const n=J(t),i=J(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=R(n[r],i[r]);if(0!==t)return t}return R(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=R(Q(t.latitude),Q(e.latitude));return 0!==n?n:R(Q(t.longitude),Q(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=lt(n[r],i[r]);if(t)return t}return R(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=R(i[o],s[o]);if(0!==t)return t;const e=lt(n[i[o]],r[s[o]]);if(0!==e)return e}return R(i.length,s.length)}(t.mapValue,e.mapValue);default:throw v()}}function ht(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return R(t,e);const n=X(t),i=X(e),r=R(n.seconds,i.seconds);return 0!==r?r:R(n.nanos,i.nanos)}function ut(t){return dt(t)}function dt(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=X(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?J(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,st.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=dt(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${dt(t.fields[r])}`;return n+"}"}(t.mapValue):v();var e,n}function pt(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ft(t){return!!t&&"integerValue"in t}function gt(t){return!!t&&"arrayValue"in t}function mt(t){return!!t&&"nullValue"in t}function yt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vt(t){return!!t&&"mapValue"in t}function bt(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return B(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=bt(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bt(t.arrayValue.values[n]);return e}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.value=t}static empty(){return new wt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!vt(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=bt(e)}setAll(t){let e=H.emptyPath(),n={},i=[];t.forEach((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=bt(t):i.push(r.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());vt(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return at(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];vt(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){B(e,(e,n)=>t[e]=n);for(const i of n)delete t[i]}clone(){return new wt(bt(this.value))}}function _t(t){const e=[];return B(t.fields,(t,n)=>{const i=new H([t]);if(vt(n)){const t=_t(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)}),new G(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class xt{constructor(t,e,n,i,r){this.key=t,this.documentType=e,this.version=n,this.data=i,this.documentState=r}static newInvalidDocument(t){return new xt(t,0,F.min(),wt.empty(),0)}static newFoundDocument(t,e,n){return new xt(t,1,e,n,0)}static newNoDocument(t,e){return new xt(t,2,e,wt.empty(),0)}static newUnknownDocument(t,e){return new xt(t,3,e,wt.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof xt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new xt(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.A=null}}function St(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Tt(t,e,n,i,r,s,o)}function Ct(t){const e=_(t);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(t=>At(t)).join(","),t+="|ob:",t+=e.orderBy.map(t=>function(t){return t.field.canonicalString()+t.dir}(t)).join(","),nt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Bt(e.startAt)),e.endAt&&(t+="|ub:",t+=Bt(e.endAt)),e.A=t}return e.A}function kt(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(t=>{return`${(e=t).field.canonicalString()} ${e.op} ${ut(e.value)}`;var e}).join(", ")}]`),nt(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t)).join(", ")}]`),t.startAt&&(e+=", startAt: "+Bt(t.startAt)),t.endAt&&(e+=", endAt: "+Bt(t.endAt)),`Target(${e})`}function Ot(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!zt(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],i=e.filters[r],n.op!==i.op||!n.field.isEqual(i.field)||!at(n.value,i.value))return!1;var n,i;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wt(t.startAt,e.startAt)&&Wt(t.endAt,e.endAt)}function It(t){return st.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Et extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.R(t,e,n):new Pt(t,e,n):"array-contains"===e?new Mt(t,n):"in"===e?new Dt(t,n):"not-in"===e?new Lt(t,n):"array-contains-any"===e?new Ft(t,n):new Et(t,e,n)}static R(t,e,n){return"in"===e?new Nt(t,n):new jt(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.P(lt(e,this.value)):null!==e&&ot(this.value)===ot(e)&&this.P(lt(e,this.value))}P(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return v()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}function At(t){return t.field.canonicalString()+t.op.toString()+ut(t.value)}class Pt extends Et{constructor(t,e,n){super(t,e,n),this.key=st.fromName(n.referenceValue)}matches(t){const e=st.comparator(t.key,this.key);return this.P(e)}}class Nt extends Et{constructor(t,e){super(t,"in",e),this.keys=Rt("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class jt extends Et{constructor(t,e){super(t,"not-in",e),this.keys=Rt("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Rt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>st.fromName(t.referenceValue))}class Mt extends Et{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return gt(e)&&ct(e.arrayValue,this.value)}}class Dt extends Et{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&ct(this.value.arrayValue,e)}}class Lt extends Et{constructor(t,e){super(t,"not-in",e)}matches(t){if(ct(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!ct(this.value.arrayValue,e)}}class Ft extends Et{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!gt(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>ct(this.value.arrayValue,t))}}class Ut{constructor(t,e){this.position=t,this.before=e}}function Bt(t){return`${t.before?"b":"a"}:${t.position.map(t=>ut(t)).join(",")}`}class Vt{constructor(t,e="asc"){this.field=t,this.dir=e}}function zt(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function qt(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?st.comparator(st.fromName(o.referenceValue),n.key):lt(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return t.before?i<=0:i<0}function Wt(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!at(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null,this.startAt,this.endAt}}function Gt(t,e,n,i,r,s,o,a){return new Ht(t,e,n,i,r,s,o,a)}function Kt(t){return new Ht(t)}function $t(t){return!nt(t.limit)&&"F"===t.limitType}function Yt(t){return!nt(t.limit)&&"L"===t.limitType}function Xt(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Qt(t){for(const e of t.filters)if(e.v())return e.field;return null}function Jt(t){return null!==t.collectionGroup}function Zt(t){const e=_(t);if(null===e.V){e.V=[];const t=Qt(e),n=Xt(e);if(null!==t&&null===n)t.isKeyField()||e.V.push(new Vt(t)),e.V.push(new Vt(H.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.V.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new Vt(H.keyField(),t))}}}return e.V}function te(t){const e=_(t);if(!e.S)if("F"===e.limitType)e.S=St(e.path,e.collectionGroup,Zt(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const r of Zt(e)){const e="desc"===r.dir?"asc":"desc";t.push(new Vt(r.field,e))}const n=e.endAt?new Ut(e.endAt.position,!e.endAt.before):null,i=e.startAt?new Ut(e.startAt.position,!e.startAt.before):null;e.S=St(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e.S}function ee(t,e,n){return new Ht(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ne(t,e){return Ot(te(t),te(e))&&t.limitType===e.limitType}function ie(t){return`${Ct(te(t))}|lt:${t.limitType}`}function re(t){return`Query(target=${kt(te(t))}; limitType=${t.limitType})`}function se(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):st.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!qt(t.startAt,Zt(t),e))&&(!t.endAt||!qt(t.endAt,Zt(t),e))}(t,e)}function oe(t){return(e,n)=>{let i=!1;for(const r of Zt(t)){const t=ae(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function ae(t,e,n){const i=t.field.isKeyField()?st.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?lt(i,r):v()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return v()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:it(e)?"-0":e}}function le(t){return{integerValue:""+t}}function he(t,e){return rt(e)?le(e):ce(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(){this._=void 0}}function de(t,e,n){return t instanceof ge?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof me?ye(t,e):t instanceof ve?be(t,e):function(t,e){const n=fe(t,e),i=_e(n)+_e(t.C);return ft(n)&&ft(t.C)?le(i):ce(t.N,i)}(t,e)}function pe(t,e,n){return t instanceof me?ye(t,e):t instanceof ve?be(t,e):n}function fe(t,e){return t instanceof we?ft(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class ge extends ue{}class me extends ue{constructor(t){super(),this.elements=t}}function ye(t,e){const n=xe(e);for(const i of t.elements)n.some(t=>at(t,i))||n.push(i);return{arrayValue:{values:n}}}class ve extends ue{constructor(t){super(),this.elements=t}}function be(t,e){let n=xe(e);for(const i of t.elements)n=n.filter(t=>!at(t,i));return{arrayValue:{values:n}}}class we extends ue{constructor(t,e){super(),this.N=t,this.C=e}}function _e(t){return Q(t.integerValue||t.doubleValue)}function xe(t){return gt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t,e){this.field=t,this.transform=e}}function Se(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof me&&e instanceof me||t instanceof ve&&e instanceof ve?M(t.elements,e.elements,at):t instanceof we&&e instanceof we?at(t.C,e.C):t instanceof ge&&e instanceof ge}(t.transform,e.transform)}class Ce{constructor(t,e){this.version=t,this.transformResults=e}}class ke{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ke}static exists(t){return new ke(void 0,t)}static updateTime(t){return new ke(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Oe(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ie{}function Ee(t,e,n){t instanceof Re?function(t,e,n){const i=t.value.clone(),r=Le(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Me?function(t,e,n){if(!Oe(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Le(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(De(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Ae(t,e,n){t instanceof Re?function(t,e,n){if(!Oe(t.precondition,e))return;const i=t.value.clone(),r=Fe(t.fieldTransforms,n,e);i.setAll(r),e.convertToFoundDocument(je(e),i).setHasLocalMutations()}(t,e,n):t instanceof Me?function(t,e,n){if(!Oe(t.precondition,e))return;const i=Fe(t.fieldTransforms,n,e),r=e.data;r.setAll(De(t)),r.setAll(i),e.convertToFoundDocument(je(e),r).setHasLocalMutations()}(t,e,n):function(t,e){Oe(t.precondition,e)&&e.convertToNoDocument(F.min())}(t,e)}function Pe(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=fe(i.transform,t||null);null!=r&&(null==n&&(n=wt.empty()),n.set(i.field,r))}return n||null}function Ne(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&M(t,e,(t,e)=>Se(t,e))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function je(t){return t.isFoundDocument()?t.version:F.min()}class Re extends Ie{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}}class Me extends Ie{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}}function De(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Le(t,e,n){const i=new Map;b(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,pe(o,a,n[r]))}return i}function Fe(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,de(t,s,e))}return i}class Ue extends Ie{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class Be extends Ie{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.count=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,qe;function We(t){switch(t){default:return v();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function He(t){if(void 0===t)return g("GRPC error has no .code"),x.UNKNOWN;switch(t){case ze.OK:return x.OK;case ze.CANCELLED:return x.CANCELLED;case ze.UNKNOWN:return x.UNKNOWN;case ze.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ze.INTERNAL:return x.INTERNAL;case ze.UNAVAILABLE:return x.UNAVAILABLE;case ze.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ze.NOT_FOUND:return x.NOT_FOUND;case ze.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ze.ABORTED:return x.ABORTED;case ze.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ze.DATA_LOSS:return x.DATA_LOSS;default:return v()}}(qe=ze||(ze={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ge{constructor(t,e){this.comparator=t,this.root=e||$e.EMPTY}insert(t,e){return new Ge(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,$e.BLACK,null,null))}remove(t){return new Ge(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$e.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ke(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ke(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ke(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ke(this.root,t,this.comparator,!0)}}class Ke{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $e{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:$e.RED,this.left=null!=i?i:$e.EMPTY,this.right=null!=r?r:$e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new $e(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return $e.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw v();if(this.right.isRed())throw v();const t=this.left.check();if(t!==this.right.check())throw v();return t+(this.isRed()?0:1)}}$e.EMPTY=null,$e.RED=!0,$e.BLACK=!1,$e.EMPTY=new class{constructor(){this.size=0}get key(){throw v()}get value(){throw v()}get color(){throw v()}get left(){throw v()}get right(){throw v()}copy(t,e,n,i,r){return this}insert(t,e,n){return new $e(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ye{constructor(t){this.comparator=t,this.data=new Ge(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Xe(this.data.getIterator())}getIteratorFrom(t){return new Xe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof Ye))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ye(this.comparator);return e.data=t,e}}class Xe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe=new Ge(st.comparator);function Je(){return Qe}const Ze=new Ge(st.comparator);function tn(){return Ze}const en=new Ge(st.comparator);function nn(){return en}const rn=new Ye(st.comparator);function sn(...t){let e=rn;for(const n of t)e=e.add(n);return e}const on=new Ye(R);function an(){return on}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,ln.createSynthesizedTargetChangeForCurrentChange(t,e)),new cn(F.min(),n,an(),Je(),sn())}}class ln{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e){return new ln($.EMPTY_BYTE_STRING,e,sn(),sn(),sn())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t,e,n,i){this.k=t,this.removedTargetIds=e,this.key=n,this.$=i}}class un{constructor(t,e){this.targetId=t,this.O=e}}class dn{constructor(t,e,n=$.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class pn{constructor(){this.F=0,this.M=mn(),this.L=$.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(t){t.approximateByteSize()>0&&(this.U=!0,this.L=t)}W(){let t=sn(),e=sn(),n=sn();return this.M.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:v()}}),new ln(this.L,this.B,t,e,n)}G(){this.U=!1,this.M=mn()}H(t,e){this.U=!0,this.M=this.M.insert(t,e)}J(t){this.U=!0,this.M=this.M.remove(t)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class fn{constructor(t){this.tt=t,this.et=new Map,this.nt=Je(),this.st=gn(),this.it=new Ye(R)}rt(t){for(const e of t.k)t.$&&t.$.isFoundDocument()?this.ot(e,t.$):this.ct(e,t.key,t.$);for(const e of t.removedTargetIds)this.ct(e,t.key,t.$)}at(t){this.forEachTarget(t,e=>{const n=this.ut(e);switch(t.state){case 0:this.ht(e)&&n.j(t.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(t.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(e);break;case 3:this.ht(e)&&(n.Z(),n.j(t.resumeToken));break;case 4:this.ht(e)&&(this.lt(e),n.j(t.resumeToken));break;default:v()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.et.forEach((t,n)=>{this.ht(n)&&e(n)})}ft(t){const e=t.targetId,n=t.O.count,i=this.dt(e);if(i){const t=i.target;if(It(t))if(0===n){const n=new st(t.path);this.ct(e,n,xt.newNoDocument(n,F.min()))}else b(1===n);else this.wt(e)!==n&&(this.lt(e),this.it=this.it.add(e))}}_t(t){const e=new Map;this.et.forEach((n,i)=>{const r=this.dt(i);if(r){if(n.current&&It(r.target)){const e=new st(r.target.path);null!==this.nt.get(e)||this.gt(i,e)||this.ct(i,e,xt.newNoDocument(e,t))}n.K&&(e.set(i,n.W()),n.G())}});let n=sn();this.st.forEach((t,e)=>{let i=!0;e.forEachWhile(t=>{const e=this.dt(t);return!e||2===e.purpose||(i=!1,!1)}),i&&(n=n.add(t))});const i=new cn(t,e,this.it,this.nt,n);return this.nt=Je(),this.st=gn(),this.it=new Ye(R),i}ot(t,e){if(!this.ht(t))return;const n=this.gt(t,e.key)?2:0;this.ut(t).H(e.key,n),this.nt=this.nt.insert(e.key,e),this.st=this.st.insert(e.key,this.yt(e.key).add(t))}ct(t,e,n){if(!this.ht(t))return;const i=this.ut(t);this.gt(t,e)?i.H(e,1):i.J(e),this.st=this.st.insert(e,this.yt(e).delete(t)),n&&(this.nt=this.nt.insert(e,n))}removeTarget(t){this.et.delete(t)}wt(t){const e=this.ut(t).W();return this.tt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Y(t){this.ut(t).Y()}ut(t){let e=this.et.get(t);return e||(e=new pn,this.et.set(t,e)),e}yt(t){let e=this.st.get(t);return e||(e=new Ye(R),this.st=this.st.insert(t,e)),e}ht(t){const e=null!==this.dt(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e}dt(t){const e=this.et.get(t);return e&&e.q?null:this.tt.Tt(t)}lt(t){this.et.set(t,new pn),this.tt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}gt(t,e){return this.tt.getRemoteKeysForTarget(t).has(e)}}function gn(){return new Ge(st.comparator)}function mn(){return new Ge(st.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=(()=>{const t={asc:"ASCENDING",desc:"DESCENDING"};return t})(),vn=(()=>{const t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};return t})();class bn{constructor(t,e){this.databaseId=t,this.D=e}}function wn(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _n(t,e){return t.D?e.toBase64():e.toUint8Array()}function xn(t,e){return wn(t,e.toTimestamp())}function Tn(t){return b(!!t),F.fromTimestamp(function(t){const e=X(t);return new L(e.seconds,e.nanos)}(t))}function Sn(t,e){return function(t){return new q(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Cn(t){const e=q.fromString(t);return b(Zn(e)),e}function kn(t,e){return Sn(t.databaseId,e.path)}function On(t,e){const n=Cn(e);if(n.get(1)!==t.databaseId.projectId)throw new T(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new T(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new st(Pn(n))}function In(t,e){return Sn(t.databaseId,e)}function En(t){const e=Cn(t);return 4===e.length?q.emptyPath():Pn(e)}function An(t){return new q(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Pn(t){return b(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Nn(t,e,n){return{name:kn(t,e),fields:n.value.mapValue.fields}}function jn(t,e,n){const i=On(t,e.name),r=Tn(e.updateTime),s=new wt({mapValue:{fields:e.fields}}),o=xt.newFoundDocument(i,r,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Rn(t,e){return"found"in e?function(t,e){b(!!e.found),e.found.name,e.found.updateTime;const n=On(t,e.found.name),i=Tn(e.found.updateTime),r=new wt({mapValue:{fields:e.found.fields}});return xt.newFoundDocument(n,i,r)}(t,e):"missing"in e?function(t,e){b(!!e.missing),b(!!e.readTime);const n=On(t,e.missing),i=Tn(e.readTime);return xt.newNoDocument(n,i)}(t,e):v()}function Mn(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:v()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.D?(b(void 0===e||"string"==typeof e),$.fromBase64String(e||"")):(b(void 0===e||e instanceof Uint8Array),$.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?x.UNKNOWN:He(t.code);return new T(e,t.message||"")}(o);n=new dn(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=On(t,i.document.name),s=Tn(i.document.updateTime),o=new wt({mapValue:{fields:i.document.fields}}),a=xt.newFoundDocument(r,s,o),c=i.targetIds||[],l=i.removedTargetIds||[];n=new hn(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=On(t,i.document),s=i.readTime?Tn(i.readTime):F.min(),o=xt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new hn([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=On(t,i.document),s=i.removedTargetIds||[];n=new hn([],s,r,null)}else{if(!("filter"in e))return v();{e.filter;const t=e.filter;t.targetId;const i=t.count||0,r=new Ve(i),s=t.targetId;n=new un(s,r)}}return n}function Dn(t,e){let n;if(e instanceof Re)n={update:Nn(t,e.key,e.value)};else if(e instanceof Ue)n={delete:kn(t,e.key)};else if(e instanceof Me)n={update:Nn(t,e.key,e.data),updateMask:Jn(e.fieldMask)};else{if(!(e instanceof Be))return v();n={verify:kn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(t=>function(t,e){const n=e.transform;if(n instanceof ge)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof me)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ve)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof we)return{fieldPath:e.field.canonicalString(),increment:n.C};throw v()}(0,t))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:xn(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v()}(t,e.precondition)),n}function Ln(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?ke.updateTime(Tn(t.updateTime)):void 0!==t.exists?ke.exists(t.exists):ke.none()}(e.currentDocument):ke.none(),i=e.updateTransforms?e.updateTransforms.map(e=>function(t,e){let n=null;if("setToServerValue"in e)b("REQUEST_TIME"===e.setToServerValue),n=new ge;else if("appendMissingElements"in e){const t=e.appendMissingElements.values||[];n=new me(t)}else if("removeAllFromArray"in e){const t=e.removeAllFromArray.values||[];n=new ve(t)}else"increment"in e?n=new we(t,e.increment):v();const i=H.fromServerFormat(e.fieldPath);return new Te(i,n)}(t,e)):[];if(e.update){e.update.name;const r=On(t,e.update.name),s=new wt({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){const e=t.fieldPaths||[];return new G(e.map(t=>H.fromServerFormat(t)))}(e.updateMask);return new Me(r,s,t,n,i)}return new Re(r,s,n,i)}if(e.delete){const i=On(t,e.delete);return new Ue(i,n)}if(e.verify){const i=On(t,e.verify);return new Be(i,n)}return v()}function Fn(t,e){return t&&t.length>0?(b(void 0!==e),t.map(t=>function(t,e){let n=t.updateTime?Tn(t.updateTime):Tn(e);return n.isEqual(F.min())&&(n=Tn(e)),new Ce(n,t.transformResults||[])}(t,e))):[]}function Un(t,e){return{documents:[In(t,e.path)]}}function Bn(t,e){const n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=In(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=In(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(t){if(0===t.length)return;const e=t.map(t=>function(t){if("=="===t.op){if(yt(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NAN"}};if(mt(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(yt(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NOT_NAN"}};if(mt(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$n(t.field),op:Kn(t.op),value:t.value}}}(t));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);r&&(n.structuredQuery.where=r);const s=function(t){if(0!==t.length)return t.map(t=>function(t){return{field:$n(t.field),direction:Gn(t.dir)}}(t))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.D||nt(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Wn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Wn(e.endAt)),n}function Vn(t){let e=En(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){b(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=qn(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(t=>function(t){return new Vt(Yn(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,nt(e)?null:e}(n.limit));let c=null;n.startAt&&(c=Hn(n.startAt));let l=null;return n.endAt&&(l=Hn(n.endAt)),Gt(e,r,o,s,a,"F",c,l)}function zn(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return v()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}function qn(t){return t?void 0!==t.unaryFilter?[Qn(t)]:void 0!==t.fieldFilter?[Xn(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(t=>qn(t)).reduce((t,e)=>t.concat(e)):v():[]}function Wn(t){return{before:t.before,values:t.position}}function Hn(t){const e=!!t.before,n=t.values||[];return new Ut(n,e)}function Gn(t){return yn[t]}function Kn(t){return vn[t]}function $n(t){return{fieldPath:t.canonicalString()}}function Yn(t){return H.fromServerFormat(t.fieldPath)}function Xn(t){return Et.create(Yn(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return v()}}(t.fieldFilter.op),t.fieldFilter.value)}function Qn(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Yn(t.unaryFilter.field);return Et.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Yn(t.unaryFilter.field);return Et.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Yn(t.unaryFilter.field);return Et.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Yn(t.unaryFilter.field);return Et.create(r,"!=",{nullValue:"NULL_VALUE"});default:return v()}}function Jn(t){const e=[];return t.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zn(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ni(e)),e=ei(t.get(n),e);return ni(e)}function ei(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const e=t.charAt(r);switch(e){case"\0":n+="";break;case"":n+="";break;default:n+=e}}return n}function ni(t){return t+""}function ii(t){const e=t.length;if(b(e>=2),2===e)return b(""===t.charAt(0)&&""===t.charAt(1)),q.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const e=t.indexOf("",s);switch((e<0||e>n)&&v(),t.charAt(e+1)){case"":const n=t.substring(s,e);let o;0===r.length?o=n:(r+=n,o=r,r=""),i.push(o);break;case"":r+=t.substring(s,e),r+="\0";break;case"":r+=t.substring(s,e+1);break;default:v()}s=e+2}return new q(i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t,e){this.seconds=t,this.nanoseconds=e}}class si{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}si.store="owner",si.key="owner";class oi{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}oi.store="mutationQueues",oi.keyPath="userId";class ai{constructor(t,e,n,i,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=r}}ai.store="mutations",ai.keyPath="batchId",ai.userMutationsIndex="userMutationsIndex",ai.userMutationsKeyPath=["userId","batchId"];class ci{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,ti(e)]}static key(t,e,n){return[t,ti(e),n]}}ci.store="documentMutations",ci.PLACEHOLDER=new ci;class li{constructor(t,e){this.path=t,this.readTime=e}}class hi{constructor(t,e){this.path=t,this.version=e}}class ui{constructor(t,e,n,i,r,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=i,this.readTime=r,this.parentPath=s}}ui.store="remoteDocuments",ui.readTimeIndex="readTimeIndex",ui.readTimeIndexPath="readTime",ui.collectionReadTimeIndex="collectionReadTimeIndex",ui.collectionReadTimeIndexPath=["parentPath","readTime"];class di{constructor(t){this.byteSize=t}}di.store="remoteDocumentGlobal",di.key="remoteDocumentGlobalKey";class pi{constructor(t,e,n,i,r,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=s,this.query=o}}pi.store="targets",pi.keyPath="targetId",pi.queryTargetsIndexName="queryTargetsIndex",pi.queryTargetsKeyPath=["canonicalId","targetId"];class fi{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}fi.store="targetDocuments",fi.keyPath=["targetId","path"],fi.documentTargetsIndex="documentTargetsIndex",fi.documentTargetsKeyPath=["path","targetId"];class gi{constructor(t,e,n,i){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=i}}gi.key="targetGlobalKey",gi.store="targetGlobal";class mi{constructor(t,e){this.collectionId=t,this.parent=e}}mi.store="collectionParents",mi.keyPath=["collectionId","parent"];class yi{constructor(t,e,n,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=i}}yi.store="clientMetadata",yi.keyPath="clientId";class vi{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}vi.store="bundles",vi.keyPath="bundleId";class bi{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}bi.store="namedQueries",bi.keyPath="name";const wi=[oi.store,ai.store,ci.store,ui.store,pi.store,si.store,gi.store,fi.store,yi.store,di.store,mi.store,vi.store,bi.store],_i="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&v(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ti((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Ti?e:Ti.resolve(e)}catch(t){return Ti.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Ti.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Ti.reject(e)}static resolve(t){return new Ti((e,n)=>{e(t)})}static reject(t){return new Ti((e,n)=>{n(t)})}static waitFor(t){return new Ti((e,n)=>{let i=0,r=0,s=!1;t.forEach(t=>{++i,t.next(()=>{++r,s&&r===i&&e()},t=>n(t))}),s=!0,r===i&&e()})}static or(t){let e=Ti.resolve(!1);for(const n of t)e=e.next(t=>t?Ti.resolve(t):n());return e}static forEach(t,e){const n=[];return t.forEach((t,i)=>{n.push(e.call(this,t,i))}),this.waitFor(n)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.Et=new S,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{e.error?this.Et.reject(new Oi(t,e.error)):this.Et.resolve()},this.transaction.onerror=e=>{const n=Ni(e.target.error);this.Et.reject(new Oi(t,n))}}static open(t,e,n,i){try{return new Si(e,t.transaction(i,n))}catch(t){throw new Oi(e,t)}}get It(){return this.Et.promise}abort(t){t&&this.Et.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(t){const e=this.transaction.objectStore(t);return new Ei(e)}}class Ci{constructor(t,e,n){this.name=t,this.version=e,this.At=n,12.2===Ci.Rt(Object(o["v"])())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return f("SimpleDb","Removing database:",t),Ai(window.indexedDB.deleteDatabase(t)).toPromise()}static bt(){if(!Object(o["C"])())return!1;if(Ci.Pt())return!0;const t=Object(o["v"])(),e=Ci.Rt(t),n=0<e&&e<10,i=Ci.vt(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static Pt(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=Object({NODE_ENV:"production",BASE_URL:"/"}))||void 0===e?void 0:e.Vt)}static St(t,e){return t.store(e)}static Rt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Dt(t){return this.db||(f("SimpleDb","Opening database:",this.name),this.db=await new Promise((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new Oi(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new T(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new T(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Oi(t,i))},i.onupgradeneeded=t=>{f("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.At.Ct(e,i.transaction,t.oldVersion,this.version).next(()=>{f("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.Nt&&(this.db.onversionchange=t=>this.Nt(t)),this.db}xt(t){this.Nt=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.Dt(t);const e=Si.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).catch(t=>(e.abort(t),Ti.reject(t))).toPromise();return s.catch(()=>{}),await e.It,s}catch(t){const e="FirebaseError"!==t.name&&s<3;if(f("SimpleDb","Transaction failed with error:",t.message,"Retrying:",e),this.close(),!e)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ki{constructor(t){this.kt=t,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(t){this.kt=t}done(){this.$t=!0}Mt(t){this.Ot=t}delete(){return Ai(this.kt.delete())}}class Oi extends T{constructor(t,e){super(x.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Ii(t){return"IndexedDbTransactionError"===t.name}class Ei{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ai(n)}add(t){return f("SimpleDb","ADD",this.store.name,t,t),Ai(this.store.add(t))}get(t){return Ai(this.store.get(t)).next(e=>(void 0===e&&(e=null),f("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return f("SimpleDb","DELETE",this.store.name,t),Ai(this.store.delete(t))}count(){return f("SimpleDb","COUNT",this.store.name),Ai(this.store.count())}Lt(t,e){const n=this.cursor(this.options(t,e)),i=[];return this.Bt(n,(t,e)=>{i.push(e)}).next(()=>i)}Ut(t,e){f("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.qt=!1;const i=this.cursor(n);return this.Bt(i,(t,e,n)=>n.delete())}Kt(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.Bt(i,e)}jt(t){const e=this.cursor({});return new Ti((n,i)=>{e.onerror=t=>{const e=Ni(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next(t=>{t?i.continue():n()}):n()}})}Bt(t,e){const n=[];return new Ti((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new ki(r),o=e(r.primaryKey,r.value,s);if(o instanceof Ti){const t=o.catch(t=>(s.done(),Ti.reject(t)));n.push(t)}s.isDone?i():null===s.Ft?r.continue():r.continue(s.Ft)}}).next(()=>Ti.waitFor(n))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.qt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Ai(t){return new Ti((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=Ni(t.target.error);n(e)}})}let Pi=!1;function Ni(t){const e=Ci.Rt(Object(o["v"])());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Pi||(Pi=!0,setTimeout(()=>{throw t},0)),t}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends xi{constructor(t,e){super(),this.Qt=t,this.currentSequenceNumber=e}}function Ri(t,e){const n=_(t);return Ci.St(n.Qt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&Ee(e,t,n[i])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&Ae(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&Ae(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const n=t.get(e.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(F.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),sn())}isEqual(t){return this.batchId===t.batchId&&M(this.mutations,t.mutations,(t,e)=>Ne(t,e))&&M(this.baseMutations,t.baseMutations,(t,e)=>Ne(t,e))}}class Di{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){b(t.mutations.length===n.length);let i=nn();const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Di(t,e,n,i)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,e,n,i,r=F.min(),s=F.min(),o=$.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new Li(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t){this.Wt=t}}function Ui(t,e){if(e.document)return jn(t.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=st.fromSegments(e.noDocument.path),n=Wi(e.noDocument.readTime),i=xt.newNoDocument(t,n);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){const t=st.fromSegments(e.unknownDocument.path),n=Wi(e.unknownDocument.version);return xt.newUnknownDocument(t,n)}return v()}function Bi(t,e,n){const i=Vi(n),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const n=function(t,e){return{name:kn(t,e.key),fields:e.data.value.mapValue.fields,updateTime:wn(t,e.version.toTimestamp())}}(t.Wt,e),s=e.hasCommittedMutations;return new ui(null,null,n,s,i,r)}if(e.isNoDocument()){const t=e.key.path.toArray(),n=qi(e.version),s=e.hasCommittedMutations;return new ui(null,new li(t,n),null,s,i,r)}if(e.isUnknownDocument()){const t=e.key.path.toArray(),n=qi(e.version);return new ui(new hi(t,n),null,null,!0,i,r)}return v()}function Vi(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zi(t){const e=new L(t[0],t[1]);return F.fromTimestamp(e)}function qi(t){const e=t.toTimestamp();return new ri(e.seconds,e.nanoseconds)}function Wi(t){const e=new L(t.seconds,t.nanoseconds);return F.fromTimestamp(e)}function Hi(t,e){const n=(e.baseMutations||[]).map(e=>Ln(t.Wt,e));for(let s=0;s<e.mutations.length-1;++s){const t=e.mutations[s];if(s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform){const n=e.mutations[s+1];t.updateTransforms=n.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(e=>Ln(t.Wt,e)),r=L.fromMillis(e.localWriteTimeMs);return new Mi(e.batchId,r,n,i)}function Gi(t){const e=Wi(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Wi(t.lastLimboFreeSnapshotVersion):F.min();let i;var r;return void 0!==t.query.documents?(b(1===(r=t.query).documents.length),i=te(Kt(En(r.documents[0])))):i=function(t){return te(Vn(t))}(t.query),new Li(i,t.targetId,0,t.lastListenSequenceNumber,e,n,$.fromBase64String(t.resumeToken))}function Ki(t,e){const n=qi(e.snapshotVersion),i=qi(e.lastLimboFreeSnapshotVersion);let r;r=It(e.target)?Un(t.Wt,e.target):Bn(t.Wt,e.target);const s=e.resumeToken.toBase64();return new pi(e.targetId,Ct(e.target),n,s,e.sequenceNumber,i,r)}function $i(t){const e=Vn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ee(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{getBundleMetadata(t,e){return Xi(t).get(e).next(t=>{if(t)return{id:(e=t).bundleId,createTime:Wi(e.createTime),version:e.version};var e})}saveBundleMetadata(t,e){return Xi(t).put({bundleId:(n=e).id,createTime:qi(Tn(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return Qi(t).get(e).next(t=>{if(t)return{name:(e=t).name,query:$i(e.bundledQuery),readTime:Wi(e.readTime)};var e})}saveNamedQuery(t,e){return Qi(t).put(function(t){return{name:t.name,readTime:qi(Tn(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function Xi(t){return Ri(t,vi.store)}function Qi(t){return Ri(t,bi.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.Gt=new Zi}addToCollectionParentIndex(t,e){return this.Gt.add(e),Ti.resolve()}getCollectionParents(t,e){return Ti.resolve(this.Gt.getEntries(e))}}class Zi{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Ye(q.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Ye(q.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.zt=new Zi}addToCollectionParentIndex(t,e){if(!this.zt.has(e)){const n=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.zt.add(e)});const r={collectionId:n,parent:ti(i)};return er(t).put(r)}return Ti.resolve()}getCollectionParents(t,e){const n=[],i=IDBKeyRange.bound([e,""],[D(e),""],!1,!0);return er(t).Lt(i).next(t=>{for(const i of t){if(i.collectionId!==e)break;n.push(ii(i.parent))}return n})}}function er(t){return Ri(t,mi.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ir{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new ir(t,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,e,n){const i=t.store(ai.store),r=t.store(ci.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=i.Kt({range:o},(t,e,n)=>(a++,n.delete()));s.push(c.next(()=>{b(1===a)}));const l=[];for(const h of n.mutations){const t=ci.key(e,h.key.path,n.batchId);s.push(r.delete(t)),l.push(h.key)}return Ti.waitFor(s).next(()=>l)}function sr(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw v();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir.DEFAULT_COLLECTION_PERCENTILE=10,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ir.DEFAULT=new ir(41943040,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ir.DISABLED=new ir(-1,0,0);class or{constructor(t,e,n,i){this.userId=t,this.N=e,this.Ht=n,this.referenceDelegate=i,this.Jt={}}static Yt(t,e,n,i){b(""!==t.uid);const r=t.isAuthenticated()?t.uid:"";return new or(r,e,n,i)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cr(t).Kt({index:ai.userMutationsIndex,range:n},(t,n,i)=>{e=!1,i.done()}).next(()=>e)}addMutationBatch(t,e,n,i){const r=lr(t),s=cr(t);return s.add({}).next(o=>{b("number"==typeof o);const a=new Mi(o,e,n,i),c=function(t,e,n){const i=n.baseMutations.map(e=>Dn(t.Wt,e)),r=n.mutations.map(e=>Dn(t.Wt,e));return new ai(e,n.batchId,n.localWriteTime.toMillis(),i,r)}(this.N,this.userId,a),l=[];let h=new Ye((t,e)=>R(t.canonicalString(),e.canonicalString()));for(const t of i){const e=ci.key(this.userId,t.key.path,o);h=h.add(t.key.path.popLast()),l.push(s.put(c)),l.push(r.put(e,ci.PLACEHOLDER))}return h.forEach(e=>{l.push(this.Ht.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),Ti.waitFor(l).next(()=>a)})}lookupMutationBatch(t,e){return cr(t).get(e).next(t=>t?(b(t.userId===this.userId),Hi(this.N,t)):null)}Xt(t,e){return this.Jt[e]?Ti.resolve(this.Jt[e]):this.lookupMutationBatch(t,e).next(t=>{if(t){const n=t.keys();return this.Jt[e]=n,n}return null})}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]);let r=null;return cr(t).Kt({index:ai.userMutationsIndex,range:i},(t,e,i)=>{e.userId===this.userId&&(b(e.batchId>=n),r=Hi(this.N,e)),i.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return cr(t).Kt({index:ai.userMutationsIndex,range:e,reverse:!0},(t,e,i)=>{n=e.batchId,i.done()}).next(()=>n)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cr(t).Lt(ai.userMutationsIndex,e).next(t=>t.map(t=>Hi(this.N,t)))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=ci.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(n),r=[];return lr(t).Kt({range:i},(n,i,s)=>{const[o,a,c]=n,l=ii(a);if(o===this.userId&&e.path.isEqual(l))return cr(t).get(c).next(t=>{if(!t)throw v();b(t.userId===this.userId),r.push(Hi(this.N,t))});s.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ye(R);const i=[];return e.forEach(e=>{const r=ci.prefixForPath(this.userId,e.path),s=IDBKeyRange.lowerBound(r),o=lr(t).Kt({range:s},(t,i,r)=>{const[s,o,a]=t,c=ii(o);s===this.userId&&e.path.isEqual(c)?n=n.add(a):r.done()});i.push(o)}),Ti.waitFor(i).next(()=>this.Zt(t,n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1,r=ci.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(r);let o=new Ye(R);return lr(t).Kt({range:s},(t,e,r)=>{const[s,a,c]=t,l=ii(a);s===this.userId&&n.isPrefixOf(l)?l.length===i&&(o=o.add(c)):r.done()}).next(()=>this.Zt(t,o))}Zt(t,e){const n=[],i=[];return e.forEach(e=>{i.push(cr(t).get(e).next(t=>{if(null===t)throw v();b(t.userId===this.userId),n.push(Hi(this.N,t))}))}),Ti.waitFor(i).next(()=>n)}removeMutationBatch(t,e){return rr(t.Qt,this.userId,e).next(n=>(t.addOnCommittedListener(()=>{this.te(e.batchId)}),Ti.forEach(n,e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))}te(t){delete this.Jt[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Ti.resolve();const n=IDBKeyRange.lowerBound(ci.prefixForUser(this.userId)),i=[];return lr(t).Kt({range:n},(t,e,n)=>{if(t[0]===this.userId){const e=ii(t[1]);i.push(e)}else n.done()}).next(()=>{b(0===i.length)})})}containsKey(t,e){return ar(t,this.userId,e)}ee(t){return hr(t).get(this.userId).next(t=>t||new oi(this.userId,-1,""))}}function ar(t,e,n){const i=ci.prefixForPath(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return lr(t).Kt({range:s,qt:!0},(t,n,i)=>{const[s,a,c]=t;s===e&&a===r&&(o=!0),i.done()}).next(()=>o)}function cr(t){return Ri(t,ai.store)}function lr(t){return Ri(t,ci.store)}function hr(t){return Ri(t,oi.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t){this.ne=t}next(){return this.ne+=2,this.ne}static se(){return new ur(0)}static ie(){return new ur(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t,e){this.referenceDelegate=t,this.N=e}allocateTargetId(t){return this.re(t).next(e=>{const n=new ur(e.highestTargetId);return e.highestTargetId=n.next(),this.oe(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.re(t).next(t=>F.fromTimestamp(new L(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.re(t).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(t,e,n){return this.re(t).next(i=>(i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.oe(t,i)))}addTargetData(t,e){return this.ce(t,e).next(()=>this.re(t).next(n=>(n.targetCount+=1,this.ae(e,n),this.oe(t,n))))}updateTargetData(t,e){return this.ce(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>pr(t).delete(e.targetId)).next(()=>this.re(t)).next(e=>(b(e.targetCount>0),e.targetCount-=1,this.oe(t,e)))}removeTargets(t,e,n){let i=0;const r=[];return pr(t).Kt((s,o)=>{const a=Gi(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,r.push(this.removeTargetData(t,a)))}).next(()=>Ti.waitFor(r)).next(()=>i)}forEachTarget(t,e){return pr(t).Kt((t,n)=>{const i=Gi(n);e(i)})}re(t){return fr(t).get(gi.key).next(t=>(b(null!==t),t))}oe(t,e){return fr(t).put(gi.key,e)}ce(t,e){return pr(t).put(Ki(this.N,e))}ae(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.re(t).next(t=>t.targetCount)}getTargetData(t,e){const n=Ct(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let r=null;return pr(t).Kt({range:i,index:pi.queryTargetsIndexName},(t,n,i)=>{const s=Gi(n);Ot(e,s.target)&&(r=s,i.done())}).next(()=>r)}addMatchingKeys(t,e,n){const i=[],r=gr(t);return e.forEach(e=>{const s=ti(e.path);i.push(r.put(new fi(n,s))),i.push(this.referenceDelegate.addReference(t,n,e))}),Ti.waitFor(i)}removeMatchingKeys(t,e,n){const i=gr(t);return Ti.forEach(e,e=>{const r=ti(e.path);return Ti.waitFor([i.delete([n,r]),this.referenceDelegate.removeReference(t,n,e)])})}removeMatchingKeysForTargetId(t,e){const n=gr(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),i=gr(t);let r=sn();return i.Kt({range:n,qt:!0},(t,e,n)=>{const i=ii(t[1]),s=new st(i);r=r.add(s)}).next(()=>r)}containsKey(t,e){const n=ti(e.path),i=IDBKeyRange.bound([n],[D(n)],!1,!0);let r=0;return gr(t).Kt({index:fi.documentTargetsIndex,qt:!0,range:i},([t,e],n,i)=>{0!==t&&(r++,i.done())}).next(()=>r>0)}Tt(t,e){return pr(t).get(e).next(t=>t?Gi(t):null)}}function pr(t){return Ri(t,pi.store)}function fr(t){return Ri(t,gi.store)}function gr(t){return Ri(t,fi.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mr(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==_i)throw t;f("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr([t,e],[n,i]){const r=R(t,n);return 0===r?R(e,i):r}class vr{constructor(t){this.ue=t,this.buffer=new Ye(yr),this.he=0}le(){return++this.he}fe(t){const e=[t,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();yr(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class br{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.de=!1,this.we=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(t)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(t){const e=this.de?3e5:6e4;f("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.we=null,this.de=!0;try{await t.collectGarbage(this.garbageCollector)}catch(t){Ii(t)?f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await mr(t)}await this._e(t)})}}class wr{constructor(t,e){this.me=t,this.params=e}calculateTargetCount(t,e){return this.me.ge(t).next(t=>Math.floor(e/100*t))}nthSequenceNumber(t,e){if(0===e)return Ti.resolve(P.T);const n=new vr(e);return this.me.forEachTarget(t,t=>n.fe(t.sequenceNumber)).next(()=>this.me.ye(t,t=>n.fe(t))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.me.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.me.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),Ti.resolve(nr)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nr):this.pe(t,e))}getCacheSize(t){return this.me.getCacheSize(t)}pe(t,e){let n,i,r,o,a,c,l;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(e=>(e>this.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,o=Date.now(),this.nthSequenceNumber(t,i))).next(i=>(n=i,a=Date.now(),this.removeTargets(t,n,e))).next(e=>(r=e,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(t=>(l=Date.now(),d()<=s["a"].DEBUG&&f("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+"ms\n"+`\tRemoved ${r} targets in `+(c-a)+"ms\n"+`\tRemoved ${t} documents in `+(l-c)+"ms\n"+`Total Duration: ${l-h}ms`),Ti.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t})))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(t,e){this.db=t,this.garbageCollector=function(t,e){return new wr(t,e)}(this,e)}ge(t){const e=this.Te(t);return this.db.getTargetCache().getTargetCount(t).next(t=>e.next(e=>t+e))}Te(t){let e=0;return this.ye(t,t=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}ye(t,e){return this.Ee(t,(t,n)=>e(n))}addReference(t,e,n){return xr(t,n)}removeReference(t,e,n){return xr(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return xr(t,e)}Ie(t,e){return function(t,e){let n=!1;return hr(t).jt(i=>ar(t,i,e).next(t=>(t&&(n=!0),Ti.resolve(!t)))).next(()=>n)}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this.Ee(t,(s,o)=>{if(o<=e){const e=this.Ie(t,s).next(e=>{if(!e)return r++,n.getEntry(t,s).next(()=>(n.removeEntry(s),gr(t).delete([0,ti(s.path)])))});i.push(e)}}).next(()=>Ti.waitFor(i)).next(()=>n.apply(t)).next(()=>r)}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return xr(t,e)}Ee(t,e){const n=gr(t);let i,r=P.T;return n.Kt({index:fi.documentTargetsIndex},([t,n],{path:s,sequenceNumber:o})=>{0===t?(r!==P.T&&e(new st(ii(i)),r),r=o,i=s):r=P.T}).next(()=>{r!==P.T&&e(new st(ii(i)),r)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function xr(t,e){return gr(t).put(function(t,e){return new fi(0,ti(t.path),e)}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0!==i){for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),!0;return!1}forEach(t){B(this.inner,(e,n)=>{for(const[i,r]of n)t(i,r)})}isEmpty(){return V(this.inner)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.changes=new Tr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:F.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:xt.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Ti.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(t,e){this.N=t,this.Ht=e}addEntry(t,e,n){return Ir(t).put(Er(e),n)}removeEntry(t,e){const n=Ir(t),i=Er(e);return n.delete(i)}updateMetadata(t,e){return this.getMetadata(t).next(n=>(n.byteSize+=e,this.Ae(t,n)))}getEntry(t,e){return Ir(t).get(Er(e)).next(t=>this.Re(e,t))}be(t,e){return Ir(t).get(Er(e)).next(t=>({document:this.Re(e,t),size:sr(t)}))}getEntries(t,e){let n=Je();return this.Pe(t,e,(t,e)=>{const i=this.Re(t,e);n=n.insert(t,i)}).next(()=>n)}ve(t,e){let n=Je(),i=new Ge(st.comparator);return this.Pe(t,e,(t,e)=>{const r=this.Re(t,e);n=n.insert(t,r),i=i.insert(t,sr(e))}).next(()=>({documents:n,Ve:i}))}Pe(t,e,n){if(e.isEmpty())return Ti.resolve();const i=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),r=e.getIterator();let s=r.getNext();return Ir(t).Kt({range:i},(t,e,i)=>{const o=st.fromSegments(t);for(;s&&st.comparator(s,o)<0;)n(s,null),s=r.getNext();s&&s.isEqual(o)&&(n(s,e),s=r.hasNext()?r.getNext():null),s?i.Mt(s.path.toArray()):i.done()}).next(()=>{for(;s;)n(s,null),s=r.hasNext()?r.getNext():null})}getDocumentsMatchingQuery(t,e,n){let i=Je();const r=e.path.length+1,s={};if(n.isEqual(F.min())){const t=e.path.toArray();s.range=IDBKeyRange.lowerBound(t)}else{const t=e.path.toArray(),i=Vi(n);s.range=IDBKeyRange.lowerBound([t,i],!0),s.index=ui.collectionReadTimeIndex}return Ir(t).Kt(s,(t,n,s)=>{if(t.length!==r)return;const o=Ui(this.N,n);e.path.isPrefixOf(o.key.path)?se(e,o)&&(i=i.insert(o.key,o)):s.done()}).next(()=>i)}newChangeBuffer(t){return new kr(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(t=>t.byteSize)}getMetadata(t){return Or(t).get(di.key).next(t=>(b(!!t),t))}Ae(t,e){return Or(t).put(di.key,e)}Re(t,e){if(e){const t=Ui(this.N,e);if(!t.isNoDocument()||!t.version.isEqual(F.min()))return t}return xt.newInvalidDocument(t)}}class kr extends Sr{constructor(t,e){super(),this.Se=t,this.trackRemovals=e,this.De=new Tr(t=>t.toString(),(t,e)=>t.isEqual(e))}applyChanges(t){const e=[];let n=0,i=new Ye((t,e)=>R(t.canonicalString(),e.canonicalString()));return this.changes.forEach((r,s)=>{const o=this.De.get(r);if(s.document.isValidDocument()){const a=Bi(this.Se.N,s.document,this.getReadTime(r));i=i.add(r.path.popLast());const c=sr(a);n+=c-o,e.push(this.Se.addEntry(t,r,a))}else if(n-=o,this.trackRemovals){const n=Bi(this.Se.N,xt.newNoDocument(r,F.min()),this.getReadTime(r));e.push(this.Se.addEntry(t,r,n))}else e.push(this.Se.removeEntry(t,r))}),i.forEach(n=>{e.push(this.Se.Ht.addToCollectionParentIndex(t,n))}),e.push(this.Se.updateMetadata(t,n)),Ti.waitFor(e)}getFromCache(t,e){return this.Se.be(t,e).next(t=>(this.De.set(e,t.size),t.document))}getAllFromCache(t,e){return this.Se.ve(t,e).next(({documents:t,Ve:e})=>(e.forEach((t,e)=>{this.De.set(t,e)}),t))}}function Or(t){return Ri(t,di.store)}function Ir(t){return Ri(t,ui.store)}function Er(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(t){this.N=t}Ct(t,e,n,i){b(n<i&&n>=0&&i<=11);const r=new Si("createOrUpgrade",e);n<1&&i>=1&&(function(t){t.createObjectStore(si.store)}(t),function(t){t.createObjectStore(oi.store,{keyPath:oi.keyPath}),t.createObjectStore(ai.store,{keyPath:ai.keyPath,autoIncrement:!0}).createIndex(ai.userMutationsIndex,ai.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ci.store)}(t),Pr(t),function(t){t.createObjectStore(ui.store)}(t));let s=Ti.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore(fi.store),t.deleteObjectStore(pi.store),t.deleteObjectStore(gi.store)}(t),Pr(t)),s=s.next(()=>function(t){const e=t.store(gi.store),n=new gi(0,0,F.min().toTimestamp(),0);return e.put(gi.key,n)}(r))),n<4&&i>=4&&(0!==n&&(s=s.next(()=>function(t,e){return e.store(ai.store).Lt().next(n=>{t.deleteObjectStore(ai.store),t.createObjectStore(ai.store,{keyPath:ai.keyPath,autoIncrement:!0}).createIndex(ai.userMutationsIndex,ai.userMutationsKeyPath,{unique:!0});const i=e.store(ai.store),r=n.map(t=>i.put(t));return Ti.waitFor(r)})}(t,r))),s=s.next(()=>{!function(t){t.createObjectStore(yi.store,{keyPath:yi.keyPath})}(t)})),n<5&&i>=5&&(s=s.next(()=>this.Ce(r))),n<6&&i>=6&&(s=s.next(()=>(function(t){t.createObjectStore(di.store)}(t),this.Ne(r)))),n<7&&i>=7&&(s=s.next(()=>this.xe(r))),n<8&&i>=8&&(s=s.next(()=>this.ke(t,r))),n<9&&i>=9&&(s=s.next(()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){const e=t.objectStore(ui.store);e.createIndex(ui.readTimeIndex,ui.readTimeIndexPath,{unique:!1}),e.createIndex(ui.collectionReadTimeIndex,ui.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&i>=10&&(s=s.next(()=>this.$e(r))),n<11&&i>=11&&(s=s.next(()=>{!function(t){t.createObjectStore(vi.store,{keyPath:vi.keyPath})}(t),function(t){t.createObjectStore(bi.store,{keyPath:bi.keyPath})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)})),s}Ne(t){let e=0;return t.store(ui.store).Kt((t,n)=>{e+=sr(n)}).next(()=>{const n=new di(e);return t.store(di.store).put(di.key,n)})}Ce(t){const e=t.store(oi.store),n=t.store(ai.store);return e.Lt().next(e=>Ti.forEach(e,e=>{const i=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.Lt(ai.userMutationsIndex,i).next(n=>Ti.forEach(n,n=>{b(n.userId===e.userId);const i=Hi(this.N,n);return rr(t,e.userId,i).next(()=>{})}))}))}xe(t){const e=t.store(fi.store),n=t.store(ui.store);return t.store(gi.store).get(gi.key).next(t=>{const i=[];return n.Kt((n,r)=>{const s=new q(n),o=function(t){return[0,ti(t)]}(s);i.push(e.get(o).next(n=>n?Ti.resolve():(n=>e.put(new fi(0,ti(n),t.highestListenSequenceNumber)))(s)))}).next(()=>Ti.waitFor(i))})}ke(t,e){t.createObjectStore(mi.store,{keyPath:mi.keyPath});const n=e.store(mi.store),i=new Zi,r=t=>{if(i.add(t)){const e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:ti(i)})}};return e.store(ui.store).Kt({qt:!0},(t,e)=>{const n=new q(t);return r(n.popLast())}).next(()=>e.store(ci.store).Kt({qt:!0},([t,e,n],i)=>{const s=ii(e);return r(s.popLast())}))}$e(t){const e=t.store(pi.store);return e.Kt((t,n)=>{const i=Gi(n),r=Ki(this.N,i);return e.put(r)})}}function Pr(t){t.createObjectStore(fi.store,{keyPath:fi.keyPath}).createIndex(fi.documentTargetsIndex,fi.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(pi.store,{keyPath:pi.keyPath}).createIndex(pi.queryTargetsIndexName,pi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(gi.store)}const Nr="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jr{constructor(t,e,n,i,r,s,o,a,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Oe=r,this.window=s,this.document=o,this.Fe=c,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=t=>Promise.resolve(),!jr.bt())throw new T(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _r(this,i),this.We=e+"main",this.N=new Fi(a),this.Ge=new Ci(this.We,11,new Ar(this.N)),this.ze=new dr(this.referenceDelegate,this.N),this.Ht=new tr,this.He=function(t,e){return new Cr(t,e)}(this.N,this.Ht),this.Je=new Yi,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&g("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new T(x.FAILED_PRECONDITION,Nr);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.ze.getHighestSequenceNumber(t))}).then(t=>{this.Le=new P(t,this.Fe)}).then(()=>{this.Be=!0}).catch(t=>(this.Ge&&this.Ge.close(),Promise.reject(t)))}nn(t){return this.Qe=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ge.xt(async e=>{null===e.newVersion&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Oe.enqueueAndForget(async()=>{this.started&&await this.Xe()}))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Mr(t).put(new yi(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(t).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(t)).next(e=>this.isPrimary&&!e?this.on(t).next(()=>!1):!!e&&this.cn(t).next(()=>!0))).catch(t=>{if(Ii(t))return f("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Oe.enqueueRetryable(()=>this.Qe(t)),this.isPrimary=t})}sn(t){return Rr(t).get(si.key).next(t=>Ti.resolve(this.an(t)))}un(t){return Mr(t).delete(this.clientId)}async hn(){if(this.isPrimary&&!this.ln(this.je,18e5)){this.je=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const e=Ri(t,yi.store);return e.Lt().next(t=>{const n=this.fn(t,18e5),i=t.filter(t=>-1===n.indexOf(t));return Ti.forEach(i,t=>e.delete(t.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Ye)for(const e of t)this.Ye.removeItem(this.dn(e.clientId))}}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}an(t){return!!t&&t.ownerId===this.clientId}rn(t){return this.Me?Ti.resolve(!0):Rr(t).get(si.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)){if(this.an(e)&&this.networkEnabled)return!0;if(!this.an(e)){if(!e.allowTabSynchronization)throw new T(x.FAILED_PRECONDITION,Nr);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mr(t).Lt().next(t=>void 0===this.fn(t,5e3).find(t=>{if(this.clientId!==t.clientId){const e=!this.networkEnabled&&t.networkEnabled,n=!this.inForeground&&t.inForeground,i=this.networkEnabled===t.networkEnabled;if(e||n&&i)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&f("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Be=!1,this._n(),this.Ke&&(this.Ke.cancel(),this.Ke=null),this.mn(),this.gn(),await this.Ge.runTransaction("shutdown","readwrite",[si.store,yi.store],t=>{const e=new ji(t,P.T);return this.on(e).next(()=>this.un(e))}),this.Ge.close(),this.yn()}fn(t,e){return t.filter(t=>this.ln(t.updateTimeMs,e)&&!this.wn(t.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",t=>Mr(t).Lt().next(t=>this.fn(t,18e5).map(t=>t.clientId)))}get started(){return this.Be}getMutationQueue(t){return or.Yt(t,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(t,e,n){f("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite";let r;return this.Ge.runTransaction(t,i,wi,i=>(r=new ji(i,this.Le?this.Le.next():P.T),"readwrite-primary"===e?this.sn(r).next(t=>!!t||this.rn(r)).next(e=>{if(!e)throw g(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new T(x.FAILED_PRECONDITION,_i);return n(r)}).next(t=>this.cn(r).next(()=>t)):this.Tn(r).next(()=>n(r)))).then(t=>(r.raiseOnCommittedEvent(),t))}Tn(t){return Rr(t).get(si.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.an(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new T(x.FAILED_PRECONDITION,Nr)})}cn(t){const e=new si(this.clientId,this.allowTabSynchronization,Date.now());return Rr(t).put(si.key,e)}static bt(){return Ci.bt()}on(t){const e=Rr(t);return e.get(si.key).next(t=>this.an(t)?(f("IndexedDbPersistence","Releasing primary lease."),e.delete(si.key)):Ti.resolve())}ln(t,e){const n=Date.now();return!(t<n-e)&&(!(t>n)||(g(`Detected an update time that is in the future: ${t} > ${n}`),!1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ue=()=>{this._n(),Object(o["H"])()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(t){var e;try{const n=null!==(null===(e=this.Ye)||void 0===e?void 0:e.getItem(this.dn(t)));return f("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return g("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(t){g("Failed to set zombie client id.",t)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(t){}}dn(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Rr(t){return Ri(t,si.store)}function Mr(t){return Ri(t,yi.store)}function Dr(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Lr{constructor(t,e){this.progress=t,this.En=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t,e,n){this.He=t,this.In=e,this.Ht=n}An(t,e){return this.In.getAllMutationBatchesAffectingDocumentKey(t,e).next(n=>this.Rn(t,e,n))}Rn(t,e,n){return this.He.getEntry(t,e).next(t=>{for(const e of n)e.applyToLocalView(t);return t})}bn(t,e){t.forEach((t,n)=>{for(const i of e)i.applyToLocalView(n)})}Pn(t,e){return this.He.getEntries(t,e).next(e=>this.vn(t,e).next(()=>e))}vn(t,e){return this.In.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>this.bn(e,t))}getDocumentsMatchingQuery(t,e,n){return function(t){return st.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Vn(t,e.path):Jt(e)?this.Sn(t,e,n):this.Dn(t,e,n)}Vn(t,e){return this.An(t,new st(e)).next(t=>{let e=tn();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}Sn(t,e,n){const i=e.collectionGroup;let r=tn();return this.Ht.getCollectionParents(t,i).next(s=>Ti.forEach(s,s=>{const o=function(t,e){return new Ht(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return this.Dn(t,o,n).next(t=>{t.forEach((t,e)=>{r=r.insert(t,e)})})}).next(()=>r))}Dn(t,e,n){let i,r;return this.He.getDocumentsMatchingQuery(t,e,n).next(n=>(i=n,this.In.getAllMutationBatchesAffectingQuery(t,e))).next(e=>(r=e,this.Cn(t,r,i).next(t=>{i=t;for(const e of r)for(const t of e.mutations){const n=t.key;let r=i.get(n);null==r&&(r=xt.newInvalidDocument(n),i=i.insert(n,r)),Ae(t,r,e.localWriteTime),r.isFoundDocument()||(i=i.remove(n))}}))).next(()=>(i.forEach((t,n)=>{se(e,n)||(i=i.remove(t))}),i))}Cn(t,e,n){let i=sn();for(const s of e)for(const t of s.mutations)t instanceof Me&&null===n.get(t.key)&&(i=i.add(t.key));let r=n;return this.He.getEntries(t,i).next(t=>(t.forEach((t,e)=>{e.isFoundDocument()&&(r=r.insert(t,e))}),r))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Nn=n,this.xn=i}static kn(t,e){let n=sn(),i=sn();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Ur(t,e.fromCache,n,i)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{$n(t){this.On=t}getDocumentsMatchingQuery(t,e,n,i){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(F.min())?this.Fn(t,e):this.On.Pn(t,i).next(r=>{const o=this.Mn(e,r);return($t(e)||Yt(e))&&this.Ln(e.limitType,o,i,n)?this.Fn(t,e):(d()<=s["a"].DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),re(e)),this.On.getDocumentsMatchingQuery(t,e,n).next(t=>(o.forEach(e=>{t=t.insert(e.key,e)}),t)))})}Mn(t,e){let n=new Ye(oe(t));return e.forEach((e,i)=>{se(t,i)&&(n=n.add(i))}),n}Ln(t,e,n,i){if(n.size!==e.size)return!0;const r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Fn(t,e){return d()<=s["a"].DEBUG&&f("QueryEngine","Using full collection scan to execute query:",re(e)),this.On.getDocumentsMatchingQuery(t,e,F.min())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(t,e,n,i){this.persistence=t,this.Bn=e,this.N=i,this.Un=new Ge(R),this.qn=new Tr(t=>Ct(t),Ot),this.Kn=F.min(),this.In=t.getMutationQueue(n),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new Fr(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Un))}}function zr(t,e,n,i){return new Vr(t,e,n,i)}async function qr(t,e){const n=_(t);let i=n.In,r=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",t=>{let s;return n.In.getAllMutationBatches(t).next(o=>(s=o,i=n.persistence.getMutationQueue(e),r=new Fr(n.jn,i,n.persistence.getIndexManager()),i.getAllMutationBatches(t))).next(e=>{const n=[],i=[];let o=sn();for(const t of s){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return r.Pn(t,o).next(t=>({Wn:t,removedBatchIds:n,addedBatchIds:i}))})});return n.In=i,n.Qn=r,n.Bn.$n(n.Qn),s}function Wr(t,e){const n=_(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const i=e.batch.keys(),r=n.jn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Ti.resolve();return s.forEach(t=>{o=o.next(()=>i.getEntry(e,t)).next(e=>{const s=n.docVersions.get(t);b(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&i.addEntry(e,n.commitVersion))})}),o.next(()=>t.In.removeMutationBatch(e,r))}(n,t,e,r).next(()=>r.apply(t)).next(()=>n.In.performConsistencyCheck(t)).next(()=>n.Qn.Pn(t,i))})}function Hr(t){const e=_(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function Gr(t,e){const n=_(t),i=e.snapshotVersion;let r=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",t=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});r=n.Un;const o=[];e.targetChanges.forEach((e,s)=>{const a=r.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(t,e.removedDocuments,s).next(()=>n.ze.addMatchingKeys(t,e.addedDocuments,s)));const c=e.resumeToken;if(c.approximateByteSize()>0){const l=a.withResumeToken(c,i).withSequenceNumber(t.currentSequenceNumber);r=r.insert(s,l),function(t,e,n){return b(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(a,l,e)&&o.push(n.ze.updateTargetData(t,l))}});let a=Je();if(e.documentUpdates.forEach((i,r)=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))}),o.push(Kr(t,s,e.documentUpdates,i,void 0).next(t=>{a=t})),!i.isEqual(F.min())){const e=n.ze.getLastRemoteSnapshotVersion(t).next(e=>n.ze.setTargetsMetadata(t,t.currentSequenceNumber,i));o.push(e)}return Ti.waitFor(o).next(()=>s.apply(t)).next(()=>n.Qn.vn(t,a)).next(()=>a)}).then(t=>(n.Un=r,t))}function Kr(t,e,n,i,r){let s=sn();return n.forEach(t=>s=s.add(t)),e.getEntries(t,s).next(t=>{let s=Je();return n.forEach((n,o)=>{const a=t.get(n),c=(null==r?void 0:r.get(n))||i;o.isNoDocument()&&o.version.isEqual(F.min())?(e.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,c),s=s.insert(n,o)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function $r(t,e){const n=_(t);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(void 0===e&&(e=-1),n.In.getNextMutationBatchAfterBatchId(t,e)))}function Yr(t,e){const n=_(t);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let i;return n.ze.getTargetData(t,e).next(r=>r?(i=r,Ti.resolve(i)):n.ze.allocateTargetId(t).next(r=>(i=new Li(e,r,0,t.currentSequenceNumber),n.ze.addTargetData(t,i).next(()=>i))))}).then(t=>{const i=n.Un.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Un=n.Un.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}async function Xr(t,e,n){const i=_(t),r=i.Un.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,t=>i.persistence.referenceDelegate.removeTarget(t,r))}catch(t){if(!Ii(t))throw t;f("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.Un=i.Un.remove(e),i.qn.delete(r.target)}function Qr(t,e,n){const i=_(t);let r=F.min(),s=sn();return i.persistence.runTransaction("Execute query","readonly",t=>function(t,e,n){const i=_(t),r=i.qn.get(n);return void 0!==r?Ti.resolve(i.Un.get(r)):i.ze.getTargetData(e,n)}(i,t,te(e)).next(e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.ze.getMatchingKeysForTargetId(t,e.targetId).next(t=>{s=t})}).next(()=>i.Bn.getDocumentsMatchingQuery(t,e,n?r:F.min(),n?s:sn())).next(t=>({documents:t,Gn:s})))}function Jr(t,e){const n=_(t),i=_(n.ze),r=n.Un.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",t=>i.Tt(t,e).next(t=>t?t.target:null))}function Zr(t){const e=_(t);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(t,e,n){const i=_(t);let r=Je(),s=Vi(n);const o=Ir(e),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:ui.readTimeIndex,range:a},(t,e)=>{const n=Ui(i.N,e);r=r.insert(n.key,n),s=e.readTime}).next(()=>({En:r,readTime:zi(s)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:n})=>(e.Kn=n,t))}async function ts(t){const e=_(t);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(t){const e=Ir(t);let n=F.min();return e.Kt({index:ui.readTimeIndex,reverse:!0},(t,e,i)=>{e.readTime&&(n=zi(e.readTime)),i.done()}).next(()=>n)}(t)).then(t=>{e.Kn=t})}async function es(t,e,n,i){const r=_(t);let s=sn(),o=Je(),a=nn();for(const h of n){const t=e.zn(h.metadata.name);h.document&&(s=s.add(t)),o=o.insert(t,e.Hn(h)),a=a.insert(t,e.Jn(h.metadata.readTime))}const c=r.jn.newChangeBuffer({trackRemovals:!0}),l=await Yr(r,function(t){return te(Kt(q.fromString("__bundle__/docs/"+t)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",t=>Kr(t,c,o,F.min(),a).next(e=>(c.apply(t),e)).next(e=>r.ze.removeMatchingKeysForTargetId(t,l.targetId).next(()=>r.ze.addMatchingKeys(t,s,l.targetId)).next(()=>r.Qn.vn(t,e)).next(()=>e)))}async function ns(t,e,n=sn()){const i=await Yr(t,te($i(e.bundledQuery))),r=_(t);return r.persistence.runTransaction("Save named query","readwrite",t=>{const s=Tn(e.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.Je.saveNamedQuery(t,e);const o=i.withResumeToken($.EMPTY_BYTE_STRING,s);return r.Un=r.Un.insert(o.targetId,o),r.ze.updateTargetData(t,o).next(()=>r.ze.removeMatchingKeysForTargetId(t,i.targetId)).next(()=>r.ze.addMatchingKeys(t,n,i.targetId)).next(()=>r.Je.saveNamedQuery(t,e))})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t){this.N=t,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(t,e){return Ti.resolve(this.Yn.get(e))}saveBundleMetadata(t,e){var n;return this.Yn.set(e.id,{id:(n=e).id,version:n.version,createTime:Tn(n.createTime)}),Ti.resolve()}getNamedQuery(t,e){return Ti.resolve(this.Xn.get(e))}saveNamedQuery(t,e){return this.Xn.set(e.name,function(t){return{name:t.name,query:$i(t.bundledQuery),readTime:Tn(t.readTime)}}(e)),Ti.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.Zn=new Ye(ss.ts),this.es=new Ye(ss.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const n=new ss(t,e);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.rs(new ss(t,e))}os(t,e){t.forEach(t=>this.removeReference(t,e))}cs(t){const e=new st(new q([])),n=new ss(e,t),i=new ss(e,t+1),r=[];return this.es.forEachInRange([n,i],t=>{this.rs(t),r.push(t.key)}),r}us(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new st(new q([])),n=new ss(e,t),i=new ss(e,t+1);let r=sn();return this.es.forEachInRange([n,i],t=>{r=r.add(t.key)}),r}containsKey(t){const e=new ss(t,0),n=this.Zn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class ss{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return st.comparator(t.key,e.key)||R(t.ls,e.ls)}static ns(t,e){return R(t.ls,e.ls)||st.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(t,e){this.Ht=t,this.referenceDelegate=e,this.In=[],this.fs=1,this.ds=new Ye(ss.ts)}checkEmpty(t){return Ti.resolve(0===this.In.length)}addMutationBatch(t,e,n,i){const r=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const s=new Mi(r,e,n,i);this.In.push(s);for(const o of i)this.ds=this.ds.add(new ss(o.key,r)),this.Ht.addToCollectionParentIndex(t,o.key.path.popLast());return Ti.resolve(s)}lookupMutationBatch(t,e){return Ti.resolve(this.ws(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this._s(n),r=i<0?0:i;return Ti.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return Ti.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(t){return Ti.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new ss(e,0),i=new ss(e,Number.POSITIVE_INFINITY),r=[];return this.ds.forEachInRange([n,i],t=>{const e=this.ws(t.ls);r.push(e)}),Ti.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ye(R);return e.forEach(t=>{const e=new ss(t,0),i=new ss(t,Number.POSITIVE_INFINITY);this.ds.forEachInRange([e,i],t=>{n=n.add(t.ls)})}),Ti.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;st.isDocumentKey(r)||(r=r.child(""));const s=new ss(new st(r),0);let o=new Ye(R);return this.ds.forEachWhile(t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.ls)),!0)},s),Ti.resolve(this.gs(o))}gs(t){const e=[];return t.forEach(t=>{const n=this.ws(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){b(0===this.ys(e.batchId,"removed")),this.In.shift();let n=this.ds;return Ti.forEach(e.mutations,i=>{const r=new ss(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.ds=n})}te(t){}containsKey(t,e){const n=new ss(e,0),i=this.ds.firstAfterOrEqual(n);return Ti.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.In.length,Ti.resolve()}ys(t,e){return this._s(t)}_s(t){return 0===this.In.length?0:t-this.In[0].batchId}ws(t){const e=this._s(t);return e<0||e>=this.In.length?null:this.In[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t,e){this.Ht=t,this.ps=e,this.docs=new Ge(st.comparator),this.size=0}addEntry(t,e,n){const i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.ps(e);return this.docs=this.docs.insert(i,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Ti.resolve(n?n.document.clone():xt.newInvalidDocument(e))}getEntries(t,e){let n=Je();return e.forEach(t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():xt.newInvalidDocument(t))}),Ti.resolve(n)}getDocumentsMatchingQuery(t,e,n){let i=Je();const r=new st(e.path.child("")),s=this.docs.getIteratorFrom(r);for(;s.hasNext();){const{key:t,value:{document:r,readTime:o}}=s.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||se(e,r)&&(i=i.insert(r.key,r.clone()))}return Ti.resolve(i)}Ts(t,e){return Ti.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new cs(this)}getSize(t){return Ti.resolve(this.size)}}class cs extends Sr{constructor(t){super(),this.Se=t}applyChanges(t){const e=[];return this.changes.forEach((n,i)=>{i.document.isValidDocument()?e.push(this.Se.addEntry(t,i.document,this.getReadTime(n))):this.Se.removeEntry(n)}),Ti.waitFor(e)}getFromCache(t,e){return this.Se.getEntry(t,e)}getAllFromCache(t,e){return this.Se.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t){this.persistence=t,this.Es=new Tr(t=>Ct(t),Ot),this.lastRemoteSnapshotVersion=F.min(),this.highestTargetId=0,this.Is=0,this.As=new rs,this.targetCount=0,this.Rs=ur.se()}forEachTarget(t,e){return this.Es.forEach((t,n)=>e(n)),Ti.resolve()}getLastRemoteSnapshotVersion(t){return Ti.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ti.resolve(this.Is)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),Ti.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Is&&(this.Is=e),Ti.resolve()}ce(t){this.Es.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new ur(e),this.highestTargetId=e),t.sequenceNumber>this.Is&&(this.Is=t.sequenceNumber)}addTargetData(t,e){return this.ce(e),this.targetCount+=1,Ti.resolve()}updateTargetData(t,e){return this.ce(e),Ti.resolve()}removeTargetData(t,e){return this.Es.delete(e.target),this.As.cs(e.targetId),this.targetCount-=1,Ti.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Es.forEach((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Es.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)}),Ti.waitFor(r).next(()=>i)}getTargetCount(t){return Ti.resolve(this.targetCount)}getTargetData(t,e){const n=this.Es.get(e)||null;return Ti.resolve(n)}addMatchingKeys(t,e,n){return this.As.ss(e,n),Ti.resolve()}removeMatchingKeys(t,e,n){this.As.os(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach(e=>{r.push(i.markPotentiallyOrphaned(t,e))}),Ti.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.As.cs(e),Ti.resolve()}getMatchingKeysForTargetId(t,e){const n=this.As.hs(e);return Ti.resolve(n)}containsKey(t,e){return Ti.resolve(this.As.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(t,e){this.bs={},this.Le=new P(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new ls(this),this.Ht=new Ji,this.He=function(t,e){return new as(t,e)}(this.Ht,t=>this.referenceDelegate.Ps(t)),this.N=new Fi(e),this.Je=new is(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new os(this.Ht,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(t,e,n){f("MemoryPersistence","Starting transaction:",t);const i=new us(this.Le.next());return this.referenceDelegate.vs(),n(i).next(t=>this.referenceDelegate.Vs(i).next(()=>t)).toPromise().then(t=>(i.raiseOnCommittedEvent(),t))}Ss(t,e){return Ti.or(Object.values(this.bs).map(n=>()=>n.containsKey(t,e)))}}class us extends xi{constructor(t){super(),this.currentSequenceNumber=t}}class ds{constructor(t){this.persistence=t,this.Ds=new rs,this.Cs=null}static Ns(t){return new ds(t)}get xs(){if(this.Cs)return this.Cs;throw v()}addReference(t,e,n){return this.Ds.addReference(n,e),this.xs.delete(n.toString()),Ti.resolve()}removeReference(t,e,n){return this.Ds.removeReference(n,e),this.xs.add(n.toString()),Ti.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),Ti.resolve()}removeTarget(t,e){this.Ds.cs(e.targetId).forEach(t=>this.xs.add(t.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.xs.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}vs(){this.Cs=new Set}Vs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ti.forEach(this.xs,n=>{const i=st.fromPath(n);return this.ks(t,i).next(t=>{t||e.removeEntry(i)})}).next(()=>(this.Cs=null,e.apply(t)))}updateLimboDocument(t,e){return this.ks(t,e).next(t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())})}Ps(t){return 0}ks(t,e){return Ti.or([()=>Ti.resolve(this.Ds.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ss(t,e)])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,e){return`firestore_clients_${t}_${e}`}function fs(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+="_"+e.uid),i}function gs(t,e){return`firestore_targets_${t}_${e}`}class ms{constructor(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}static $s(t,e,n){const i=JSON.parse(n);let r,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new T(i.error.code,i.error.message))),s?new ms(t,e,i.state,r):(g("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class ys{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static $s(t,e){const n=JSON.parse(e);let i,r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code,r&&(i=new T(n.error.code,n.error.message))),r?new ys(t,n.state,i):(g("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class vs{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static $s(t,e){const n=JSON.parse(e);let i="object"==typeof n&&n.activeTargetIds instanceof Array,r=an();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=rt(n.activeTargetIds[s]),r=r.add(n.activeTargetIds[s]);return i?new vs(t,r):(g("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class bs{constructor(t,e){this.clientId=t,this.onlineState=e}static $s(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new bs(e.clientId,e.onlineState):(g("SharedClientState","Failed to parse online state: "+t),null)}}class ws{constructor(){this.activeTargetIds=an()}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ms(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _s{constructor(t,e,n,i,r){this.window=t,this.Oe=e,this.persistenceKey=n,this.Ls=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Ge(R),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.js=ps(this.persistenceKey,this.Ls),this.Qs=function(t){return"firestore_sequence_number_"+t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new ws),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Js=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.pn();for(const n of t){if(n===this.Ls)continue;const t=this.getItem(ps(this.persistenceKey,n));if(t){const e=vs.$s(n,t);e&&(this.qs=this.qs.insert(e.clientId,e))}}this.Ys();const e=this.storage.getItem(this.Hs);if(e){const t=this.Xs(e);t&&this.Zs(t)}for(const n of this.Ks)this.Us(n);this.Ks=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.Qs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(t){let e=!1;return this.qs.forEach((n,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ei(t,"pending")}updateMutationState(t,e,n){this.ei(t,e,n),this.ni(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(gs(this.persistenceKey,t));if(n){const i=ys.$s(t,n);i&&(e=i.state)}}return this.si.Fs(t),this.Ys(),e}removeLocalQueryTarget(t){this.si.Ms(t),this.Ys()}isLocalQueryTarget(t){return this.si.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(gs(this.persistenceKey,t))}updateQueryState(t,e,n){this.ii(t,e,n)}handleUserChange(t,e,n){e.forEach(t=>{this.ni(t)}),this.currentUser=t,n.forEach(t=>{this.addPendingMutation(t)})}setOnlineState(t){this.ri(t)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return f("SharedClientState","READ",t,e),e}setItem(t,e){f("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){f("SharedClientState","REMOVE",t),this.storage.removeItem(t)}Us(t){const e=t;if(e.storageArea===this.storage){if(f("SharedClientState","EVENT",e.key,e.newValue),e.key===this.js)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(async()=>{if(this.started){if(null!==e.key)if(this.Ws.test(e.key)){if(null==e.newValue){const t=this.ci(e.key);return this.ai(t,null)}{const t=this.ui(e.key,e.newValue);if(t)return this.ai(t.clientId,t)}}else if(this.Gs.test(e.key)){if(null!==e.newValue){const t=this.hi(e.key,e.newValue);if(t)return this.li(t)}}else if(this.zs.test(e.key)){if(null!==e.newValue){const t=this.fi(e.key,e.newValue);if(t)return this.di(t)}}else if(e.key===this.Hs){if(null!==e.newValue){const t=this.Xs(e.newValue);if(t)return this.Zs(t)}}else if(e.key===this.Qs){const t=function(t){let e=P.T;if(null!=t)try{const n=JSON.parse(t);b("number"==typeof n),e=n}catch(t){g("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(e.newValue);t!==P.T&&this.sequenceNumberHandler(t)}else if(e.key===this.Js)return this.syncEngine.wi()}else this.Ks.push(e)})}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(t,e,n){const i=new ms(this.currentUser,t,e,n),r=fs(this.persistenceKey,this.currentUser,t);this.setItem(r,i.Os())}ni(t){const e=fs(this.persistenceKey,this.currentUser,t);this.removeItem(e)}ri(t){const e={clientId:this.Ls,onlineState:t};this.storage.setItem(this.Hs,JSON.stringify(e))}ii(t,e,n){const i=gs(this.persistenceKey,t),r=new ys(t,e,n);this.setItem(i,r.Os())}oi(){this.setItem(this.Js,"value-not-used")}ci(t){const e=this.Ws.exec(t);return e?e[1]:null}ui(t,e){const n=this.ci(t);return vs.$s(n,e)}hi(t,e){const n=this.Gs.exec(t),i=Number(n[1]),r=void 0!==n[2]?n[2]:null;return ms.$s(new l(r),i,e)}fi(t,e){const n=this.zs.exec(t),i=Number(n[1]);return ys.$s(i,e)}Xs(t){return bs.$s(t)}async li(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine._i(t.batchId,t.state,t.error);f("SharedClientState","Ignoring mutation for non-active user "+t.user.uid)}di(t){return this.syncEngine.mi(t.targetId,t.state,t.error)}ai(t,e){const n=e?this.qs.insert(t,e):this.qs.remove(t),i=this.ti(this.qs),r=this.ti(n),s=[],o=[];return r.forEach(t=>{i.has(t)||s.push(t)}),i.forEach(t=>{r.has(t)||o.push(t)}),this.syncEngine.gi(s,o).then(()=>{this.qs=n})}Zs(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ti(t){let e=an();return t.forEach((t,n)=>{e=e.unionWith(n.activeTargetIds)}),e}}class xs{constructor(){this.yi=new ws,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.yi.Fs(t),this.pi[t]||"not-current"}updateQueryState(t,e,n){this.pi[t]=e}removeLocalQueryTarget(t){this.yi.Ms(t)}isLocalQueryTarget(t){return this.yi.activeTargetIds.has(t)}clearQueryState(t){delete this.pi[t]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(t){return this.yi.activeTargetIds.has(t)}start(){return this.yi=new ws,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{Ti(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Ri(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t){this.vi=t.vi,this.Vi=t.Vi}Si(t){this.Di=t}Ci(t){this.Ni=t}onMessage(t){this.xi=t}close(){this.Vi()}send(t){this.vi(t)}ki(){this.Di()}$i(t){this.Ni(t)}Oi(t){this.xi(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Fi=e+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(t,e,n,i){const r=this.Bi(t,e);f("RestConnection","Sending: ",r,n);const s={};return this.Ui(s,i),this.qi(t,r,s,n).then(t=>(f("RestConnection","Received: ",t),t),e=>{throw m("RestConnection",t+" failed with error: ",e,"url: ",r,"request:",n),e})}Ki(t,e,n,i){return this.Li(t,e,n,i)}Ui(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/"+h,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(const n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])}Bi(t,e){const n=Cs[t];return`${this.Fi}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}qi(t,e,n,i){return new Promise((r,s)=>{const o=new a["g"];o.listenOnce(a["c"].COMPLETE,()=>{try{switch(o.getLastErrorCode()){case a["a"].NO_ERROR:const e=o.getResponseJson();f("Connection","XHR received:",JSON.stringify(e)),r(e);break;case a["a"].TIMEOUT:f("Connection",'RPC "'+t+'" timed out'),s(new T(x.DEADLINE_EXCEEDED,"Request time out"));break;case a["a"].HTTP_ERROR:const n=o.getStatus();if(f("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(e)>=0?e:x.UNKNOWN}(t.status);s(new T(e,t.message))}else s(new T(x.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new T(x.UNAVAILABLE,"Connection failed."));break;default:v()}}finally{f("Connection",'RPC "'+t+'" completed.')}});const c=JSON.stringify(i);o.send(e,"POST",c,n,15)})}ji(t,e){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Object(a["h"])(),r=Object(a["i"])(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new a["d"]({})),this.Ui(s.initMessageHeaders,e),Object(o["D"])()||Object(o["G"])()||Object(o["z"])()||Object(o["B"])()||Object(o["I"])()||Object(o["y"])()||(s.httpHeadersOverwriteParam="$httpHeaders");const c=n.join("");f("Connection","Creating WebChannel: "+c,s);const l=i.createWebChannel(c,s);let h=!1,u=!1;const d=new ks({vi:t=>{u?f("Connection","Not sending because WebChannel is closed:",t):(h||(f("Connection","Opening WebChannel transport."),l.open(),h=!0),f("Connection","WebChannel sending:",t),l.send(t))},Vi:()=>l.close()}),p=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(t){setTimeout(()=>{throw t},0)}})};return p(l,a["f"].EventType.OPEN,()=>{u||f("Connection","WebChannel transport opened.")}),p(l,a["f"].EventType.CLOSE,()=>{u||(u=!0,f("Connection","WebChannel transport closed"),d.$i())}),p(l,a["f"].EventType.ERROR,t=>{u||(u=!0,m("Connection","WebChannel transport errored:",t),d.$i(new T(x.UNAVAILABLE,"The operation could not be completed")))}),p(l,a["f"].EventType.MESSAGE,t=>{var e;if(!u){const n=t.data[0];b(!!n);const i=n,r=i.error||(null===(e=i[0])||void 0===e?void 0:e.error);if(r){f("Connection","WebChannel received error:",r);const t=r.status;let e=function(t){const e=ze[t];if(void 0!==e)return He(e)}(t),n=r.message;void 0===e&&(e=x.INTERNAL,n="Unknown error status: "+t+" with message "+r.message),u=!0,d.$i(new T(e,n)),l.close()}else f("Connection","WebChannel received:",n),d.Oi(n)}}),p(r,a["b"].STAT_EVENT,t=>{t.stat===a["e"].PROXY?f("Connection","Detected buffering proxy"):t.stat===a["e"].NOPROXY&&f("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.ki()},0),d}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(){return"undefined"!=typeof window?window:null}function Es(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t){return new bn(t,!0)}class Ps{constructor(t,e,n=1e3,i=1.5,r=6e4){this.Oe=t,this.timerId=e,this.Qi=n,this.Wi=i,this.Gi=r,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(t){this.cancel();const e=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),i=Math.max(0,e-n);i>0&&f("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.zi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,()=>(this.Ji=Date.now(),t())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,e,n,i,r,s,o){this.Oe=t,this.er=n,this.nr=i,this.sr=r,this.credentialsProvider=s,this.listener=o,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new Ps(t,e)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}async stop(){this.ur()&&await this.close(0)}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(t){this.gr(),this.stream.send(t)}async _r(){if(this.hr())return this.close(0)}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(t,e){this.gr(),this.yr(),this.ar.cancel(),this.ir++,4!==t?this.ar.reset():e&&e.code===x.RESOURCE_EXHAUSTED?(g(e.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.ar.Yi()):e&&e.code===x.UNAUTHENTICATED&&3!==this.state&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.pr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ci(e)}pr(){}auth(){this.state=1;const t=this.Tr(this.ir),e=this.ir;this.credentialsProvider.getToken().then(t=>{this.ir===e&&this.Er(t)},e=>{t(()=>{const t=new T(x.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Ir(t)})})}Er(t){const e=this.Tr(this.ir);this.stream=this.Ar(t),this.stream.Si(()=>{e(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(t=>{e(()=>this.Ir(t))}),this.stream.onMessage(t=>{e(()=>this.onMessage(t))})}lr(){this.state=5,this.ar.Xi(async()=>{this.state=0,this.start()})}Ir(t){return f("PersistentStream","close with error: "+t),this.stream=null,this.close(4,t)}Tr(t){return e=>{this.Oe.enqueueAndForget(()=>this.ir===t?e():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class js extends Ns{constructor(t,e,n,i,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r),this.N=i}Ar(t){return this.sr.ji("Listen",t)}onMessage(t){this.ar.reset();const e=Mn(this.N,t),n=function(t){if(!("targetChange"in t))return F.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?F.min():e.readTime?Tn(e.readTime):F.min()}(t);return this.listener.Rr(e,n)}br(t){const e={};e.database=An(this.N),e.addTarget=function(t,e){let n;const i=e.target;return n=It(i)?{documents:Un(t,i)}:{query:Bn(t,i)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=_n(t,e.resumeToken):e.snapshotVersion.compareTo(F.min())>0&&(n.readTime=wn(t,e.snapshotVersion.toTimestamp())),n}(this.N,t);const n=zn(this.N,t);n&&(e.labels=n),this.mr(e)}Pr(t){const e={};e.database=An(this.N),e.removeTarget=t,this.mr(e)}}class Rs extends Ns{constructor(t,e,n,i,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r),this.N=i,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(t){return this.sr.ji("Write",t)}onMessage(t){if(b(!!t.streamToken),this.lastStreamToken=t.streamToken,this.vr){this.ar.reset();const e=Fn(t.writeResults,t.commitTime),n=Tn(t.commitTime);return this.listener.Dr(n,e)}return b(!t.writeResults||0===t.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const t={};t.database=An(this.N),this.mr(t)}Sr(t){const e={streamToken:this.lastStreamToken,writes:t.map(t=>Dn(this.N,t))};this.mr(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends class{}{constructor(t,e,n){super(),this.credentials=t,this.sr=e,this.N=n,this.kr=!1}$r(){if(this.kr)throw new T(x.FAILED_PRECONDITION,"The client has already been terminated.")}Li(t,e,n){return this.$r(),this.credentials.getToken().then(i=>this.sr.Li(t,e,n,i)).catch(t=>{throw"FirebaseError"===t.name?(t.code===x.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new T(x.UNKNOWN,t.toString())})}Ki(t,e,n){return this.$r(),this.credentials.getToken().then(i=>this.sr.Ki(t,e,n,i)).catch(t=>{throw"FirebaseError"===t.name?(t.code===x.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new T(x.UNKNOWN,t.toString())})}terminate(){this.kr=!0}}class Ds{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(t){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur("Connection failed 1 times. Most recent error: "+t.toString()),this.Br("Offline")))}set(t){this.Kr(),this.Or=0,"Online"===t&&(this.Mr=!1),this.Br(t)}Br(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}Ur(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(g(e),this.Mr=!1):f("OnlineStateTracker",e)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=r,this.zr.Ti(t=>{n.enqueueAndForget(async()=>{Gs(this)&&(f("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=_(t);e.Wr.add(4),await Us(e),e.Hr.set("Unknown"),e.Wr.delete(4),await Fs(e)}(this))})}),this.Hr=new Ds(n,i)}}async function Fs(t){if(Gs(t))for(const e of t.Gr)await e(!0)}async function Us(t){for(const e of t.Gr)await e(!1)}function Bs(t,e){const n=_(t);n.Qr.has(e.targetId)||(n.Qr.set(e.targetId,e),Hs(n)?Ws(n):lo(n).hr()&&zs(n,e))}function Vs(t,e){const n=_(t),i=lo(n);n.Qr.delete(e),i.hr()&&qs(n,e),0===n.Qr.size&&(i.hr()?i.wr():Gs(n)&&n.Hr.set("Unknown"))}function zs(t,e){t.Jr.Y(e.targetId),lo(t).br(e)}function qs(t,e){t.Jr.Y(e),lo(t).Pr(e)}function Ws(t){t.Jr=new fn({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>t.Qr.get(e)||null}),lo(t).start(),t.Hr.Lr()}function Hs(t){return Gs(t)&&!lo(t).ur()&&t.Qr.size>0}function Gs(t){return 0===_(t).Wr.size}function Ks(t){t.Jr=void 0}async function $s(t){t.Qr.forEach((e,n)=>{zs(t,e)})}async function Ys(t,e){Ks(t),Hs(t)?(t.Hr.qr(e),Ws(t)):t.Hr.set("Unknown")}async function Xs(t,e,n){if(t.Hr.set("Online"),e instanceof dn&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.Qr.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.Qr.delete(i),t.Jr.removeTarget(i))}(t,e)}catch(n){f("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Qs(t,n)}else if(e instanceof hn?t.Jr.rt(e):e instanceof un?t.Jr.ft(e):t.Jr.at(e),!n.isEqual(F.min()))try{const e=await Hr(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Jr._t(e);return n.targetChanges.forEach((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.Qr.get(i);r&&t.Qr.set(i,r.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(e=>{const n=t.Qr.get(e);if(!n)return;t.Qr.set(e,n.withResumeToken($.EMPTY_BYTE_STRING,n.snapshotVersion)),qs(t,e);const i=new Li(n.target,e,1,n.sequenceNumber);zs(t,i)}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){f("RemoteStore","Failed to raise snapshot:",e),await Qs(t,e)}}async function Qs(t,e,n){if(!Ii(e))throw e;t.Wr.add(1),await Us(t),t.Hr.set("Offline"),n||(n=()=>Hr(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{f("RemoteStore","Retrying IndexedDB access"),await n(),t.Wr.delete(1),await Fs(t)})}function Js(t,e){return e().catch(n=>Qs(t,n,e))}async function Zs(t){const e=_(t),n=ho(e);let i=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;to(e);)try{const t=await $r(e.localStore,i);if(null===t){0===e.jr.length&&n.wr();break}i=t.batchId,eo(e,t)}catch(t){await Qs(e,t)}no(e)&&io(e)}function to(t){return Gs(t)&&t.jr.length<10}function eo(t,e){t.jr.push(e);const n=ho(t);n.hr()&&n.Vr&&n.Sr(e.mutations)}function no(t){return Gs(t)&&!ho(t).ur()&&t.jr.length>0}function io(t){ho(t).start()}async function ro(t){ho(t).Nr()}async function so(t){const e=ho(t);for(const n of t.jr)e.Sr(n.mutations)}async function oo(t,e,n){const i=t.jr.shift(),r=Di.from(i,e,n);await Js(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Zs(t)}async function ao(t,e){e&&ho(t).Vr&&await async function(t,e){if(n=e.code,We(n)&&n!==x.ABORTED){const n=t.jr.shift();ho(t).dr(),await Js(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),await Zs(t)}var n}(t,e),no(t)&&io(t)}async function co(t,e){const n=_(t);e?(n.Wr.delete(2),await Fs(n)):e||(n.Wr.add(2),await Us(n),n.Hr.set("Unknown"))}function lo(t){return t.Yr||(t.Yr=function(t,e,n){const i=_(t);return i.$r(),new js(e,i.sr,i.credentials,i.N,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t.datastore,t.asyncQueue,{Si:$s.bind(null,t),Ci:Ys.bind(null,t),Rr:Xs.bind(null,t)}),t.Gr.push(async e=>{e?(t.Yr.dr(),Hs(t)?Ws(t):t.Hr.set("Unknown")):(await t.Yr.stop(),Ks(t))})),t.Yr}function ho(t){return t.Xr||(t.Xr=function(t,e,n){const i=_(t);return i.$r(),new Rs(e,i.sr,i.credentials,i.N,n)}(t.datastore,t.asyncQueue,{Si:ro.bind(null,t),Ci:ao.bind(null,t),Cr:so.bind(null,t),Dr:oo.bind(null,t)}),t.Gr.push(async e=>{e?(t.Xr.dr(),await Zs(t)):(await t.Xr.stop(),t.jr.length>0&&(f("RemoteStore",`Stopping write stream with ${t.jr.length} pending writes`),t.jr=[]))})),t.Xr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class uo{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new S,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new uo(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function po(t,e){if(g("AsyncQueue",`${e}: ${t}`),Ii(t))return new T(x.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(t){this.comparator=t?(e,n)=>t(e,n)||st.comparator(e.key,n.key):(t,e)=>st.comparator(t.key,e.key),this.keyedMap=tn(),this.sortedSet=new Ge(this.comparator)}static emptySet(t){return new fo(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof fo))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new fo;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.Zr=new Ge(st.comparator)}track(t){const e=t.doc.key,n=this.Zr.get(e);n?0!==t.type&&3===n.type?this.Zr=this.Zr.insert(e,t):3===t.type&&1!==n.type?this.Zr=this.Zr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Zr=this.Zr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Zr=this.Zr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Zr=this.Zr.remove(e):1===t.type&&2===n.type?this.Zr=this.Zr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Zr=this.Zr.insert(e,{type:2,doc:t.doc}):v():this.Zr=this.Zr.insert(e,t)}eo(){const t=[];return this.Zr.inorderTraversal((e,n)=>{t.push(n)}),t}}class mo{constructor(t,e,n,i,r,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,i){const r=[];return e.forEach(t=>{r.push({type:0,doc:t})}),new mo(t,e,fo.emptySet(e),r,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ne(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.no=void 0,this.listeners=[]}}class vo{constructor(){this.queries=new Tr(t=>ie(t),ne),this.onlineState="Unknown",this.so=new Set}}async function bo(t,e){const n=_(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new yo),r)try{s.no=await n.onListen(i)}catch(t){const n=po(t,`Initialization of query '${re(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.listeners.push(e),e.io(n.onlineState),s.no&&e.ro(s.no)&&To(n)}async function wo(t,e){const n=_(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),r=0===s.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function _o(t,e){const n=_(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.listeners)t.ro(r)&&(i=!0);e.no=r}}i&&To(n)}function xo(t,e,n){const i=_(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function To(t){t.so.forEach(t=>{t.next()})}class So{constructor(t,e,n){this.query=t,this.oo=e,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=n||{}}ro(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new mo(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.co?this.uo(t)&&(this.oo.next(t),e=!0):this.ho(t,this.onlineState)&&(this.lo(t),e=!0),this.ao=t,e}onError(t){this.oo.error(t)}io(t){this.onlineState=t;let e=!1;return this.ao&&!this.co&&this.ho(this.ao,t)&&(this.lo(this.ao),e=!0),e}ho(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.fo||!n)&&(!t.docs.isEmpty()||"Offline"===e)}uo(t){if(t.docChanges.length>0)return!0;const e=this.ao&&this.ao.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}lo(t){t=mo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.oo.next(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(t,e){this.payload=t,this.byteLength=e}wo(){return"metadata"in this.payload}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t){this.N=t}zn(t){return On(this.N,t)}Hn(t){return t.metadata.exists?jn(this.N,t.document,!1):xt.newNoDocument(this.zn(t.metadata.name),this.Jn(t.metadata.readTime))}Jn(t){return Tn(t)}}class Oo{constructor(t,e,n){this._o=t,this.localStore=e,this.N=n,this.queries=[],this.documents=[],this.progress=Io(t)}mo(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}yo(t){const e=new Map,n=new ko(this.N);for(const i of t)if(i.metadata.queries){const t=n.zn(i.metadata.name);for(const n of i.metadata.queries){const i=(e.get(n)||sn()).add(t);e.set(n,i)}}return e}async complete(){const t=await es(this.localStore,new ko(this.N),this.documents,this._o.id),e=this.yo(this.documents);for(const n of this.queries)await ns(this.localStore,n,e.get(n.name));return this.progress.taskState="Success",new Lr(Object.assign({},this.progress),t)}}function Io(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t){this.key=t}}class Ao{constructor(t){this.key=t}}class Po{constructor(t,e){this.query=t,this.po=e,this.To=null,this.current=!1,this.Eo=sn(),this.mutatedKeys=sn(),this.Io=oe(t),this.Ao=new fo(this.Io)}get Ro(){return this.po}bo(t,e){const n=e?e.Po:new go,i=e?e.Ao:this.Ao;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a=$t(this.query)&&i.size===this.query.limit?i.last():null,c=Yt(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((t,e)=>{const l=i.get(t),h=se(this.query,e)?e:null,u=!!l&&this.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let p=!1;l&&h?l.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),p=!0):this.vo(l,h)||(n.track({type:2,doc:h}),p=!0,(a&&this.Io(h,a)>0||c&&this.Io(h,c)<0)&&(o=!0)):!l&&h?(n.track({type:0,doc:h}),p=!0):l&&!h&&(n.track({type:1,doc:l}),p=!0,(a||c)&&(o=!0)),p&&(h?(s=s.add(h),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))}),$t(this.query)||Yt(this.query))for(;s.size>this.query.limit;){const t=$t(this.query)?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{Ao:s,Po:n,Ln:o,mutatedKeys:r}}vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.Ao;this.Ao=t.Ao,this.mutatedKeys=t.mutatedKeys;const r=t.Po.eo();r.sort((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v()}};return n(t)-n(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.type,e.type)||this.Io(t.doc,e.doc)),this.Vo(n);const s=e?this.So():[],o=0===this.Eo.size&&this.current?1:0,a=o!==this.To;return this.To=o,0!==r.length||a?{snapshot:new mo(this.query,t.Ao,i,r,t.mutatedKeys,0===o,a,!1),Do:s}:{Do:s}}io(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new go,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(t){return!this.po.has(t)&&!!this.Ao.has(t)&&!this.Ao.get(t).hasLocalMutations}Vo(t){t&&(t.addedDocuments.forEach(t=>this.po=this.po.add(t)),t.modifiedDocuments.forEach(t=>{}),t.removedDocuments.forEach(t=>this.po=this.po.delete(t)),this.current=t.current)}So(){if(!this.current)return[];const t=this.Eo;this.Eo=sn(),this.Ao.forEach(t=>{this.Co(t.key)&&(this.Eo=this.Eo.add(t.key))});const e=[];return t.forEach(t=>{this.Eo.has(t)||e.push(new Ao(t))}),this.Eo.forEach(n=>{t.has(n)||e.push(new Eo(n))}),e}No(t){this.po=t.Gn,this.Eo=sn();const e=this.bo(t.documents);return this.applyChanges(e,!0)}xo(){return mo.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class No{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class jo{constructor(t){this.key=t,this.ko=!1}}class Ro{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.$o={},this.Oo=new Tr(t=>ie(t),ne),this.Fo=new Map,this.Mo=new Set,this.Lo=new Ge(st.comparator),this.Bo=new Map,this.Uo=new rs,this.qo={},this.Ko=new Map,this.jo=ur.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}async function Mo(t,e){const n=ha(t);let i,r;const s=n.Oo.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.xo();else{const t=await Yr(n.localStore,te(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await Do(n,e,i,"current"===s),n.isPrimaryClient&&Bs(n.remoteStore,t)}return r}async function Do(t,e,n,i){t.Wo=(e,n,i)=>async function(t,e,n,i){let r=e.view.bo(n);r.Ln&&(r=await Qr(t.localStore,e.query,!1).then(({documents:t})=>e.view.bo(t,r)));const s=i&&i.targetChanges.get(e.targetId),o=e.view.applyChanges(r,t.isPrimaryClient,s);return Yo(t,e.targetId,o.Do),o.snapshot}(t,e,n,i);const r=await Qr(t.localStore,e,!0),s=new Po(e,r.Gn),o=s.bo(r.documents),a=ln.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState),c=s.applyChanges(o,t.isPrimaryClient,a);Yo(t,n,c.Do);const l=new No(e,n,s);return t.Oo.set(e,l),t.Fo.has(n)?t.Fo.get(n).push(e):t.Fo.set(n,[e]),c.snapshot}async function Lo(t,e){const n=_(t),i=n.Oo.get(e),r=n.Fo.get(i.targetId);if(r.length>1)return n.Fo.set(i.targetId,r.filter(t=>!ne(t,e))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Xr(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Vs(n.remoteStore,i.targetId),Ko(n,i.targetId)}).catch(mr)):(Ko(n,i.targetId),await Xr(n.localStore,i.targetId,!0))}async function Fo(t,e,n){const i=ua(t);try{const t=await function(t,e){const n=_(t),i=L.now(),r=e.reduce((t,e)=>t.add(e.key),sn());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",t=>n.Qn.Pn(t,r).next(r=>{s=r;const o=[];for(const t of e){const e=Pe(t,s.get(t.key));null!=e&&o.push(new Me(t.key,e,_t(e.value.mapValue),ke.exists(!0)))}return n.In.addMutationBatch(t,i,o,e)})).then(t=>(t.applyToLocalDocumentSet(s),{batchId:t.batchId,changes:s}))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.qo[t.currentUser.toKey()];i||(i=new Ge(R)),i=i.insert(e,n),t.qo[t.currentUser.toKey()]=i}(i,t.batchId,n),await Jo(i,t.changes),await Zs(i.remoteStore)}catch(t){const e=po(t,"Failed to persist write");n.reject(e)}}async function Uo(t,e){const n=_(t);try{const t=await Gr(n.localStore,e);e.targetChanges.forEach((t,e)=>{const i=n.Bo.get(e);i&&(b(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.ko=!0:t.modifiedDocuments.size>0?b(i.ko):t.removedDocuments.size>0&&(b(i.ko),i.ko=!1))}),await Jo(n,t,e)}catch(t){await mr(t)}}function Bo(t,e,n){const i=_(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.Oo.forEach((n,i)=>{const r=i.view.io(e);r.snapshot&&t.push(r.snapshot)}),function(t,e){const n=_(t);n.onlineState=e;let i=!1;n.queries.forEach((t,n)=>{for(const r of n.listeners)r.io(e)&&(i=!0)}),i&&To(n)}(i.eventManager,e),t.length&&i.$o.Rr(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Vo(t,e,n){const i=_(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Bo.get(e),s=r&&r.key;if(s){let t=new Ge(st.comparator);t=t.insert(s,xt.newNoDocument(s,F.min()));const n=sn().add(s),r=new cn(F.min(),new Map,new Ye(R),t,n);await Uo(i,r),i.Lo=i.Lo.remove(s),i.Bo.delete(e),Qo(i)}else await Xr(i.localStore,e,!1).then(()=>Ko(i,e,n)).catch(mr)}async function zo(t,e){const n=_(t),i=e.batch.batchId;try{const t=await Wr(n.localStore,e);Go(n,i,null),Ho(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Jo(n,t)}catch(t){await mr(t)}}async function qo(t,e,n){const i=_(t);try{const t=await function(t,e){const n=_(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",t=>{let i;return n.In.lookupMutationBatch(t,e).next(e=>(b(null!==e),i=e.keys(),n.In.removeMutationBatch(t,e))).next(()=>n.In.performConsistencyCheck(t)).next(()=>n.Qn.Pn(t,i))})}(i.localStore,e);Go(i,e,n),Ho(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Jo(i,t)}catch(n){await mr(n)}}async function Wo(t,e){const n=_(t);Gs(n.remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=await function(t){const e=_(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",t=>e.In.getHighestUnacknowledgedBatchId(t))}(n.localStore);if(-1===t)return void e.resolve();const i=n.Ko.get(t)||[];i.push(e),n.Ko.set(t,i)}catch(t){const n=po(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}function Ho(t,e){(t.Ko.get(e)||[]).forEach(t=>{t.resolve()}),t.Ko.delete(e)}function Go(t,e,n){const i=_(t);let r=i.qo[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.qo[i.currentUser.toKey()]=r}}function Ko(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Fo.get(e))t.Oo.delete(i),n&&t.$o.Go(i,n);t.Fo.delete(e),t.isPrimaryClient&&t.Uo.cs(e).forEach(e=>{t.Uo.containsKey(e)||$o(t,e)})}function $o(t,e){t.Mo.delete(e.path.canonicalString());const n=t.Lo.get(e);null!==n&&(Vs(t.remoteStore,n),t.Lo=t.Lo.remove(e),t.Bo.delete(n),Qo(t))}function Yo(t,e,n){for(const i of n)i instanceof Eo?(t.Uo.addReference(i.key,e),Xo(t,i)):i instanceof Ao?(f("SyncEngine","Document no longer in limbo: "+i.key),t.Uo.removeReference(i.key,e),t.Uo.containsKey(i.key)||$o(t,i.key)):v()}function Xo(t,e){const n=e.key,i=n.path.canonicalString();t.Lo.get(n)||t.Mo.has(i)||(f("SyncEngine","New document in limbo: "+n),t.Mo.add(i),Qo(t))}function Qo(t){for(;t.Mo.size>0&&t.Lo.size<t.maxConcurrentLimboResolutions;){const e=t.Mo.values().next().value;t.Mo.delete(e);const n=new st(q.fromString(e)),i=t.jo.next();t.Bo.set(i,new jo(n)),t.Lo=t.Lo.insert(n,i),Bs(t.remoteStore,new Li(te(Kt(n.path)),i,2,P.T))}}async function Jo(t,e,n){const i=_(t),r=[],s=[],o=[];i.Oo.isEmpty()||(i.Oo.forEach((t,a)=>{o.push(i.Wo(a,e,n).then(t=>{if(t){i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),r.push(t);const e=Ur.kn(a.targetId,t);s.push(e)}}))}),await Promise.all(o),i.$o.Rr(r),await async function(t,e){const n=_(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",t=>Ti.forEach(e,e=>Ti.forEach(e.Nn,i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i)).next(()=>Ti.forEach(e.xn,i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))}catch(t){if(!Ii(t))throw t;f("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.Un.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.Un=n.Un.insert(t,r)}}}(i.localStore,s))}async function Zo(t,e){const n=_(t);if(!n.currentUser.isEqual(e)){f("SyncEngine","User change. New user:",e.toKey());const t=await qr(n.localStore,e);n.currentUser=e,function(t,e){t.Ko.forEach(t=>{t.forEach(t=>{t.reject(new T(x.CANCELLED,e))})}),t.Ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Jo(n,t.Wn)}}function ta(t,e){const n=_(t),i=n.Bo.get(e);if(i&&i.ko)return sn().add(i.key);{let t=sn();const i=n.Fo.get(e);if(!i)return t;for(const e of i){const i=n.Oo.get(e);t=t.unionWith(i.view.Ro)}return t}}async function ea(t,e){const n=_(t),i=await Qr(n.localStore,e.query,!0),r=e.view.No(i);return n.isPrimaryClient&&Yo(n,e.targetId,r.Do),r}async function na(t){const e=_(t);return Zr(e.localStore).then(t=>Jo(e,t))}async function ia(t,e,n,i){const r=_(t),s=await function(t,e){const n=_(t),i=_(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",t=>i.Xt(t,e).next(e=>e?n.Qn.Pn(t,e):Ti.resolve(null)))}(r.localStore,e);null!==s?("pending"===n?await Zs(r.remoteStore):"acknowledged"===n||"rejected"===n?(Go(r,e,i||null),Ho(r,e),function(t,e){_(_(t).In).te(e)}(r.localStore,e)):v(),await Jo(r,s)):f("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ra(t,e){const n=_(t);if(ha(n),ua(n),!0===e&&!0!==n.Qo){const t=n.sharedClientState.getAllActiveQueryTargets(),e=await sa(n,t.toArray());n.Qo=!0,await co(n.remoteStore,!0);for(const i of e)Bs(n.remoteStore,i)}else if(!1===e&&!1!==n.Qo){const t=[];let e=Promise.resolve();n.Fo.forEach((i,r)=>{n.sharedClientState.isLocalQueryTarget(r)?t.push(r):e=e.then(()=>(Ko(n,r),Xr(n.localStore,r,!0))),Vs(n.remoteStore,r)}),await e,await sa(n,t),function(t){const e=_(t);e.Bo.forEach((t,n)=>{Vs(e.remoteStore,n)}),e.Uo.us(),e.Bo=new Map,e.Lo=new Ge(st.comparator)}(n),n.Qo=!1,await co(n.remoteStore,!1)}}async function sa(t,e,n){const i=_(t),r=[],s=[];for(const o of e){let t;const e=i.Fo.get(o);if(e&&0!==e.length){t=await Yr(i.localStore,te(e[0]));for(const t of e){const e=i.Oo.get(t),n=await ea(i,e);n.snapshot&&s.push(n.snapshot)}}else{const e=await Jr(i.localStore,o);t=await Yr(i.localStore,e),await Do(i,oa(e),o,!1)}r.push(t)}return i.$o.Rr(s),r}function oa(t){return Gt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function aa(t){const e=_(t);return _(_(e.localStore).persistence).pn()}async function ca(t,e,n,i){const r=_(t);if(r.Qo)f("SyncEngine","Ignoring unexpected query state notification.");else if(r.Fo.has(e))switch(n){case"current":case"not-current":{const t=await Zr(r.localStore),i=cn.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);await Jo(r,t,i);break}case"rejected":await Xr(r.localStore,e,!0),Ko(r,e,i);break;default:v()}}async function la(t,e,n){const i=ha(t);if(i.Qo){for(const t of e){if(i.Fo.has(t)){f("SyncEngine","Adding an already active target "+t);continue}const e=await Jr(i.localStore,t),n=await Yr(i.localStore,e);await Do(i,oa(e),n.targetId,!1),Bs(i.remoteStore,n)}for(const t of n)i.Fo.has(t)&&await Xr(i.localStore,t,!1).then(()=>{Vs(i.remoteStore,t),Ko(i,t)}).catch(mr)}}function ha(t){const e=_(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ta.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vo.bind(null,e),e.$o.Rr=_o.bind(null,e.eventManager),e.$o.Go=xo.bind(null,e.eventManager),e}function ua(t){const e=_(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zo.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qo.bind(null,e),e}function da(t,e,n){const i=_(t);(async function(t,e,n){try{const i=await e.getMetadata();if(await function(t,e){const n=_(t),i=Tn(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",t=>n.Je.getBundleMetadata(t,e.id)).then(t=>!!t&&t.createTime.compareTo(i)>=0)}(t.localStore,i))return await e.close(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(i));n._updateProgress(Io(i));const r=new Oo(i,t.localStore,e.N);let s=await e.zo();for(;s;){const t=await r.mo(s);t&&n._updateProgress(t),s=await e.zo()}const o=await r.complete();await Jo(t,o.En,void 0),await function(t,e){const n=_(t);return n.persistence.runTransaction("Save bundle","readwrite",t=>n.Je.saveBundleMetadata(t,e))}(t.localStore,i),n._completeWith(o.progress)}catch(t){m("SyncEngine","Loading bundle failed with "+t),n._failWith(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(i,e,n).then(()=>{i.sharedClientState.notifyBundleLoaded()})}class pa{constructor(){this.synchronizeTabs=!1}async initialize(t){this.N=As(t.databaseInfo.databaseId),this.sharedClientState=this.Ho(t),this.persistence=this.Jo(t),await this.persistence.start(),this.gcScheduler=this.Yo(t),this.localStore=this.Xo(t)}Yo(t){return null}Xo(t){return zr(this.persistence,new Br,t.initialUser,this.N)}Jo(t){return new hs(ds.Ns,this.N)}Ho(t){return new xs}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class fa extends pa{constructor(t,e,n){super(),this.Zo=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await ts(this.localStore),await this.Zo.initialize(this,t),await ua(this.Zo.syncEngine),await Zs(this.Zo.remoteStore),await this.persistence.nn(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve()))}Xo(t){return zr(this.persistence,new Br,t.initialUser,this.N)}Yo(t){const e=this.persistence.referenceDelegate.garbageCollector;return new br(e,t.asyncQueue)}Jo(t){const e=Dr(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ir.withCacheSize(this.cacheSizeBytes):ir.DEFAULT;return new jr(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Is(),Es(),this.N,this.sharedClientState,!!this.forceOwnership)}Ho(t){return new xs}}class ga extends fa{constructor(t,e){super(t,e,!1),this.Zo=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.Zo.syncEngine;this.sharedClientState instanceof _s&&(this.sharedClientState.syncEngine={_i:ia.bind(null,e),mi:ca.bind(null,e),gi:la.bind(null,e),pn:aa.bind(null,e),wi:na.bind(null,e)},await this.sharedClientState.start()),await this.persistence.nn(async t=>{await ra(this.Zo.syncEngine,t),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop())})}Ho(t){const e=Is();if(!_s.bt(e))throw new T(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Dr(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new _s(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class ma{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Bo(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zo.bind(null,this.syncEngine),await co(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new vo}createDatastore(t){const e=As(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new Os(i));var i;return function(t,e,n){return new Ms(t,e,n)}(t.credentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>Bo(this.syncEngine,t,0),s=Ss.bt()?new Ss:new Ts,new Ls(e,n,i,r,s);var e,n,i,r,s}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Ro(t,e,n,i,r,s);return o&&(a.Qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=_(t);f("RemoteStore","RemoteStore shutting down."),e.Wr.add(5),await Us(e),e.zr.shutdown(),e.Hr.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.tc(this.observer.next,t)}error(t){this.observer.error?this.tc(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}ec(){this.muted=!0}tc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(t,e){this.nc=t,this.N=e,this.metadata=new S,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(t=>{t&&t.wo()?this.metadata.resolve(t.payload.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},t=>this.metadata.reject(t))}close(){return this.nc.cancel()}async getMetadata(){return this.metadata.promise}async zo(){return await this.getMetadata(),this.ic()}async ic(){const t=await this.rc();if(null===t)return null;const e=this.sc.decode(t),n=Number(e);isNaN(n)&&this.oc(`length string (${e}) is not valid number`);const i=await this.cc(n);return new Co(JSON.parse(i),t.length+n)}ac(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}async rc(){for(;this.ac()<0;)if(await this.uc())break;if(0===this.buffer.length)return null;const t=this.ac();t<0&&this.oc("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async cc(t){for(;this.buffer.length<t;)await this.uc()&&this.oc("Reached the end of bundle when more is expected.");const e=this.sc.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}oc(t){throw this.nc.cancel(),new Error("Invalid bundle format: "+t)}async uc(){const t=await this.nc.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new T(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const e=await async function(t,e){const n=_(t),i=An(n.N)+"/documents",r={documents:e.map(t=>kn(n.N,t))},s=await n.Ki("BatchGetDocuments",i,r),o=new Map;s.forEach(t=>{const e=Rn(n.N,t);o.set(e.key.toString(),e)});const a=[];return e.forEach(t=>{const e=o.get(t.toString());b(!!e),a.push(e)}),a}(this.datastore,t);return e.forEach(t=>this.recordVersion(t)),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new Ue(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,e)=>{const n=st.fromPath(e);this.mutations.push(new Be(n,this.precondition(n)))}),await async function(t,e){const n=_(t),i=An(n.N)+"/documents",r={writes:e.map(t=>Dn(n.N,t))};await n.Li("Commit",i,r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw v();e=F.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new T(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ke.updateTime(e):ke.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(F.min()))throw new T(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ke.updateTime(e)}return ke.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(t,e,n,i){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=i,this.hc=5,this.ar=new Ps(this.asyncQueue,"transaction_retry")}run(){this.hc-=1,this.lc()}lc(){this.ar.Xi(async()=>{const t=new wa(this.datastore),e=this.fc(t);e&&e.then(e=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(e)}).catch(t=>{this.dc(t)}))}).catch(t=>{this.dc(t)})})}fc(t){try{const e=this.updateFunction(t);return!nt(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}dc(t){this.hc>0&&this.wc(t)?(this.hc-=1,this.asyncQueue.enqueueAndForget(()=>(this.lc(),Promise.resolve()))):this.deferred.reject(t)}wc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!We(e)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(t,e,n){this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=l.UNAUTHENTICATED,this.clientId=j.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(e,async t=>{f("FirestoreClient","Received user=",t.uid),await this.credentialListener(t),this.user=t})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.credentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new S;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),t.resolve()}catch(e){const n=po(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function Ta(t,e){t.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async t=>{i.isEqual(t)||(await qr(e.localStore,t),i=t)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function Sa(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ca(t);f("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(t=>async function(t,e){const n=_(t);n.asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials");const i=Gs(n);n.Wr.add(3),await Us(n),i&&n.Hr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Wr.delete(3),await Fs(n)}(e.remoteStore,t)),t.onlineComponents=e}async function Ca(t){return t.offlineComponents||(f("FirestoreClient","Using default OfflineComponentProvider"),await Ta(t,new pa)),t.offlineComponents}async function ka(t){return t.onlineComponents||(f("FirestoreClient","Using default OnlineComponentProvider"),await Sa(t,new ma)),t.onlineComponents}function Oa(t){return Ca(t).then(t=>t.persistence)}function Ia(t){return Ca(t).then(t=>t.localStore)}function Ea(t){return ka(t).then(t=>t.remoteStore)}function Aa(t){return ka(t).then(t=>t.syncEngine)}async function Pa(t){const e=await ka(t),n=e.eventManager;return n.onListen=Mo.bind(null,e.syncEngine),n.onUnlisten=Lo.bind(null,e.syncEngine),n}function Na(t){return t.asyncQueue.enqueue(async()=>{const e=await Oa(t),n=await Ea(t);return e.setNetworkEnabled(!0),function(t){const e=_(t);return e.Wr.delete(0),Fs(e)}(n)})}function ja(t){return t.asyncQueue.enqueue(async()=>{const e=await Oa(t),n=await Ea(t);return e.setNetworkEnabled(!1),async function(t){const e=_(t);e.Wr.add(0),await Us(e),e.Hr.set("Offline")}(n)})}function Ra(t,e){const n=new S;return t.asyncQueue.enqueueAndForget(async()=>async function(t,e,n){try{const i=await function(t,e){const n=_(t);return n.persistence.runTransaction("read document","readonly",t=>n.Qn.An(t,e))}(t,e);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new T(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const i=po(t,`Failed to get document '${e} from cache`);n.reject(i)}}(await Ia(t),e,n)),n.promise}function Ma(t,e,n={}){const i=new S;return t.asyncQueue.enqueueAndForget(async()=>function(t,e,n,i,r){const s=new va({next:s=>{e.enqueueAndForget(()=>wo(t,o));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new T(x.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new T(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:t=>r.reject(t)}),o=new So(Kt(n.path),s,{includeMetadataChanges:!0,fo:!0});return bo(t,o)}(await Pa(t),t.asyncQueue,e,n,i)),i.promise}function Da(t,e){const n=new S;return t.asyncQueue.enqueueAndForget(async()=>async function(t,e,n){try{const i=await Qr(t,e,!0),r=new Po(e,i.Gn),s=r.bo(i.documents),o=r.applyChanges(s,!1);n.resolve(o.snapshot)}catch(t){const i=po(t,`Failed to execute query '${e} against cache`);n.reject(i)}}(await Ia(t),e,n)),n.promise}function La(t,e,n={}){const i=new S;return t.asyncQueue.enqueueAndForget(async()=>function(t,e,n,i,r){const s=new va({next:n=>{e.enqueueAndForget(()=>wo(t,o)),n.fromCache&&"server"===i.source?r.reject(new T(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new So(n,s,{includeMetadataChanges:!0,fo:!0});return bo(t,o)}(await Pa(t),t.asyncQueue,e,n,i)),i.promise}function Fa(t,e){const n=new va(e);return t.asyncQueue.enqueueAndForget(async()=>function(t,e){_(t).so.add(e),e.next()}(await Pa(t),n)),()=>{n.ec(),t.asyncQueue.enqueueAndForget(async()=>function(t,e){_(t).so.delete(e)}(await Pa(t),n))}}function Ua(t,e){const n=new S;return t.asyncQueue.enqueueAndForget(async()=>{const i=await function(t){return ka(t).then(t=>t.datastore)}(t);new _a(t.asyncQueue,i,e,n).run()}),n.promise}function Ba(t,e,n,i){const r=function(t,e){let n;return n="string"==typeof t?(new TextEncoder).encode(t):t,function(t,e){return new ba(t,e)}(function(t,e){if(t instanceof Uint8Array)return ya(t,e);if(t instanceof ArrayBuffer)return ya(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,As(e));t.asyncQueue.enqueueAndForget(async()=>{da(await Aa(t),r,i)})}function Va(t,e){return t.asyncQueue.enqueue(async()=>function(t,e){const n=_(t);return n.persistence.runTransaction("Get named query","readonly",t=>n.Je.getNamedQuery(t,e))}(await Ia(t),e))}class za{constructor(t,e,n,i,r,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class qa{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof qa&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t,e,n){if(!n)throw new T(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ga(t,e,n,i){if(!0===e&&!0===i)throw new T(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ka(t){if(!st.isDocumentKey(t))throw new T(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $a(t){if(st.isDocumentKey(t))throw new T(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ya(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":v()}function Xa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new T(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ya(t);throw new T(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Qa(t,e){if(e<=0)throw new T(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new T(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new T(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ga("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t,e){this._credentials=e,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ja({}),this._settingsFrozen=!1,t instanceof qa?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new T(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(t.options.projectId)}(t))}get app(){if(!this._app)throw new T(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new T(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ja(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new k;switch(t.type){case"gapi":const e=t.client;return b(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new A(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new T(x.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Wa.get(t);e&&(f("ComponentProvider","Removing Datastore"),Wa.delete(t),e.terminate())}(this),Promise.resolve()}}function tc(t,e,n,i={}){var r;const s=(t=Xa(t,Za))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&m("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=l.MOCK_USER;else{e=Object(o["m"])(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new T(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new l(s)}t._credentials=new O(new C(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ic(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ec(this.firestore,t,this._key)}}class nc{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new nc(this.firestore,t,this._query)}}class ic extends nc{constructor(t,e,n){super(t,e,Kt(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ec(this.firestore,null,new st(t))}withConverter(t){return new ic(this.firestore,t,this._path)}}function rc(t,e,...n){if(t=Object(o["u"])(t),Ha("collection","path",e),t instanceof Za){const i=q.fromString(e,...n);return $a(i),new ic(t,null,i)}{if(!(t instanceof ec||t instanceof ic))throw new T(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(q.fromString(e,...n));return $a(i),new ic(t.firestore,null,i)}}function sc(t,e){if(t=Xa(t,Za),Ha("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new T(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new nc(t,null,function(t){return new Ht(q.emptyPath(),t)}(e))}function oc(t,e,...n){if(t=Object(o["u"])(t),1===arguments.length&&(e=j.I()),Ha("doc","path",e),t instanceof Za){const i=q.fromString(e,...n);return Ka(i),new ec(t,null,new st(i))}{if(!(t instanceof ec||t instanceof ic))throw new T(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(q.fromString(e,...n));return Ka(i),new ec(t.firestore,t instanceof ic?t.converter:null,new st(i))}}function ac(t,e){return t=Object(o["u"])(t),e=Object(o["u"])(e),(t instanceof ec||t instanceof ic)&&(e instanceof ec||e instanceof ic)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function cc(t,e){return t=Object(o["u"])(t),e=Object(o["u"])(e),t instanceof nc&&e instanceof nc&&t.firestore===e.firestore&&ne(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class lc{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new Ps(this,"async_queue_retry"),this.Rc=()=>{const t=Es();t&&f("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ar.tr()};const t=Es();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.bc(),this.Pc(t)}enterRestrictedMode(t){if(!this.gc){this.gc=!0,this.Ic=t||!1;const e=Es();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Rc)}}enqueue(t){if(this.bc(),this.gc)return new Promise(()=>{});const e=new S;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.mc.push(t),this.vc()))}async vc(){if(0!==this.mc.length){try{await this.mc[0](),this.mc.shift(),this.ar.reset()}catch(t){if(!Ii(t))throw t;f("AsyncQueue","Operation failed with retryable error: "+t)}this.mc.length>0&&this.ar.Xi(()=>this.vc())}}Pc(t){const e=this._c.then(()=>(this.Ec=!0,t().catch(t=>{this.Tc=t,this.Ec=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);throw g("INTERNAL UNHANDLED ERROR: ",e),t}).then(t=>(this.Ec=!1,t))));return this._c=e,e}enqueueAfterDelay(t,e,n){this.bc(),this.Ac.indexOf(t)>-1&&(e=0);const i=uo.createAndSchedule(this,t,e,n,t=>this.Vc(t));return this.yc.push(i),i}bc(){this.Tc&&v()}verifyOperationInProgress(){}async Sc(){let t;do{t=this._c,await t}while(t!==this._c)}Dc(t){for(const e of this.yc)if(e.timerId===t)return!0;return!1}Cc(t){return this.Sc().then(()=>{this.yc.sort((t,e)=>t.targetTimeMs-e.targetTimeMs);for(const e of this.yc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Sc()})}Nc(t){this.Ac.push(t)}Vc(t){const e=this.yc.indexOf(t);this.yc.splice(e,1)}}function hc(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of e)if(i in n&&"function"==typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,["next","error","complete"])}class uc{constructor(){this._progressObserver={},this._taskCompletionResolver=new S,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;class pc extends Za{constructor(t,e){super(t,e),this.type="firestore",this._queue=new lc,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||gc(this),this._firestoreClient.terminate()}}function fc(t){return t._firestoreClient||gc(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function gc(t){var e;const n=t._freezeSettings(),i=function(t,e,n,i){return new za(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new xa(t._credentials,t._queue,i)}function mc(t,e){Cc(t=Xa(t,pc));const n=fc(t),i=t._freezeSettings(),r=new ma;return vc(n,r,new fa(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function yc(t){Cc(t=Xa(t,pc));const e=fc(t),n=t._freezeSettings(),i=new ma;return vc(e,i,new ga(i,n.cacheSizeBytes))}function vc(t,e,n){const i=new S;return t.asyncQueue.enqueue(async()=>{try{await Ta(t,n),await Sa(t,e),i.resolve()}catch(t){if(!function(t){return"FirebaseError"===t.name?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code||11===t.code)}(t))throw t;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),i.reject(t)}}).then(()=>i.promise)}function bc(t){if(t._initialized&&!t._terminated)throw new T(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new S;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(t){if(!Ci.bt())return Promise.resolve();const e=t+"main";await Ci.delete(e)}(Dr(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function wc(t){return function(t){const e=new S;return t.asyncQueue.enqueueAndForget(async()=>Wo(await Aa(t),e)),e.promise}(fc(t=Xa(t,pc)))}function _c(t){return Na(fc(t=Xa(t,pc)))}function xc(t){return ja(fc(t=Xa(t,pc)))}function Tc(t,e){const n=fc(t=Xa(t,pc)),i=new uc;return Ba(n,t._databaseId,e,i),i}function Sc(t,e){return Va(fc(t=Xa(t,pc)),e).then(e=>e?new nc(t,null,e.query):null)}function Cc(t){if(t._initialized||t._terminated)throw new T(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new T(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new H(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Oc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Oc($.fromBase64String(t))}catch(t){throw new T(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Oc($.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new T(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new T(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return R(this._lat,t._lat)||R(this._long,t._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=/^__.*__$/;class Pc{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Me(t,this.data,this.fieldMask,e,this.fieldTransforms):new Re(t,this.data,e,this.fieldTransforms)}}class Nc{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Me(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function jc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v()}}class Rc{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.N=n,this.ignoreUndefinedProperties=i,void 0===r&&this.xc(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(t){return new Rc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.$c({path:n,Fc:!1});return i.Mc(t),i}Lc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.$c({path:n,Fc:!1});return i.xc(),i}Bc(t){return this.$c({path:void 0,Fc:!0})}Uc(t){return tl(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.Mc(this.path.get(t))}Mc(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(jc(this.kc)&&Ac.test(t))throw this.Uc('Document fields cannot begin and end with "__"')}}class Mc{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.N=n||As(t)}jc(t,e,n,i=!1){return new Rc({kc:t,methodName:e,Kc:n,path:H.emptyPath(),Fc:!1,qc:i},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Dc(t){const e=t._freezeSettings(),n=As(t._databaseId);return new Mc(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Lc(t,e,n,i,r,s={}){const o=t.jc(s.merge||s.mergeFields?2:0,e,n,r);Xc("Data must be an object, but it was:",o,i);const a=$c(i,o);let c,l;if(s.merge)c=new G(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Qc(e,i,n);if(!o.contains(r))throw new T(x.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);el(t,r)||t.push(r)}c=new G(t),l=o.fieldTransforms.filter(t=>c.covers(t.field))}else c=null,l=o.fieldTransforms;return new Pc(new wt(a),c,l)}class Fc extends Ic{_toFieldTransform(t){if(2!==t.kc)throw 1===t.kc?t.Uc(this._methodName+"() can only appear at the top level of your update data"):t.Uc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Fc}}function Uc(t,e,n){return new Rc({kc:3,Kc:e.settings.Kc,methodName:t._methodName,Fc:n},e.databaseId,e.N,e.ignoreUndefinedProperties)}class Bc extends Ic{_toFieldTransform(t){return new Te(t.path,new ge)}isEqual(t){return t instanceof Bc}}class Vc extends Ic{constructor(t,e){super(t),this.Qc=e}_toFieldTransform(t){const e=Uc(this,t,!0),n=this.Qc.map(t=>Kc(t,e)),i=new me(n);return new Te(t.path,i)}isEqual(t){return this===t}}class zc extends Ic{constructor(t,e){super(t),this.Qc=e}_toFieldTransform(t){const e=Uc(this,t,!0),n=this.Qc.map(t=>Kc(t,e)),i=new ve(n);return new Te(t.path,i)}isEqual(t){return this===t}}class qc extends Ic{constructor(t,e){super(t),this.Wc=e}_toFieldTransform(t){const e=new we(t.N,he(t.N,this.Wc));return new Te(t.path,e)}isEqual(t){return this===t}}function Wc(t,e,n,i){const r=t.jc(1,e,n);Xc("Data must be an object, but it was:",r,i);const s=[],a=wt.empty();B(i,(t,i)=>{const c=Zc(e,t,n);i=Object(o["u"])(i);const l=r.Lc(c);if(i instanceof Fc)s.push(c);else{const t=Kc(i,l);null!=t&&(s.push(c),a.set(c,t))}});const c=new G(s);return new Nc(a,c,r.fieldTransforms)}function Hc(t,e,n,i,r,s){const a=t.jc(1,e,n),c=[Qc(e,i,n)],l=[r];if(s.length%2!=0)throw new T(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let o=0;o<s.length;o+=2)c.push(Qc(e,s[o])),l.push(s[o+1]);const h=[],u=wt.empty();for(let p=c.length-1;p>=0;--p)if(!el(h,c[p])){const t=c[p];let e=l[p];e=Object(o["u"])(e);const n=a.Lc(t);if(e instanceof Fc)h.push(t);else{const i=Kc(e,n);null!=i&&(h.push(t),u.set(t,i))}}const d=new G(h);return new Nc(u,d,a.fieldTransforms)}function Gc(t,e,n,i=!1){return Kc(n,t.jc(i?4:3,e))}function Kc(t,e){if(Yc(t=Object(o["u"])(t)))return Xc("Unsupported field value:",e,t),$c(t,e);if(t instanceof Ic)return function(t,e){if(!jc(e.kc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.kc)throw e.Uc("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Kc(r,e.Bc(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(o["u"])(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return he(e.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=L.fromDate(t);return{timestampValue:wn(e.N,n)}}if(t instanceof L){const n=new L(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wn(e.N,n)}}if(t instanceof Ec)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Oc)return{bytesValue:_n(e.N,t._byteString)};if(t instanceof ec){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Uc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Sn(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Ya(t))}(t,e)}function $c(t,e){const n={};return V(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):B(t,(t,i)=>{const r=Kc(i,e.Oc(t));null!=r&&(n[t]=r)}),{mapValue:{fields:n}}}function Yc(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof L||t instanceof Ec||t instanceof Oc||t instanceof ec||t instanceof Ic)}function Xc(t,e,n){if(!Yc(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=Ya(n);throw"an object"===i?e.Uc(t+" a custom object"):e.Uc(t+" "+i)}}function Qc(t,e,n){if((e=Object(o["u"])(e))instanceof kc)return e._internalPath;if("string"==typeof e)return Zc(t,e);throw tl("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const Jc=new RegExp("[~\\*/\\[\\]]");function Zc(t,e,n){if(e.search(Jc)>=0)throw tl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kc(...e.split("."))._internalPath}catch(i){throw tl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tl(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field "+i),o&&(c+=" in document "+r),c+=")"),new T(x.INVALID_ARGUMENT,a+t+c)}function el(t,e){return t.some(t=>t.isEqual(e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ec(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new il(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(rl("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class il extends nl{data(){return super.data()}}function rl(t,e){return"string"==typeof e?Zc(t,e):e instanceof kc?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ol extends nl{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new al(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(rl("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class al extends ol{data(t={}){return super.data(t)}}class cl{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new sl(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new al(this._firestore,this._userDataWriter,n.key,n,new sl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new T(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map(n=>({type:"added",doc:new al(t._firestore,t._userDataWriter,n.doc.key,n.doc,new sl(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(t=>e||3!==t.type).map(e=>{const i=new al(t._firestore,t._userDataWriter,e.doc.key,e.doc,new sl(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:ll(e.type),doc:i,oldIndex:r,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ll(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v()}}function hl(t,e){return t instanceof ol&&e instanceof ol?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof cl&&e instanceof cl&&t._firestore===e._firestore&&cc(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){if(Yt(t)&&0===t.explicitOrderBy.length)throw new T(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dl{}function pl(t,...e){for(const n of e)t=n._apply(t);return t}class fl extends dl{constructor(t,e,n){super(),this.Gc=t,this.zc=e,this.Hc=n,this.type="where"}_apply(t){const e=Dc(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new T(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){El(o,s);const e=[];for(const n of o)e.push(Il(i,t,n));a={arrayValue:{values:e}}}else a=Il(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||El(o,s),a=Gc(n,e,o,"in"===s||"not-in"===s);const c=Et.create(r,s,a);return function(t,e){if(e.v()){const n=Qt(t);if(null!==n&&!n.isEqual(e.field))throw new T(x.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${e.field.toString()}'`);const i=Xt(t);null!==i&&Al(t,e.field,i)}const n=function(t,e){for(const n of t.filters)if(e.indexOf(n.op)>=0)return n.op;return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new T(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new T(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}(t,c),c}(t._query,"where",e,t.firestore._databaseId,this.Gc,this.zc,this.Hc);return new nc(t.firestore,t.converter,function(t,e){const n=t.filters.concat([e]);return new Ht(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))}}function gl(t,e,n){const i=e,r=rl("where",t);return new fl(r,i,n)}class ml extends dl{constructor(t,e){super(),this.Gc=t,this.Jc=e,this.type="orderBy"}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new T(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new T(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new Vt(e,n);return function(t,e){if(null===Xt(t)){const n=Qt(t);null!==n&&Al(t,n,e.field)}}(t,i),i}(t._query,this.Gc,this.Jc);return new nc(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new Ht(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function yl(t,e="asc"){const n=e,i=rl("orderBy",t);return new ml(i,n)}class vl extends dl{constructor(t,e,n){super(),this.type=t,this.Yc=e,this.Xc=n}_apply(t){return new nc(t.firestore,t.converter,ee(t._query,this.Yc,this.Xc))}}function bl(t){return Qa("limit",t),new vl("limit",t,"F")}function wl(t){return Qa("limitToLast",t),new vl("limitToLast",t,"L")}class _l extends dl{constructor(t,e,n){super(),this.type=t,this.Zc=e,this.ta=n}_apply(t){const e=Ol(t,this.type,this.Zc,this.ta);return new nc(t.firestore,t.converter,function(t,e){return new Ht(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function xl(...t){return new _l("startAt",t,!0)}function Tl(...t){return new _l("startAfter",t,!1)}class Sl extends dl{constructor(t,e,n){super(),this.type=t,this.Zc=e,this.ta=n}_apply(t){const e=Ol(t,this.type,this.Zc,this.ta);return new nc(t.firestore,t.converter,function(t,e){return new Ht(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function Cl(...t){return new Sl("endBefore",t,!0)}function kl(...t){return new Sl("endAt",t,!1)}function Ol(t,e,n,i){if(n[0]=Object(o["u"])(n[0]),n[0]instanceof nl)return function(t,e,n,i,r){if(!i)throw new T(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of Zt(t))if(o.field.isKeyField())s.push(pt(e,i.key));else{const t=i.data.field(o.field);if(Z(t))throw new T(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new T(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new Ut(s,r)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=Dc(t.firestore);return function(t,e,n,i,r,s){const o=t.explicitOrderBy;if(r.length>o.length)throw new T(x.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<r.length;c++){const s=r[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new T(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof s}`);if(!Jt(t)&&-1!==s.indexOf("/"))throw new T(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${i}() must be a plain document ID, but '${s}' contains a slash.`);const n=t.path.child(q.fromString(s));if(!st.isDocumentKey(n))throw new T(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const r=new st(n);a.push(pt(e,r))}else{const t=Gc(n,i,s);a.push(t)}}return new Ut(a,s)}(t._query,t.firestore._databaseId,r,e,n,i)}}function Il(t,e,n){if("string"==typeof(n=Object(o["u"])(n))){if(""===n)throw new T(x.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jt(e)&&-1!==n.indexOf("/"))throw new T(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(q.fromString(n));if(!st.isDocumentKey(i))throw new T(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pt(t,new st(i))}if(n instanceof ec)return pt(t,n._key);throw new T(x.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ya(n)}.`)}function El(t,e){if(!Array.isArray(t)||0===t.length)throw new T(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new T(x.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Al(t,e,n){if(!n.isEqual(e))throw new T(x.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{convertValue(t,e="none"){switch(ot(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Q(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(J(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw v()}}convertObject(t,e){const n={};return B(t.fields,(t,i)=>{n[t]=this.convertValue(i,e)}),n}convertGeoPoint(t){return new Ec(Q(t.latitude),Q(t.longitude))}convertArray(t,e){return(t.values||[]).map(t=>this.convertValue(t,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=tt(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(et(t));default:return null}}convertTimestamp(t){const e=X(t);return new L(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=q.fromString(t);b(Zn(n));const i=new qa(n.get(1),n.get(3)),r=new st(n.popFirst(5));return i.isEqual(e)||g(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class jl extends Pl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Oc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ec(this.firestore,null,e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Dc(t)}set(t,e,n){this._verifyNotCommitted();const i=Ml(t,this._firestore),r=Nl(i.converter,e,n),s=Lc(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,ke.none())),this}update(t,e,n,...i){this._verifyNotCommitted();const r=Ml(t,this._firestore);let s;return s="string"==typeof(e=Object(o["u"])(e))||e instanceof kc?Hc(this._dataReader,"WriteBatch.update",r._key,e,n,i):Wc(this._dataReader,"WriteBatch.update",r._key,e),this._mutations.push(s.toMutation(r._key,ke.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Ml(t,this._firestore);return this._mutations=this._mutations.concat(new Ue(e._key,ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new T(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ml(t,e){if((t=Object(o["u"])(t)).firestore!==e)throw new T(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t){t=Xa(t,ec);const e=Xa(t.firestore,pc);return Ma(fc(e),t._key).then(n=>Xl(e,t,n))}class Ll extends Pl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Oc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ec(this.firestore,null,e)}}function Fl(t){t=Xa(t,ec);const e=Xa(t.firestore,pc),n=fc(e),i=new Ll(e);return Ra(n,t._key).then(n=>new ol(e,i,t._key,n,new sl(null!==n&&n.hasLocalMutations,!0),t.converter))}function Ul(t){t=Xa(t,ec);const e=Xa(t.firestore,pc);return Ma(fc(e),t._key,{source:"server"}).then(n=>Xl(e,t,n))}function Bl(t){t=Xa(t,nc);const e=Xa(t.firestore,pc),n=fc(e),i=new Ll(e);return ul(t._query),La(n,t._query).then(n=>new cl(e,i,t,n))}function Vl(t){t=Xa(t,nc);const e=Xa(t.firestore,pc),n=fc(e),i=new Ll(e);return Da(n,t._query).then(n=>new cl(e,i,t,n))}function zl(t){t=Xa(t,nc);const e=Xa(t.firestore,pc),n=fc(e),i=new Ll(e);return La(n,t._query,{source:"server"}).then(n=>new cl(e,i,t,n))}function ql(t,e,n){t=Xa(t,ec);const i=Xa(t.firestore,pc),r=Nl(t.converter,e,n);return Yl(i,[Lc(Dc(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,ke.none())])}function Wl(t,e,n,...i){t=Xa(t,ec);const r=Xa(t.firestore,pc),s=Dc(r);let a;return a="string"==typeof(e=Object(o["u"])(e))||e instanceof kc?Hc(s,"updateDoc",t._key,e,n,i):Wc(s,"updateDoc",t._key,e),Yl(r,[a.toMutation(t._key,ke.exists(!0))])}function Hl(t){return Yl(Xa(t.firestore,pc),[new Ue(t._key,ke.none())])}function Gl(t,e){const n=Xa(t.firestore,pc),i=oc(t),r=Nl(t.converter,e);return Yl(n,[Lc(Dc(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,ke.exists(!1))]).then(()=>i)}function Kl(t,...e){var n,i,r;t=Object(o["u"])(t);let s={includeMetadataChanges:!1},a=0;"object"!=typeof e[a]||hc(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(hc(e[a])){const t=e[a];e[a]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[a+1]=null===(i=t.error)||void 0===i?void 0:i.bind(t),e[a+2]=null===(r=t.complete)||void 0===r?void 0:r.bind(t)}let l,h,u;if(t instanceof ec)h=Xa(t.firestore,pc),u=Kt(t._key.path),l={next:n=>{e[a]&&e[a](Xl(h,t,n))},error:e[a+1],complete:e[a+2]};else{const n=Xa(t,nc);h=Xa(n.firestore,pc),u=n._query;const i=new Ll(h);l={next:t=>{e[a]&&e[a](new cl(h,i,n,t))},error:e[a+1],complete:e[a+2]},ul(t._query)}return function(t,e,n,i){const r=new va(i),s=new So(e,r,n);return t.asyncQueue.enqueueAndForget(async()=>bo(await Pa(t),s)),()=>{r.ec(),t.asyncQueue.enqueueAndForget(async()=>wo(await Pa(t),s))}}(fc(h),u,c,l)}function $l(t,e){return Fa(fc(t=Xa(t,pc)),hc(e)?e:{next:e})}function Yl(t,e){return function(t,e){const n=new S;return t.asyncQueue.enqueueAndForget(async()=>Fo(await Aa(t),e,n)),n.promise}(fc(t),e)}function Xl(t,e,n){const i=n.docs.get(e._key),r=new Ll(t);return new ol(t,r,e._key,i,new sl(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Dc(t)}get(t){const e=Ml(t,this._firestore),n=new jl(this._firestore);return this._transaction.lookup([e._key]).then(t=>{if(!t||1!==t.length)return v();const i=t[0];if(i.isFoundDocument())return new nl(this._firestore,n,i.key,i,e.converter);if(i.isNoDocument())return new nl(this._firestore,n,e._key,null,e.converter);throw v()})}set(t,e,n){const i=Ml(t,this._firestore),r=Nl(i.converter,e,n),s=Lc(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,s),this}update(t,e,n,...i){const r=Ml(t,this._firestore);let s;return s="string"==typeof(e=Object(o["u"])(e))||e instanceof kc?Hc(this._dataReader,"Transaction.update",r._key,e,n,i):Wc(this._dataReader,"Transaction.update",r._key,e),this._transaction.update(r._key,s),this}delete(t){const e=Ml(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Ml(t,this._firestore),n=new Ll(this._firestore);return super.get(t).then(t=>new ol(this._firestore,n,e._key,t._document,new sl(!1,!1),e.converter))}}function Jl(t,e){return Ua(fc(t=Xa(t,pc)),n=>e(new Ql(t,n)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(){return new Fc("deleteField")}function th(){return new Bc("serverTimestamp")}function eh(...t){return new Vc("arrayUnion",t)}function nh(...t){return new zc("arrayRemove",t)}function ih(t){return new qc("increment",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t,e=!0){!function(t){h=t}(i["SDK_VERSION"]),Object(i["_registerComponent"])(new r["a"]("firestore",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=new pc(i,new I(t.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:e},n),r._setSettings(n),r},"PUBLIC")),Object(i["registerVersion"])(c,"3.2.0",t),Object(i["registerVersion"])(c,"3.2.0","esm2017")}()}).call(this,n("4362"))},"0b42":function(t,e,n){var i=n("e8b5"),r=n("68ee"),s=n("861d"),o=n("b622"),a=o("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,r(e)&&(e===Array||i(e.prototype))?e=void 0:s(e)&&(e=e[a],null===e&&(e=void 0))),void 0===e?Array:e}},"0cfb":function(t,e,n){var i=n("83ab"),r=n("d039"),s=n("cc12");t.exports=!i&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},"0d51":function(t,e){t.exports=function(t){try{return String(t)}catch(e){return"Object"}}},"107c":function(t,e,n){var i=n("d039"),r=n("da84"),s=r.RegExp;t.exports=i((function(){var t=s("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1276:function(t,e,n){"use strict";var i=n("d784"),r=n("44e7"),s=n("825a"),o=n("1d80"),a=n("4840"),c=n("8aa5"),l=n("50c4"),h=n("577e"),u=n("dc4a"),d=n("14c3"),p=n("9263"),f=n("9f7f"),g=n("d039"),m=f.UNSUPPORTED_Y,y=[].push,v=Math.min,b=4294967295,w=!g((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));i("split",(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=h(o(this)),s=void 0===n?b:n>>>0;if(0===s)return[];if(void 0===t)return[i];if(!r(t))return e.call(i,t,s);var a,c,l,u=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=new RegExp(t.source,d+"g");while(a=p.call(g,i)){if(c=g.lastIndex,c>f&&(u.push(i.slice(f,a.index)),a.length>1&&a.index<i.length&&y.apply(u,a.slice(1)),l=a[0].length,f=c,u.length>=s))break;g.lastIndex===a.index&&g.lastIndex++}return f===i.length?!l&&g.test("")||u.push(""):u.push(i.slice(f)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=o(this),s=void 0==e?void 0:u(e,t);return s?s.call(e,r,n):i.call(h(r),e,n)},function(t,r){var o=s(this),u=h(t),p=n(i,o,u,r,i!==e);if(p.done)return p.value;var f=a(o,RegExp),g=o.unicode,y=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(m?"g":"y"),w=new f(m?"^(?:"+o.source+")":o,y),_=void 0===r?b:r>>>0;if(0===_)return[];if(0===u.length)return null===d(w,u)?[u]:[];var x=0,T=0,S=[];while(T<u.length){w.lastIndex=m?0:T;var C,k=d(w,m?u.slice(T):u);if(null===k||(C=v(l(w.lastIndex+(m?T:0)),u.length))===x)T=c(u,T,g);else{if(S.push(u.slice(x,T)),S.length===_)return S;for(var O=1;O<=k.length-1;O++)if(S.push(k[O]),S.length===_)return S;T=x=C}}return S.push(u.slice(x)),S}]}),!w,m)},"12f7":function(t,e,n){"use strict";var i=n("7a23"),r=Object(i["defineComponent"])({name:"Vue3StarRatings",props:{starColor:{type:String,default:"#ff9800"},inactiveColor:{type:String,default:"#333"},starSize:{type:String,default:"32"},controlBg:{type:String,default:"#2e5090"},controlColor:{type:String,default:"#fff"},controlSize:{type:String,default:"24"},numberOfStars:{type:Number,default:5},showControl:{type:Boolean,default:!0},modelValue:{type:Number},disableClick:{type:Boolean,default:!1},step:{type:Number,default:.5}},data(){return{rating:this.modelValue||0}},watch:{roundedRating(){this.$emit("update:modelValue",this.roundedRating)}},computed:{roundedRating(){return this.rounded(this.rating,1)},percent(){return this.roundedRating/this.numberOfStars*100+"%"}},methods:{increaseRating(){this.rating<this.numberOfStars?this.rating+=this.step:this.rating>this.numberOfStars&&(this.rating=this.numberOfStars),this.rating>this.numberOfStars&&(this.rating=this.numberOfStars)},decreaseRating(){this.rating<=0||(this.rating-=this.step,this.rating<0&&(this.rating=0))},rounded(t,e){const n=10**e;return Math.round(t*n)/n}},mounted(){const t=this.$refs["starsContainer"],e=this;t.addEventListener("click",(function(t){const n=t.pageX-this.offsetLeft;e.rating=n/this.offsetWidth*e.numberOfStars}))}});const s=Object(i["withScopeId"])("data-v-3d93c878");Object(i["pushScopeId"])("data-v-3d93c878");const o={class:"vue3-star-ratings__wrapper"},a={class:"vue3-star-ratings"},c=Object(i["createVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 792.082 792.082"},[Object(i["createVNode"])("path",{d:"M317.896 396.024l304.749-276.467c27.36-27.36 27.36-71.677 0-99.037s-71.677-27.36-99.036 0L169.11 342.161c-14.783 14.783-21.302 34.538-20.084 53.897-1.218 19.359 5.301 39.114 20.084 53.897l354.531 321.606c27.36 27.36 71.677 27.36 99.037 0s27.36-71.677 0-99.036L317.896 396.024z"})],-1),l=Object(i["createVNode"])("path",{d:"M511.267 197.258a14.995 14.995 0 00-12.107-10.209l-158.723-23.065-70.985-143.827a14.998 14.998 0 00-26.901 0l-70.988 143.827-158.72 23.065a14.998 14.998 0 00-8.312 25.585l114.848 111.954-27.108 158.083a14.999 14.999 0 0021.763 15.812l141.967-74.638 141.961 74.637a15 15 0 0021.766-15.813l-27.117-158.081 114.861-111.955a14.994 14.994 0 003.795-15.375z"},null,-1),h=Object(i["createVNode"])("path",{d:"M511.267 197.258a14.995 14.995 0 00-12.107-10.209l-158.723-23.065-70.985-143.827a14.998 14.998 0 00-26.901 0l-70.988 143.827-158.72 23.065a14.998 14.998 0 00-8.312 25.585l114.848 111.954-27.108 158.083a14.999 14.999 0 0021.763 15.812l141.967-74.638 141.961 74.637a15 15 0 0021.766-15.813l-27.117-158.081 114.861-111.955a14.994 14.994 0 003.795-15.375z"},null,-1),u=Object(i["createVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 792.082 792.082"},[Object(i["createVNode"])("path",{d:"M622.955 342.127L268.424 20.521c-27.36-27.36-71.677-27.36-99.037 0s-27.36 71.676 0 99.037l304.749 276.468-304.749 276.466c-27.36 27.359-27.36 71.676 0 99.036s71.677 27.36 99.037 0l354.531-321.606c14.783-14.783 21.302-34.538 20.084-53.897 1.186-19.36-5.301-39.114-20.084-53.898z"})],-1);Object(i["popScopeId"])();const d=s((t,e,n,r,s,d)=>(Object(i["openBlock"])(),Object(i["createBlock"])("div",o,[Object(i["createVNode"])("div",a,[t.showControl?(Object(i["openBlock"])(),Object(i["createBlock"])("button",{key:0,onClick:e[1]||(e[1]=(...e)=>t.decreaseRating&&t.decreaseRating(...e)),style:{height:t.controlSize+"px",width:t.controlSize+"px",backgroundColor:t.controlBg,color:t.controlColor}},[c],4)):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])("div",{class:"stars",ref:"starsContainer",style:{height:t.starSize+"px",pointerEvents:t.disableClick?"none":"auto"}},[Object(i["createVNode"])("div",{class:"stars-outer",style:{color:t.inactiveColor}},[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(t.numberOfStars,t=>(Object(i["openBlock"])(),Object(i["createBlock"])("svg",{key:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.002 512.002"},[l]))),128))],4),Object(i["createVNode"])("div",{class:"stars-inner",style:{width:t.percent,color:t.starColor}},[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(t.numberOfStars,t=>(Object(i["openBlock"])(),Object(i["createBlock"])("svg",{key:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.002 512.002"},[h]))),128))],4)],4),t.showControl?(Object(i["openBlock"])(),Object(i["createBlock"])("button",{key:1,onClick:e[2]||(e[2]=(...e)=>t.increaseRating&&t.increaseRating(...e)),style:{height:t.controlSize+"px",width:t.controlSize+"px",backgroundColor:t.controlBg,color:t.controlColor}},[u],4)):Object(i["createCommentVNode"])("",!0)])])));function p(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var f="\n.vue3-star-ratings__wrapper[data-v-3d93c878] {\n  display: block;\n  margin: 25px auto;\n  text-align: center;\n  padding: 25px;\n}\n.vue3-star-ratings[data-v-3d93c878] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.vue3-star-ratings button[data-v-3d93c878] {\n  border: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  cursor: pointer;\n}\n.vue3-star-ratings button svg[data-v-3d93c878] {\n  height: calc(100% - 8px);\n  fill: currentColor;\n}\n.stars[data-v-3d93c878] {\n  display: inline-block;\n  position: relative;\n  overflow: hidden;\n  margin: 0 auto;\n}\n.stars-outer[data-v-3d93c878], .stars-inner[data-v-3d93c878] {\n  height: inherit;\n}\n.stars-inner[data-v-3d93c878] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  max-width: 100%;\n  min-width: 0;\n  white-space: nowrap;\n  transition: 320ms cubic-bezier(0.075, 0.82, 0.165, 1);\n  overflow: hidden;\n}\n.stars svg[data-v-3d93c878] {\n  display: inline-block;\n  height: inherit;\n  fill: currentColor;\n  cursor: pointer;\n}\n";p(f),r.render=d,r.__scopeId="data-v-3d93c878";var g=(()=>{const t=r;return t.install=e=>{e.component("Vue3StarRatings",t)},t})();e["a"]=g},"14c3":function(t,e,n){var i=n("825a"),r=n("1626"),s=n("c6b6"),o=n("9263");t.exports=function(t,e){var n=t.exec;if(r(n)){var a=n.call(t,e);return null!==a&&i(a),a}if("RegExp"===s(t))return o.call(t,e);throw TypeError("RegExp#exec called on incompatible receiver")}},"159b":function(t,e,n){var i=n("da84"),r=n("fdbc"),s=n("785a"),o=n("17c2"),a=n("9112"),c=function(t){if(t&&t.forEach!==o)try{a(t,"forEach",o)}catch(e){t.forEach=o}};for(var l in r)r[l]&&c(i[l]&&i[l].prototype);c(s)},1626:function(t,e){t.exports=function(t){return"function"===typeof t}},"17c2":function(t,e,n){"use strict";var i=n("b727").forEach,r=n("a640"),s=r("forEach");t.exports=s?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"19aa":function(t,e){t.exports=function(t,e,n){if(t instanceof e)return t;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}},"1be4":function(t,e,n){var i=n("d066");t.exports=i("document","documentElement")},"1c7e":function(t,e,n){var i=n("b622"),r=i("iterator"),s=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){s=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}t.exports=function(t,e){if(!e&&!s)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(c){}return n}},"1cdc":function(t,e,n){var i=n("342f");t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1dde":function(t,e,n){var i=n("d039"),r=n("b622"),s=n("2d00"),o=r("species");t.exports=function(t){return s>=51||!i((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1f5a":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return Ft})),n.d(e,"c",(function(){return le})),n.d(e,"d",(function(){return pe})),n.d(e,"e",(function(){return ge})),n.d(e,"f",(function(){return fe})),n.d(e,"g",(function(){return Zt})),n.d(e,"h",(function(){return de})),n.d(e,"i",(function(){return Ai})),n.d(e,"j",(function(){return Wr})),n.d(e,"k",(function(){return c})),n.d(e,"l",(function(){return xi})),n.d(e,"m",(function(){return ye})),n.d(e,"n",(function(){return ve})),n.d(e,"o",(function(){return x})),n.d(e,"p",(function(){return Pt})),n.d(e,"q",(function(){return y})),n.d(e,"r",(function(){return jn})),n.d(e,"s",(function(){return k})),n.d(e,"t",(function(){return ir})),n.d(e,"u",(function(){return pt})),n.d(e,"w",(function(){return Ve})),n.d(e,"x",(function(){return In})),n.d(e,"y",(function(){return Vr})),n.d(e,"z",(function(){return An})),n.d(e,"A",(function(){return ze})),n.d(e,"B",(function(){return Be})),n.d(e,"C",(function(){return jt})),n.d(e,"E",(function(){return We})),n.d(e,"F",(function(){return d})),n.d(e,"G",(function(){return Xe})),n.d(e,"H",(function(){return dn})),n.d(e,"I",(function(){return gn})),n.d(e,"J",(function(){return nr})),n.d(e,"K",(function(){return dt})),n.d(e,"L",(function(){return ei})),n.d(e,"M",(function(){return Ke})),n.d(e,"N",(function(){return Ne})),n.d(e,"O",(function(){return ki})),n.d(e,"P",(function(){return Bi})),n.d(e,"Q",(function(){return tr})),n.d(e,"R",(function(){return _n})),n.d(e,"S",(function(){return je})),n.d(e,"T",(function(){return Oi})),n.d(e,"U",(function(){return Ui})),n.d(e,"V",(function(){return Ji})),n.d(e,"W",(function(){return Qe})),n.d(e,"X",(function(){return Ue})),n.d(e,"Y",(function(){return Ge})),n.d(e,"Z",(function(){return xe})),n.d(e,"ab",(function(){return Pe})),n.d(e,"bb",(function(){return Me})),n.d(e,"cb",(function(){return He})),n.d(e,"db",(function(){return $e})),n.d(e,"eb",(function(){return Ci})),n.d(e,"fb",(function(){return Fi})),n.d(e,"gb",(function(){return Xi})),n.d(e,"hb",(function(){return ke})),n.d(e,"ib",(function(){return en})),n.d(e,"jb",(function(){return nn})),n.d(e,"kb",(function(){return Ei})),n.d(e,"lb",(function(){return tn})),n.d(e,"mb",(function(){return Je})),n.d(e,"nb",(function(){return qe})),n.d(e,"v",(function(){return _s})),n.d(e,"D",(function(){return bs}));var i=n("1fd5"),r=n("5606");function s(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}Object.create;Object.create;var o=n("4fc1"),a=n("ffa6");
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},l={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function h(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",["timeout"]:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function u(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d=h,p=u,f=new i["b"]("auth","Firebase",u()),g=new o["b"]("@firebase/auth");function m(t,...e){g.logLevel<=o["a"].ERROR&&g.error(`Auth (${r["SDK_VERSION"]}): ${t}`,...e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(t,...e){throw _(t,...e)}function v(t,...e){return _(t,...e)}function b(t,e,n){const r=Object.assign(Object.assign({},p()),{[e]:n}),s=new i["b"]("auth","Firebase",r);return s.create(e,{appName:t.name})}function w(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&y(t,"argument-error"),b(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _(t,...e){if("string"!==typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return f.create(t,...e)}function x(t,e,...n){if(!t)throw _(e,...n)}function T(t){const e="INTERNAL ASSERTION FAILED: "+t;throw m(e),new Error(e)}function S(t,e){t||T(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C=new Map;function k(t){S(t instanceof Function,"Expected a class definition");let e=C.get(t);return e?(S(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,C.set(t,e),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(k);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null===e||void 0===e?void 0:e.popupRedirectResolver)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function E(){return"http:"===A()||"https:"===A()}function A(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(E()||Object(i["y"])()||"connection"in navigator))||navigator.onLine}function N(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t,e){this.shortDelay=t,this.longDelay=e,S(e>t,"Short delay should be less than long delay!"),this.isMobile=Object(i["D"])()||Object(i["G"])()}get(){return P()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(t,e){S(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void T("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void T("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void T("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"internal-error",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error"},L=new j(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function U(t,e,n,r,s={}){return B(t,s,()=>{let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Object(i["N"])(Object.assign({key:t.config.apiKey},o)).slice(1),c=new(M.headers());return c.set("Content-Type","application/json"),c.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&c.set("X-Firebase-Locale",t.languageCode),M.fetch()(z(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function B(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},D),e);try{const e=new q(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw W(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=i.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw W(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw W(t,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw b(t,a,o);y(t,a)}}catch(s){if(s instanceof i["c"])throw s;y(t,"network-request-failed")}}async function V(t,e,n,i,r={}){const s=await U(t,e,n,i,r);return"mfaPendingCredential"in s&&y(t,"multi-factor-auth-required",{_serverResponse:s}),s}function z(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?R(t.config,r):`${t.config.apiScheme}://${r}`}class q{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((t,e)=>{this.timer=setTimeout(()=>e(v(this.auth,"timeout")),L.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function W(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=v(t,e,i);return r.customData._tokenResponse=n,r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H(t,e){return U(t,"POST","/v1/accounts:delete",e)}async function G(t,e){return U(t,"POST","/v1/accounts:update",e)}async function K(t,e){return U(t,"POST","/v1/accounts:lookup",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y(t,e=!1){const n=Object(i["u"])(t),r=await n.getIdToken(e),s=Q(r);x(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"===typeof s.firebase?s.firebase:void 0,a=null===o||void 0===o?void 0:o["sign_in_provider"];return{claims:s,token:r,authTime:$(X(s.auth_time)),issuedAtTime:$(X(s.iat)),expirationTime:$(X(s.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o["sign_in_second_factor"])||null}}function X(t){return 1e3*Number(t)}function Q(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return m("JWT malformed, contained fewer than 3 sections"),null;try{const t=Object(i["i"])(n);return t?JSON.parse(t):(m("Failed to decode base64 JWT payload"),null)}catch(s){return m("Caught error parsing JWT payload as JSON",s),null}}function J(t){const e=Q(t);return x(e,"internal-error"),x("undefined"!==typeof e.exp,"internal-error"),x("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof i["c"]&&tt(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tt({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0,n=t-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=$(this.lastLoginAt),this.creationTime=$(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function it(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Z(t,K(n,{idToken:i}));x(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?ot(s.providerUserInfo):[],a=st(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!c&&l,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nt(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,u)}async function rt(t){const e=Object(i["u"])(t);await it(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function st(t,e){const n=t.filter(t=>!e.some(e=>e.providerId===t.providerId));return[...n,...e]}function ot(t){return t.map(t=>{var{providerId:e}=t,n=s(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function at(t,e){const n=await B(t,{},()=>{const n=Object(i["N"])({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=z(t,r,"/v1/token","key="+s);return M.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){x(t.idToken,"internal-error"),x("undefined"!==typeof t.idToken,"internal-error"),x("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):J(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return x(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await at(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new ct;return n&&(x("string"===typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(x("string"===typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(x("number"===typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ct,this.toJSON())}_performRefresh(){return T("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t,e){x("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class ht{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=s(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new et(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.metadata=new nt(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await Z(this,this.stsTokenManager.getToken(this.auth,t));return x(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return Y(this,t)}reload(){return rt(this)}_assign(t){this!==t&&(x(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(t=>Object.assign({},t)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new ht(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await it(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Z(this,H(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,c,l;const h=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=e.photoURL)&&void 0!==s?s:void 0,f=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=e.createdAt)&&void 0!==c?c:void 0,y=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:T}=e;x(v&&T,t,"internal-error");const S=ct.fromJSON(this.name,T);x("string"===typeof v,t,"internal-error"),lt(h,t.name),lt(u,t.name),x("boolean"===typeof b,t,"internal-error"),x("boolean"===typeof w,t,"internal-error"),lt(d,t.name),lt(p,t.name),lt(f,t.name),lt(g,t.name),lt(m,t.name),lt(y,t.name);const C=new ht({uid:v,auth:t,email:u,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:S,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(C.providerData=_.map(t=>Object.assign({},t))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,e,n=!1){const i=new ct;i.updateFromServerResponse(e);const r=new ht({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await it(r),r}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}ut.type="NONE";const dt=ut;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t,e,n){return`firebase:${t}:${e}:${n}`}class ft{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=pt(this.userKey,i.apiKey,r),this.fullPersistenceKey=pt("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?ht._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new ft(k(dt),t,n);const i=(await Promise.all(e.map(async t=>{if(await t._isAvailable())return t}))).filter(t=>t);let r=i[0]||k(dt);const s=pt(n,t.config.apiKey,t.name);let o=null;for(const l of e)try{const e=await l._get(s);if(e){const n=ht._fromJSON(t,e);l!==r&&(o=n),r=l;break}}catch(c){}const a=i.filter(t=>t._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map(async t=>{if(t!==r)try{await t._remove(s)}catch(c){}})),new ft(r,t,n)):new ft(r,t,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mt(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_t(e))return"Blackberry";if(xt(e))return"Webos";if(yt(e))return"Safari";if((e.includes("chrome/")||vt(e))&&!e.includes("edge/"))return"Chrome";if(wt(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function mt(t=Object(i["v"])()){return/firefox\//i.test(t)}function yt(t=Object(i["v"])()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vt(t=Object(i["v"])()){return/crios\//i.test(t)}function bt(t=Object(i["v"])()){return/iemobile/i.test(t)}function wt(t=Object(i["v"])()){return/android/i.test(t)}function _t(t=Object(i["v"])()){return/blackberry/i.test(t)}function xt(t=Object(i["v"])()){return/webos/i.test(t)}function Tt(t=Object(i["v"])()){return/iphone|ipad|ipod/i.test(t)}function St(t=Object(i["v"])()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Ct(t=Object(i["v"])()){var e;return Tt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function kt(){return Object(i["B"])()&&10===document.documentMode}function Ot(t=Object(i["v"])()){return Tt(t)||wt(t)||xt(t)||_t(t)||/windows phone/i.test(t)||bt(t)}function It(){try{return!(!window||window===window.top)}catch(t){return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,e=[]){let n;switch(t){case"Browser":n=gt(Object(i["v"])());break;case"Worker":n=`${gt(Object(i["v"])())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${r["SDK_VERSION"]}/${s}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nt(this),this.idTokenSubscription=new Nt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=k(e)),this._initializationPromise=this.queue(async()=>{var n;this._deleted||(this.persistenceManager=await ft.create(this,t),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(e),this._deleted||(this._isInitialized=!0)))}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t):void 0}async initializeCurrentUser(t){var e;let n=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,r=null===n||void 0===n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(t);i&&i!==r||!(null===s||void 0===s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(x(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await it(t)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=N()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?Object(i["u"])(t):null;return e&&x(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&x(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(k(t))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new i["b"]("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&k(t)||this._popupRedirectResolver;x(e,this,"argument-error"),this.redirectPersistenceManager=await ft.create(this,[k(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"===typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return x(s,this,"internal-error"),s.then(()=>r(this.currentUser)),"function"===typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Et(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Pt(t){return Object(i["u"])(t)}class Nt{constructor(t){this.auth=t,this.observer=null,this.addObserver=Object(i["n"])(t=>this.observer=t)}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function jt(t,e,n){const i=Pt(t);x(i._canInitEmulator,i,"emulator-config-failed"),x(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Rt(e),{host:o,port:a}=Mt(e),c=null===a?"":":"+a;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||Lt()}function Rt(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Mt(t){const e=Rt(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Dt(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Dt(e)}}}function Dt(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Lt(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return T("not implemented")}_getIdTokenResponse(t){return T("not implemented")}_linkToIdToken(t,e){return T("not implemented")}_getReauthenticationResolver(t){return T("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ut(t,e){return U(t,"POST","/v1/accounts:resetPassword",F(t,e))}async function Bt(t,e){return U(t,"POST","/v1/accounts:update",e)}async function Vt(t,e){return U(t,"POST","/v1/accounts:update",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zt(t,e){return V(t,"POST","/v1/accounts:signInWithPassword",F(t,e))}async function qt(t,e){return U(t,"POST","/v1/accounts:sendOobCode",F(t,e))}async function Wt(t,e){return qt(t,e)}async function Ht(t,e){return qt(t,e)}async function Gt(t,e){return qt(t,e)}async function Kt(t,e){return qt(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $t(t,e){return V(t,"POST","/v1/accounts:signInWithEmailLink",F(t,e))}async function Yt(t,e){return V(t,"POST","/v1/accounts:signInWithEmailLink",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt extends Ft{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Xt(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Xt(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return zt(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return $t(t,{email:this._email,oobCode:this._password});default:y(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Bt(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Yt(t,{idToken:e,email:this._email,oobCode:this._password});default:y(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qt(t,e){return V(t,"POST","/v1/accounts:signInWithIdp",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="http://localhost";class Zt extends Ft{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Zt(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):y("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=s(e,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Zt(n,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const e=this.buildRequest();return Qt(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Qt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Qt(t,e)}buildRequest(){const t={requestUri:Jt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e["id_token"]=this.idToken),this.accessToken&&(e["access_token"]=this.accessToken),this.secret&&(e["oauth_token_secret"]=this.secret),e["providerId"]=this.providerId,this.nonce&&!this.pendingToken&&(e["nonce"]=this.nonce),t.postBody=Object(i["N"])(e)}return t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function te(t,e){return U(t,"POST","/v1/accounts:sendVerificationCode",F(t,e))}async function ee(t,e){return V(t,"POST","/v1/accounts:signInWithPhoneNumber",F(t,e))}async function ne(t,e){const n=await V(t,"POST","/v1/accounts:signInWithPhoneNumber",F(t,e));if(n.temporaryProof)throw W(t,"account-exists-with-different-credential",n);return n}const ie={["USER_NOT_FOUND"]:"user-not-found"};async function re(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return V(t,"POST","/v1/accounts:signInWithPhoneNumber",F(t,n),ie)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se extends Ft{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new se({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new se({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return ee(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return ne(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return re(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new se({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ae(t){const e=Object(i["O"])(Object(i["s"])(t))["link"],n=e?Object(i["O"])(Object(i["s"])(e))["deep_link_id"]:null,r=Object(i["O"])(Object(i["s"])(t))["deep_link_id"],s=r?Object(i["O"])(Object(i["s"])(r))["link"]:null;return s||r||n||e||t}class ce{constructor(t){var e,n,r,s,o,a;const c=Object(i["O"])(Object(i["s"])(t)),l=null!==(e=c["apiKey"])&&void 0!==e?e:null,h=null!==(n=c["oobCode"])&&void 0!==n?n:null,u=oe(null!==(r=c["mode"])&&void 0!==r?r:null);x(l&&h&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=h,this.continueUrl=null!==(s=c["continueUrl"])&&void 0!==s?s:null,this.languageCode=null!==(o=c["languageCode"])&&void 0!==o?o:null,this.tenantId=null!==(a=c["tenantId"])&&void 0!==a?a:null}static parseLink(t){const e=ae(t);try{return new ce(e)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class le{constructor(){this.providerId=le.PROVIDER_ID}static credential(t,e){return Xt._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=ce.parseLink(e);return x(n,"argument-error"),Xt._fromEmailAndCode(t,n.code,n.tenantId)}}le.PROVIDER_ID="password",le.EMAIL_PASSWORD_SIGN_IN_METHOD="password",le.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class he{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue extends he{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class de extends ue{static credentialFromJSON(t){const e="string"===typeof t?JSON.parse(t):t;return x("providerId"in e&&"signInMethod"in e,"argument-error"),Zt._fromParams(e)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return x(t.idToken||t.accessToken,"argument-error"),Zt._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return de.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return de.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=t;if(!n&&!i&&!e&&!r)return null;if(!o)return null;try{return new de(o)._credential({idToken:e,accessToken:n,nonce:s,pendingToken:r})}catch(a){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe extends ue{constructor(){super("facebook.com")}static credential(t){return Zt._fromParams({providerId:pe.PROVIDER_ID,signInMethod:pe.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return pe.credentialFromTaggedObject(t)}static credentialFromError(t){return pe.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pe.credential(t.oauthAccessToken)}catch(e){return null}}}pe.FACEBOOK_SIGN_IN_METHOD="facebook.com",pe.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fe extends ue{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Zt._fromParams({providerId:fe.PROVIDER_ID,signInMethod:fe.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return fe.credentialFromTaggedObject(t)}static credentialFromError(t){return fe.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return fe.credential(e,n)}catch(i){return null}}}fe.GOOGLE_SIGN_IN_METHOD="google.com",fe.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ge extends ue{constructor(){super("github.com")}static credential(t){return Zt._fromParams({providerId:ge.PROVIDER_ID,signInMethod:ge.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ge.credentialFromTaggedObject(t)}static credentialFromError(t){return ge.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ge.credential(t.oauthAccessToken)}catch(e){return null}}}ge.GITHUB_SIGN_IN_METHOD="github.com",ge.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const me="http://localhost";class ye extends Ft{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){const e=this.buildRequest();return Qt(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Qt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Qt(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i,pendingToken:r}=e;return n&&i&&r&&n===i?new ye(n,r):null}static _create(t,e){return new ye(t,e)}buildRequest(){return{requestUri:me,returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ve extends ue{constructor(){super("twitter.com")}static credential(t,e){return Zt._fromParams({providerId:ve.PROVIDER_ID,signInMethod:ve.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return ve.credentialFromTaggedObject(t)}static credentialFromError(t){return ve.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return ve.credential(e,n)}catch(i){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function be(t,e){return V(t,"POST","/v1/accounts:signUp",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ve.TWITTER_SIGN_IN_METHOD="twitter.com",ve.PROVIDER_ID="twitter.com";class we{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await ht._fromIdTokenResponse(t,n,i),s=_e(n),o=new we({user:r,providerId:s,_tokenResponse:n,operationType:e});return o}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=_e(n);return new we({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function _e(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xe(t){var e;const n=Pt(t);if(await n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new we({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await be(n,{returnSecureToken:!0}),r=await we._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te extends i["c"]{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Te.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Te(t,e,n,i)}}function Se(t,e,n,i){const r="reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t);return r.catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Te._fromErrorAndOperation(t,n,e,i);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t){return new Set(t.map(({providerId:t})=>t).filter(t=>!!t))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ke(t,e){const n=Object(i["u"])(t);await Ie(!0,n,e);const{providerUserInfo:r}=await G(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=Ce(r||[]);return n.providerData=n.providerData.filter(t=>s.has(t.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Oe(t,e,n=!1){const i=await Z(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return we._forOperation(t,"link",i)}async function Ie(t,e,n){await it(e);const i=Ce(e.providerData),r=!1===t?"provider-already-linked":"no-such-provider";x(i.has(n)===t,e.auth,r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ee(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await Z(t,Se(i,r,e,t),n);x(s.idToken,i,"internal-error");const o=Q(s.idToken);x(o,i,"internal-error");const{sub:a}=o;return x(t.uid===a,i,"user-mismatch"),we._forOperation(t,r,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&y(i,"user-mismatch"),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ae(t,e,n=!1){const i="signIn",r=await Se(t,i,e),s=await we._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Pe(t,e){return Ae(Pt(t),e)}async function Ne(t,e){const n=Object(i["u"])(t);return await Ie(!1,n,e.providerId),Oe(n,e)}async function je(t,e){return Ee(Object(i["u"])(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Re(t,e){return V(t,"POST","/v1/accounts:signInWithCustomToken",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Me(t,e){const n=Pt(t),i=await Re(n,{token:e,returnSecureToken:!0}),r=await we._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?Le._fromServerResponse(t,e):y(t,"internal-error")}}class Le extends De{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new Le(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e,n){var i;x((null===(i=n.url)||void 0===i?void 0:i.length)>0,t,"invalid-continue-uri"),x("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(x(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(x(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ue(t,e,n){const r=Object(i["u"])(t),s={requestType:"PASSWORD_RESET",email:e};n&&Fe(r,s,n),await Ht(r,s)}async function Be(t,e,n){await Ut(Object(i["u"])(t),{oobCode:e,newPassword:n})}async function Ve(t,e){await Vt(Object(i["u"])(t),{oobCode:e})}async function ze(t,e){const n=Object(i["u"])(t),r=await Ut(n,{oobCode:e}),s=r.requestType;switch(x(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":x(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":x(r.mfaInfo,n,"internal-error");default:x(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=De._fromServerResponse(Pt(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function qe(t,e){const{data:n}=await ze(Object(i["u"])(t),e);return n.email}async function We(t,e,n){const i=Pt(t),r=await be(i,{returnSecureToken:!0,email:e,password:n}),s=await we._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(s.user),s}function He(t,e,n){return Pe(Object(i["u"])(t),le.credential(e,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ge(t,e,n){const r=Object(i["u"])(t),s={requestType:"EMAIL_SIGNIN",email:e};x(n.handleCodeInApp,r,"argument-error"),n&&Fe(r,s,n),await Gt(r,s)}function Ke(t,e){const n=ce.parseLink(e);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}async function $e(t,e,n){const r=Object(i["u"])(t),s=le.credentialWithLink(e,n||I());return x(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Pe(r,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ye(t,e){return U(t,"POST","/v1/accounts:createAuthUri",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xe(t,e){const n=E()?I():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await Ye(Object(i["u"])(t),r);return s||[]}async function Qe(t,e){const n=Object(i["u"])(t),r=await t.getIdToken(),s={requestType:"VERIFY_EMAIL",idToken:r};e&&Fe(n.auth,s,e);const{email:o}=await Wt(n.auth,s);o!==t.email&&await t.reload()}async function Je(t,e,n){const r=Object(i["u"])(t),s=await t.getIdToken(),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:s,newEmail:e};n&&Fe(r.auth,o,n);const{email:a}=await Kt(r.auth,o);a!==t.email&&await t.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ze(t,e){return U(t,"POST","/v1/accounts:update",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tn(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const r=Object(i["u"])(t),s=await r.getIdToken(),o={idToken:s,displayName:e,photoUrl:n,returnSecureToken:!0},a=await Z(r,Ze(r.auth,o));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:t})=>"password"===t);c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function en(t,e){return rn(Object(i["u"])(t),e,null)}function nn(t,e){return rn(Object(i["u"])(t),null,e)}async function rn(t,e,n){const{auth:i}=t,r=await t.getIdToken(),s={idToken:r,returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Z(t,Bt(i,s));await t._updateTokensIfNecessary(o,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!i&&(null===t||void 0===t?void 0:t.idToken)){const i=null===(n=null===(e=Q(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n["sign_in_provider"];if(i){const t="anonymous"!==i&&"custom"!==i?i:null;return new on(s,t)}}if(!i)return null;switch(i){case"facebook.com":return new cn(s,r);case"github.com":return new ln(s,r);case"google.com":return new hn(s,r);case"twitter.com":return new un(s,r,t.screenName||null);case"custom":case"anonymous":return new on(s,null);default:return new on(s,i,r)}}class on{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class an extends on{constructor(t,e,n,i){super(t,e,n),this.username=i}}class cn extends on{constructor(t,e){super(t,"facebook.com",e)}}class ln extends an{constructor(t,e){super(t,"github.com",e,"string"===typeof(null===e||void 0===e?void 0:e.login)?null===e||void 0===e?void 0:e.login:null)}}class hn extends on{constructor(t,e){super(t,"google.com",e)}}class un extends an{constructor(t,e,n){super(t,"twitter.com",e,n)}}function dn(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:sn(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,e){this.type=t,this.credential=e}static _fromIdtoken(t){return new pn("enroll",t)}static _fromMfaPendingCredential(t){return new pn("signin",t)}toJSON(){const t="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[t]:this.credential}}}static fromJSON(t){var e,n;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return pn._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return pn._fromIdtoken(t.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=Pt(t),i=e.customData._serverResponse,r=(i.mfaInfo||[]).map(t=>De._fromServerResponse(n,t));x(i.mfaPendingCredential,n,"internal-error");const s=pn._fromMfaPendingCredential(i.mfaPendingCredential);return new fn(s,r,async t=>{const r=await t._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(e.operationType){case"signIn":const t=await we._fromIdTokenResponse(n,e.operationType,o);return await n._updateCurrentUser(t.user),t;case"reauthenticate":return x(e.user,n,"internal-error"),we._forOperation(e.user,e.operationType,o);default:y(n,"internal-error")}})}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function gn(t,e){var n;const r=Object(i["u"])(t),s=e;return x(e.customData.operationType,r,"argument-error"),x(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),fn._fromError(r,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,e){return U(t,"POST","/v2/accounts/mfaEnrollment:start",F(t,e))}function yn(t,e){return U(t,"POST","/v2/accounts/mfaEnrollment:finalize",F(t,e))}function vn(t,e){return U(t,"POST","/v2/accounts/mfaEnrollment:withdraw",F(t,e))}class bn{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map(e=>De._fromServerResponse(t.auth,e)))})}static _fromUser(t){return new bn(t)}async getSession(){return pn._fromIdtoken(await this.user.getIdToken())}async enroll(t,e){const n=t,i=await this.getSession(),r=await Z(this.user,n._process(this.user.auth,i,e));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(t){const e="string"===typeof t?t:t.uid,n=await this.user.getIdToken(),i=await Z(this.user,vn(this.user.auth,{idToken:n,mfaEnrollmentId:e}));this.enrolledFactors=this.enrolledFactors.filter(({uid:t})=>t!==e),await this.user._updateTokensIfNecessary(i);try{await this.user.reload()}catch(r){if("auth/user-token-expired"!==r.code)throw r}}}const wn=new WeakMap;function _n(t){const e=Object(i["u"])(t);return wn.has(e)||wn.set(e,bn._fromUser(e)),wn.get(e)}const xn="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(xn,"1"),this.storage.removeItem(xn),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){const t=Object(i["v"])();return yt(t)||Tt(t)}const Cn=1e3,kn=10;class On extends Tn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Sn()&&It(),this.fallbackToPolling=Ot(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys((t,e,n)=>{this.notifyListeners(t,n)});const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);kt()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,kn):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},Cn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}On.type="LOCAL";const In=On;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends Tn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}En.type="SESSION";const An=En;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t){return Promise.all(t.map(async t=>{try{const e=await t;return{fulfilled:!0,value:e}}catch(e){return{fulfilled:!1,reason:e}}}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(e=>e.isListeningto(t));if(e)return e;const n=new Nn(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async t=>t(e.origin,r)),a=await Pn(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function jn(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.receivers=[];class Rn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((o,a)=>{const c=jn("",20);i.port1.start();const l=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function Dn(t){Mn().location.href=t}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return"undefined"!==typeof Mn()["WorkerGlobalScope"]&&"function"===typeof Mn()["importScripts"]}async function Fn(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{const t=await navigator.serviceWorker.ready;return t.active}catch(t){return null}}function Un(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}function Bn(){return Ln()?self:null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="firebaseLocalStorageDb",zn=1,qn="firebaseLocalStorage",Wn="fbase_key";class Hn{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Gn(t,e){return t.transaction([qn],e?"readwrite":"readonly").objectStore(qn)}function Kn(){const t=indexedDB.deleteDatabase(Vn);return new Hn(t).toPromise()}function $n(){const t=indexedDB.open(Vn,zn);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const e=t.result;try{e.createObjectStore(qn,{keyPath:Wn})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(qn)?e(n):(n.close(),await Kn(),e(await $n()))})})}async function Yn(t,e,n){const i=Gn(t,!0).put({[Wn]:e,value:n});return new Hn(i).toPromise()}async function Xn(t,e){const n=Gn(t,!1).get(e),i=await new Hn(n).toPromise();return void 0===i?null:i.value}function Qn(t,e){const n=Gn(t,!0).delete(e);return new Hn(n).toPromise()}const Jn=800,Zn=3;class ti{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await $n()),this.db}async _withRetries(t){let e=0;while(1)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>Zn)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ln()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nn._getInstance(Bn()),this.receiver._subscribe("keyChanged",async(t,e)=>{const n=await this._poll();return{keyProcessed:n.includes(e.key)}}),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await Fn(),!this.activeServiceWorker)return;this.sender=new Rn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&Un()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await $n();return await Yn(t,xn,"1"),await Qn(t,xn),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yn(n,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(e=>Xn(e,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Qn(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(t=>{const e=Gn(t,!1).getAll();return new Hn(e).toPromise()});if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ti.type="LOCAL";const ei=ti;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t,e){return U(t,"POST","/v2/accounts/mfaSignIn:start",F(t,e))}function ii(t,e){return U(t,"POST","/v2/accounts/mfaSignIn:finalize",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ri(t){return(await U(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}function oi(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=v("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",si().appendChild(i)})}function ai(t){return`__${t}${Math.floor(1e6*Math.random())}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=500,li=6e4,hi=1e12;class ui{constructor(t){this.auth=t,this.counter=hi,this._widgets=new Map}render(t,e){const n=this.counter;return this._widgets.set(n,new di(t,this.auth.name,e||{})),this.counter++,n}reset(t){var e;const n=t||hi;null===(e=this._widgets.get(n))||void 0===e||e.delete(),this._widgets.delete(n)}getResponse(t){var e;const n=t||hi;return(null===(e=this._widgets.get(n))||void 0===e?void 0:e.getResponse())||""}async execute(t){var e;const n=t||hi;return null===(e=this._widgets.get(n))||void 0===e||e.execute(),""}}class di{constructor(t,e,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"===typeof t?document.getElementById(t):t;x(i,"argument-error",{appName:e}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=pi(50);const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(n){}this.isVisible&&this.execute()},li)},ci))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function pi(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=ai("rcb"),gi=new j(3e4,6e4),mi="https://www.google.com/recaptcha/api.js?";class yi{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Mn().grecaptcha}load(t,e=""){return x(vi(e),t,"argument-error"),this.shouldResolveImmediately(e)?Promise.resolve(Mn().grecaptcha):new Promise((n,r)=>{const s=Mn().setTimeout(()=>{r(v(t,"network-request-failed"))},gi.get());Mn()[fi]=()=>{Mn().clearTimeout(s),delete Mn()[fi];const i=Mn().grecaptcha;if(!i)return void r(v(t,"internal-error"));const o=i.render;i.render=(t,e)=>{const n=o(t,e);return this.counter++,n},this.hostLanguage=e,n(i)};const o=`${mi}?${Object(i["N"])({onload:fi,render:"explicit",hl:e})}`;oi(o).catch(()=>{clearTimeout(s),r(v(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){return!!Mn().grecaptcha&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function vi(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class bi{async load(t){return new ui(t)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="recaptcha",_i={theme:"light",type:"image"};class xi{constructor(t,e=Object.assign({},_i),n){this.parameters=e,this.type=wi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pt(n),this.isInvisible="invisible"===this.parameters.size,x("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"===typeof t?document.getElementById(t):t;x(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bi:new yi,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha(),n=e.getResponse(t);return n||new Promise(n=>{const i=t=>{t&&(this.tokenChangeListeners.delete(i),n(t))};this.tokenChangeListeners.add(i),this.isInvisible&&e.execute(t)})}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){x(!this.parameters.sitekey,this.auth,"argument-error"),x(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),x("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach(t=>t(e)),"function"===typeof t)t(e);else if("string"===typeof t){const n=Mn()[t];"function"===typeof n&&n(e)}}}assertNotDestroyed(){x(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){x(E()&&!Ln(),this.auth,"internal-error"),await Ti(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await ri(this.auth);x(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return x(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function Ti(){let t=null;return new Promise(e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=se._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function Ci(t,e,n){const r=Pt(t),s=await Ii(r,e,Object(i["u"])(n));return new Si(s,t=>Pe(r,t))}async function ki(t,e,n){const r=Object(i["u"])(t);await Ie(!1,r,"phone");const s=await Ii(r.auth,e,Object(i["u"])(n));return new Si(s,t=>Ne(r,t))}async function Oi(t,e,n){const r=Object(i["u"])(t),s=await Ii(r.auth,e,Object(i["u"])(n));return new Si(s,t=>je(r,t))}async function Ii(t,e,n){var i;const r=await n.verify();try{let s;if(x("string"===typeof r,t,"argument-error"),x(n.type===wi,t,"argument-error"),s="string"===typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){x("enroll"===e.type,t,"internal-error");const n=await mn(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{x("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;x(n,t,"missing-multi-factor-info");const o=await ni(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await te(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}async function Ei(t,e){await Oe(Object(i["u"])(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t){this.providerId=Ai.PROVIDER_ID,this.auth=Pt(t)}verifyPhoneNumber(t,e){return Ii(this.auth,t,Object(i["u"])(e))}static credential(t,e){return se._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Ai.credentialFromTaggedObject(e)}static credentialFromError(t){return Ai.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?se._fromTokenResponse(e,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pi(t,e){return e?k(e):(x(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai.PROVIDER_ID="phone",Ai.PHONE_SIGN_IN_METHOD="phone";class Ni extends Ft{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qt(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Qt(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Qt(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function ji(t){return Ae(t.auth,new Ni(t),t.bypassAuthState)}function Ri(t){const{auth:e,user:n}=t;return x(n,e,"internal-error"),Ee(n,new Ni(t),t.bypassAuthState)}async function Mi(t){const{auth:e,user:n}=t;return x(n,e,"internal-error"),Oe(n,new Ni(t),t.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ji;case"linkViaPopup":case"linkViaRedirect":return Mi;case"reauthViaPopup":case"reauthViaRedirect":return Ri;default:y(this.auth,"internal-error")}}resolve(t){S(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){S(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new j(2e3,1e4);async function Fi(t,e,n){const i=Pt(t);w(t,e,he);const r=Pi(i,n),s=new Vi(i,"signInViaPopup",e,r);return s.executeNotNull()}async function Ui(t,e,n){const r=Object(i["u"])(t);w(r.auth,e,he);const s=Pi(r.auth,n),o=new Vi(r.auth,"reauthViaPopup",e,s,r);return o.executeNotNull()}async function Bi(t,e,n){const r=Object(i["u"])(t);w(r.auth,e,he);const s=Pi(r.auth,n),o=new Vi(r.auth,"linkViaPopup",e,s,r);return o.executeNotNull()}class Vi extends Di{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return x(t,this.auth,"internal-error"),t}async onExecution(){S(1===this.filter.length,"Popup operations only handle one event");const t=jn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(v(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(v(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(v(this.auth,"popup-closed-by-user"))},2e3):this.pollId=window.setTimeout(t,Li.get())};t()}}Vi.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zi="pendingRedirect",qi=new Map;class Wi extends Di{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=qi.get(this.auth._key());if(!t){try{const e=await Hi(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}qi.set(this.auth._key(),t)}return this.bypassAuthState||qi.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Hi(t,e){const n=Yi(e),i=$i(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}async function Gi(t,e){return $i(t)._set(Yi(e),"true")}function Ki(){qi.clear()}function $i(t){return k(t._redirectPersistence)}function Yi(t){return pt(zi,t.config.apiKey,t.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t,e,n){return Qi(t,e,n)}async function Qi(t,e,n){const i=Pt(t);w(t,e,he);const r=Pi(i,n);return await Gi(r,i),r._openRedirect(i,e,"signInViaRedirect")}function Ji(t,e,n){return Zi(t,e,n)}async function Zi(t,e,n){const r=Object(i["u"])(t);w(r.auth,e,he);const s=Pi(r.auth,n);await Gi(s,r.auth);const o=await rr(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",o)}function tr(t,e,n){return er(t,e,n)}async function er(t,e,n){const r=Object(i["u"])(t);w(r.auth,e,he);const s=Pi(r.auth,n);await Ie(!1,r,e.providerId),await Gi(s,r.auth);const o=await rr(r);return s._openRedirect(r.auth,e,"linkViaRedirect",o)}async function nr(t,e){return await Pt(t)._initializationPromise,ir(t,e,!1)}async function ir(t,e,n=!1){const i=Pt(t),r=Pi(i,e),s=new Wi(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function rr(t){const e=jn(t.uid+":::");return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=6e5;class or{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!lr(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!cr(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(v(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=sr&&this.cachedEventUids.clear(),this.cachedEventUids.has(ar(t))}saveEventToCache(t){this.cachedEventUids.add(ar(t)),this.lastProcessedEventTime=Date.now()}}function ar(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(t=>t).join("-")}function cr({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null===e||void 0===e?void 0:e.code)}function lr(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cr(t);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hr(t,e={}){return U(t,"GET","/v1/projects",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dr=/^https?/;async function pr(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hr(t);for(const i of e)try{if(fr(i))return}catch(n){}y(t,"unauthorized-domain")}function fr(t){const e=I(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!dr.test(n))return!1;if(ur.test(t))return i===t;const r=t.replace(/\./g,"\\."),s=new RegExp("^(.+\\."+r+"|"+r+")$","i");return s.test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new j(3e4,6e4);function mr(){const t=Mn().___jsl;if(null===t||void 0===t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function yr(t){return new Promise((e,n)=>{var i,r,s;function o(){mr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mr(),n(v(t,"network-request-failed"))},timeout:gr.get()})}if(null===(r=null===(i=Mn().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Mn().gapi)||void 0===s?void 0:s.load)){const e=ai("iframefcb");return Mn()[e]=()=>{gapi.load?o():n(v(t,"network-request-failed"))},oi("https://apis.google.com/js/api.js?onload="+e)}o()}}).catch(t=>{throw vr=null,t})}let vr=null;function br(t){return vr=vr||yr(t),vr}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new j(5e3,15e3),_r="__/auth/iframe",xr="emulator/auth/iframe",Tr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true"},Sr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cr(t){const e=t.config;x(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?R(e,xr):`https://${t.config.authDomain}/${_r}`,s={apiKey:e.apiKey,appName:t.name,v:r["SDK_VERSION"]},o=Sr.get(t.config.apiHost);o&&(s.eid=o);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${Object(i["N"])(s).slice(1)}`}async function kr(t){const e=await br(t),n=Mn().gapi;return x(n,t,"internal-error"),e.open({where:document.body,url:Cr(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tr,dontclear:!0},e=>new Promise(async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=v(t,"network-request-failed"),s=Mn().setTimeout(()=>{i(r)},wr.get());function o(){Mn().clearTimeout(s),n(e)}e.ping(o).then(o,()=>{i(r)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ir=500,Er=600,Ar="_blank",Pr="http://localhost";class Nr{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function jr(t,e,n,r=Ir,s=Er){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Or),{width:r.toString(),height:s.toString(),top:o,left:a}),h=Object(i["v"])().toLowerCase();n&&(c=vt(h)?Ar:n),mt(h)&&(e=e||Pr,l.scrollbars="yes");const u=Object.entries(l).reduce((t,[e,n])=>`${t}${e}=${n},`,"");if(Ct(h)&&"_self"!==c)return Rr(e||"",c),new Nr(null);const d=window.open(e||"",c,u);x(d,t,"popup-blocked");try{d.focus()}catch(p){}return new Nr(d)}function Rr(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="__/auth/handler",Dr="emulator/auth/handler";function Lr(t,e,n,s,o,a){x(t.config.authDomain,t,"auth-domain-config-required"),x(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:r["SDK_VERSION"],eventId:o};if(e instanceof he){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",Object(i["A"])(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))c[t]=e}if(e instanceof ue){const t=e.getScopes().filter(t=>""!==t);t.length>0&&(c.scopes=t.join(","))}t.tenantId&&(c.tid=t.tenantId);const l=c;for(const i of Object.keys(l))void 0===l[i]&&delete l[i];return`${Fr(t)}?${Object(i["N"])(l).slice(1)}`}function Fr({config:t}){return t.emulator?R(t,Dr):`https://${t.authDomain}/${Mr}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="webStorageSupport";class Br{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=An,this._completeRedirectFn=ir}async _openPopup(t,e,n,i){var r;S(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const s=Lr(t,e,n,I(),i);return jr(t,s,jn())}async _openRedirect(t,e,n,i){return await this._originValidation(t),Dn(Lr(t,e,n,I(),i)),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(S(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n}async initAndGetManager(t){const e=await kr(t),n=new or(t);return e.register("authEvent",e=>{x(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");const i=n.onEvent(e.authEvent);return{status:i?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){const n=this.iframes[t._key()];n.send(Ur,{type:Ur},n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[Ur];void 0!==r&&e(!!r),y(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=pr(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Ot()||yt()||Tt()}}const Vr=Br;class zr{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return T("unexpected MultiFactorSessionType")}}}class qr extends zr{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new qr(t)}_finalizeEnroll(t,e,n){return yn(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return ii(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Wr{constructor(){}static assertion(t){return qr._fromCredential(t)}}Wr.FACTOR_ID="phone";var Hr="@firebase/auth",Gr="0.19.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Kr{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;const e=await this.auth.currentUser.getIdToken(t);return{accessToken:e}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Yr(t){Object(r["_registerComponent"])(new a["a"]("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:s}=i.options;return(e=>{x(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),x(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});const i={apiKey:r,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Et(t)},o=new At(e,i);return O(o,n),o})(i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{const i=t.getProvider("auth-internal");i.initialize()})),Object(r["_registerComponent"])(new a["a"]("auth-internal",t=>{const e=Pt(t.getProvider("auth").getImmediate());return(t=>new Kr(t))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Object(r["registerVersion"])(Hr,Gr,$r(t)),Object(r["registerVersion"])(Hr,Gr,"esm2017")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xr(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr("Browser");const Qr=2e3;async function Jr(t,e,n){var i;const{BuildInfo:r}=Xr();S(e.sessionId,"AuthEvent did not contain a session ID");const s=await is(e.sessionId),o={};return Tt()?o["ibi"]=r.packageName:wt()?o["apn"]=r.packageName:y(t,"operation-not-supported-in-this-environment"),r.displayName&&(o["appDisplayName"]=r.displayName),o["sessionId"]=s,Lr(t,n,e.type,void 0,null!==(i=e.eventId)&&void 0!==i?i:void 0,o)}async function Zr(t){const{BuildInfo:e}=Xr(),n={};Tt()?n.iosBundleId=e.packageName:wt()?n.androidPackageName=e.packageName:y(t,"operation-not-supported-in-this-environment"),await hr(t,n)}function ts(t){const{cordova:e}=Xr();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,St()?"_blank":"_system","location=yes"),n(r)})})}async function es(t,e,n){const{cordova:i}=Xr();let r=()=>{};try{await new Promise((s,o)=>{let a=null;function c(){var t;s();const e=null===(t=i.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof e&&e(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout(()=>{o(v(t,"redirect-cancelled-by-user"))},Qr))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}e.addPassiveListener(c),document.addEventListener("resume",l,!1),wt()&&document.addEventListener("visibilitychange",h,!1),r=()=>{e.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",h,!1),a&&window.clearTimeout(a)}})}finally{r()}}function ns(t){var e,n,i,r,s,o,a,c,l,h;const u=Xr();x("function"===typeof(null===(e=null===u||void 0===u?void 0:u.universalLinks)||void 0===e?void 0:e.subscribe),t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),x("undefined"!==typeof(null===(n=null===u||void 0===u?void 0:u.BuildInfo)||void 0===n?void 0:n.packageName),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),x("function"===typeof(null===(s=null===(r=null===(i=null===u||void 0===u?void 0:u.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===s?void 0:s.openUrl),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),x("function"===typeof(null===(c=null===(a=null===(o=null===u||void 0===u?void 0:u.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),x("function"===typeof(null===(h=null===(l=null===u||void 0===u?void 0:u.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===h?void 0:h.open),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function is(t){const e=rs(t),n=await crypto.subtle.digest("SHA-256",e),i=Array.from(new Uint8Array(n));return i.map(t=>t.toString(16).padStart(2,"0")).join("")}function rs(t){if(S(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=20;class os extends or{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(t=>{this.resolveInialized=t})}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInialized(),this.passiveListeners.forEach(e=>e(t)),super.onEvent(t)}async initialized(){await this.initPromise}}function as(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:us(),postBody:null,tenantId:t.tenantId,error:v(t,"no-auth-event")}}function cs(t,e){return ds()._set(ps(t),e)}async function ls(t){const e=await ds()._get(ps(t));return e&&await ds()._remove(ps(t)),e}function hs(t,e){var n,i;const r=gs(e);if(r.includes("/__/auth/callback")){const e=ms(r),s=e["firebaseError"]?fs(decodeURIComponent(e["firebaseError"])):null,o=null===(i=null===(n=null===s||void 0===s?void 0:s["code"])||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],a=o?v(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}function us(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<ss;n++){const n=Math.floor(Math.random()*e.length);t.push(e.charAt(n))}return t.join("")}function ds(){return k(In)}function ps(t){return pt("authEvent",t.config.apiKey,t.name)}function fs(t){try{return JSON.parse(t)}catch(e){return null}}function gs(t){const e=ms(t),n=e["link"]?decodeURIComponent(e["link"]):void 0,i=ms(n)["link"],r=e["deep_link_id"]?decodeURIComponent(e["deep_link_id"]):void 0,s=ms(r)["link"];return s||r||i||n||t}function ms(t){if(!(null===t||void 0===t?void 0:t.includes("?")))return{};const[e,...n]=t.split("?");return Object(i["O"])(n.join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=500;class vs{constructor(){this._redirectPersistence=An,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ir}async _initialize(t){const e=t._key();let n=this.eventManagers.get(e);return n||(n=new os(t),this.eventManagers.set(e,n),this.attachCallbackListeners(t,n)),n}_openPopup(t){y(t,"operation-not-supported-in-this-environment")}async _openRedirect(t,e,n,i){ns(t);const r=await this._initialize(t);await r.initialized(),r.resetRedirect(),Ki(),await this._originValidation(t);const s=as(t,n,i);await cs(t,s);const o=await Jr(t,s,e),a=await ts(o);return es(t,r,a)}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Zr(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:n,handleOpenURL:i,BuildInfo:r}=Xr(),s=setTimeout(async()=>{await ls(t),e.onEvent(ws())},ys),o=async n=>{clearTimeout(s);const i=await ls(t);let r=null;i&&(null===n||void 0===n?void 0:n["url"])&&(r=hs(i,n["url"])),e.onEvent(r||ws())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=i,c=r.packageName.toLowerCase()+"://";Xr().handleOpenURL=async t=>{if(t.toLowerCase().startsWith(c)&&o({url:t}),"function"===typeof a)try{a(t)}catch(e){console.error(e)}}}}const bs=vs;function ws(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:v("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,e){Pt(t)._logFramework(e)}},"1fd5":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return R})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return J})),n.d(e,"e",(function(){return A})),n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return c})),n.d(e,"i",(function(){return u})),n.d(e,"j",(function(){return l})),n.d(e,"k",(function(){return pt})),n.d(e,"l",(function(){return q})),n.d(e,"m",(function(){return m})),n.d(e,"n",(function(){return Z})),n.d(e,"o",(function(){return d})),n.d(e,"p",(function(){return K})),n.d(e,"q",(function(){return p})),n.d(e,"r",(function(){return rt})),n.d(e,"s",(function(){return Q})),n.d(e,"t",(function(){return P})),n.d(e,"u",(function(){return ft})),n.d(e,"v",(function(){return y})),n.d(e,"w",(function(){return z})),n.d(e,"x",(function(){return w})),n.d(e,"y",(function(){return _})),n.d(e,"z",(function(){return T})),n.d(e,"A",(function(){return H})),n.d(e,"B",(function(){return S})),n.d(e,"C",(function(){return I})),n.d(e,"D",(function(){return v})),n.d(e,"E",(function(){return b})),n.d(e,"F",(function(){return k})),n.d(e,"G",(function(){return x})),n.d(e,"H",(function(){return O})),n.d(e,"I",(function(){return C})),n.d(e,"J",(function(){return V})),n.d(e,"K",(function(){return B})),n.d(e,"L",(function(){return L})),n.d(e,"M",(function(){return G})),n.d(e,"N",(function(){return Y})),n.d(e,"O",(function(){return X})),n.d(e,"P",(function(){return W})),n.d(e,"Q",(function(){return ct})),n.d(e,"R",(function(){return at})),n.d(e,"S",(function(){return F})),n.d(e,"T",(function(){return it})),n.d(e,"U",(function(){return st})),n.d(e,"V",(function(){return ot})),n.d(e,"W",(function(){return E}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},o=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},a=function(t){const e=[];let n=0,i=0;while(n<t.length){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],c=((7&r)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(1023&c))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,c=a?t[r+2]:0,l=e>>2,h=(3&e)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):a(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length,o=s?n[t.charAt(r)]:0;++r;const a=r<t.length,c=a?n[t.charAt(r)]:64;++r;const l=r<t.length,h=l?n[t.charAt(r)]:64;if(++r,null==e||null==o||null==c||null==h)throw Error();const u=e<<2|o>>4;if(i.push(u),64!==c){const t=o<<4&240|c>>2;if(i.push(t),64!==h){const t=c<<6&192|h;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){const e=o(t);return c.encodeByteArray(e,!0)},h=function(t){return l(t).replace(/\./g,"")},u=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function d(t){return p(void 0,t)}function p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&f(n)&&(t[n]=p(t[n],e[n]));return t}function f(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/"+i,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[h(JSON.stringify(n)),h(JSON.stringify(o)),a].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function v(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function b(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}function w(){return"object"===typeof self&&self.self===self}function _(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function x(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function T(){return y().indexOf("Electron/")>=0}function S(){const t=y();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return y().indexOf("MSAppHost/")>=0}function k(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function O(){return!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){return"object"===typeof indexedDB}function E(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})}function A(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}function P(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N="FirebaseError";class j extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=N,Object.setPrototypeOf(this,j.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?M(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`,a=new j(i,o,n);return a}}function M(t,e){return t.replace(D,(t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`})}const D=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(t){return JSON.parse(t)}function F(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=L(u(s[0])||""),n=L(u(s[1])||""),r=s[2],i=n["d"]||{},delete n["d"]}catch(s){}return{header:e,claims:n,data:i,signature:r}},B=function(t){const e=U(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e["iat"]:null},V=function(t){const e=U(t),n=e.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},z=function(t){const e=U(t).claims;return"object"===typeof e&&!0===e["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function W(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function H(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function G(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function K(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if($(n)&&$(s)){if(!K(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function $(t){return null!==t&&"object"===typeof t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function X(t){const e={},n=t.replace(/^\?/,"").split("&");return n.forEach(t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}}),e}function Q(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const n=this.W_;if("string"===typeof t)for(let h=0;h<16;h++)n[h]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let h=0;h<16;h++)n[h]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let h=16;h<80;h++){const t=n[h-3]^n[h-8]^n[h-14]^n[h-16];n[h]=4294967295&(t<<1|t>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(let h=0;h<80;h++){h<40?h<20?(i=c^o&(a^c),r=1518500249):(i=o^a^c,r=1859775393):h<60?(i=o&a|c&(o|a),r=2400959708):(i=o^a^c,r=3395469782);const t=(s<<5|s>>>27)+i+l+r+n[h]&4294967295;l=c,c=a,a=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const n=e-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;while(i<e){if(0===s)while(i<=n)this.compress_(t,i),i+=this.blockSize;if("string"===typeof t){while(i<e)if(r[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else while(i<e)if(r[s]=t[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let e=24;e>=0;e-=8)t[n]=this.chain_[i]>>e&255,++n;return t}}function Z(t,e){const n=new tt(t,e);return n.subscribe.bind(n)}class tt{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(t=>{this.error(t)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=et(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=nt),void 0===i.error&&(i.error=nt),void 0===i.complete&&(i.complete=nt);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}}),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function et(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}function nt(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it=function(t,e,n,i){let r;if(i<e?r="at least "+e:i>n&&(r=0===n?"none":"no more than "+n),r){const e=t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".";throw new Error(e)}};function rt(t,e){return`${t} failed: ${e} argument `}function st(t,e,n,i){if((!i||n)&&"function"!==typeof n)throw new Error(rt(t,e)+"must be a valid function.")}function ot(t,e,n,i){if((!i||n)&&("object"!==typeof n||null===n))throw new Error(rt(t,e)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s>=55296&&s<=56319){const e=s-55296;i++,r(i<t.length,"Surrogate pair missing trail surrogate.");const n=t.charCodeAt(i)-56320;s=65536+(e<<10)+n}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=63&s|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=63&s|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=63&s|128)}return e},ct=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e},lt=1e3,ht=2,ut=144e5,dt=.5;function pt(t,e=lt,n=ht){const i=e*Math.pow(n,t),r=Math.round(dt*i*(Math.random()-.5)*2);return Math.min(ut,i+r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ft(t){return t&&t._delegate?t._delegate:t}}).call(this,n("c8ba"))},2266:function(t,e,n){var i=n("825a"),r=n("e95a"),s=n("50c4"),o=n("0366"),a=n("9a1f"),c=n("35a1"),l=n("2a62"),h=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var u,d,p,f,g,m,y,v=n&&n.that,b=!(!n||!n.AS_ENTRIES),w=!(!n||!n.IS_ITERATOR),_=!(!n||!n.INTERRUPTED),x=o(e,v,1+b+_),T=function(t){return u&&l(u,"normal",t),new h(!0,t)},S=function(t){return b?(i(t),_?x(t[0],t[1],T):x(t[0],t[1])):_?x(t,T):x(t)};if(w)u=t;else{if(d=c(t),!d)throw TypeError(String(t)+" is not iterable");if(r(d)){for(p=0,f=s(t.length);f>p;p++)if(g=S(t[p]),g&&g instanceof h)return g;return new h(!1)}u=a(t,d)}m=u.next;while(!(y=m.call(u)).done){try{g=S(y.value)}catch(C){l(u,"throw",C)}if("object"==typeof g&&g&&g instanceof h)return g}return new h(!1)}},"23cb":function(t,e,n){var i=n("a691"),r=Math.max,s=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):s(n,e)}},"23e7":function(t,e,n){var i=n("da84"),r=n("06cf").f,s=n("9112"),o=n("6eeb"),a=n("ce4e"),c=n("e893"),l=n("94ca");t.exports=function(t,e){var n,h,u,d,p,f,g=t.target,m=t.global,y=t.stat;if(h=m?i:y?i[g]||a(g,{}):(i[g]||{}).prototype,h)for(u in e){if(p=e[u],t.noTargetGet?(f=r(h,u),d=f&&f.value):d=h[u],n=l(m?u:g+(y?".":"#")+u,t.forced),!n&&void 0!==d){if(typeof p===typeof d)continue;c(p,d)}(t.sham||d&&d.sham)&&s(p,"sham",!0),o(h,u,p,t)}}},"241c":function(t,e,n){var i=n("ca84"),r=n("7839"),s=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,s)}},2532:function(t,e,n){"use strict";var i=n("23e7"),r=n("5a34"),s=n("1d80"),o=n("577e"),a=n("ab13");i({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~o(s(this)).indexOf(o(r(t)),arguments.length>1?arguments[1]:void 0)}})},"256a":function(t,e,n){"use strict";n("5994")},"25f0":function(t,e,n){"use strict";var i=n("5e77").PROPER,r=n("6eeb"),s=n("825a"),o=n("577e"),a=n("d039"),c=n("ad6d"),l="toString",h=RegExp.prototype,u=h[l],d=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),p=i&&u.name!=l;(d||p)&&r(RegExp.prototype,l,(function(){var t=s(this),e=o(t.source),n=t.flags,i=o(void 0===n&&t instanceof RegExp&&!("flags"in h)?c.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},2626:function(t,e,n){"use strict";var i=n("d066"),r=n("9bf2"),s=n("b622"),o=n("83ab"),a=s("species");t.exports=function(t){var e=i(t),n=r.f;o&&e&&!e[a]&&n(e,a,{configurable:!0,get:function(){return this}})}},"2a62":function(t,e,n){var i=n("825a"),r=n("dc4a");t.exports=function(t,e,n){var s,o;i(t);try{if(s=r(t,"return"),!s){if("throw"===e)throw n;return n}s=s.call(t)}catch(a){o=!0,s=a}if("throw"===e)throw n;if(o)throw s;return i(s),n}},"2cf4":function(t,e,n){var i,r,s,o,a=n("da84"),c=n("1626"),l=n("d039"),h=n("0366"),u=n("1be4"),d=n("cc12"),p=n("1cdc"),f=n("605d"),g=a.setImmediate,m=a.clearImmediate,y=a.process,v=a.MessageChannel,b=a.Dispatch,w=0,_={},x="onreadystatechange";try{i=a.location}catch(O){}var T=function(t){if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},S=function(t){return function(){T(t)}},C=function(t){T(t.data)},k=function(t){a.postMessage(String(t),i.protocol+"//"+i.host)};g&&m||(g=function(t){var e=[],n=arguments.length,i=1;while(n>i)e.push(arguments[i++]);return _[++w]=function(){(c(t)?t:Function(t)).apply(void 0,e)},r(w),w},m=function(t){delete _[t]},f?r=function(t){y.nextTick(S(t))}:b&&b.now?r=function(t){b.now(S(t))}:v&&!p?(s=new v,o=s.port2,s.port1.onmessage=C,r=h(o.postMessage,o,1)):a.addEventListener&&c(a.postMessage)&&!a.importScripts&&i&&"file:"!==i.protocol&&!l(k)?(r=k,a.addEventListener("message",C,!1)):r=x in d("script")?function(t){u.appendChild(d("script"))[x]=function(){u.removeChild(this),T(t)}}:function(t){setTimeout(S(t),0)}),t.exports={set:g,clear:m}},"2d00":function(t,e,n){var i,r,s=n("da84"),o=n("342f"),a=s.process,c=s.Deno,l=a&&a.versions||c&&c.version,h=l&&l.v8;h?(i=h.split("."),r=i[0]<4?1:i[0]+i[1]):o&&(i=o.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/),i&&(r=i[1]))),t.exports=r&&+r},"32be":function(t,e,n){"use strict";n.d(e,"a",(function(){return i["a"]}));var i=n("614a"),r=n("5606"),s=n("4fc1"),o=n("1fd5"),a=n("ffa6"),c=n("9dbb");const l="@firebase/installations",h="0.5.2",u=1e4,d="w:"+h,p="FIS_v2",f="https://firebaseinstallations.googleapis.com/v1",g=36e5,m="installations",y="Installations",v={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},b=new o["b"](m,y,v);function w(t){return t instanceof o["c"]&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _({projectId:t}){return`${f}/projects/${t}/installations`}function x(t){return{token:t.token,requestStatus:2,expiresIn:O(t.expiresIn),creationTime:Date.now()}}async function T(t,e){const n=await e.json(),i=n.error;return b.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function S({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function C(t,{refreshToken:e}){const n=S(t);return n.append("Authorization",I(e)),n}async function k(t){const e=await t();return e.status>=500&&e.status<600?t():e}function O(t){return Number(t.replace("s","000"))}function I(t){return`${p} ${t}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E(t,{fid:e}){const n=_(t),i=S(t),r={fid:e,authVersion:p,appId:t.appId,sdkVersion:d},s={method:"POST",headers:i,body:JSON.stringify(r)},o=await k(()=>fetch(n,s));if(o.ok){const t=await o.json(),n={fid:t.fid||e,registrationStatus:2,refreshToken:t.refreshToken,authToken:x(t.authToken)};return n}throw await T("Create Installation",o)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(t){return new Promise(e=>{setTimeout(e,t)})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(t){const e=btoa(String.fromCharCode(...t));return e.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=/^[cdef][\w-]{21}$/,j="";function R(){try{const t=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(t),t[0]=112+t[0]%16;const n=M(t);return N.test(n)?n:j}catch(t){return j}}function M(t){const e=P(t);return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(t){return`${t.appName}!${t.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L=new Map;function F(t,e){const n=D(t);U(n,e),B(n,e)}function U(t,e){const n=L.get(t);if(n)for(const i of n)i(e)}function B(t,e){const n=z();n&&n.postMessage({key:t,fid:e}),q()}let V=null;function z(){return!V&&"BroadcastChannel"in self&&(V=new BroadcastChannel("[Firebase] FID Change"),V.onmessage=t=>{U(t.data.key,t.data.fid)}),V}function q(){0===L.size&&V&&(V.close(),V=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W="firebase-installations-database",H=1,G="firebase-installations-store";let K=null;function $(){return K||(K=Object(c["openDb"])(W,H,t=>{switch(t.oldVersion){case 0:t.createObjectStore(G)}})),K}async function Y(t,e){const n=D(t),i=await $(),r=i.transaction(G,"readwrite"),s=r.objectStore(G),o=await s.get(n);return await s.put(e,n),await r.complete,o&&o.fid===e.fid||F(t,e.fid),e}async function X(t){const e=D(t),n=await $(),i=n.transaction(G,"readwrite");await i.objectStore(G).delete(e),await i.complete}async function Q(t,e){const n=D(t),i=await $(),r=i.transaction(G,"readwrite"),s=r.objectStore(G),o=await s.get(n),a=e(o);return void 0===a?await s.delete(n):await s.put(a,n),await r.complete,!a||o&&o.fid===a.fid||F(t,a.fid),a}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J(t){let e;const n=await Q(t,n=>{const i=Z(n),r=tt(t,i);return e=r.registrationPromise,r.installationEntry});return n.fid===j?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Z(t){const e=t||{fid:R(),registrationStatus:0};return rt(e)}function tt(t,e){if(0===e.registrationStatus){if(!navigator.onLine){const t=Promise.reject(b.create("app-offline"));return{installationEntry:e,registrationPromise:t}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=et(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:nt(t)}:{installationEntry:e}}async function et(t,e){try{const n=await E(t,e);return Y(t,n)}catch(n){throw w(n)&&409===n.customData.serverCode?await X(t):await Y(t,{fid:e.fid,registrationStatus:0}),n}}async function nt(t){let e=await it(t);while(1===e.registrationStatus)await A(100),e=await it(t);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await J(t);return n||e}return e}function it(t){return Q(t,t=>{if(!t)throw b.create("installation-not-found");return rt(t)})}function rt(t){return st(t)?{fid:t.fid,registrationStatus:0}:t}function st(t){return 1===t.registrationStatus&&t.registrationTime+u<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ot({appConfig:t,platformLoggerProvider:e},n){const i=at(t,n),r=C(t,n),s=e.getImmediate({optional:!0});s&&r.append("x-firebase-client",s.getPlatformInfoString());const o={installation:{sdkVersion:d}},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await k(()=>fetch(i,a));if(c.ok){const t=await c.json(),e=x(t);return e}throw await T("Generate Auth Token",c)}function at(t,{fid:e}){return`${_(t)}/${e}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ct(t,e=!1){let n;const i=await Q(t.appConfig,i=>{if(!dt(i))throw b.create("not-registered");const r=i.authToken;if(!e&&pt(r))return i;if(1===r.requestStatus)return n=lt(t,e),i;{if(!navigator.onLine)throw b.create("app-offline");const e=gt(i);return n=ut(t,e),e}}),r=n?await n:i.authToken;return r}async function lt(t,e){let n=await ht(t.appConfig);while(1===n.authToken.requestStatus)await A(100),n=await ht(t.appConfig);const i=n.authToken;return 0===i.requestStatus?ct(t,e):i}function ht(t){return Q(t,t=>{if(!dt(t))throw b.create("not-registered");const e=t.authToken;return mt(e)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function ut(t,e){try{const n=await ot(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Y(t.appConfig,i),n}catch(n){if(!w(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Y(t.appConfig,n)}else await X(t.appConfig);throw n}}function dt(t){return void 0!==t&&2===t.registrationStatus}function pt(t){return 2===t.requestStatus&&!ft(t)}function ft(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+g}function gt(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function mt(t){return 1===t.requestStatus&&t.requestTime+u<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yt(t){const e=t,{installationEntry:n,registrationPromise:i}=await J(e.appConfig);return i?i.catch(console.error):ct(e).catch(console.error),n.fid}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vt(t,e=!1){const n=t;await bt(n.appConfig);const i=await ct(n,e);return i.token}async function bt(t){const{registrationPromise:e}=await J(t);e&&await e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wt(t){if(!t||!t.options)throw _t("App Configuration");if(!t.name)throw _t("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw _t(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function _t(t){return b.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="installations",Tt="installations-internal",St=t=>{const e=t.getProvider("app").getImmediate(),n=wt(e),i=Object(r["_getProvider"])(e,"platform-logger"),s={app:e,appConfig:n,platformLoggerProvider:i,_delete:()=>Promise.resolve()};return s},Ct=t=>{const e=t.getProvider("app").getImmediate(),n=Object(r["_getProvider"])(e,xt).getImmediate(),i={getId:()=>yt(n),getToken:t=>vt(n,t)};return i};function kt(){Object(r["_registerComponent"])(new a["a"](xt,St,"PUBLIC")),Object(r["_registerComponent"])(new a["a"](Tt,Ct,"PRIVATE"))}kt(),Object(r["registerVersion"])(l,h),Object(r["registerVersion"])(l,h,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ot="analytics",It="firebase_id",Et="origin",At=6e4,Pt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nt="https://www.googletagmanager.com/gtag/js",jt=new s["b"]("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Rt(t){return Promise.all(t.map(t=>t.catch(t=>t)))}function Mt(t,e){const n=document.createElement("script");n.src=`${Nt}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function Dt(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Lt(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const t=await Rt(n),i=t.find(t=>t.measurementId===r);i&&await e[i.appId]}}catch(a){jt.error(a)}t("config",r,s)}async function Ft(t,e,n,i,r){try{let s=[];if(r&&r["send_to"]){let t=r["send_to"];Array.isArray(t)||(t=[t]);const i=await Rt(n);for(const n of t){const t=i.find(t=>t.measurementId===n),r=t&&e[t.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){jt.error(s)}}function Ut(t,e,n,i){async function r(r,s,o){try{"event"===r?await Ft(t,e,n,s,o):"config"===r?await Lt(t,e,n,i,s,o):t("set",s)}catch(a){jt.error(a)}}return r}function Bt(t,e,n,i,r){let s=function(...t){window[i].push(arguments)};return window[r]&&"function"===typeof window[r]&&(s=window[r]),window[r]=Ut(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function Vt(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(Nt))return e;return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},qt=new o["b"]("analytics","Analytics",zt),Wt=30,Ht=1e3;class Gt{constructor(t={},e=Ht){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Kt=new Gt;function $t(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Yt(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:$t(i)},s=Pt.replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(a){}throw qt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}async function Xt(t,e=Kt,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw qt.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw qt.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new te;return setTimeout(async()=>{a.abort()},void 0!==n?n:At),Qt({appId:i,apiKey:r,measurementId:s},o,a,e)}async function Qt(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Kt){const{appId:s,measurementId:a}=t;try{await Jt(i,e)}catch(c){if(a)return jt.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+` provided in the "measurementId" field in the local Firebase config. [${c.message}]`),{appId:s,measurementId:a};throw c}try{const e=await Yt(t);return r.deleteThrottleMetadata(s),e}catch(c){if(!Zt(c)){if(r.deleteThrottleMetadata(s),a)return jt.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+` provided in the "measurementId" field in the local Firebase config. [${c.message}]`),{appId:s,measurementId:a};throw c}const e=503===Number(c.customData.httpStatus)?Object(o["k"])(n,r.intervalMillis,Wt):Object(o["k"])(n,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+e,backoffCount:n+1};return r.setThrottleMetadata(s,l),jt.debug(`Calling attemptFetch again in ${e} millis`),Qt(t,l,i,r)}}function Jt(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(qt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Zt(t){if(!(t instanceof o["c"])||!t.customData)return!1;const e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}class te{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ee(){if(!Object(o["C"])())return jt.warn(qt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Object(o["W"])()}catch(t){return jt.warn(qt.create("indexeddb-unavailable",{errorInfo:t}).message),!1}return!0}async function ne(t,e,n,i,r,s,o){var a;const c=Xt(t);c.then(e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&jt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(t=>jt.error(t)),e.push(c);const l=ee().then(t=>t?i.getId():void 0),[h,u]=await Promise.all([c,l]);Vt()||Mt(s,h.measurementId),r("js",new Date);const d=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return d[Et]="firebase",d.update=!0,null!=u&&(d[It]=u),r("config",h.measurementId,d),h.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.app=t}_delete(){return delete re[this.app.options.appId],Promise.resolve()}}let re={},se=[];const oe={};let ae,ce,le="dataLayer",he="gtag",ue=!1;function de(t){if(ue)throw qt.create("already-initialized");t.dataLayerName&&(le=t.dataLayerName),t.gtagName&&(he=t.gtagName)}function pe(){const t=[];if(Object(o["y"])()&&t.push("This is a browser extension environment."),Object(o["e"])()||t.push("Cookies are not available."),t.length>0){const e=t.map((t,e)=>`(${e+1}) ${t}`).join(" "),n=qt.create("invalid-analytics-context",{errorInfo:e});jt.warn(n.message)}}function fe(t,e,n){pe();const i=t.options.appId;if(!i)throw qt.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw qt.create("no-api-key");jt.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=re[i])throw qt.create("already-exists",{id:i});if(!ue){Dt(le);const{wrappedGtag:t,gtagCore:e}=Bt(re,se,oe,le,he);ce=t,ae=e,ue=!0}re[i]=ne(t,se,oe,e,ae,le,n);const r=new ie(t);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ge(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e,s=Object.assign(Object.assign({},i),{send_to:r});t("event",n,s)}}async function me(t,e,n,i){if(i&&i.global)return t("set",{screen_name:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,screen_name:n})}}async function ye(t,e,n,i){if(i&&i.global)return t("set",{user_id:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,user_id:n})}}async function ve(t,e,n,i){if(i&&i.global){const e={};for(const t of Object.keys(n))e["user_properties."+t]=n[t];return t("set",e),Promise.resolve()}{const i=await e;t("config",i,{update:!0,user_properties:n})}}async function be(t,e){const n=await t;window["ga-disable-"+n]=!e}async function we(){if(Object(o["y"])())return!1;if(!Object(o["e"])())return!1;if(!Object(o["C"])())return!1;try{const t=await Object(o["W"])();return t}catch(t){return!1}}function _e(t,e,n){t=Object(o["u"])(t),me(ce,re[t.app.options.appId],e,n).catch(t=>jt.error(t))}function xe(t,e,n){t=Object(o["u"])(t),ye(ce,re[t.app.options.appId],e,n).catch(t=>jt.error(t))}function Te(t,e,n){t=Object(o["u"])(t),ve(ce,re[t.app.options.appId],e,n).catch(t=>jt.error(t))}function Se(t,e){t=Object(o["u"])(t),be(re[t.app.options.appId],e).catch(t=>jt.error(t))}function Ce(t,e,n,i){t=Object(o["u"])(t),ge(ce,re[t.app.options.appId],e,n,i).catch(t=>jt.error(t))}const ke="@firebase/analytics",Oe="0.7.2";function Ie(){function t(t){try{const e=t.getProvider(Ot).getImmediate();return{logEvent:(t,n,i)=>Ce(e,t,n,i)}}catch(e){throw qt.create("interop-component-reg-failed",{reason:e})}}Object(r["_registerComponent"])(new a["a"](Ot,(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return fe(n,i,e)},"PUBLIC")),Object(r["_registerComponent"])(new a["a"]("analytics-internal",t,"PRIVATE")),Object(r["registerVersion"])(ke,Oe),Object(r["registerVersion"])(ke,Oe,"esm2017")}Ie();const Ee="@firebase/analytics-compat",Ae="0.1.3";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pe{constructor(t,e){this.app=t,this._delegate=e}logEvent(t,e,n){Ce(this._delegate,t,e,n)}setCurrentScreen(t,e){_e(this._delegate,t,e)}setUserId(t,e){xe(this._delegate,t,e)}setUserProperties(t,e){Te(this._delegate,t,e)}setAnalyticsCollectionEnabled(t){Se(this._delegate,t)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t["ADD_SHIPPING_INFO"]="add_shipping_info",t["ADD_PAYMENT_INFO"]="add_payment_info",t["ADD_TO_CART"]="add_to_cart",t["ADD_TO_WISHLIST"]="add_to_wishlist",t["BEGIN_CHECKOUT"]="begin_checkout",t["CHECKOUT_PROGRESS"]="checkout_progress",t["EXCEPTION"]="exception",t["GENERATE_LEAD"]="generate_lead",t["LOGIN"]="login",t["PAGE_VIEW"]="page_view",t["PURCHASE"]="purchase",t["REFUND"]="refund",t["REMOVE_FROM_CART"]="remove_from_cart",t["SCREEN_VIEW"]="screen_view",t["SEARCH"]="search",t["SELECT_CONTENT"]="select_content",t["SELECT_ITEM"]="select_item",t["SELECT_PROMOTION"]="select_promotion",t["SET_CHECKOUT_OPTION"]="set_checkout_option",t["SHARE"]="share",t["SIGN_UP"]="sign_up",t["TIMING_COMPLETE"]="timing_complete",t["VIEW_CART"]="view_cart",t["VIEW_ITEM"]="view_item",t["VIEW_ITEM_LIST"]="view_item_list",t["VIEW_PROMOTION"]="view_promotion",t["VIEW_SEARCH_RESULTS"]="view_search_results"})(Ne||(Ne={}));
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const je=t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("analytics").getImmediate();return new Pe(e,n)};function Re(){const t={Analytics:Pe,settings:de,isSupported:we,EventName:Ne};i["a"].INTERNAL.registerComponent(new a["a"]("analytics-compat",je,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}Re(),i["a"].registerVersion(Ee,Ae);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Me=new Map,De={activated:!1,tokenObservers:[]},Le={initialized:!1,enabled:!1};function Fe(t){return Me.get(t)||De}function Ue(t,e){Me.set(t,e)}function Be(){return Le}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve="https://content-firebaseappcheck.googleapis.com/v1beta",ze="exchangeRecaptchaToken",qe="exchangeDebugToken",We={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class He{constructor(t,e,n,i,r){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=i,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=i,i>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new o["a"],await Ge(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new o["a"],await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}function Ge(t){return new Promise(e=>{setTimeout(e,t)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error."},$e=new o["b"]("appCheck","AppCheck",Ke);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ye(){return self.grecaptcha}function Xe(t){if(!Fe(t).activated)throw $e.create("use-before-activation",{appName:t.name})}function Qe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Je({url:t,body:e},n){const i={"Content-Type":"application/json"},r=n.getImmediate({optional:!0});r&&(i["X-Firebase-Client"]=r.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(e),headers:i};let o,a;try{o=await fetch(t,s)}catch(u){throw $e.create("fetch-network-error",{originalErrorMessage:u.message})}if(200!==o.status)throw $e.create("fetch-status-error",{httpStatus:o.status});try{a=await o.json()}catch(u){throw $e.create("fetch-parse-error",{originalErrorMessage:u.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw $e.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+a.ttl});const l=1e3*Number(c[1]),h=Date.now();return{token:a.attestationToken,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function Ze(t,e){const{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${Ve}/projects/${n}/apps/${i}:${ze}?key=${r}`,body:{recaptcha_token:e}}}function tn(t,e){const{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${Ve}/projects/${n}/apps/${i}:${qe}?key=${r}`,body:{debug_token:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="firebase-app-check-database",nn=1,rn="firebase-app-check-store",sn="debug-token";let on=null;function an(){return on||(on=new Promise((t,e)=>{try{const n=indexedDB.open(en,nn);n.onsuccess=e=>{t(e.target.result)},n.onerror=t=>{var n;e($e.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=t=>{const e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(rn,{keyPath:"compositeKey"})}}}catch(n){e($e.create("storage-open",{originalErrorMessage:n.message}))}}),on)}function cn(t){return pn(fn(t))}function ln(t,e){return dn(fn(t),e)}function hn(t){return dn(sn,t)}function un(){return pn(sn)}async function dn(t,e){const n=await an(),i=n.transaction(rn,"readwrite"),r=i.objectStore(rn),s=r.put({compositeKey:t,value:e});return new Promise((t,e)=>{s.onsuccess=e=>{t()},i.onerror=t=>{var n;e($e.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})}async function pn(t){const e=await an(),n=e.transaction(rn,"readonly"),i=n.objectStore(rn),r=i.get(t);return new Promise((t,e)=>{r.onsuccess=e=>{const n=e.target.result;t(n?n.value:void 0)},n.onerror=t=>{var n;e($e.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})}function fn(t){return`${t.options.appId}-${t.name}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new s["b"]("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mn(t){if(Object(o["C"])()){let n=void 0;try{n=await cn(t)}catch(e){gn.warn("Failed to read token from IndexedDB. Error: "+e)}return n}}function yn(t,e){return Object(o["C"])()?ln(t,e).catch(t=>{gn.warn("Failed to write token to IndexedDB. Error: "+t)}):Promise.resolve()}async function vn(){let t=void 0;try{t=await un()}catch(e){}if(t)return t;{const t=Qe();return hn(t).catch(t=>gn.warn("Failed to persist debug token to IndexedDB. Error: "+t)),t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){const t=Be();return t.enabled}async function wn(){const t=Be();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}function _n(){const t=Object(o["t"])(),e=Be();if(e.initialized=!0,"string"!==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==t.FIREBASE_APPCHECK_DEBUG_TOKEN)return;e.enabled=!0;const n=new o["a"];e.token=n,"string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(vn())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn={error:"UNKNOWN_ERROR"};function Tn(t){return o["h"].encodeString(JSON.stringify(t),!1)}async function Sn(t,e=!1){const n=t.app;Xe(n);const i=Fe(n);let r,s=i.token,o=void 0;if(!s){const t=await i.cachedTokenPromise;t&&En(t)&&(s=t,Ue(n,Object.assign(Object.assign({},i),{token:s})),In(n,{token:s.token}))}if(!e&&s&&En(s))return{token:s.token};if(bn()){const e=await Je(tn(n,await wn()),t.platformLoggerProvider);return await yn(n,e),Ue(n,Object.assign(Object.assign({},i),{token:e})),{token:e.token}}try{s=await i.provider.getToken()}catch(a){gn.error(a),o=a}return s?(r={token:s.token},Ue(n,Object.assign(Object.assign({},i),{token:s})),await yn(n,s)):r=An(o),In(n,r),r}function Cn(t,e,n,i){const{app:r}=t,s=Fe(r),o={next:n,error:i,type:e},a=Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]});if(!a.tokenRefresher){const e=On(t);a.tokenRefresher=e}if(!a.tokenRefresher.isRunning()&&s.isTokenAutoRefreshEnabled&&a.tokenRefresher.start(),s.token&&En(s.token)){const t=s.token;Promise.resolve().then(()=>n({token:t.token})).catch(()=>{})}else null==s.token&&s.cachedTokenPromise.then(t=>{t&&En(t)&&n({token:t.token})}).catch(()=>{});Ue(r,a)}function kn(t,e){const n=Fe(t),i=n.tokenObservers.filter(t=>t.next!==e);0===i.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Ue(t,Object.assign(Object.assign({},n),{tokenObservers:i}))}function On(t){const{app:e}=t;return new He(async()=>{const n=Fe(e);let i;if(i=n.token?await Sn(t,!0):await Sn(t),i.error)throw i.error},()=>!0,()=>{const t=Fe(e);if(t.token){let e=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;const n=t.token.expireTimeMillis-3e5;return e=Math.min(e,n),Math.max(0,e-Date.now())}return 0},We.RETRIAL_MIN_WAIT,We.RETRIAL_MAX_WAIT)}function In(t,e){const n=Fe(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function En(t){return t.expireTimeMillis-Date.now()>0}function An(t){return{token:Tn(xn),error:t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t,e){this.app=t,this.platformLoggerProvider=e}_delete(){const{tokenObservers:t}=Fe(this.app);for(const e of t)kn(this.app,e.next);return Promise.resolve()}}function Nn(t,e){return new Pn(t,e)}function jn(t){return{getToken:e=>Sn(t,e),addTokenListener:e=>Cn(t,"INTERNAL",e),removeTokenListener:e=>kn(t.app,e)}}const Rn="@firebase/app-check",Mn="0.4.2",Dn="https://www.google.com/recaptcha/api.js";function Ln(t,e){const n=Fe(t),i=new o["a"];Ue(t,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:i}}));const r="fire_app_check_"+t.name,s=document.createElement("div");s.id=r,s.style.display="none",document.body.appendChild(s);const a=Ye();return a?a.ready(()=>{Un(t,e,a,r),i.resolve(a)}):Bn(()=>{const n=Ye();if(!n)throw new Error("no recaptcha");n.ready(()=>{Un(t,e,n,r),i.resolve(n)})}),i.promise}async function Fn(t){Xe(t);const e=Fe(t).reCAPTCHAState,n=await e.initialized.promise;return new Promise((e,i)=>{const r=Fe(t).reCAPTCHAState;n.ready(()=>{e(n.execute(r.widgetId,{action:"fire_app_check"}))})})}function Un(t,e,n,i){const r=n.render(i,{sitekey:e,size:"invisible"}),s=Fe(t);Ue(t,Object.assign(Object.assign({},s),{reCAPTCHAState:Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:r})}))}function Bn(t){const e=document.createElement("script");e.src=""+Dn,e.onload=t,document.head.appendChild(e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this._siteKey=t}async getToken(){if(!this._app||!this._platformLoggerProvider)throw $e.create("use-before-activation",{appName:""});const t=await Fn(this._app).catch(t=>{throw $e.create("recaptcha-error")});return Je(Ze(this._app,t),this._platformLoggerProvider)}initialize(t){this._app=t,this._platformLoggerProvider=Object(r["_getProvider"])(t,"platform-logger"),Ln(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Vn&&this._siteKey===t._siteKey}}class zn{constructor(t){this._customProviderOptions=t}async getToken(){if(!this._app)throw $e.create("use-before-activation",{appName:""});const t=await this._customProviderOptions.getToken(),e=Object(o["K"])(t.token),n=null!==e&&e<Date.now()&&e>0?1e3*e:Date.now();return Object.assign(Object.assign({},t),{issuedAtTimeMillis:n})}initialize(t){this._app=t}isEqual(t){return t instanceof zn&&this._customProviderOptions.getToken.toString()===t._customProviderOptions.getToken.toString()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t=Object(r["getApp"])(),e){t=Object(o["u"])(t);const n=Object(r["_getProvider"])(t,"app-check");if(Be().initialized||_n(),bn()&&wn().then(t=>console.log(`App Check debug token: ${t}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(r.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&r.provider.isEqual(e.provider))return i;throw $e.create("already-initialized",{appName:t.name})}const i=n.initialize({options:e});return Wn(t,e.provider,e.isTokenAutoRefreshEnabled),i}function Wn(t,e,n){const i=Fe(t),r=Object.assign(Object.assign({},i),{activated:!0});r.provider=e,r.cachedTokenPromise=mn(t).then(e=>(e&&En(e)&&Ue(t,Object.assign(Object.assign({},Fe(t)),{token:e})),e)),r.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,Ue(t,r),r.provider.initialize(t)}function Hn(t,e){const n=t.app,i=Fe(n);i.tokenRefresher&&(!0===e?i.tokenRefresher.start():i.tokenRefresher.stop()),Ue(n,Object.assign(Object.assign({},i),{isTokenAutoRefreshEnabled:e}))}async function Gn(t,e){const n=await Sn(t,e);if(n.error)throw n.error;return{token:n.token}}function Kn(t,e,n,i){let r=()=>{},s=()=>{};return r=null!=e.next?e.next.bind(e):e,null!=e.error?s=e.error.bind(e):n&&(s=n),Cn(t,"EXTERNAL",r,s),()=>kn(t.app,r)}const $n="app-check",Yn="app-check-internal";function Xn(){Object(r["_registerComponent"])(new a["a"]($n,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger");return Nn(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Yn).initialize()})),Object(r["_registerComponent"])(new a["a"](Yn,t=>{const e=t.getProvider("app-check").getImmediate();return jn(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Object(r["registerVersion"])(Rn,Mn)}Xn();const Qn="@firebase/app-check-compat",Jn="0.1.3",Zn={["use-before-activation"]:"App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."},ti=new o["b"]("appCheck","AppCheck",Zn);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ei{constructor(t){this.app=t}activate(t,e){let n;n="string"===typeof t?new Vn(t):t instanceof Vn||t instanceof zn?t:new zn({getToken:t.getToken}),this._delegate=qn(this.app,{provider:n,isTokenAutoRefreshEnabled:e})}setTokenAutoRefreshEnabled(t){if(!this._delegate)throw ti.create("use-before-activation",{appName:this.app.name});Hn(this._delegate,t)}getToken(t){if(!this._delegate)throw ti.create("use-before-activation",{appName:this.app.name});return Gn(this._delegate,t)}onTokenChanged(t,e,n){if(!this._delegate)throw ti.create("use-before-activation",{appName:this.app.name});return Kn(this._delegate,t,e,n)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=t=>{const e=t.getProvider("app-compat").getImmediate();return new ei(e)};function ii(){i["a"].INTERNAL.registerComponent(new a["a"]("appCheck-compat",ni,"PUBLIC").setServiceProps({ReCaptchaV3Provider:Vn,CustomProvider:zn}))}ii(),i["a"].registerVersion(Qn,Jn);n("5994");var ri=n("51b0");const si="@firebase/database-compat",oi="0.1.2",ai=new s["b"]("@firebase/database-compat"),ci=function(t){const e="FIREBASE WARNING: "+t;ai.warn(e)},li=function(t,e,n,i){if((!i||void 0!==n)&&"boolean"!==typeof n)throw new Error(Object(o["r"])(t,e)+"must be a boolean.")},hi=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o["r"])(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ui{constructor(t){this._delegate=t}cancel(t){Object(o["T"])("OnDisconnect.cancel",0,1,arguments.length),Object(o["U"])("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),e=>t(e)),e}remove(t){Object(o["T"])("OnDisconnect.remove",0,1,arguments.length),Object(o["U"])("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),e=>t(e)),e}set(t,e){Object(o["T"])("OnDisconnect.set",1,2,arguments.length),Object(o["U"])("OnDisconnect.set","onComplete",e,!0);const n=this._delegate.set(t);return e&&n.then(()=>e(null),t=>e(t)),n}setWithPriority(t,e,n){Object(o["T"])("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o["U"])("OnDisconnect.setWithPriority","onComplete",n,!0);const i=this._delegate.setWithPriority(t,e);return n&&i.then(()=>n(null),t=>n(t)),i}update(t,e){if(Object(o["T"])("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const e={};for(let n=0;n<t.length;++n)e[""+n]=t[n];t=e,ci("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o["U"])("OnDisconnect.update","onComplete",e,!0);const n=this._delegate.update(t);return e&&n.then(()=>e(null),t=>e(t)),n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return Object(o["T"])("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t,e){this._database=t,this._delegate=e}val(){return Object(o["T"])("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Object(o["T"])("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Object(o["T"])("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Object(o["T"])("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return Object(o["T"])("DataSnapshot.child",0,1,arguments.length),t=String(t),Object(ri["g"])("DataSnapshot.child","path",t,!1),new pi(this._database,this._delegate.child(t))}hasChild(t){return Object(o["T"])("DataSnapshot.hasChild",1,1,arguments.length),Object(ri["g"])("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return Object(o["T"])("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return Object(o["T"])("DataSnapshot.forEach",1,1,arguments.length),Object(o["U"])("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new pi(this._database,e)))}hasChildren(){return Object(o["T"])("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Object(o["T"])("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Object(o["T"])("DataSnapshot.ref",0,0,arguments.length),new gi(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class fi{constructor(t,e){this.database=t,this._delegate=e}on(t,e,n,i){var r;Object(o["T"])("Query.on",2,4,arguments.length),Object(o["U"])("Query.on","callback",e,!1);const s=fi.getCancelAndContextArgs_("Query.on",n,i),a=(t,n)=>{e.call(s.context,new pi(this.database,t),n)};a.userCallback=e,a.context=s.context;const c=null===(r=s.cancel)||void 0===r?void 0:r.bind(s.context);switch(t){case"value":return Object(ri["z"])(this._delegate,a,c),e;case"child_added":return Object(ri["v"])(this._delegate,a,c),e;case"child_removed":return Object(ri["y"])(this._delegate,a,c),e;case"child_changed":return Object(ri["w"])(this._delegate,a,c),e;case"child_moved":return Object(ri["x"])(this._delegate,a,c),e;default:throw new Error(Object(o["r"])("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,n){if(Object(o["T"])("Query.off",0,3,arguments.length),hi("Query.off",t,!0),Object(o["U"])("Query.off","callback",e,!0),Object(o["V"])("Query.off","context",n,!0),e){const i=()=>{};i.userCallback=e,i.context=n,Object(ri["u"])(this._delegate,t,i)}else Object(ri["u"])(this._delegate,t)}get(){return Object(ri["o"])(this._delegate).then(t=>new pi(this.database,t))}once(t,e,n,i){Object(o["T"])("Query.once",1,4,arguments.length),Object(o["U"])("Query.once","callback",e,!0);const r=fi.getCancelAndContextArgs_("Query.once",n,i),s=new o["a"],a=(t,n)=>{const i=new pi(this.database,t);e&&e.call(r.context,i,n),s.resolve(i)};a.userCallback=e,a.context=r.context;const c=t=>{r.cancel&&r.cancel.call(r.context,t),s.reject(t)};switch(t){case"value":Object(ri["z"])(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":Object(ri["v"])(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":Object(ri["y"])(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":Object(ri["w"])(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":Object(ri["x"])(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(Object(o["r"])("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(t){return Object(o["T"])("Query.limitToFirst",1,1,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["s"])(t)))}limitToLast(t){return Object(o["T"])("Query.limitToLast",1,1,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["t"])(t)))}orderByChild(t){return Object(o["T"])("Query.orderByChild",1,1,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["A"])(t)))}orderByKey(){return Object(o["T"])("Query.orderByKey",0,0,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["B"])()))}orderByPriority(){return Object(o["T"])("Query.orderByPriority",0,0,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["C"])()))}orderByValue(){return Object(o["T"])("Query.orderByValue",0,0,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["D"])()))}startAt(t=null,e){return Object(o["T"])("Query.startAt",0,2,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["P"])(t,e)))}startAfter(t=null,e){return Object(o["T"])("Query.startAfter",0,2,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["O"])(t,e)))}endAt(t=null,e){return Object(o["T"])("Query.endAt",0,2,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["l"])(t,e)))}endBefore(t=null,e){return Object(o["T"])("Query.endBefore",0,2,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["m"])(t,e)))}equalTo(t,e){return Object(o["T"])("Query.equalTo",1,2,arguments.length),new fi(this.database,Object(ri["F"])(this._delegate,Object(ri["n"])(t,e)))}toString(){return Object(o["T"])("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Object(o["T"])("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if(Object(o["T"])("Query.isEqual",1,1,arguments.length),!(t instanceof fi)){const t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,n){const i={cancel:void 0,context:void 0};if(e&&n)i.cancel=e,Object(o["U"])(t,"cancel",i.cancel,!0),i.context=n,Object(o["V"])(t,"context",i.context,!0);else if(e)if("object"===typeof e&&null!==e)i.context=e;else{if("function"!==typeof e)throw new Error(Object(o["r"])(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new gi(this.database,new ri["d"](this._delegate._repo,this._delegate._path))}}class gi extends fi{constructor(t,e){super(t,new ri["b"](e._repo,e._path,new ri["c"],!1)),this.database=t,this._delegate=e}getKey(){return Object(o["T"])("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return Object(o["T"])("Reference.child",1,1,arguments.length),"number"===typeof t&&(t=String(t)),new gi(this.database,Object(ri["i"])(this._delegate,t))}getParent(){Object(o["T"])("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new gi(this.database,t):null}getRoot(){return Object(o["T"])("Reference.root",0,0,arguments.length),new gi(this.database,this._delegate.root)}set(t,e){Object(o["T"])("Reference.set",1,2,arguments.length),Object(o["U"])("Reference.set","onComplete",e,!0);const n=Object(ri["L"])(this._delegate,t);return e&&n.then(()=>e(null),t=>e(t)),n}update(t,e){if(Object(o["T"])("Reference.update",1,2,arguments.length),Array.isArray(t)){const e={};for(let n=0;n<t.length;++n)e[""+n]=t[n];t=e,ci("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(ri["h"])("Reference.update",this._delegate._path),Object(o["U"])("Reference.update","onComplete",e,!0);const n=Object(ri["Q"])(this._delegate,t);return e&&n.then(()=>e(null),t=>e(t)),n}setWithPriority(t,e,n){Object(o["T"])("Reference.setWithPriority",2,3,arguments.length),Object(o["U"])("Reference.setWithPriority","onComplete",n,!0);const i=Object(ri["N"])(this._delegate,t,e);return n&&i.then(()=>n(null),t=>n(t)),i}remove(t){Object(o["T"])("Reference.remove",0,1,arguments.length),Object(o["U"])("Reference.remove","onComplete",t,!0);const e=Object(ri["I"])(this._delegate);return t&&e.then(()=>t(null),e=>t(e)),e}transaction(t,e,n){Object(o["T"])("Reference.transaction",1,3,arguments.length),Object(o["U"])("Reference.transaction","transactionUpdate",t,!1),Object(o["U"])("Reference.transaction","onComplete",e,!0),li("Reference.transaction","applyLocally",n,!0);const i=Object(ri["J"])(this._delegate,t,{applyLocally:n}).then(t=>new di(t.committed,new pi(this.database,t.snapshot)));return e&&i.then(t=>e(null,t.committed,t.snapshot),t=>e(t,!1,null)),i}setPriority(t,e){Object(o["T"])("Reference.setPriority",1,2,arguments.length),Object(o["U"])("Reference.setPriority","onComplete",e,!0);const n=Object(ri["M"])(this._delegate,t);return e&&n.then(()=>e(null),t=>e(t)),n}push(t,e){Object(o["T"])("Reference.push",0,2,arguments.length),Object(o["U"])("Reference.push","onComplete",e,!0);const n=Object(ri["E"])(this._delegate,t),i=n.then(t=>new gi(this.database,t));e&&i.then(()=>e(null),t=>e(t));const r=new gi(this.database,n);return r.then=i.then.bind(i),r.catch=i.catch.bind(i,void 0),r}onDisconnect(){return Object(ri["h"])("Reference.onDisconnect",this._delegate._path),new ui(new ri["a"](this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,n={}){Object(ri["j"])(this._delegate,t,e,n)}ref(t){if(Object(o["T"])("database.ref",0,1,arguments.length),t instanceof gi){const e=Object(ri["H"])(this._delegate,t.toString());return new gi(this,e)}{const e=Object(ri["G"])(this._delegate,t);return new gi(this,e)}}refFromURL(t){const e="database.refFromURL";Object(o["T"])(e,1,1,arguments.length);const n=Object(ri["H"])(this._delegate,t);return new gi(this,n)}goOffline(){return Object(o["T"])("database.goOffline",0,0,arguments.length),Object(ri["p"])(this._delegate)}goOnline(){return Object(o["T"])("database.goOnline",0,0,arguments.length),Object(ri["q"])(this._delegate)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function yi({app:t,url:e,version:n,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){Object(ri["f"])(n);const o=new a["c"]("auth-internal",new a["b"]("database-standalone"));return o.setComponent(new a["a"]("auth-internal",()=>i,"PRIVATE")),{instance:new mi(Object(ri["e"])(t,o,void 0,e,s),t),namespace:r}}mi.ServerValue={TIMESTAMP:Object(ri["K"])(),increment:t=>Object(ri["r"])(t)};var vi=Object.freeze({__proto__:null,initStandalone:yi});
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=mi.ServerValue;function wi(t){t.INTERNAL.registerComponent(new a["a"]("database-compat",(t,{instanceIdentifier:e})=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new mi(i,n)},"PUBLIC").setServiceProps({Reference:gi,Query:fi,Database:mi,DataSnapshot:pi,enableLogging:ri["k"],INTERNAL:vi,ServerValue:bi}).setMultipleInstances(!0)),t.registerVersion(si,oi)}wi(i["a"]);var _i=n("0829");const xi="@firebase/firestore-compat",Ti="0.1.5";
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Si(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _i["g"]("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){if("undefined"===typeof Uint8Array)throw new _i["g"]("unimplemented","Uint8Arrays are not available in this environment.")}function ki(){if(!Object(_i["r"])())throw new _i["g"]("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Oi{constructor(t){this._delegate=t}static fromBase64String(t){return ki(),new Oi(_i["b"].fromBase64String(t))}static fromUint8Array(t){return Ci(),new Oi(_i["b"].fromUint8Array(t))}toBase64(){return ki(),this._delegate.toBase64()}toUint8Array(){return Ci(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){return Ei(t,["next","error","complete"])}function Ei(t,e){if("object"!==typeof t||null===t)return!1;const n=t;for(const i of e)if(i in n&&"function"===typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{enableIndexedDbPersistence(t,e){return Object(_i["F"])(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return Object(_i["G"])(t._delegate)}clearIndexedDbPersistence(t){return Object(_i["x"])(t._delegate)}}class Pi{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof _i["m"]||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();t.merge||e.host===t.host||Object(_i["s"])("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,n={}){Object(_i["A"])(this._delegate,t,e,n)}enableNetwork(){return Object(_i["H"])(this._delegate)}disableNetwork(){return Object(_i["D"])(this._delegate)}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,Object(_i["t"])("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Object(_i["lb"])(this._delegate)}onSnapshotsInSync(t){return Object(_i["Y"])(this._delegate,t)}get app(){if(!this._appCompat)throw new _i["g"]("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Gi(this,Object(_i["y"])(this._delegate,t))}catch(e){throw Fi(e,"collection()","Firestore.collection()")}}doc(t){try{return new Li(this,Object(_i["E"])(this._delegate,t))}catch(e){throw Fi(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new qi(this,Object(_i["z"])(this._delegate,t))}catch(e){throw Fi(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return Object(_i["db"])(this._delegate,e=>t(new Ri(this,e)))}batch(){return Object(_i["K"])(this._delegate),new Mi(new _i["l"](this._delegate,t=>Object(_i["L"])(this._delegate,t)))}loadBundle(t){return Object(_i["V"])(this._delegate,t)}namedQuery(t){return Object(_i["W"])(this._delegate,t).then(t=>t?new qi(this,t):null)}}class Ni extends _i["a"]{constructor(t){super(),this.firestore=t}convertBytes(t){return new Oi(new _i["b"](t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Li.forKey(e,this.firestore,null)}}function ji(t){Object(_i["gb"])(t)}class Ri{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Ni(t)}get(t){const e=Ki(t);return this._delegate.get(e).then(t=>new Vi(this._firestore,new _i["e"](this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,e.converter)))}set(t,e,n){const i=Ki(t);return n?(Si("Transaction.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){const r=Ki(t);return 2===arguments.length?this._delegate.update(r,e):this._delegate.update(r,e,n,...i),this}delete(t){const e=Ki(t);return this._delegate.delete(e),this}}class Mi{constructor(t){this._delegate=t}set(t,e,n){const i=Ki(t);return n?(Si("WriteBatch.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){const r=Ki(t);return 2===arguments.length?this._delegate.update(r,e):this._delegate.update(r,e,n,...i),this}delete(t){const e=Ki(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Di{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){const n=new _i["i"](this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new zi(this._firestore,n),null!==e&&void 0!==e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const n=Di.INSTANCES;let i=n.get(t);i||(i=new WeakMap,n.set(t,i));let r=i.get(e);return r||(r=new Di(t,new Ni(t),e),i.set(e,r)),r}}Di.INSTANCES=new WeakMap;class Li{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Ni(t)}static forPath(t,e,n){if(t.length%2!==0)throw new _i["g"]("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Li(e,new _i["d"](e._delegate,n,new _i["n"](t)))}static forKey(t,e,n){return new Li(e,new _i["d"](e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new Gi(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Gi(this.firestore,Object(_i["y"])(this._delegate,t))}catch(e){throw Fi(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=Object(o["u"])(t),t instanceof _i["d"]&&Object(_i["cb"])(this._delegate,t)}set(t,e){e=Si("DocumentReference.set",e);try{return e?Object(_i["fb"])(this._delegate,t,e):Object(_i["fb"])(this._delegate,t)}catch(n){throw Fi(n,"setDoc()","DocumentReference.set()")}}update(t,e,...n){try{return 1===arguments.length?Object(_i["kb"])(this._delegate,t):Object(_i["kb"])(this._delegate,t,e,...n)}catch(i){throw Fi(i,"updateDoc()","DocumentReference.update()")}}delete(){return Object(_i["B"])(this._delegate)}onSnapshot(...t){const e=Ui(t),n=Bi(t,t=>new Vi(this.firestore,new _i["e"](this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter)));return Object(_i["X"])(this._delegate,e,n)}get(t){let e;return e="cache"===(null===t||void 0===t?void 0:t.source)?Object(_i["N"])(this._delegate):"server"===(null===t||void 0===t?void 0:t.source)?Object(_i["O"])(this._delegate):Object(_i["M"])(this._delegate),e.then(t=>new Vi(this.firestore,new _i["e"](this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter)))}withConverter(t){return new Li(this.firestore,t?this._delegate.withConverter(Di.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Fi(t,e,n){return t.message=t.message.replace(e,n),t}function Ui(t){for(const e of t)if("object"===typeof e&&!Ii(e))return e;return{}}function Bi(t,e){var n,i;let r;return r=Ii(t[0])?t[0]:Ii(t[1])?t[1]:"function"===typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:t=>{r.next&&r.next(e(t))},error:null===(n=r.error)||void 0===n?void 0:n.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Vi{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Li(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return Object(_i["hb"])(this._delegate,t._delegate)}}class zi extends Vi{data(t){const e=this._delegate.data(t);return Object(_i["q"])(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e}}class qi{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Ni(t)}where(t,e,n){try{return new qi(this.firestore,Object(_i["ab"])(this._delegate,Object(_i["mb"])(t,e,n)))}catch(i){throw Fi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new qi(this.firestore,Object(_i["ab"])(this._delegate,Object(_i["Z"])(t,e)))}catch(n){throw Fi(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new qi(this.firestore,Object(_i["ab"])(this._delegate,Object(_i["T"])(t)))}catch(e){throw Fi(e,"limit()","Query.limit()")}}limitToLast(t){try{return new qi(this.firestore,Object(_i["ab"])(this._delegate,Object(_i["U"])(t)))}catch(e){throw Fi(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new qi(this.firestore,Object(_i["ab"])(this._delegate,Object(_i["jb"])(...t)))}catch(e){throw Fi(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new qi(this.firestore,Object(_i["ab"])(this._delegate,Object(_i["ib"])(...t)))}catch(e){throw Fi(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new qi(this.firestore,Object(_i["ab"])(this._delegate,Object(_i["J"])(...t)))}catch(e){throw Fi(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new qi(this.firestore,Object(_i["ab"])(this._delegate,Object(_i["I"])(...t)))}catch(e){throw Fi(e,"endAt()","Query.endAt()")}}isEqual(t){return Object(_i["bb"])(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null===t||void 0===t?void 0:t.source)?Object(_i["Q"])(this._delegate):"server"===(null===t||void 0===t?void 0:t.source)?Object(_i["R"])(this._delegate):Object(_i["P"])(this._delegate),e.then(t=>new Hi(this.firestore,new _i["j"](this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot)))}onSnapshot(...t){const e=Ui(t),n=Bi(t,t=>new Hi(this.firestore,new _i["j"](this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot)));return Object(_i["X"])(this._delegate,e,n)}withConverter(t){return new qi(this.firestore,t?this._delegate.withConverter(Di.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class Wi{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new zi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Hi{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new qi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new zi(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(t=>new Wi(this._firestore,t))}forEach(t,e){this._delegate.forEach(n=>{t.call(e,new zi(this._firestore,n))})}isEqual(t){return Object(_i["hb"])(this._delegate,t._delegate)}}class Gi extends qi{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Li(this.firestore,t):null}doc(t){try{return new Li(this.firestore,void 0===t?Object(_i["E"])(this._delegate):Object(_i["E"])(this._delegate,t))}catch(e){throw Fi(e,"doc()","CollectionReference.doc()")}}add(t){return Object(_i["u"])(this._delegate,t).then(t=>new Li(this.firestore,t))}isEqual(t){return Object(_i["cb"])(this._delegate,t._delegate)}withConverter(t){return new Gi(this.firestore,t?this._delegate.withConverter(Di.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Ki(t){return Object(_i["p"])(t,_i["d"])}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(...t){this._delegate=new _i["f"](...t)}static documentId(){return new $i(_i["o"].keyField().canonicalString())}isEqual(t){return t=Object(o["u"])(t),t instanceof _i["f"]&&this._delegate._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t){this._delegate=t}static serverTimestamp(){const t=Object(_i["eb"])();return t._methodName="FieldValue.serverTimestamp",new Yi(t)}static delete(){const t=Object(_i["C"])();return t._methodName="FieldValue.delete",new Yi(t)}static arrayUnion(...t){const e=Object(_i["w"])(...t);return e._methodName="FieldValue.arrayUnion",new Yi(e)}static arrayRemove(...t){const e=Object(_i["v"])(...t);return e._methodName="FieldValue.arrayRemove",new Yi(e)}static increment(t){const e=Object(_i["S"])(t);return e._methodName="FieldValue.increment",new Yi(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi={Firestore:Pi,GeoPoint:_i["h"],Timestamp:_i["k"],Blob:Oi,Transaction:Ri,WriteBatch:Mi,DocumentReference:Li,DocumentSnapshot:Vi,Query:qi,QueryDocumentSnapshot:zi,QuerySnapshot:Hi,CollectionReference:Gi,FieldPath:$i,FieldValue:Yi,setLogLevel:ji,CACHE_SIZE_UNLIMITED:_i["c"]};function Qi(t,e){t.INTERNAL.registerComponent(new a["a"]("firestore-compat",t=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(n,i)},"PUBLIC").setServiceProps(Object.assign({},Xi)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(t){Qi(t,(t,e)=>new Pi(t,e,new Ai)),t.registerVersion(xi,Ti)}Ji(i["a"]);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Zi="type.googleapis.com/google.protobuf.Int64Value",tr="type.googleapis.com/google.protobuf.UInt64Value";function er(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function nr(t){if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(t=>nr(t));if("function"===typeof t||"object"===typeof t)return er(t,t=>nr(t));throw new Error("Data cannot be encoded in JSON: "+t)}function ir(t){if(null==t)return t;if(t["@type"])switch(t["@type"]){case Zi:case tr:{const e=Number(t["value"]);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(t=>ir(t)):"function"===typeof t||"object"===typeof t?er(t,t=>ir(t)):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="functions",sr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends o["c"]{constructor(t,e,n){super(`${rr}/${t}`,e||""),this.details=n}}function ar(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function cr(t,e){let n=ar(t),i=n,r=void 0;try{const t=e&&e.error;if(t){const e=t.status;if("string"===typeof e){if(!sr[e])return new or("internal","internal");n=sr[e],i=e}const s=t.message;"string"===typeof s&&(i=s),r=t.details,void 0!==r&&(r=ir(r))}}catch(s){}return"ok"===n?null:new or(n,i,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(t,e,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(t=>this.auth=t,()=>{}),this.messaging||e.get().then(t=>this.messaging=t,()=>{}),this.appCheck||n.get().then(t=>this.appCheck=t,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return null===t||void 0===t?void 0:t.accessToken}catch(t){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(t){return}}async getAppCheckToken(){if(this.appCheck){const t=await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(){const t=await this.getAuthToken(),e=await this.getMessagingToken(),n=await this.getAppCheckToken();return{authToken:t,messagingToken:e,appCheckToken:n}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="us-central1";function ur(t){return new Promise((e,n)=>{setTimeout(()=>{n(new or("deadline-exceeded","deadline-exceeded"))},t)})}class dr{constructor(t,e,n,i,r=hr,s){this.app=t,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new lr(e,n,i),this.cancelAllRequests=new Promise(t=>{this.deleteService=()=>Promise.resolve(t())});try{const t=new URL(r);this.customDomain=t.origin,this.region=hr}catch(o){this.customDomain=null,this.region=r}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return`${n}/${e}/${this.region}/${t}`}return null!==this.customDomain?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}}function pr(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function fr(t,e,n){return i=>mr(t,e,i,n||{})}async function gr(t,e,n,i){let r;n["Content-Type"]="application/json";try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch(o){return{status:0,json:null}}let s=null;try{s=await r.json()}catch(o){}return{status:r.status,json:s}}async function mr(t,e,n,i){const r=t._url(e);n=nr(n);const s={data:n},o={},a=await t.contextProvider.getContext();a.authToken&&(o["Authorization"]="Bearer "+a.authToken),a.messagingToken&&(o["Firebase-Instance-ID-Token"]=a.messagingToken),null!==a.appCheckToken&&(o["X-Firebase-AppCheck"]=a.appCheckToken);const c=i.timeout||7e4,l=await Promise.race([gr(r,s,o,t.fetchImpl),ur(c),t.cancelAllRequests]);if(!l)throw new or("cancelled","Firebase Functions instance was deleted.");const h=cr(l.status,l.json);if(h)throw h;if(!l.json)throw new or("internal","Response is not valid JSON object.");let u=l.json.data;if("undefined"===typeof u&&(u=l.json.result),"undefined"===typeof u)throw new or("internal","Response is missing data field.");const d=ir(u);return{data:d}}const yr="@firebase/functions",vr="0.7.3",br="auth-internal",wr="app-check-internal",_r="messaging-internal";function xr(t,e){const n=(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider(br),s=e.getProvider(_r),o=e.getProvider(wr);return new dr(i,r,s,o,n,t)};Object(r["_registerComponent"])(new a["a"](rr,n,"PUBLIC").setMultipleInstances(!0)),Object(r["registerVersion"])(yr,vr,e),Object(r["registerVersion"])(yr,vr,"esm2017")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e,n){pr(Object(o["u"])(t),e,n)}function Sr(t,e,n){return fr(Object(o["u"])(t),e,n)}xr(fetch.bind(self));const Cr="@firebase/functions-compat",kr="0.1.4";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Or{constructor(t,e){this.app=t,this._delegate=e,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(t,e){return Sr(this._delegate,t,e)}useFunctionsEmulator(t){const e=t.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(null==e)throw new o["c"]("functions","No origin provided to useFunctionsEmulator()");if(null==e[2])throw new o["c"]("functions","Port missing in origin provided to useFunctionsEmulator()");return Tr(this._delegate,e[1],Number(e[2]))}useEmulator(t,e){return Tr(this._delegate,t,e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="us-central1",Er=(t,{instanceIdentifier:e})=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("functions").getImmediate({identifier:null!==e&&void 0!==e?e:Ir});return new Or(n,i)};function Ar(){const t={Functions:Or};i["a"].INTERNAL.registerComponent(new a["a"]("functions-compat",Er,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar(),i["a"].registerVersion(Cr,kr);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Pr="/firebase-messaging-sw.js",Nr="/firebase-cloud-messaging-push-scope",jr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Rr="https://fcmregistrations.googleapis.com/v1",Mr="google.c.a.c_id",Dr="google.c.a.c_l",Lr="google.c.a.ts",Fr="google.c.a.e";var Ur,Br;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Vr(t){const e=new Uint8Array(t),n=btoa(String.fromCharCode(...e));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zr(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["DATA_MESSAGE"]=1]="DATA_MESSAGE",t[t["DISPLAY_NOTIFICATION"]=3]="DISPLAY_NOTIFICATION"})(Ur||(Ur={})),function(t){t["PUSH_RECEIVED"]="push-received",t["NOTIFICATION_CLICKED"]="notification-clicked"}(Br||(Br={}));const qr="fcm_token_details_db",Wr=5,Hr="fcm_token_object_Store";async function Gr(t){if("databases"in indexedDB){const t=await indexedDB.databases(),e=t.map(t=>t.name);if(!e.includes(qr))return null}let e=null;const n=await Object(c["openDb"])(qr,Wr,async n=>{var i;if(n.oldVersion<2)return;if(!n.objectStoreNames.contains(Hr))return;const r=n.transaction.objectStore(Hr),s=await r.index("fcmSenderId").get(t);if(await r.clear(),s)if(2===n.oldVersion){const t=s;if(!t.auth||!t.p256dh||!t.endpoint)return;e={token:t.fcmToken,createTime:null!==(i=t.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"===typeof t.vapidKey?t.vapidKey:Vr(t.vapidKey)}}}else if(3===n.oldVersion){const t=s;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:Vr(t.auth),p256dh:Vr(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:Vr(t.vapidKey)}}}else if(4===n.oldVersion){const t=s;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:Vr(t.auth),p256dh:Vr(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:Vr(t.vapidKey)}}}});return n.close(),await Object(c["deleteDb"])(qr),await Object(c["deleteDb"])("fcm_vapid_details_db"),await Object(c["deleteDb"])("undefined"),Kr(e)?e:null}function Kr(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="firebase-messaging-database",Yr=1,Xr="firebase-messaging-store";let Qr=null;function Jr(){return Qr||(Qr=Object(c["openDb"])($r,Yr,t=>{switch(t.oldVersion){case 0:t.createObjectStore(Xr)}})),Qr}async function Zr(t){const e=ns(t),n=await Jr(),i=await n.transaction(Xr).objectStore(Xr).get(e);if(i)return i;{const e=await Gr(t.appConfig.senderId);if(e)return await ts(t,e),e}}async function ts(t,e){const n=ns(t),i=await Jr(),r=i.transaction(Xr,"readwrite");return await r.objectStore(Xr).put(e,n),await r.complete,e}async function es(t){const e=ns(t),n=await Jr(),i=n.transaction(Xr,"readwrite");await i.objectStore(Xr).delete(e),await i.complete}function ns({appConfig:t}){return t.appId}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},rs=new o["b"]("messaging","Messaging",is);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function ss(t,e){const n=await ls(t),i=hs(e),r={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{const e=await fetch(cs(t.appConfig),r);s=await e.json()}catch(o){throw rs.create("token-subscribe-failed",{errorInfo:o})}if(s.error){const t=s.error.message;throw rs.create("token-subscribe-failed",{errorInfo:t})}if(!s.token)throw rs.create("token-subscribe-no-token");return s.token}async function os(t,e){const n=await ls(t),i=hs(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{const n=await fetch(`${cs(t.appConfig)}/${e.token}`,r);s=await n.json()}catch(o){throw rs.create("token-update-failed",{errorInfo:o})}if(s.error){const t=s.error.message;throw rs.create("token-update-failed",{errorInfo:t})}if(!s.token)throw rs.create("token-update-no-token");return s.token}async function as(t,e){const n=await ls(t),i={method:"DELETE",headers:n};try{const n=await fetch(`${cs(t.appConfig)}/${e}`,i),r=await n.json();if(r.error){const t=r.error.message;throw rs.create("token-unsubscribe-failed",{errorInfo:t})}}catch(r){throw rs.create("token-unsubscribe-failed",{errorInfo:r})}}function cs({projectId:t}){return`${Rr}/projects/${t}/registrations`}async function ls({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+n})}function hs({p256dh:t,auth:e,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:e,p256dh:t}};return i!==jr&&(r.web.applicationPubKey=i),r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=6048e5;async function ds(t){const e=await ms(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Vr(e.getKey("auth")),p256dh:Vr(e.getKey("p256dh"))},i=await Zr(t.firebaseDependencies);if(i){if(ys(i.subscriptionOptions,n))return Date.now()>=i.createTime+us?fs(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await as(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return gs(t.firebaseDependencies,n)}return gs(t.firebaseDependencies,n)}async function ps(t){const e=await Zr(t.firebaseDependencies);e&&(await as(t.firebaseDependencies,e.token),await es(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function fs(t,e){try{const n=await os(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await ts(t.firebaseDependencies,i),n}catch(n){throw await ps(t),n}}async function gs(t,e){const n=await ss(t,e),i={token:n,createTime:Date.now(),subscriptionOptions:e};return await ts(t,i),i.token}async function ms(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zr(e)})}function ys(t,e){const n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,r=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&i&&r&&s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return bs(e,t),ws(e,t),_s(e,t),e}function bs(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const i=e.notification.body;i&&(t.notification.body=i);const r=e.notification.image;r&&(t.notification.image=r)}function ws(t,e){e.data&&(t.data=e.data)}function _s(t,e){if(!e.fcmOptions)return;t.fcmOptions={};const n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);const i=e.fcmOptions.analytics_label;i&&(t.fcmOptions.analyticsLabel=i)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t){return"object"===typeof t&&!!t&&Mr in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t,e){const n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t){if(!t||!t.options)throw Cs("App Configuration Object");if(!t.name)throw Cs("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const i of e)if(!n[i])throw Cs(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Cs(t){return rs.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ts("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ks{constructor(t,e,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=Ss(t);this.firebaseDependencies={app:t,appConfig:i,installations:e,analyticsProvider:n}}_delete(){return Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t){try{t.swRegistration=await navigator.serviceWorker.register(Pr,{scope:Nr}),t.swRegistration.update().catch(()=>{})}catch(e){throw rs.create("failed-service-worker-registration",{browserErrorMessage:e.message})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(t,e){if(e||t.swRegistration||await Os(t),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw rs.create("invalid-sw-registration");t.swRegistration=e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Es(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=jr)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function As(t,e){if(!navigator)throw rs.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw rs.create("permission-blocked");return await Es(t,null===e||void 0===e?void 0:e.vapidKey),await Is(t,null===e||void 0===e?void 0:e.serviceWorkerRegistration),ds(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(t,e,n){const i=Ns(e),r=await t.firebaseDependencies.analyticsProvider.get();r.logEvent(i,{message_id:n[Mr],message_name:n[Dr],message_time:n[Lr],message_device_time:Math.floor(Date.now()/1e3)})}function Ns(t){switch(t){case Br.NOTIFICATION_CLICKED:return"notification_open";case Br.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Br.PUSH_RECEIVED&&("function"===typeof t.onMessageHandler?t.onMessageHandler(vs(n)):t.onMessageHandler.next(vs(n)));const i=n.data;xs(i)&&"1"===i[Fr]&&await Ps(t,n.messageType,i)}const Rs="@firebase/messaging",Ms="0.9.2",Ds=t=>{const e=new ks(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>js(e,t)),e},Ls=t=>{const e=t.getProvider("messaging").getImmediate(),n={getToken:t=>As(e,t)};return n};function Fs(){Object(r["_registerComponent"])(new a["a"]("messaging",Ds,"PUBLIC")),Object(r["_registerComponent"])(new a["a"]("messaging-internal",Ls,"PRIVATE")),Object(r["registerVersion"])(Rs,Ms),Object(r["registerVersion"])(Rs,Ms,"esm2017")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Us(t){if(!navigator)throw rs.create("only-available-in-window");return t.swRegistration||await Os(t),ps(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t,e){if(!navigator)throw rs.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vs(t,e){return t=Object(o["u"])(t),As(t,e)}function zs(t){return t=Object(o["u"])(t),Us(t)}function qs(t,e){return t=Object(o["u"])(t),Bs(t,e)}Fs();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ws="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Hs="https://fcmregistrations.googleapis.com/v1",Gs="FCM_MSG",Ks="google.c.a.c_id",$s=3,Ys=1;var Xs,Qs;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Js(t){const e=new Uint8Array(t),n=btoa(String.fromCharCode(...e));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zs(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["DATA_MESSAGE"]=1]="DATA_MESSAGE",t[t["DISPLAY_NOTIFICATION"]=3]="DISPLAY_NOTIFICATION"})(Xs||(Xs={})),function(t){t["PUSH_RECEIVED"]="push-received",t["NOTIFICATION_CLICKED"]="notification-clicked"}(Qs||(Qs={}));const to="fcm_token_details_db",eo=5,no="fcm_token_object_Store";async function io(t){if("databases"in indexedDB){const t=await indexedDB.databases(),e=t.map(t=>t.name);if(!e.includes(to))return null}let e=null;const n=await Object(c["openDb"])(to,eo,async n=>{var i;if(n.oldVersion<2)return;if(!n.objectStoreNames.contains(no))return;const r=n.transaction.objectStore(no),s=await r.index("fcmSenderId").get(t);if(await r.clear(),s)if(2===n.oldVersion){const t=s;if(!t.auth||!t.p256dh||!t.endpoint)return;e={token:t.fcmToken,createTime:null!==(i=t.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"===typeof t.vapidKey?t.vapidKey:Js(t.vapidKey)}}}else if(3===n.oldVersion){const t=s;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:Js(t.auth),p256dh:Js(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:Js(t.vapidKey)}}}else if(4===n.oldVersion){const t=s;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:Js(t.auth),p256dh:Js(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:Js(t.vapidKey)}}}});return n.close(),await Object(c["deleteDb"])(to),await Object(c["deleteDb"])("fcm_vapid_details_db"),await Object(c["deleteDb"])("undefined"),ro(e)?e:null}function ro(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="firebase-messaging-database",oo=1,ao="firebase-messaging-store";let co=null;function lo(){return co||(co=Object(c["openDb"])(so,oo,t=>{switch(t.oldVersion){case 0:t.createObjectStore(ao)}})),co}async function ho(t){const e=fo(t),n=await lo(),i=await n.transaction(ao).objectStore(ao).get(e);if(i)return i;{const e=await io(t.appConfig.senderId);if(e)return await uo(t,e),e}}async function uo(t,e){const n=fo(t),i=await lo(),r=i.transaction(ao,"readwrite");return await r.objectStore(ao).put(e,n),await r.complete,e}async function po(t){const e=fo(t),n=await lo(),i=n.transaction(ao,"readwrite");await i.objectStore(ao).delete(e),await i.complete}function fo({appConfig:t}){return t.appId}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},mo=new o["b"]("messaging","Messaging",go);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function yo(t,e){const n=await _o(t),i=xo(e),r={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{const e=await fetch(wo(t.appConfig),r);s=await e.json()}catch(o){throw mo.create("token-subscribe-failed",{errorInfo:o})}if(s.error){const t=s.error.message;throw mo.create("token-subscribe-failed",{errorInfo:t})}if(!s.token)throw mo.create("token-subscribe-no-token");return s.token}async function vo(t,e){const n=await _o(t),i=xo(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{const n=await fetch(`${wo(t.appConfig)}/${e.token}`,r);s=await n.json()}catch(o){throw mo.create("token-update-failed",{errorInfo:o})}if(s.error){const t=s.error.message;throw mo.create("token-update-failed",{errorInfo:t})}if(!s.token)throw mo.create("token-update-no-token");return s.token}async function bo(t,e){const n=await _o(t),i={method:"DELETE",headers:n};try{const n=await fetch(`${wo(t.appConfig)}/${e}`,i),r=await n.json();if(r.error){const t=r.error.message;throw mo.create("token-unsubscribe-failed",{errorInfo:t})}}catch(r){throw mo.create("token-unsubscribe-failed",{errorInfo:r})}}function wo({projectId:t}){return`${Hs}/projects/${t}/registrations`}async function _o({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+n})}function xo({p256dh:t,auth:e,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:e,p256dh:t}};return i!==Ws&&(r.web.applicationPubKey=i),r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=6048e5;async function So(t){const e=await Io(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Js(e.getKey("auth")),p256dh:Js(e.getKey("p256dh"))},i=await ho(t.firebaseDependencies);if(i){if(Eo(i.subscriptionOptions,n))return Date.now()>=i.createTime+To?ko(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await bo(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return Oo(t.firebaseDependencies,n)}return Oo(t.firebaseDependencies,n)}async function Co(t){const e=await ho(t.firebaseDependencies);e&&(await bo(t.firebaseDependencies,e.token),await po(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function ko(t,e){try{const n=await vo(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await uo(t.firebaseDependencies,i),n}catch(n){throw await Co(t),n}}async function Oo(t,e){const n=await yo(t,e),i={token:n,createTime:Date.now(),subscriptionOptions:e};return await uo(t,i),i.token}async function Io(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zs(e)})}function Eo(t,e){const n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,r=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&i&&r&&s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return Po(e,t),No(e,t),jo(e,t),e}function Po(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const i=e.notification.body;i&&(t.notification.body=i);const r=e.notification.image;r&&(t.notification.image=r)}function No(t,e){e.data&&(t.data=e.data)}function jo(t,e){if(!e.fcmOptions)return;t.fcmOptions={};const n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);const i=e.fcmOptions.analytics_label;i&&(t.fcmOptions.analyticsLabel=i)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){return"object"===typeof t&&!!t&&Ks in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t){return new Promise(e=>{setTimeout(e,t)})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t,e){const n=Lo(e,await t.firebaseDependencies.installations.getId());Fo(t,n)}function Lo(t,e){var n,i;const r={};return t.from&&(r.project_number=t.from),t.fcm_message_id&&(r.message_id=t.fcm_message_id),r.instance_id=e,t.notification?r.message_type=Xs.DISPLAY_NOTIFICATION.toString():r.message_type=Xs.DATA_MESSAGE.toString(),r.sdk_platform=$s.toString(),r.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),t.collapse_key&&(r.collapse_key=t.collapse_key),r.event=Ys.toString(),(null===(n=t.fcmOptions)||void 0===n?void 0:n.analytics_label)&&(r.analytics_label=null===(i=t.fcmOptions)||void 0===i?void 0:i.analytics_label),r}function Fo(t,e){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(e),t.logEvents.push(n)}function Uo(t,e){const n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t,e){var n,i;const{newSubscription:r}=t;if(!r)return void await Co(e);const s=await ho(e.firebaseDependencies);await Co(e),e.vapidKey=null!==(i=null===(n=null===s||void 0===s?void 0:s.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==i?i:Ws,await So(e)}async function Vo(t,e){const n=Wo(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await Do(e,n);const i=await $o();if(Go(i))return Ko(i,n);if(n.notification&&await Yo(qo(n)),e&&e.onBackgroundMessageHandler){const t=Ao(n);"function"===typeof e.onBackgroundMessageHandler?e.onBackgroundMessageHandler(t):e.onBackgroundMessageHandler.next(t)}}async function zo(t){var e,n;const i=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[Gs];if(!i)return;if(t.action)return;t.stopImmediatePropagation(),t.notification.close();const r=Xo(i);if(!r)return;const s=new URL(r,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await Ho(s);return a?a=await a.focus():(a=await self.clients.openWindow(r),await Mo(3e3)),a?(i.messageType=Qs.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,a.postMessage(i)):void 0}function qo(t){const e=Object.assign({},t.notification);return e.data={[Gs]:t},e}function Wo({data:t}){if(!t)return null;try{return t.json()}catch(e){return null}}async function Ho(t){const e=await $o();for(const n of e){const e=new URL(n.url,self.location.href);if(t.host===e.host)return n}return null}function Go(t){return t.some(t=>"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://"))}function Ko(t,e){e.isFirebaseMessaging=!0,e.messageType=Qs.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}function $o(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Yo(t){var e;const{actions:n}=t,{maxActions:i}=Notification;return n&&i&&n.length>i&&console.warn(`This browser only supports ${i} actions. The remaining actions will not be displayed.`),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}function Xo(t){var e,n,i;const r=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(i=t.notification)||void 0===i?void 0:i.click_action;return r||(Ro(t.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){if(!t||!t.options)throw Jo("App Configuration Object");if(!t.name)throw Jo("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const i of e)if(!n[i])throw Jo(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Jo(t){return mo.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Uo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zo{constructor(t,e,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=Qo(t);this.firebaseDependencies={app:t,appConfig:i,installations:e,analyticsProvider:n}}_delete(){return Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=t=>{const e=new Zo(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",t=>{t.waitUntil(Vo(t,e))}),self.addEventListener("pushsubscriptionchange",t=>{t.waitUntil(Bo(t,e))}),self.addEventListener("notificationclick",t=>{t.waitUntil(zo(t))}),e};function ea(){Object(r["_registerComponent"])(new a["a"]("messaging-sw",ta,"PUBLIC"))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function na(t,e){if(void 0!==self.document)throw mo.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t,e){return t=Object(o["u"])(t),na(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
ea();const ra="@firebase/messaging-compat",sa="0.1.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function oa(){return self&&"ServiceWorkerGlobalScope"in self?ca():aa()}function aa(){return"undefined"!==typeof window&&Object(o["C"])()&&Object(o["e"])()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function ca(){return Object(o["C"])()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class la{constructor(t,e){this.app=t,this._delegate=e,this.app=t,this._delegate=e}async getToken(t){return Vs(this._delegate,t)}async deleteToken(){return zs(this._delegate)}onMessage(t){return qs(this._delegate,t)}onBackgroundMessage(t){return ia(this._delegate,t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=t=>self&&"ServiceWorkerGlobalScope"in self?new la(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging-sw").getImmediate()):new la(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging").getImmediate()),ua={isSupported:oa};function da(){i["a"].INTERNAL.registerComponent(new a["a"]("messaging-compat",ha,"PUBLIC").setServiceProps(ua))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pa;da(),i["a"].registerVersion(ra,sa),function(t){t[t["NO_ERROR"]=0]="NO_ERROR",t[t["NETWORK_ERROR"]=1]="NETWORK_ERROR",t[t["ABORT"]=2]="ABORT"}(pa||(pa={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fa="firebasestorage.googleapis.com",ga="storageBucket",ma=12e4,ya=6e5;class va extends o["c"]{constructor(t,e){super(ba(t),`Firebase Storage: ${e} (${ba(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,va.prototype)}_codeEquals(t){return ba(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}function ba(t){return"storage/"+t}function wa(){const t="An unknown error occurred, please check the error payload for server response.";return new va("unknown",t)}function _a(t){return new va("object-not-found","Object '"+t+"' does not exist.")}function xa(t){return new va("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ta(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new va("unauthenticated",t)}function Sa(){return new va("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Ca(t){return new va("unauthorized","User does not have permission to access '"+t+"'.")}function ka(){return new va("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Oa(){return new va("canceled","User canceled the upload/download.")}function Ia(t){return new va("invalid-url","Invalid URL '"+t+"'.")}function Ea(t){return new va("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function Aa(){return new va("no-default-bucket","No default bucket found. Did you set the '"+ga+"' property when initializing the app?")}function Pa(){return new va("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Na(){return new va("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function ja(){return new va("no-download-url","The given file does not have any download URLs.")}function Ra(t){return new va("invalid-argument",t)}function Ma(){return new va("app-deleted","The Firebase app was deleted.")}function Da(t){return new va("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function La(t,e){return new va("invalid-format","String does not match format '"+t+"': "+e)}function Fa(t){throw new va("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=pa.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pa.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pa.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,n,i){if(this.sent_)throw Fa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fa("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponseText(){if(!this.sent_)throw Fa("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}function Ba(){return new Ua}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{createConnection(){return Ba()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=za.makeFromUrl(t,e)}catch(i){return new za(t,"")}if(""===n.path)return n;throw Ea(t)}static makeFromUrl(t,e){let n=null;const i="([A-Za-z0-9.\\-_]+)";function r(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),a={bucket:1,path:3};function c(t){t.path_=decodeURIComponent(t.path)}const l="v[A-Za-z0-9_]+",h=e.replace(/[.]/g,"\\."),u="(/([^?#]*).*)?$",d=new RegExp(`^https?://${h}/${l}/b/${i}/o${u}`,"i"),p={bucket:1,path:3},f=e===fa?"(?:storage.googleapis.com|storage.cloud.google.com)":e,g="([^?#]*)",m=new RegExp(`^https?://${f}/${i}/${g}`,"i"),y={bucket:1,path:2},v=[{regex:o,indices:a,postModify:r},{regex:d,indices:p,postModify:c},{regex:m,indices:y,postModify:c}];for(let b=0;b<v.length;b++){const e=v[b],i=e.regex.exec(t);if(i){const t=i[e.indices.bucket];let r=i[e.indices.path];r||(r=""),n=new za(t,r),e.postModify(n);break}}if(null==n)throw Ia(t);return n}}class qa{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t,e,n){let i=1,r=null,s=!1,o=0;function a(){return 2===o}let c=!1;function l(...t){c||(c=!0,e.apply(null,t))}function h(e){r=setTimeout(()=>{r=null,t(u,a())},e)}function u(t,...e){if(c)return;if(t)return void l.call(null,t,...e);const n=a()||s;if(n)return void l.call(null,t,...e);let r;i<64&&(i*=2),1===o?(o=2,r=0):r=1e3*(i+Math.random()),h(r)}let d=!1;function p(t){d||(d=!0,c||(null!==r?(t||(o=2),clearTimeout(r),h(0)):t||(o=1)))}return h(0),setTimeout(()=>{s=!0,p(!0)},n),p}function Ha(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){return void 0!==t}function Ka(t){return"function"===typeof t}function $a(t){return"object"===typeof t&&!Array.isArray(t)}function Ya(t){return"string"===typeof t||t instanceof String}function Xa(t){return Qa()&&t instanceof Blob}function Qa(){return"undefined"!==typeof Blob}function Ja(t,e,n,i){if(i<e)throw Ra(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Ra(`Invalid value for '${t}'. Expected ${n} or less.`)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t,e,n){let i=e;return null==n&&(i="https://"+e),`${n}://${i}/v0${t}`}function tc(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,e,n,i,r,s,o,a,c,l,h){this.url_=t,this.method_=e,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.pool_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()})}start_(){const t=(t,e)=>{if(e)return void t(!1,new nc(!1,null,!0));const n=this.pool_.createConnection();this.pendingConnection_=n;const i=t=>{const e=t.loaded,n=t.lengthComputable?t.total:-1;null!==this.progressCallback_&&this.progressCallback_(e,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const e=n.getErrorCode()===pa.NO_ERROR,r=n.getStatus();if(!e||this.isRetryStatusCode_(r)){const e=n.getErrorCode()===pa.ABORT;return void t(!1,new nc(!1,null,e))}const s=-1!==this.successCodes_.indexOf(r);t(!0,new nc(s,n))})},e=(t,e)=>{const n=this.resolve_,i=this.reject_,r=e.connection;if(e.wasSuccessCode)try{const t=this.callback_(r,r.getResponseText());Ga(t)?n(t):n()}catch(s){i(s)}else if(null!==r){const t=wa();t.serverResponse=r.getResponseText(),this.errorCallback_?i(this.errorCallback_(r,t)):i(t)}else if(e.canceled){const t=this.appDelete_?Ma():Oa();i(t)}else{const t=ka();i(t)}};this.canceled_?e(!1,new nc(!1,null,!0)):this.backoffId_=Wa(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&Ha(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,n=[408,429],i=-1!==n.indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||r}}class nc{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function ic(t,e){null!==e&&e.length>0&&(t["Authorization"]="Firebase "+e)}function rc(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}function sc(t,e){e&&(t["X-Firebase-GMPID"]=e)}function oc(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}function ac(t,e,n,i,r,s){const o=tc(t.urlParams),a=t.url+o,c=Object.assign({},t.headers);return sc(c,e),ic(c,n),rc(c,s),oc(c,i),new ec(a,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function lc(...t){const e=cc();if(void 0!==e){const n=new e;for(let e=0;e<t.length;e++)n.append(t[e]);return n.getBlob()}if(Qa())return new Blob(t);throw new va("unsupported-environment","This browser doesn't seem to support creating Blobs")}function hc(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){return atob(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pc{constructor(t,e){this.data=t,this.contentType=e||null}}function fc(t,e){switch(t){case dc.RAW:return new pc(gc(e));case dc.BASE64:case dc.BASE64URL:return new pc(yc(t,e));case dc.DATA_URL:return new pc(bc(e),wc(e))}throw wa()}function gc(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|63&i);else if(55296===(64512&i)){const r=n<t.length-1&&56320===(64512&t.charCodeAt(n+1));if(r){const r=i,s=t.charCodeAt(++n);i=65536|(1023&r)<<10|1023&s,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else e.push(239,191,189)}else 56320===(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function mc(t){let e;try{e=decodeURIComponent(t)}catch(n){throw La(dc.DATA_URL,"Malformed data URL.")}return gc(e)}function yc(t,e){switch(t){case dc.BASE64:{const n=-1!==e.indexOf("-"),i=-1!==e.indexOf("_");if(n||i){const e=n?"-":"_";throw La(t,"Invalid character '"+e+"' found: is it base64url encoded?")}break}case dc.BASE64URL:{const n=-1!==e.indexOf("+"),i=-1!==e.indexOf("/");if(n||i){const e=n?"+":"/";throw La(t,"Invalid character '"+e+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=uc(e)}catch(r){throw La(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class vc{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw La(dc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=e[1]||null;null!=n&&(this.base64=_c(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}}function bc(t){const e=new vc(t);return e.base64?yc(dc.BASE64,e.rest):mc(e.rest)}function wc(t){const e=new vc(t);return e.contentType}function _c(t,e){const n=t.length>=e.length;return!!n&&t.substring(t.length-e.length)===e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,e){let n=0,i="";Xa(t)?(this.data_=t,n=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(Xa(this.data_)){const n=this.data_,i=hc(n,t,e);return null===i?null:new xc(i)}{const n=new Uint8Array(this.data_.buffer,t,e-t);return new xc(n,!0)}}static getBlob(...t){if(Qa()){const e=t.map(t=>t instanceof xc?t.data_:t);return new xc(lc.apply(null,e))}{const e=t.map(t=>Ya(t)?fc(dc.RAW,t).data:t.data_);let n=0;e.forEach(t=>{n+=t.byteLength});const i=new Uint8Array(n);let r=0;return e.forEach(t=>{for(let e=0;e<t.length;e++)i[r++]=t[e]}),new xc(i,!0)}}uploadData(){return this.data_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){let e;try{e=JSON.parse(t)}catch(n){return null}return $a(e)?e:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t){if(0===t.length)return null;const e=t.lastIndexOf("/");if(-1===e)return"";const n=t.slice(0,e);return n}function Cc(t,e){const n=e.split("/").filter(t=>t.length>0).join("/");return 0===t.length?n:t+"/"+n}function kc(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t,e){return e}class Ic{constructor(t,e,n,i){this.server=t,this.local=e||t,this.writable=!!n,this.xform=i||Oc}}let Ec=null;function Ac(t){return!Ya(t)||t.length<2?t:kc(t)}function Pc(){if(Ec)return Ec;const t=[];function e(t,e){return Ac(e)}t.push(new Ic("bucket")),t.push(new Ic("generation")),t.push(new Ic("metageneration")),t.push(new Ic("name","fullPath",!0));const n=new Ic("name");function i(t,e){return void 0!==e?Number(e):e}n.xform=e,t.push(n);const r=new Ic("size");return r.xform=i,t.push(r),t.push(new Ic("timeCreated")),t.push(new Ic("updated")),t.push(new Ic("md5Hash",null,!0)),t.push(new Ic("cacheControl",null,!0)),t.push(new Ic("contentDisposition",null,!0)),t.push(new Ic("contentEncoding",null,!0)),t.push(new Ic("contentLanguage",null,!0)),t.push(new Ic("contentType",null,!0)),t.push(new Ic("metadata","customMetadata",!0)),Ec=t,Ec}function Nc(t,e){function n(){const n=t["bucket"],i=t["fullPath"],r=new za(n,i);return e._makeStorageReference(r)}Object.defineProperty(t,"ref",{get:n})}function jc(t,e,n){const i={type:"file"},r=n.length;for(let s=0;s<r;s++){const t=n[s];i[t.local]=t.xform(i,e[t.server])}return Nc(i,t),i}function Rc(t,e,n){const i=Tc(e);if(null===i)return null;const r=i;return jc(t,r,n)}function Mc(t,e,n,i){const r=Tc(e);if(null===r)return null;if(!Ya(r["downloadTokens"]))return null;const s=r["downloadTokens"];if(0===s.length)return null;const o=encodeURIComponent,a=s.split(","),c=a.map(e=>{const r=t["bucket"],s=t["fullPath"],a="/b/"+o(r)+"/o/"+o(s),c=Za(a,n,i),l=tc({alt:"media",token:e});return c+l});return c[0]}function Dc(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc="prefixes",Fc="items";function Uc(t,e,n){const i={prefixes:[],items:[],nextPageToken:n["nextPageToken"]};if(n[Lc])for(const r of n[Lc]){const n=r.replace(/\/$/,""),s=t._makeStorageReference(new za(e,n));i.prefixes.push(s)}if(n[Fc])for(const r of n[Fc]){const n=t._makeStorageReference(new za(e,r["name"]));i.items.push(n)}return i}function Bc(t,e,n){const i=Tc(n);if(null===i)return null;const r=i;return Uc(t,e,r)}class Vc{constructor(t,e,n,i){this.url=t,this.method=e,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){if(!t)throw wa()}function qc(t,e){function n(n,i){const r=Rc(t,i,e);return zc(null!==r),r}return n}function Wc(t,e){function n(n,i){const r=Bc(t,e,i);return zc(null!==r),r}return n}function Hc(t,e){function n(n,i){const r=Rc(t,i,e);return zc(null!==r),Mc(r,i,t.host,t._protocol)}return n}function Gc(t){function e(e,n){let i;return i=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?Sa():Ta():402===e.getStatus()?xa(t.bucket):403===e.getStatus()?Ca(t.path):n,i.serverResponse=n.serverResponse,i}return e}function Kc(t){const e=Gc(t);function n(n,i){let r=e(n,i);return 404===n.getStatus()&&(r=_a(t.path)),r.serverResponse=i.serverResponse,r}return n}function $c(t,e,n){const i=e.fullServerUrl(),r=Za(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Vc(r,s,qc(t,n),o);return a.errorHandler=Kc(e),a}function Yc(t,e,n,i,r){const s={};e.isRoot?s["prefix"]="":s["prefix"]=e.path+"/",n&&n.length>0&&(s["delimiter"]=n),i&&(s["pageToken"]=i),r&&(s["maxResults"]=r);const o=e.bucketOnlyServerUrl(),a=Za(o,t.host,t._protocol),c="GET",l=t.maxOperationRetryTime,h=new Vc(a,c,Wc(t,e.bucket),l);return h.urlParams=s,h.errorHandler=Gc(e),h}function Xc(t,e,n){const i=e.fullServerUrl(),r=Za(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Vc(r,s,Hc(t,n),o);return a.errorHandler=Kc(e),a}function Qc(t,e,n,i){const r=e.fullServerUrl(),s=Za(r,t.host,t._protocol),o="PATCH",a=Dc(n,i),c={"Content-Type":"application/json; charset=utf-8"},l=t.maxOperationRetryTime,h=new Vc(s,o,qc(t,i),l);return h.headers=c,h.body=a,h.errorHandler=Kc(e),h}function Jc(t,e){const n=e.fullServerUrl(),i=Za(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function o(t,e){}const a=new Vc(i,r,o,s);return a.successCodes=[200,204],a.errorHandler=Kc(e),a}function Zc(t,e){return t&&t["contentType"]||e&&e.type()||"application/octet-stream"}function tl(t,e,n){const i=Object.assign({},n);return i["fullPath"]=t.path,i["size"]=e.size(),i["contentType"]||(i["contentType"]=Zc(null,e)),i}function el(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let t="";for(let e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=tl(e,i,r),h=Dc(l,n),u="--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+c+"\r\nContent-Type: "+l["contentType"]+"\r\n\r\n",d="\r\n--"+c+"--",p=xc.getBlob(u,i,d);if(null===p)throw Pa();const f={name:l["fullPath"]},g=Za(s,t.host,t._protocol),m="POST",y=t.maxUploadRetryTime,v=new Vc(g,m,qc(t,n),y);return v.urlParams=f,v.headers=o,v.body=p.uploadData(),v.errorHandler=Gc(e),v}class nl{constructor(t,e,n,i){this.current=t,this.total=e,this.finalized=!!n,this.metadata=i||null}}function il(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){zc(!1)}const i=e||["active"];return zc(!!n&&-1!==i.indexOf(n)),n}function rl(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o=tl(e,i,r),a={name:o["fullPath"]},c=Za(s,t.host,t._protocol),l="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+i.size(),"X-Goog-Upload-Header-Content-Type":o["contentType"],"Content-Type":"application/json; charset=utf-8"},u=Dc(o,n),d=t.maxUploadRetryTime;function p(t){let e;il(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){zc(!1)}return zc(Ya(e)),e}const f=new Vc(c,l,p,d);return f.urlParams=a,f.headers=h,f.body=u,f.errorHandler=Gc(e),f}function sl(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function s(t){const e=il(t,["active","final"]);let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){zc(!1)}n||zc(!1);const r=Number(n);return zc(!isNaN(r)),new nl(r,i.size(),"final"===e)}const o="POST",a=t.maxUploadRetryTime,c=new Vc(n,o,s,a);return c.headers=r,c.errorHandler=Gc(e),c}const ol=262144;function al(t,e,n,i,r,s,o,a){const c=new nl(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=i.size()),i.size()!==c.total)throw Na();const l=c.total-c.current;let h=l;r>0&&(h=Math.min(h,r));const u=c.current,d=u+h,p=h===l?"upload, finalize":"upload",f={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":""+c.current},g=i.slice(u,d);if(null===g)throw Pa();function m(t,n){const r=il(t,["active","final"]),o=c.current+h,a=i.size();let l;return l="final"===r?qc(e,s)(t,n):null,new nl(o,a,"final"===r,l)}const y="POST",v=e.maxUploadRetryTime,b=new Vc(n,y,m,v);return b.headers=f,b.body=g.uploadData(),b.progressCallback=a||null,b.errorHandler=Gc(t),b}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl={STATE_CHANGED:"state_changed"},ll={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hl(t){switch(t){case"running":case"pausing":case"canceling":return ll.RUNNING;case"paused":return ll.PAUSED;case"success":return ll.SUCCESS;case"canceled":return ll.CANCELED;case"error":return ll.ERROR;default:return ll.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(t,e,n){const i=Ka(t)||null!=e||null!=n;if(i)this.next=t,this.error=null!==e&&void 0!==e?e:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const e=t;this.next=e.next,this.error=e.error,this.complete=e.complete}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t,e,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Pc(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=t=>{this._request=void 0,this._chunkMultiplier=1,t._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=t,this._transition("error"))},this._metadataErrorHandler=t=>{this._request=void 0,t._codeEquals("canceled")?this.completeTransitions_():(this._error=t,this._transition("error"))},this._promise=new Promise((t,e)=>{this._resolve=t,this._reject=e,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,n])=>{switch(this._state){case"running":t(e,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,e)=>{const n=rl(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,t,e);this._request=i,i.getPromise().then(t=>{this._request=void 0,this._uploadUrl=t,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,n)=>{const i=sl(this._ref.storage,this._ref._location,t,this._blob),r=this._ref.storage._makeRequest(i,e,n);this._request=r,r.getPromise().then(t=>{t=t,this._request=void 0,this._updateProgress(t.current),this._needToFetchStatus=!1,t.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=ol*this._chunkMultiplier,e=new nl(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((i,r)=>{let s;try{s=al(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,i,r);this._request=o,o.getPromise().then(t=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(t.current),t.finalized?(this._metadata=t.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){const t=ol*this._chunkMultiplier;t<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const n=$c(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(n,t,e);this._request=i,i.getPromise().then(t=>{this._request=void 0,this._metadata=t,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const n=el(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,t,e);this._request=i,i.getPromise().then(t=>{this._request=void 0,this._metadata=t,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":this._state=t,void 0!==this._request&&this._request.cancel();break;case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Oa(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=hl(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,n,i){const r=new ul(e||void 0,n||void 0,i||void 0);return this._addObserver(r),()=>{this._removeObserver(r)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise();const t=this._observers.slice();t.forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(hl(this._state)){case ll.SUCCESS:dl(this._resolve.bind(null,this.snapshot))();break;case ll.CANCELED:case ll.ERROR:const e=this._reject;dl(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){const e=hl(this._state);switch(e){case ll.RUNNING:case ll.PAUSED:t.next&&dl(t.next.bind(t,this.snapshot))();break;case ll.SUCCESS:t.complete&&dl(t.complete.bind(t))();break;case ll.CANCELED:case ll.ERROR:t.error&&dl(t.error.bind(t,this._error))();break;default:t.error&&dl(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t,e){this._service=t,this._location=e instanceof za?e:za.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new fl(t,e)}get root(){const t=new za(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kc(this._location.path)}get storage(){return this._service}get parent(){const t=Sc(this._location.path);if(null===t)return null;const e=new za(this._location.bucket,t);return new fl(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw Da(t)}}function gl(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new pl(t,new xc(e),n)}function ml(t){const e={prefixes:[],items:[]};return yl(t,e).then(()=>e)}async function yl(t,e,n){const i={pageToken:n},r=await vl(t,i);e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&await yl(t,e,r.nextPageToken)}async function vl(t,e){null!=e&&"number"===typeof e.maxResults&&Ja("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=Yc(t.storage,t._location,"/",n.pageToken,n.maxResults);return(await t.storage.makeRequestWithTokens(i)).getPromise()}async function bl(t){t._throwIfRoot("getMetadata");const e=$c(t.storage,t._location,Pc());return(await t.storage.makeRequestWithTokens(e)).getPromise()}async function wl(t,e){t._throwIfRoot("updateMetadata");const n=Qc(t.storage,t._location,e,Pc());return(await t.storage.makeRequestWithTokens(n)).getPromise()}async function _l(t){t._throwIfRoot("getDownloadURL");const e=Xc(t.storage,t._location,Pc());return(await t.storage.makeRequestWithTokens(e)).getPromise().then(t=>{if(null===t)throw ja();return t})}async function xl(t){t._throwIfRoot("deleteObject");const e=Jc(t.storage,t._location);return(await t.storage.makeRequestWithTokens(e)).getPromise()}function Tl(t,e){const n=Cc(t._location.path,e),i=new za(t._location.bucket,n);return new fl(t.storage,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){return/^[A-Za-z]+:\/\//.test(t)}function Cl(t,e){return new fl(t,e)}function kl(t,e){if(t instanceof Al){const n=t;if(null==n._bucket)throw Aa();const i=new fl(n,n._bucket);return null!=e?kl(i,e):i}return void 0!==e?Tl(t,e):t}function Ol(t,e){if(e&&Sl(e)){if(t instanceof Al)return Cl(t,e);throw Ra("To use ref(service, url), the first argument must be a Storage instance.")}return kl(t,e)}function Il(t,e){const n=null===e||void 0===e?void 0:e[ga];return null==n?null:za.makeFromBucketSpec(n,t)}function El(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken="string"===typeof r?r:Object(o["m"])(r,t.app.options.projectId))}class Al{constructor(t,e,n,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=fa,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ma,this._maxUploadRetryTime=ya,this._requests=new Set,this._bucket=null!=r?za.makeFromBucketSpec(r,this._host):Il(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=za.makeFromBucketSpec(this._url,t):this._bucket=Il(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Ja("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Ja("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();return e.token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new fl(this,t)}_makeRequest(t,e,n){if(this._deleted)return new qa(Ma());{const i=ac(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t){const[e,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n)}}const Pl="@firebase/storage",Nl="0.8.4",jl="storage";function Rl(t,e,n){return t=Object(o["u"])(t),gl(t,e,n)}function Ml(t){return t=Object(o["u"])(t),bl(t)}function Dl(t,e){return t=Object(o["u"])(t),wl(t,e)}function Ll(t,e){return t=Object(o["u"])(t),vl(t,e)}function Fl(t){return t=Object(o["u"])(t),ml(t)}function Ul(t){return t=Object(o["u"])(t),_l(t)}function Bl(t){return t=Object(o["u"])(t),xl(t)}function Vl(t,e){return t=Object(o["u"])(t),Ol(t,e)}function zl(t,e){return Tl(t,e)}function ql(t,e,n,i={}){El(t,e,n,i)}function Wl(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Al(n,i,s,new Va,e,r["SDK_VERSION"])}function Hl(){Object(r["_registerComponent"])(new a["a"](jl,Wl,"PUBLIC").setMultipleInstances(!0)),Object(r["registerVersion"])(Pl,Nl,""),Object(r["registerVersion"])(Pl,Nl,"esm2017")}Hl();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gl{constructor(t,e,n){this._delegate=t,this.task=e,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Gl(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(e=>{if(t)return t(new Gl(e,this,this._ref))},e)}on(t,e,n,i){let r=void 0;return e&&(r="function"===typeof e?t=>e(new Gl(t,this,this._ref)):{next:e.next?t=>e.next(new Gl(t,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,r,n||void 0,i||void 0)}}class $l{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Yl(t,this._service))}get items(){return this._delegate.items.map(t=>new Yl(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=zl(this._delegate,t);return new Yl(e,this.storage)}get root(){return new Yl(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Yl(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new Kl(Rl(this._delegate,t,e),this)}putString(t,e=dc.RAW,n){this._throwIfRoot("putString");const i=fc(e,t),r=Object.assign({},n);return null==r["contentType"]&&null!=i.contentType&&(r["contentType"]=i.contentType),new Kl(new pl(this._delegate,new xc(i.data,!0),r),this)}listAll(){return Fl(this._delegate).then(t=>new $l(t,this.storage))}list(t){return Ll(this._delegate,t||void 0).then(t=>new $l(t,this.storage))}getMetadata(){return Ml(this._delegate)}updateMetadata(t){return Dl(this._delegate,t)}getDownloadURL(){return Ul(this._delegate)}delete(){return this._throwIfRoot("delete"),Bl(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw Da(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(Ql(t))throw Ra("ref() expected a child path but got a URL, use refFromURL instead.");return new Yl(Vl(this._delegate,t),this)}refFromURL(t){if(!Ql(t))throw Ra("refFromURL() expected a full URL but got a child path, use ref() instead.");try{za.makeFromUrl(t,this._delegate.host)}catch(e){throw Ra("refFromUrl() expected a valid full URL but got an invalid one.")}return new Yl(Vl(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,n={}){ql(this._delegate,t,e,n)}}function Ql(t){return/^[A-Za-z]+:\/\//.test(t)}const Jl="@firebase/storage-compat",Zl="0.1.4",th="storage-compat";function eh(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e}),r=new Xl(n,i);return r}function nh(t){const e={TaskState:ll,TaskEvent:cl,StringFormat:dc,Storage:Xl,Reference:Yl};t.INTERNAL.registerComponent(new a["a"](th,eh,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(Jl,Zl)}nh(i["a"]);const ih="@firebase/performance",rh="0.5.2",sh=rh,oh="FB-PERF-TRACE-START",ah="FB-PERF-TRACE-STOP",ch="FB-PERF-TRACE-MEASURE",lh="_wt_",hh="_fp",uh="_fcp",dh="_fid",ph="@firebase/performance/config",fh="@firebase/performance/configexpire",gh="performance",mh="Performance",yh={["trace started"]:"Trace {$traceName} was started before.",["trace stopped"]:"Trace {$traceName} is not running.",["nonpositive trace startTime"]:"Trace {$traceName} startTime should be positive.",["nonpositive trace duration"]:"Trace {$traceName} duration should be positive.",["no window"]:"Window is not available.",["no app id"]:"App id is not available.",["no project id"]:"Project id is not available.",["no api key"]:"Api key is not available.",["invalid cc log"]:"Attempted to queue invalid cc event",["FB not default"]:"Performance can only start when Firebase app instance is the default one.",["RC response not ok"]:"RC response is not ok",["invalid attribute name"]:"Attribute name {$attributeName} is invalid.",["invalid attribute value"]:"Attribute value {$attributeValue} is invalid.",["invalid custom metric name"]:"Custom metric name {$customMetricName} is invalid",["invalid String merger input"]:"Input for String merger is invalid, contact support team to resolve.",["already initialized"]:"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},vh=new o["b"](gh,mh,yh),bh=new s["b"](mh);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let wh,_h,xh,Th;bh.logLevel=s["a"].INFO;class Sh{constructor(t){if(this.window=t,!t)throw vh.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(t){this.performance&&this.performance.mark&&this.performance.mark(t)}measure(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)}getEntriesByType(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]}getEntriesByName(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&Object(o["e"])()?!!Object(o["C"])()||(bh.info("IndexedDB is not supported by current browswer"),!1):(bh.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(t,e){if(!this.PerformanceObserver)return;const n=new this.PerformanceObserver(t=>{for(const n of t.getEntries())e(n)});n.observe({entryTypes:[t]})}static getInstance(){return void 0===wh&&(wh=new Sh(_h)),wh}}function Ch(t){_h=t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t){const e=t.getId();return e.then(t=>{xh=t}),e}function Oh(){return xh}function Ih(t){const e=t.getToken();return e.then(t=>{}),e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t,e){const n=t.length-e.length;if(n<0||n>1)throw vh.create("invalid String merger input");const i=[];for(let r=0;r<t.length;r++)i.push(t.charAt(r)),e.length>r&&i.push(e.charAt(r));return i.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Eh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Eh("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===Th&&(Th=new Ah),Th}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ph;(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["VISIBLE"]=1]="VISIBLE",t[t["HIDDEN"]=2]="HIDDEN"})(Ph||(Ph={}));const Nh=["firebase_","google_","ga_"],jh=new RegExp("^[a-zA-Z]\\w*$"),Rh=40,Mh=100;function Dh(){const t=Sh.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Lh(){const t=Sh.getInstance().document,e=t.visibilityState;switch(e){case"visible":return Ph.VISIBLE;case"hidden":return Ph.HIDDEN;default:return Ph.UNKNOWN}}function Fh(){const t=Sh.getInstance().navigator,e=t.connection,n=e&&e.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Uh(t){if(0===t.length||t.length>Rh)return!1;const e=Nh.some(e=>t.startsWith(e));return!e&&!!t.match(jh)}function Bh(t){return 0!==t.length&&t.length<=Mh}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t){var e;const n=null===(e=t.options)||void 0===e?void 0:e.appId;if(!n)throw vh.create("no app id");return n}function zh(t){var e;const n=null===(e=t.options)||void 0===e?void 0:e.projectId;if(!n)throw vh.create("no project id");return n}function qh(t){var e;const n=null===(e=t.options)||void 0===e?void 0:e.apiKey;if(!n)throw vh.create("no api key");return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="0.0.1",Hh={loggingEnabled:!0},Gh="FIREBASE_INSTALLATIONS_AUTH";function Kh(t,e){const n=$h();return n?(Jh(n),Promise.resolve()):Qh(t,e).then(Jh).then(t=>Yh(t),()=>{})}function $h(){const t=Sh.getInstance().localStorage;if(!t)return;const e=t.getItem(fh);if(!e||!Zh(e))return;const n=t.getItem(ph);if(n)try{const t=JSON.parse(n);return t}catch(i){return}}function Yh(t){const e=Sh.getInstance().localStorage;t&&e&&(e.setItem(ph,JSON.stringify(t)),e.setItem(fh,String(Date.now()+60*Ah.getInstance().configTimeToLive*60*1e3)))}const Xh="Could not fetch config, will use default configs";function Qh(t,e){return Ih(t.installations).then(n=>{const i=zh(t.app),r=qh(t.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${i}/namespaces/fireperf:fetch?key=${r}`,o=new Request(s,{method:"POST",headers:{Authorization:`${Gh} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:Vh(t.app),app_version:sh,sdk_version:Wh})});return fetch(o).then(t=>{if(t.ok)return t.json();throw vh.create("RC response not ok")})}).catch(()=>{bh.info(Xh)})}function Jh(t){if(!t)return t;const e=Ah.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=Hh.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=tu(e.tracesSamplingRate),e.logNetworkAfterSampling=tu(e.networkRequestsSamplingRate),t}function Zh(t){return Number(t)>Date.now()}function tu(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu,nu=1;function iu(t){return nu=2,eu=eu||su(t),eu}function ru(){return 3===nu}function su(t){return ou().then(()=>kh(t.installations)).then(e=>Kh(t,e)).then(()=>au(),()=>au())}function ou(){const t=Sh.getInstance().document;return new Promise(e=>{if(t&&"complete"!==t.readyState){const n=()=>{"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function au(){nu=3}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=1e4,lu=5500,hu=3,uu=1e3;let du,pu=hu,fu=[],gu=!1;function mu(){gu||(yu(lu),gu=!0)}function yu(t){setTimeout(()=>{if(0!==pu)return fu.length?void vu():yu(cu)},t)}function vu(){const t=fu.splice(0,uu),e=t.map(t=>({source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ah.getInstance().logSource,log_event:e};bu(n,t).catch(()=>{fu=[...t,...fu],pu--,bh.info(`Tries left: ${pu}.`),yu(cu)})}function bu(t,e){return wu(t).then(t=>(t.ok||bh.info("Call to Firebase backend failed."),t.json())).then(t=>{const n=Number(t.nextRequestWaitMillis);let i=cu;isNaN(n)||(i=Math.max(n,i));const r=t.logResponseDetails;Array.isArray(r)&&r.length>0&&"RETRY_REQUEST_LATER"===r[0].responseAction&&(fu=[...e,...fu],bh.info("Retry transport request later.")),pu=hu,yu(i)})}function wu(t){const e=Ah.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function _u(t){if(!t.eventTime||!t.message)throw vh.create("invalid cc log");fu=[...fu,t]}function xu(t){return(...e)=>{const n=t(...e);_u({message:n,eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t,e){du||(du=xu(Ou)),du(t,e)}function Su(t){const e=Ah.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&Sh.getInstance().requiredApisAvailable()&&(t.isAuto&&Lh()!==Ph.VISIBLE||(ru()?Cu(t):iu(t.performanceController).then(()=>Cu(t),()=>Cu(t))))}function Cu(t){if(!Oh())return;const e=Ah.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(()=>Tu(t,1),0)}function ku(t){const e=Ah.getInstance();if(!e.instrumentationEnabled)return;const n=t.url,i=e.logEndPointUrl.split("?")[0],r=e.flTransportEndpointUrl.split("?")[0];n!==i&&n!==r&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(()=>Tu(t,0),0)}function Ou(t,e){return 0===e?Iu(t):Eu(t)}function Iu(t){const e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Au(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function Eu(t){const e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);const n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);const i={application_info:Au(t.performanceController.app),trace_metric:e};return JSON.stringify(i)}function Au(t){return{google_app_id:Vh(t),app_instance_id:Oh(),web_app_info:{sdk_version:sh,page_url:Sh.getInstance().getUrl(),service_worker_status:Dh(),visibility_state:Lh(),effective_connection_type:Fh()},application_process_state:0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=100,Nu="_",ju=[hh,uh,dh];function Ru(t,e){return!(0===t.length||t.length>Pu)&&(e&&e.startsWith(lh)&&ju.indexOf(t)>-1||!t.startsWith(Nu))}function Mu(t){const e=Math.floor(t);return e<t&&bh.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(t,e,n=!1,i){this.performanceController=t,this.name=e,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=Sh.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`${oh}-${this.randomId}-${this.name}`,this.traceStopMark=`${ah}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${ch}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw vh.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw vh.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Su(this)}record(t,e,n){if(t<=0)throw vh.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw vh.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const i of Object.keys(n.metrics))isNaN(Number(n.metrics[i]))||(this.counters[i]=Number(Math.floor(n.metrics[i])));Su(this)}incrementMetric(t,e=1){void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)}putMetric(t,e){if(!Ru(t,this.name))throw vh.create("invalid custom metric name",{customMetricName:t});this.counters[t]=Mu(e)}getMetric(t){return this.counters[t]||0}putAttribute(t,e){const n=Uh(t),i=Bh(e);if(n&&i)this.customAttributes[t]=e;else{if(!n)throw vh.create("invalid attribute name",{attributeName:t});if(!i)throw vh.create("invalid attribute value",{attributeValue:e})}}getAttribute(t){return this.customAttributes[t]}removeAttribute(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(t){this.startTimeUs=t}setDuration(t){this.durationUs=t}calculateTraceMetrics(){const t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))}static createOobTrace(t,e,n,i){const r=Sh.getInstance().getUrl();if(!r)return;const s=new Du(t,lh+r,!0),o=Math.floor(1e3*Sh.getInstance().getTimeOrigin());s.setStartTime(o),e&&e[0]&&(s.setDuration(Math.floor(1e3*e[0].duration)),s.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),s.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),s.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));const a="first-paint",c="first-contentful-paint";if(n){const t=n.find(t=>t.name===a);t&&t.startTime&&s.putMetric(hh,Math.floor(1e3*t.startTime));const e=n.find(t=>t.name===c);e&&e.startTime&&s.putMetric(uh,Math.floor(1e3*e.startTime)),i&&s.putMetric(dh,Math.floor(1e3*i))}Su(s)}static createUserTimingTrace(t,e){const n=new Du(t,e,!1,e);Su(n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e){const n=e;if(!n||void 0===n.responseStart)return;const i=Sh.getInstance().getTimeOrigin(),r=Math.floor(1e3*(n.startTime+i)),s=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,o=Math.floor(1e3*(n.responseEnd-n.startTime)),a=n.name&&n.name.split("?")[0],c={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:r,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};ku(c)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=5e3;function Uu(t){Oh()&&(setTimeout(()=>Vu(t),0),setTimeout(()=>Bu(t),0),setTimeout(()=>zu(t),0))}function Bu(t){const e=Sh.getInstance(),n=e.getEntriesByType("resource");for(const i of n)Lu(t,i);e.setupObserver("resource",e=>Lu(t,e))}function Vu(t){const e=Sh.getInstance(),n=e.getEntriesByType("navigation"),i=e.getEntriesByType("paint");if(e.onFirstInputDelay){let r=setTimeout(()=>{Du.createOobTrace(t,n,i),r=void 0},Fu);e.onFirstInputDelay(e=>{r&&(clearTimeout(r),Du.createOobTrace(t,n,i,e))})}else Du.createOobTrace(t,n,i)}function zu(t){const e=Sh.getInstance(),n=e.getEntriesByType("measure");for(const i of n)qu(t,i);e.setupObserver("measure",e=>qu(t,e))}function qu(t,e){const n=e.name;n.substring(0,ch.length)!==ch&&Du.createUserTimingTrace(t,n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(t,e){this.app=t,this.installations=e,this.initialized=!1}_init(t){this.initialized||(void 0!==(null===t||void 0===t?void 0:t.dataCollectionEnabled)&&(this.dataCollectionEnabled=t.dataCollectionEnabled),void 0!==(null===t||void 0===t?void 0:t.instrumentationEnabled)&&(this.instrumentationEnabled=t.instrumentationEnabled),Sh.getInstance().requiredApisAvailable()?Object(o["W"])().then(t=>{t&&(mu(),iu(this).then(()=>Uu(this),()=>Uu(this)),this.initialized=!0)}).catch(t=>{bh.info("Environment doesn't support IndexedDB: "+t)}):bh.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(t){Ah.getInstance().instrumentationEnabled=t}get instrumentationEnabled(){return Ah.getInstance().instrumentationEnabled}set dataCollectionEnabled(t){Ah.getInstance().dataCollectionEnabled=t}get dataCollectionEnabled(){return Ah.getInstance().dataCollectionEnabled}}const Hu="[DEFAULT]";function Gu(t,e){return t=Object(o["u"])(t),new Du(t,e)}const Ku=(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();if(n.name!==Hu)throw vh.create("FB not default");if("undefined"===typeof window)throw vh.create("no window");Ch(window);const r=new Wu(n,i);return r._init(e),r};function $u(){Object(r["_registerComponent"])(new a["a"]("performance",Ku,"PUBLIC")),Object(r["registerVersion"])(ih,rh),Object(r["registerVersion"])(ih,rh,"esm2017")}$u();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Yu{constructor(t,e){this.app=t,this._delegate=e}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(t){this._delegate.instrumentationEnabled=t}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(t){this._delegate.dataCollectionEnabled=t}trace(t){return Gu(this._delegate,t)}}const Xu="@firebase/performance-compat",Qu="0.1.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ju(t){t.INTERNAL.registerComponent(new a["a"]("performance-compat",Zu,"PUBLIC")),t.registerVersion(Xu,Qu)}function Zu(t){const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("performance").getImmediate();return new Yu(e,n)}Ju(i["a"]);const td="@firebase/remote-config",ed="0.3.1";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class nd{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="remote-config",rd={["registration-window"]:"Undefined window object. This SDK only supports usage in a browser environment.",["registration-project-id"]:"Undefined project identifier. Check Firebase app initialization.",["registration-api-key"]:"Undefined API key. Check Firebase app initialization.",["registration-app-id"]:"Undefined app identifier. Check Firebase app initialization.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",["fetch-client-network"]:"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-timeout"]:'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',["fetch-throttle"]:'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',["fetch-client-parse"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["indexed-db-unavailable"]:"Indexed DB is not supported by current browser"},sd=new o["b"]("remoteconfig","Remote Config",rd);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t,e){return t instanceof o["c"]&&-1!==t.code.indexOf(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=!1,cd="",ld=0,hd=["1","true","t","yes","y","on"];class ud{constructor(t,e=cd){this._source=t,this._value=e}asString(){return this._value}asBoolean(){return"static"===this._source?ad:hd.indexOf(this._value.toLowerCase())>=0}asNumber(){if("static"===this._source)return ld;let t=Number(this._value);return isNaN(t)&&(t=ld),t}getSource(){return this._source}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(t){const e=Object(o["u"])(t),[n,i]=await Promise.all([e._storage.getLastSuccessfulFetchResponse(),e._storage.getActiveConfigEtag()]);return!!(n&&n.config&&n.eTag&&n.eTag!==i)&&(await Promise.all([e._storageCache.setActiveConfig(n.config),e._storage.setActiveConfigEtag(n.eTag)]),!0)}function pd(t){const e=Object(o["u"])(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}async function fd(t){const e=Object(o["u"])(t),n=new nd;setTimeout(async()=>{n.abort()},e.settings.fetchTimeoutMillis);try{await e._client.fetch({cacheMaxAgeMillis:e.settings.minimumFetchIntervalMillis,signal:n}),await e._storageCache.setLastFetchStatus("success")}catch(i){const t=od(i,"fetch-throttle")?"throttle":"failure";throw await e._storageCache.setLastFetchStatus(t),i}}function gd(t){const e=Object(o["u"])(t);return _d(e._storageCache.getActiveConfig(),e.defaultConfig).reduce((e,n)=>(e[n]=bd(t,n),e),{})}function md(t,e){return bd(Object(o["u"])(t),e).asBoolean()}function yd(t,e){return bd(Object(o["u"])(t),e).asNumber()}function vd(t,e){return bd(Object(o["u"])(t),e).asString()}function bd(t,e){const n=Object(o["u"])(t);n._isInitializationComplete||n._logger.debug(`A value was requested for key "${e}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const i=n._storageCache.getActiveConfig();return i&&void 0!==i[e]?new ud("remote",i[e]):n.defaultConfig&&void 0!==n.defaultConfig[e]?new ud("default",String(n.defaultConfig[e])):(n._logger.debug(`Returning static value for key "${e}". Define a default or remote value if this is unintentional.`),new ud("static"))}function wd(t,e){const n=Object(o["u"])(t);switch(e){case"debug":n._logger.logLevel=s["a"].DEBUG;break;case"silent":n._logger.logLevel=s["a"].SILENT;break;default:n._logger.logLevel=s["a"].ERROR}}function _d(t={},e={}){return Object.keys(Object.assign(Object.assign({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(t,e,n,i){this.client=t,this.storage=e,this.storageCache=n,this.logger=i}isCachedDataFresh(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-e,i=n<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${i}.`),i}async fetch(t){const[e,n]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(t.cacheMaxAgeMillis,e))return n;t.eTag=n&&n.eTag;const i=await this.client.fetch(t),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&r.push(this.storage.setLastSuccessfulFetchResponse(i)),await Promise.all(r),i}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t=navigator){return t.languages&&t.languages[0]||t.language}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(t,e,n,i,r,s){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=i,this.apiKey=r,this.appId=s}async fetch(t){const[e,n]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=`${i}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},o={sdk_version:this.sdkVersion,app_instance_id:e,app_instance_id_token:n,app_id:this.appId,language_code:Td()},a={method:"POST",headers:s,body:JSON.stringify(o)},c=fetch(r,a),l=new Promise((e,n)=>{t.signal.addEventListener(()=>{const t=new Error("The operation was aborted.");t.name="AbortError",n(t)})});let h;try{await Promise.race([c,l]),h=await c}catch(g){let t="fetch-client-network";throw"AbortError"===g.name&&(t="fetch-timeout"),sd.create(t,{originalErrorMessage:g.message})}let u=h.status;const d=h.headers.get("ETag")||void 0;let p,f;if(200===h.status){let t;try{t=await h.json()}catch(g){throw sd.create("fetch-client-parse",{originalErrorMessage:g.message})}p=t["entries"],f=t["state"]}if("INSTANCE_STATE_UNSPECIFIED"===f?u=500:"NO_CHANGE"===f?u=304:"NO_TEMPLATE"!==f&&"EMPTY_CONFIG"!==f||(p={}),304!==u&&200!==u)throw sd.create("fetch-status",{httpStatus:u});return{status:u,eTag:d,config:p}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(sd.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kd(t){if(!(t instanceof o["c"])||!t.customData)return!1;const e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}class Od{constructor(t,e){this.client=t,this.storage=e}async fetch(t){const e=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,e)}async attemptFetch(t,{throttleEndTimeMillis:e,backoffCount:n}){await Cd(t.signal,e);try{const e=await this.client.fetch(t);return await this.storage.deleteThrottleMetadata(),e}catch(i){if(!kd(i))throw i;const e={throttleEndTimeMillis:Date.now()+Object(o["k"])(n),backoffCount:n+1};return await this.storage.setThrottleMetadata(e),this.attemptFetch(t,e)}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=6e4,Ed=432e5;class Ad{constructor(t,e,n,i,r){this.app=t,this._client=e,this._storageCache=n,this._storage=i,this._logger=r,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Id,minimumFetchIntervalMillis:Ed},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t,e){const n=t.target.error||void 0;return sd.create(e,{originalErrorMessage:n&&n.message})}const Nd="app_namespace_store",jd="firebase_remote_config",Rd=1;function Md(){return new Promise((t,e)=>{try{const n=indexedDB.open(jd,Rd);n.onerror=t=>{e(Pd(t,"storage-open"))},n.onsuccess=e=>{t(e.target.result)},n.onupgradeneeded=t=>{const e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(Nd,{keyPath:"compositeKey"})}}}catch(n){e(sd.create("storage-open",{originalErrorMessage:n}))}})}class Dd{constructor(t,e,n,i=Md()){this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(t){const e=await this.openDbPromise;return new Promise((n,i)=>{const r=e.transaction([Nd],"readonly"),s=r.objectStore(Nd),o=this.createCompositeKey(t);try{const t=s.get(o);t.onerror=t=>{i(Pd(t,"storage-get"))},t.onsuccess=t=>{const e=t.target.result;n(e?e.value:void 0)}}catch(a){i(sd.create("storage-get",{originalErrorMessage:a&&a.message}))}})}async set(t,e){const n=await this.openDbPromise;return new Promise((i,r)=>{const s=n.transaction([Nd],"readwrite"),o=s.objectStore(Nd),a=this.createCompositeKey(t);try{const t=o.put({compositeKey:a,value:e});t.onerror=t=>{r(Pd(t,"storage-set"))},t.onsuccess=()=>{i()}}catch(c){r(sd.create("storage-set",{originalErrorMessage:c&&c.message}))}})}async delete(t){const e=await this.openDbPromise;return new Promise((n,i)=>{const r=e.transaction([Nd],"readwrite"),s=r.objectStore(Nd),o=this.createCompositeKey(t);try{const t=s.delete(o);t.onerror=t=>{i(Pd(t,"storage-delete"))},t.onsuccess=()=>{n()}}catch(a){i(sd.create("storage-delete",{originalErrorMessage:a&&a.message}))}})}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),i=await t;i&&(this.lastFetchStatus=i);const r=await e;r&&(this.lastSuccessfulFetchTimestampMillis=r);const s=await n;s&&(this.activeConfig=s)}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){function t(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();if("undefined"===typeof window)throw sd.create("registration-window");if(!Object(o["C"])())throw sd.create("indexed-db-unavailable");const{projectId:a,apiKey:c,appId:l}=n.options;if(!a)throw sd.create("registration-project-id");if(!c)throw sd.create("registration-api-key");if(!l)throw sd.create("registration-app-id");e=e||"firebase";const h=new Dd(l,n.name,e),u=new Ld(h),d=new s["b"](td);d.logLevel=s["a"].ERROR;const p=new Sd(i,r["SDK_VERSION"],e,a,c,l),f=new Od(p,h),g=new xd(f,h,u,d),m=new Ad(n,g,u,h,d);return pd(m),m}Object(r["_registerComponent"])(new a["a"](id,t,"PUBLIC").setMultipleInstances(!0)),Object(r["registerVersion"])(td,ed),Object(r["registerVersion"])(td,ed,"esm2017")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(t){return t=Object(o["u"])(t),await fd(t),dd(t)}async function Bd(){if(!Object(o["C"])())return!1;try{const t=await Object(o["W"])();return t}catch(t){return!1}}Fd();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Vd{constructor(t,e){this.app=t,this._delegate=e}get defaultConfig(){return this._delegate.defaultConfig}set defaultConfig(t){this._delegate.defaultConfig=t}get fetchTimeMillis(){return this._delegate.fetchTimeMillis}get lastFetchStatus(){return this._delegate.lastFetchStatus}get settings(){return this._delegate.settings}set settings(t){this._delegate.settings=t}activate(){return dd(this._delegate)}ensureInitialized(){return pd(this._delegate)}fetch(){return fd(this._delegate)}fetchAndActivate(){return Ud(this._delegate)}getAll(){return gd(this._delegate)}getBoolean(t){return md(this._delegate,t)}getNumber(t){return yd(this._delegate,t)}getString(t){return vd(this._delegate,t)}getValue(t){return bd(this._delegate,t)}setLogLevel(t){wd(this._delegate,t)}}const zd="@firebase/remote-config-compat",qd="0.1.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Wd(t){t.INTERNAL.registerComponent(new a["a"]("remoteConfig-compat",Hd,"PUBLIC").setMultipleInstances(!0).setServiceProps({isSupported:Bd})),t.registerVersion(zd,qd)}function Hd(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("remote-config").getImmediate({identifier:e});return new Vd(n,i)}Wd(i["a"]);var Gd="firebase",Kd="9.2.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i["a"].registerVersion(Gd,Kd,"app-compat");var $d="firebase",Yd="9.2.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),i["a"].registerVersion($d,Yd,"compat")},"342f":function(t,e,n){var i=n("d066");t.exports=i("navigator","userAgent")||""},"35a1":function(t,e,n){var i=n("f5df"),r=n("dc4a"),s=n("3f8c"),o=n("b622"),a=o("iterator");t.exports=function(t){if(void 0!=t)return r(t,a)||r(t,"@@iterator")||s[i(t)]}},"37e8":function(t,e,n){var i=n("83ab"),r=n("9bf2"),s=n("825a"),o=n("df75");t.exports=i?Object.defineProperties:function(t,e){s(t);var n,i=o(e),a=i.length,c=0;while(a>c)r.f(t,n=i[c++],e[n]);return t}},"3bbe":function(t,e,n){var i=n("1626");t.exports=function(t){if("object"===typeof t||i(t))return t;throw TypeError("Can't set "+String(t)+" as a prototype")}},"3ca3":function(t,e,n){"use strict";var i=n("6547").charAt,r=n("577e"),s=n("69f3"),o=n("7dd0"),a="String Iterator",c=s.set,l=s.getterFor(a);o(String,"String",(function(t){c(this,{type:a,string:r(t),index:0})}),(function(){var t,e=l(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=i(n,r),e.index+=t.length,{value:t,done:!1})}))},"3f4e":function(t,e,n){"use strict";n.d(e,"setupDevtoolsPlugin",(function(){return o}));var i=n("abc5"),r=n("b774"),s=n("f30a");function o(t,e){const n=Object(i["b"])(),o=Object(i["a"])(),a=i["c"]&&t.enableEarlyProxy;if(!o||!n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&a){const i=a?new s["a"](t,o):null,r=n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[];r.push({pluginDescriptor:t,setupFn:e,proxy:i}),i&&e(i.proxiedTarget)}else o.emit(r["b"],t,e)}},"3f8c":function(t,e){t.exports={}},"428f":function(t,e,n){var i=n("da84");t.exports=i},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,i="/";e.cwd=function(){return i},e.chdir=function(e){t||(t=n("df7c")),i=t.resolve(e,i)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},4452:function(t,e,n){!function(e,i){t.exports=i(n("ea7f"),n("7a23"))}(window,(function(t,e){return r={},n.m=i=[function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.r(e),n.d(e,"Chart",(function(){return d})),n.d(e,"default",(function(){return p}));e=n(0);var i=n.n(e);function r(t,e){return function t(e,n,r){function s(s,o){!i.a.isObject(s,!r)||i.a.isClass(s)||i.a.isDOMElement(s)?e[o]=n[o]:e[o]=t(e[o]||i.a.isArray(s)?[]:{},s,r)}return i.a.isArray(n)?n.forEach(s):i.a.objectEach(n,s),e}({},t,e)}var s=n(1);function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function c(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)),i}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){var i,r;i=t,e=n[r=e],r in i?Object.defineProperty(i,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[r]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(){this.chart&&this.chart.destroy()}var u=function(t,e){return e=e.split(".")[0]<3?{render:function(t){return t("div",{ref:"chart"})},beforeDestroy:h}:{render:function(){return Object(s.h)("div",{ref:"chart"})},beforeUnmount:h},l({template:'<div ref="chart"></div>',props:{constructorType:{type:String,default:"chart"},options:{type:Object,required:!0},callback:Function,updateArgs:{type:Array,default:function(){return[!0,!0]}},highcharts:{type:Object},deepCopyOnUpdate:{type:Boolean,default:!0}},watch:{options:{handler:function(t){var e;(e=this.chart).update.apply(e,[r(t,this.deepCopyOnUpdate)].concat(o(this.updateArgs)))},deep:!0}},mounted:function(){var e=this.highcharts||t;this.options&&e[this.constructorType]?this.chart=e[this.constructorType](this.$refs.chart,r(this.options,!0),this.callback||null):this.options?console.warn("'".concat(this.constructorType,"' constructor-type is incorrect. Sometimes this error is caused by the fact, that the corresponding module wasn't imported.")):console.warn('The "options" parameter was not passed.')}},e)},d=u(i.a,s.version||n.n(s).a.version);function p(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.component(e.tagName||"highcharts",u(e.highcharts||i.a,t.version))}}],n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2);function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var i,r}))},"44ad":function(t,e,n){var i=n("d039"),r=n("c6b6"),s="".split;t.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?s.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var i=n("b622"),r=n("7c73"),s=n("9bf2"),o=i("unscopables"),a=Array.prototype;void 0==a[o]&&s.f(a,o,{configurable:!0,value:r(null)}),t.exports=function(t){a[o][t]=!0}},"44de":function(t,e,n){var i=n("da84");t.exports=function(t,e){var n=i.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},"44e7":function(t,e,n){var i=n("861d"),r=n("c6b6"),s=n("b622"),o=s("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},4840:function(t,e,n){var i=n("825a"),r=n("5087"),s=n("b622"),o=s("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||void 0==(n=i(s)[o])?e:r(n)}},"485a":function(t,e,n){var i=n("1626"),r=n("861d");t.exports=function(t,e){var n,s;if("string"===e&&i(n=t.toString)&&!r(s=n.call(t)))return s;if(i(n=t.valueOf)&&!r(s=n.call(t)))return s;if("string"!==e&&i(n=t.toString)&&!r(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},4930:function(t,e,n){var i=n("2d00"),r=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},"4d64":function(t,e,n){var i=n("fc6a"),r=n("50c4"),s=n("23cb"),o=function(t){return function(e,n,o){var a,c=i(e),l=r(c.length),h=s(o,l);if(t&&n!=n){while(l>h)if(a=c[h++],a!=a)return!0}else for(;l>h;h++)if((t||h in c)&&c[h]===n)return t||h||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},"4de4":function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").filter,s=n("1dde"),o=s("filter");i({target:"Array",proto:!0,forced:!o},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,n){"use strict";var i=n("0366"),r=n("7b0b"),s=n("9bdd"),o=n("e95a"),a=n("68ee"),c=n("50c4"),l=n("8418"),h=n("9a1f"),u=n("35a1");t.exports=function(t){var e=r(t),n=a(this),d=arguments.length,p=d>1?arguments[1]:void 0,f=void 0!==p;f&&(p=i(p,d>2?arguments[2]:void 0,2));var g,m,y,v,b,w,_=u(e),x=0;if(!_||this==Array&&o(_))for(g=c(e.length),m=n?new this(g):Array(g);g>x;x++)w=f?p(e[x],x):e[x],l(m,x,w);else for(v=h(e,_),b=v.next,m=n?new this:[];!(y=b.call(v)).done;x++)w=f?s(v,p,[y.value,x],!0):y.value,l(m,x,w);return m.length=x,m}},"4e82":function(t,e,n){"use strict";var i=n("23e7"),r=n("59ed"),s=n("7b0b"),o=n("50c4"),a=n("577e"),c=n("d039"),l=n("addb"),h=n("a640"),u=n("04d1"),d=n("d998"),p=n("2d00"),f=n("512c"),g=[],m=g.sort,y=c((function(){g.sort(void 0)})),v=c((function(){g.sort(null)})),b=h("sort"),w=!c((function(){if(p)return p<70;if(!(u&&u>3)){if(d)return!0;if(f)return f<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)g.push({k:e+i,v:n})}for(g.sort((function(t,e){return e.v-t.v})),i=0;i<g.length;i++)e=g[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}})),_=y||!v||!b||!w,x=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:a(e)>a(n)?1:-1}};i({target:"Array",proto:!0,forced:_},{sort:function(t){void 0!==t&&r(t);var e=s(this);if(w)return void 0===t?m.call(e):m.call(e,t);var n,i,a=[],c=o(e.length);for(i=0;i<c;i++)i in e&&a.push(e[i]);a=l(a,x(t)),n=a.length,i=0;while(i<n)e[i]=a[i++];while(i<c)delete e[i++];return e}})},"4f60":function(t,e,n){"use strict";var i=n("614a");n.d(e,"a",(function(){return i["a"]}));var r="firebase",s="9.2.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i["a"].registerVersion(r,s,"app-compat")},"4fc1":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return u}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const i=[];var r;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(r||(r={}));const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,a={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},c=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=a[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class l{constructor(t){this.name=t,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in r))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?s[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...t),this._logHandler(this,r.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...t),this._logHandler(this,r.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,r.INFO,...t),this._logHandler(this,r.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,r.WARN,...t),this._logHandler(this,r.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...t),this._logHandler(this,r.ERROR,...t)}}function h(t){i.forEach(e=>{e.setLogLevel(t)})}function u(t,e){for(const n of i){let i=null;e&&e.level&&(i=s[e.level]),n.userLogHandler=null===t?null:(e,n,...s)=>{const o=s.map(t=>{if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(t=>t).join(" ");n>=(null!==i&&void 0!==i?i:e.logLevel)&&t({level:r[n].toLowerCase(),message:o,args:s,type:e.name})}}}},5087:function(t,e,n){var i=n("68ee"),r=n("0d51");t.exports=function(t){if(i(t))return t;throw TypeError(r(t)+" is not a constructor")}},"50c4":function(t,e,n){var i=n("a691"),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},"512c":function(t,e,n){var i=n("342f"),r=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},5135:function(t,e,n){var i=n("7b0b"),r={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return r.call(i(t),e)}},"51b0":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return pa})),n.d(e,"b",(function(){return fa})),n.d(e,"c",(function(){return Un})),n.d(e,"d",(function(){return va})),n.d(e,"e",(function(){return pc})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return po})),n.d(e,"h",(function(){return go})),n.d(e,"i",(function(){return xa})),n.d(e,"j",(function(){return yc})),n.d(e,"k",(function(){return wc})),n.d(e,"l",(function(){return Va})),n.d(e,"m",(function(){return qa})),n.d(e,"n",(function(){return ac})),n.d(e,"o",(function(){return Ea})),n.d(e,"p",(function(){return vc})),n.d(e,"q",(function(){return bc})),n.d(e,"r",(function(){return Sc})),n.d(e,"s",(function(){return Ya})),n.d(e,"t",(function(){return Qa})),n.d(e,"u",(function(){return Fa})),n.d(e,"v",(function(){return Ra})),n.d(e,"w",(function(){return Ma})),n.d(e,"x",(function(){return Da})),n.d(e,"y",(function(){return La})),n.d(e,"z",(function(){return ja})),n.d(e,"A",(function(){return Za})),n.d(e,"B",(function(){return ec})),n.d(e,"C",(function(){return ic})),n.d(e,"D",(function(){return sc})),n.d(e,"E",(function(){return Ta})),n.d(e,"F",(function(){return cc})),n.d(e,"G",(function(){return wa})),n.d(e,"H",(function(){return _a})),n.d(e,"I",(function(){return Sa})),n.d(e,"J",(function(){return kc})),n.d(e,"K",(function(){return Tc})),n.d(e,"L",(function(){return Ca})),n.d(e,"M",(function(){return ka})),n.d(e,"N",(function(){return Oa})),n.d(e,"O",(function(){return Ka})),n.d(e,"P",(function(){return Ha})),n.d(e,"Q",(function(){return Ia}));var i=n("5606"),r=n("ffa6"),s=n("1fd5"),o=n("4fc1");const a="@firebase/database",c="0.12.2";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let l="";function h(t){l=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(s["S"])(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(s["L"])(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return Object(s["l"])(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(e){}return new d},f=p("localStorage"),g=p("sessionStorage"),m=new o["b"]("@firebase/database"),y=function(){let t=1;return function(){return t++}}(),v=function(t){const e=Object(s["R"])(t),n=new s["d"];n.update(e);const i=n.digest();return s["h"].encodeByteArray(i)},b=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&"object"===typeof i&&"number"===typeof i.length?e+=b.apply(null,i):e+="object"===typeof i?Object(s["S"])(i):i,e+=" "}return e};let w=null,_=!0;const x=function(t,e){Object(s["f"])(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=o["a"].VERBOSE,w=m.log.bind(m),e&&g.set("logging_enabled",!0)):"function"===typeof t?w=t:(w=null,g.remove("logging_enabled"))},T=function(...t){if(!0===_&&(_=!1,null===w&&!0===g.get("logging_enabled")&&x(!0)),w){const e=b.apply(null,t);w(e)}},S=function(t){return function(...e){T(t,...e)}},C=function(...t){const e="FIREBASE INTERNAL ERROR: "+b(...t);m.error(e)},k=function(...t){const e="FIREBASE FATAL ERROR: "+b(...t);throw m.error(e),new Error(e)},O=function(...t){const e="FIREBASE WARNING: "+b(...t);m.warn(e)},I=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},E=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A=function(t){if(Object(s["F"])()||"complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},P="[MIN_NAME]",N="[MAX_NAME]",j=function(t,e){if(t===e)return 0;if(t===P||e===N)return-1;if(e===P||t===N)return 1;{const n=G(t),i=G(e);return null!==n?null!==i?n-i===0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1}},R=function(t,e){return t===e?0:t<e?-1:1},M=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(s["S"])(e))},D=function(t){if("object"!==typeof t||null===t)return Object(s["S"])(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)0!==i&&(n+=","),n+=Object(s["S"])(e[i]),n+=":",n+=D(t[e[i]]);return n+="}",n},L=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function F(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const U=function(t){Object(s["f"])(!E(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,a,c,l;0===t?(o=0,a=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=c+i,a=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(o=0,a=Math.round(t/Math.pow(2,1-i-n))));const h=[];for(l=n;l;l-=1)h.push(a%2?1:0),a=Math.floor(a/2);for(l=e;l;l-=1)h.push(o%2?1:0),o=Math.floor(o/2);h.push(r?1:0),h.reverse();const u=h.join("");let d="";for(l=0;l<64;l+=8){let t=parseInt(u.substr(l,8),2).toString(16);1===t.length&&(t="0"+t),d+=t}return d.toLowerCase()},B=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},V=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI};function z(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const q=new RegExp("^-?(0*)\\d{1,10}$"),W=-2147483648,H=2147483647,G=function(t){if(q.test(t)){const e=Number(t);if(e>=W&&e<=H)return e}return null},K=function(t){try{t()}catch(e){setTimeout(()=>{const t=e.stack||"";throw O("Exception was thrown by user callback.",t),e},Math.floor(0))}},$=function(){const t="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Y=function(t,e){const n=setTimeout(t,e);return"object"===typeof n&&n["unref"]&&n["unref"](),n};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class X{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null===e||void 0===e?void 0:e.getImmediate({optional:!0}),this.appCheck||null===e||void 0===e||e.get().then(t=>this.appCheck=t)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(e=>e.addTokenListener(t))}notifyForInvalidToken(){O(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(t=>this.auth_=t)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(t=>t&&"auth/token-not-initialized"===t.code?(T("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((e,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',O(t)}}class J{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}J.OWNER="owner";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Z="5",tt="v",et="s",nt="r",it="f",rt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,st="ls",ot="p",at="ac",ct="websocket",lt="long_polling";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ht{constructor(t,e,n,i,r=!1,s="",o=!1){this.secure=e,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return`${t}${this.host}/${e}`}}function ut(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dt(t,e,n){let i;if(Object(s["f"])("string"===typeof e,"typeof type must == string"),Object(s["f"])("object"===typeof n,"typeof params must == object"),e===ct)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==lt)throw new Error("Unknown connection type: "+e);i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}ut(t)&&(n["ns"]=t.namespace);const r=[];return F(n,(t,e)=>{r.push(t+"="+e)}),i+r.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(){this.counters_={}}incrementCounter(t,e=1){Object(s["l"])(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return Object(s["o"])(this.counters_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft={},gt={};function mt(t){const e=t.toString();return ft[e]||(ft[e]=new pt),ft[e]}function yt(t,e){const n=t.toString();return gt[n]||(gt[n]=e()),gt[n]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){this.pendingResponses[t]=e;while(this.pendingResponses[this.currentResponseNum]){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&K(()=>{this.onMessage_(t[e])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="start",wt="close",_t="pLPCommand",xt="pRTLPCB",Tt="id",St="pw",Ct="ser",kt="cb",Ot="seg",It="ts",Et="d",At="dframe",Pt=1870,Nt=30,jt=Pt-Nt,Rt=25e3,Mt=3e4;class Dt{constructor(t,e,n,i,r,s,o){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=mt(e),this.urlFn=t=>(this.appCheckToken&&(t[at]=this.appCheckToken),dt(e,lt,t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new vt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Mt)),A(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Lt((...t)=>{const[e,n,i,r,s]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,e===bt)this.id=n,this.password=i;else{if(e!==wt)throw new Error("Unrecognized command received: "+e);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...t)=>{const[e,n]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,n)},()=>{this.onClosed_()},this.urlFn);const t={};t[bt]="t",t[Ct]=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t[kt]=this.scriptTagHolder.uniqueCallbackIdentifier),t[tt]=Z,this.transportSessionId&&(t[et]=this.transportSessionId),this.lastSessionId&&(t[st]=this.lastSessionId),this.applicationId&&(t[ot]=this.applicationId),this.appCheckToken&&(t[at]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&rt.test(location.hostname)&&(t[nt]=it);const e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Dt.forceAllow_=!0}static forceDisallow(){Dt.forceDisallow_=!0}static isAvailable(){return!Object(s["F"])()&&(!!Dt.forceAllow_||!Dt.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!B()&&!V())}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=Object(s["S"])(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=Object(s["j"])(e),i=L(n,jt);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(Object(s["F"])())return;this.myDisconnFrame=document.createElement("iframe");const n={};n[At]="t",n[Tt]=t,n[St]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=Object(s["S"])(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class Lt{constructor(t,e,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(s["F"])())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=y(),window[_t+this.uniqueCallbackIdentifier]=t,window[xt+this.uniqueCallbackIdentifier]=e,this.myIFrame=Lt.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){const t=document.domain;n='<script>document.domain="'+t+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(r){T("frame writing exception"),r.stack&&T(r.stack),T(r)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{const e=t.contentWindow.document;e||T("No IE domain setting required")}catch(e){const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){this.myID=t,this.myPW=e,this.alive=!0;while(this.newRequest_());}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[Tt]=this.myID,t[St]=this.myPW,t[Ct]=this.currentSerial;let e=this.urlFn(t),n="",i=0;while(this.pendingSegs.length>0){const t=this.pendingSegs[0];if(!(t.d.length+Nt+n.length<=Pt))break;{const t=this.pendingSegs.shift();n=n+"&"+Ot+i+"="+t.seg+"&"+It+i+"="+t.ts+"&"+Et+i+"="+t.d,i++}}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(n,Math.floor(Rt)),r=()=>{clearTimeout(i),n()};this.addTag(t,r)}addTag(t,e){Object(s["F"])()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const t=n.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{T("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=16384,Ut=45e3;let Bt=null;"undefined"!==typeof MozWebSocket?Bt=MozWebSocket:"undefined"!==typeof WebSocket&&(Bt=WebSocket);class Vt{constructor(t,e,n,i,r,s,o){this.connId=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=mt(e),this.connURL=Vt.connectionURL_(e,s,o,i),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,n,i){const r={};return r[tt]=Z,!Object(s["F"])()&&"undefined"!==typeof location&&location.hostname&&rt.test(location.hostname)&&(r[nt]=it),e&&(r[et]=e),n&&(r[st]=n),i&&(r[at]=i),dt(t,ct,r)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(s["F"])()){const e=this.nodeAdmin?"AdminNode":"Node",n={headers:{"User-Agent":`Firebase/${Z}/${l}/${t.platform}/${e}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(n.headers["Authorization"]="Bearer "+this.authToken),this.appCheckToken&&(n.headers["X-Firebase-AppCheck"]=this.appCheckToken);const i=Object({NODE_ENV:"production",BASE_URL:"/"}),r=0===this.connURL.indexOf("wss://")?i["HTTPS_PROXY"]||i["https_proxy"]:i["HTTP_PROXY"]||i["http_proxy"];r&&(n["proxy"]={origin:r}),this.mySock=new Bt(this.connURL,[],n)}else{const t={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Bt(this.connURL,[],t)}}catch(i){this.log_("Error instantiating WebSocket.");const t=i.message||i.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){Vt.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(e);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Bt&&!Vt.forceDisallow_}static previouslyFailed(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")}markConnectionHealthy(){f.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const e=Object(s["L"])(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Object(s["f"])(null===this.frames,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const e=t["data"];if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{const t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const e=Object(s["S"])(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=L(e,Ft);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ut))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Vt.responsesRequiredToBeHealthy=2,Vt.healthyTimeout=3e4;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zt{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Dt,Vt]}initTransports_(t){const e=Vt&&Vt["isAvailable"]();let n=e&&!Vt.previouslyFailed();if(t.webSocketOnly&&(e||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Vt];else{const t=this.transports_=[];for(const e of zt.ALL_TRANSPORTS)e&&e["isAvailable"]()&&t.push(e)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt=6e4,Wt=5e3,Ht=10240,Gt=102400,Kt="t",$t="d",Yt="s",Xt="r",Qt="e",Jt="o",Zt="a",te="n",ee="p",ne="h";class ie{constructor(t,e,n,i,r,s,o,a,c,l){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new zt(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;const e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,n)},Math.floor(0));const i=t["healthyTimeout"]||0;i>0&&(this.healthyTimeout_=Y(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Gt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ht?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Kt in t){const e=t[Kt];e===Zt?this.upgradeIfSecondaryHealthy_():e===Xt?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===Jt&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=M("t",t),n=M("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ee,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Zt,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:te,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=M("t",t),n=M("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=M(Kt,t);if($t in t){const n=t[$t];if(e===ne)this.onHandshake_(n);else if(e===te){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===Yt?this.onConnectionShutdown_(n):e===Xt?this.onReset_(n):e===Qt?C("Server Error: "+n):e===Jt?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),Z!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;const e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),Y(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(qt))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Wt))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ee,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{put(t,e,n,i){}merge(t,e,n,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.allowedEvents_=t,this.listeners_={},Object(s["f"])(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let t=0;t<n.length;t++)n[t].callback.apply(n[t].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});const i=this.getInitialEvent(t);i&&e.apply(n,i)}off(t,e,n){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let r=0;r<i.length;r++)if(i[r].callback===e&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(t){Object(s["f"])(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe extends se{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Object(s["D"])()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new oe}getInitialEvent(t){return Object(s["f"])("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae=32,ce=768;class le{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function he(){return new le("")}function ue(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function de(t){return t.pieces_.length-t.pieceNum_}function pe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new le(t.pieces_,e)}function fe(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ge(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function me(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ye(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new le(e,0)}function ve(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof le)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&n.push(t[e])}return new le(n,0)}function be(t){return t.pieceNum_>=t.pieces_.length}function we(t,e){const n=ue(t),i=ue(e);if(null===n)return e;if(n===i)return we(pe(t),pe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function _e(t,e){const n=me(t,0),i=me(e,0);for(let r=0;r<n.length&&r<i.length;r++){const t=j(n[r],i[r]);if(0!==t)return t}return n.length===i.length?0:n.length<i.length?-1:1}function xe(t,e){if(de(t)!==de(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Te(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(de(t)>de(e))return!1;while(n<t.pieces_.length){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class Se{constructor(t,e){this.errorPrefix_=e,this.parts_=me(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Object(s["Q"])(this.parts_[n]);Oe(this)}}function Ce(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(s["Q"])(e),Oe(t)}function ke(t){const e=t.parts_.pop();t.byteLength_-=Object(s["Q"])(e),t.parts_.length>0&&(t.byteLength_-=1)}function Oe(t){if(t.byteLength_>ce)throw new Error(t.errorPrefix_+"has a key path longer than "+ce+" bytes ("+t.byteLength_+").");if(t.parts_.length>ae)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ae+") or object contains a cycle "+Ie(t))}function Ie(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee extends se{constructor(){let t,e;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(e="visibilitychange",t="hidden"):"undefined"!==typeof document["mozHidden"]?(e="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document["msHidden"]?(e="msvisibilitychange",t="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))},!1)}static getInstance(){return new Ee}getInitialEvent(t){return Object(s["f"])("visible"===t,"Unknown event type: "+t),[this.visible_]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae=1e3,Pe=3e5,Ne=3e3,je=3e4,Re=1.3,Me=3e4,De="server_kill",Le=3;class Fe extends re{constructor(t,e,n,i,r,o,a,c){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Fe.nextPersistentConnectionId_++,this.log_=S("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ae,this.maxReconnectDelay_=Pe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Object(s["F"])())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ee.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&oe.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,n){const i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_(Object(s["S"])(r)),Object(s["f"])(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(t){this.initConnection_();const e=new s["a"],n={p:t._path.toString(),q:t._queryObject},i={action:"g",request:n,onComplete:t=>{const i=t["d"];"ok"===t["s"]?(this.onDataUpdate_(n["p"],i,!1,null),e.resolve(i)):e.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const t=this.outstandingGets_[r];void 0!==t&&i===t&&(delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+r+" timed out on connection"),e.reject(new Error("Client is offline.")))},Ne),this.connected_&&this.sendGet_(r),e.promise}listen(t,e,n,i){this.initConnection_();const r=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),Object(s["f"])(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(s["f"])(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:e,query:t,tag:n};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(n)})}sendListen_(t){const e=t.query,n=e._path.toString(),i=e._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n},s="q";t.tag&&(r["q"]=e._queryObject,r["t"]=t.tag),r["h"]=t.hashFn(),this.sendRequest(s,r,r=>{const s=r["d"],o=r["s"];Fe.warnOnListenWarnings_(s,e);const a=this.listens.get(n)&&this.listens.get(n).get(i);a===t&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),t.onComplete&&t.onComplete(o,s))})}static warnOnListenWarnings_(t,e){if(t&&"object"===typeof t&&Object(s["l"])(t,"w")){const n=Object(s["P"])(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',n=e._path.toString();O(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at `+n+" to your security rules for better performance.")}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){const e=t&&40===t.length;(e||Object(s["w"])(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=je)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=Object(s["J"])(t)?"auth":"gauth",n={cred:t};null===this.authOverride_?n["noauth"]=!0:"object"===typeof this.authOverride_&&(n["authvar"]=this.authOverride_),this.sendRequest(e,n,e=>{const n=e["s"],i=e["d"]||"error";this.authToken_===t&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const e=t["s"],n=t["d"]||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,n)})}unlisten(t,e){const n=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),Object(s["f"])(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");const r=this.removeListen_(n,i);r&&this.connected_&&this.sendUnlisten_(n,i,t._queryObject,e)}sendUnlisten_(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);const r={p:t},s="n";i&&(r["q"]=n,r["t"]=i),this.sendRequest(s,r)}onDisconnectPut(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})}onDisconnectMerge(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,n,i){const r={p:e,d:n};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,t=>{i&&setTimeout(()=>{i(t["s"],t["d"])},Math.floor(0))})}put(t,e,n,i){this.putInternal("p",t,e,n,i)}merge(t,e,n,i){this.putInternal("m",t,e,n,i)}putInternal(t,e,n,i,r){this.initConnection_();const s={p:e,d:n};void 0!==r&&(s["h"]=r),this.outstandingPuts_.push({action:t,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,n,n=>{this.log_(e+" response",n),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n["s"],n["d"])})}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,t=>{const e=t["s"];if("ok"!==e){const e=t["d"];this.log_("reportStats","Error sending stats: "+e)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Object(s["S"])(t));const e=t["r"],n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t["b"]))}else{if("error"in t)throw"A server-side error has occurred: "+t["error"];"a"in t&&this.onDataPush_(t["a"],t["b"])}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e["p"],e["d"],!1,e["t"]):"m"===t?this.onDataUpdate_(e["p"],e["d"],!0,e["t"]):"c"===t?this.onListenRevoked_(e["p"],e["q"]):"ac"===t?this.onAuthRevoked_(e["s"],e["d"]):"apc"===t?this.onAppCheckRevoked_(e["s"],e["d"]):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(s["S"])(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Object(s["f"])(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ae,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ae,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){const t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>Me&&(this.reconnectDelay_=Ae),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Re)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Fe.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,n())},l=function(t){Object(s["f"])(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)};this.realtime_={close:c,sendRequest:l};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,c]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?T("getToken() completed but was canceled"):(T("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=c&&c.token,a=new ie(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,n,t=>{O(t+" ("+this.repoInfo_.toString()+")"),this.interrupt(De)},r))}catch(C){this.log_("Failed to get token: "+C),o||(this.repoInfo_.nodeAdmin&&O(C),c())}}}interrupt(t){T("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){T("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(s["A"])(this.interruptReasons_)&&(this.reconnectDelay_=Ae,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let n;n=e?e.map(t=>D(t)).join("$"):"default";const i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,e){const n=new le(t).toString();let i;if(this.listens.has(n)){const t=this.listens.get(n);i=t.get(e),t.delete(e),0===t.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(t,e){T("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Le&&(this.reconnectDelay_=je,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){T("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Le&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t["msg"].replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);while(this.onDisconnectRequestQueue_.length){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";Object(s["F"])()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+l.replace(/\./g,"-")]=1,Object(s["D"])()?t["framework.cordova"]=1:Object(s["G"])()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=oe.getInstance().currentlyOnline();return Object(s["A"])(this.interruptReasons_)&&t}}Fe.nextPersistentConnectionId_=0,Fe.nextConnectionId_=0;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ue{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Ue(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const n=new Ue(P,t),i=new Ue(P,e);return 0!==this.compare(n,i)}minPost(){return Ue.MIN}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ve;class ze extends Be{static get __EMPTY_NODE(){return Ve}static set __EMPTY_NODE(t){Ve=t}compare(t,e){return j(t.name,e.name)}isDefinedOn(t){throw Object(s["g"])("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Ue.MIN}maxPost(){return new Ue(N,Ve)}makePost(t,e){return Object(s["f"])("string"===typeof t,"KeyIndex indexValue must always be a string."),new Ue(t,Ve)}toString(){return".key"}}const qe=new ze;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t,e,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;while(!t.isEmpty())if(t=t,s=e?n(t.key,e):1,i&&(s*=-1),s<0)t=this.isReverse_?t.left:t.right;else{if(0===s){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_){e=e.left;while(!e.isEmpty())this.nodeStack_.push(e),e=e.right}else{e=e.right;while(!e.isEmpty())this.nodeStack_.push(e),e=e.left}return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class He{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:He.RED,this.left=null!=i?i:Ke.EMPTY_NODE,this.right=null!=r?r:Ke.EMPTY_NODE}copy(t,e,n,i,r){return new He(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ke.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let n,i;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ke.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,He.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,He.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}He.RED=!0,He.BLACK=!1;class Ge{copy(t,e,n,i,r){return this}insert(t,e,n){return new He(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ke{constructor(t,e=Ke.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ke(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,He.BLACK,null,null))}remove(t){return new Ke(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,He.BLACK,null,null))}get(t){let e,n=this.root_;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,i=null;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return i?i.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new We(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new We(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new We(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new We(this.root_,null,this.comparator_,!0,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $e(t,e){return j(t.name,e.name)}function Ye(t,e){return j(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xe;function Qe(t){Xe=t}Ke.EMPTY_NODE=new Ge;const Je=function(t){return"number"===typeof t?"number:"+U(t):"string:"+t},Ze=function(t){if(t.isLeafNode()){const e=t.val();Object(s["f"])("string"===typeof e||"number"===typeof e||"object"===typeof e&&Object(s["l"])(e,".sv"),"Priority must be a string or number.")}else Object(s["f"])(t===Xe||t.isEmpty(),"priority of unexpected type.");Object(s["f"])(t===Xe||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let tn,en,nn;class rn{constructor(t,e=rn.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Object(s["f"])(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ze(this.priorityNode_)}static set __childrenNodeConstructor(t){tn=t}static get __childrenNodeConstructor(){return tn}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new rn(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:rn.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return be(t)?this:".priority"===ue(t)?this.priorityNode_:rn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:rn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const n=ue(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(Object(s["f"])(".priority"!==n||1===de(t),".priority must be the last token in a path"),this.updateImmediateChild(n,rn.__childrenNodeConstructor.EMPTY_NODE.updateChild(pe(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Je(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",t+="number"===e?U(this.value_):this.value_,this.lazyHash_=v(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===rn.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof rn.__childrenNodeConstructor?-1:(Object(s["f"])(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,n=typeof this.value_,i=rn.VALUE_TYPE_ORDER.indexOf(e),r=rn.VALUE_TYPE_ORDER.indexOf(n);return Object(s["f"])(i>=0,"Unknown leaf type: "+e),Object(s["f"])(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1}}function sn(t){en=t}function on(t){nn=t}rn.VALUE_TYPE_ORDER=["object","boolean","number","string"];class an extends Be{compare(t,e){const n=t.node.getPriority(),i=e.node.getPriority(),r=n.compareTo(i);return 0===r?j(t.name,e.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Ue.MIN}maxPost(){return new Ue(N,new rn("[PRIORITY-POST]",nn))}makePost(t,e){const n=en(t);return new Ue(e,new rn("[PRIORITY-POST]",n))}toString(){return".priority"}}const cn=new an,ln=Math.log(2);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t){const e=t=>parseInt(Math.log(t)/ln,10),n=t=>parseInt(Array(t+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const i=n(this.count);this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const un=function(t,e,n,i){t.sort(e);const r=function(e,i){const s=i-e;let o,a;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new He(a,o.node,He.BLACK,null,null);{const c=parseInt(s/2,10)+e,l=r(e,c),h=r(c+1,i);return o=t[c],a=n?n(o):o,new He(a,o.node,He.BLACK,l,h)}},s=function(e){let i=null,s=null,o=t.length;const a=function(e,i){const s=o-e,a=o;o-=e;const l=r(s+1,a),h=t[s],u=n?n(h):h;c(new He(u,h.node,i,null,l))},c=function(t){i?(i.left=t,i=t):(s=t,i=t)};for(let t=0;t<e.count;++t){const n=e.nextBitIsOne(),i=Math.pow(2,e.count-(t+1));n?a(i,He.BLACK):(a(i,He.BLACK),a(i,He.RED))}return s},o=new hn(t.length),a=s(o);return new Ke(i||e,a)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn;const pn={};class fn{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return Object(s["f"])(pn&&cn,"ChildrenNode.ts has not been loaded"),dn=dn||new fn({".priority":pn},{".priority":cn}),dn}get(t){const e=Object(s["P"])(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ke?e:null}hasIndex(t){return Object(s["l"])(this.indexSet_,t.toString())}addIndex(t,e){Object(s["f"])(t!==qe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=e.getIterator(Ue.Wrap);let o,a=r.getNext();while(a)i=i||t.isDefinedOn(a.node),n.push(a),a=r.getNext();o=i?un(n,t.getCompare()):pn;const c=t.toString(),l=Object.assign({},this.indexSet_);l[c]=t;const h=Object.assign({},this.indexes_);return h[c]=o,new fn(h,l)}addToIndexes(t,e){const n=Object(s["M"])(this.indexes_,(n,i)=>{const r=Object(s["P"])(this.indexSet_,i);if(Object(s["f"])(r,"Missing index implementation for "+i),n===pn){if(r.isDefinedOn(t.node)){const n=[],i=e.getIterator(Ue.Wrap);let s=i.getNext();while(s)s.name!==t.name&&n.push(s),s=i.getNext();return n.push(t),un(n,r.getCompare())}return pn}{const i=e.get(t.name);let r=n;return i&&(r=r.remove(new Ue(t.name,i))),r.insert(t,t.node)}});return new fn(n,this.indexSet_)}removeFromIndexes(t,e){const n=Object(s["M"])(this.indexes_,n=>{if(n===pn)return n;{const i=e.get(t.name);return i?n.remove(new Ue(t.name,i)):n}});return new fn(n,this.indexSet_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gn;class mn{constructor(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ze(this.priorityNode_),this.children_.isEmpty()&&Object(s["f"])(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gn||(gn=new mn(new Ke(Ye),null,fn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gn}updatePriority(t){return this.children_.isEmpty()?this:new mn(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const e=this.children_.get(t);return null===e?gn:e}}getChild(t){const e=ue(t);return null===e?this:this.getImmediateChild(e).getChild(pe(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,e){if(Object(s["f"])(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);{const n=new Ue(t,e);let i,r;e.isEmpty()?(i=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(t,e),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?gn:this.priorityNode_;return new mn(i,s,r)}}updateChild(t,e){const n=ue(t);if(null===n)return e;{Object(s["f"])(".priority"!==ue(t)||1===de(t),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(pe(t),e);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let n=0,i=0,r=!0;if(this.forEachChild(cn,(s,o)=>{e[s]=o.val(t),n++,r&&mn.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1}),!t&&r&&i<2*n){const t=[];for(const n in e)t[n]=e[n];return t}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Je(this.getPriority().val())+":"),this.forEachChild(cn,(e,n)=>{const i=n.hash();""!==i&&(t+=":"+e+":"+i)}),this.lazyHash_=""===t?"":v(t)}return this.lazyHash_}getPredecessorChildName(t,e,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new Ue(t,e));return n?n.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Ue(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Ue(e,this.children_.get(e)):null}forEachChild(t,e){const n=this.resolveIndex_(t);return n?n.inorderTraversal(t=>e(t.name,t.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,t=>t);{const n=this.children_.getIteratorFrom(t.name,Ue.Wrap);let i=n.peek();while(null!=i&&e.compare(i,t)<0)n.getNext(),i=n.peek();return n}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,t=>t);{const n=this.children_.getReverseIteratorFrom(t.name,Ue.Wrap);let i=n.peek();while(null!=i&&e.compare(i,t)>0)n.getNext(),i=n.peek();return n}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===vn?-1:0}withIndex(t){if(t===qe||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new mn(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===qe||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){const t=this.getIterator(cn),n=e.getIterator(cn);let i=t.getNext(),r=n.getNext();while(i&&r){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=t.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(t){return t===qe?null:this.indexMap_.get(t.toString())}}mn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yn extends mn{constructor(){super(new Ke(Ye),mn.EMPTY_NODE,fn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return mn.EMPTY_NODE}isEmpty(){return!1}}const vn=new yn;Object.defineProperties(Ue,{MIN:{value:new Ue(P,mn.EMPTY_NODE)},MAX:{value:new Ue(N,vn)}}),ze.__EMPTY_NODE=mn.EMPTY_NODE,rn.__childrenNodeConstructor=mn,Qe(vn),on(vn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const bn=!0;function wn(t,e=null){if(null===t)return mn.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),Object(s["f"])(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t){const n=t;return new rn(n,wn(e))}if(t instanceof Array||!bn){let n=mn.EMPTY_NODE;return F(t,(e,i)=>{if(Object(s["l"])(t,e)&&"."!==e.substring(0,1)){const t=wn(i);!t.isLeafNode()&&t.isEmpty()||(n=n.updateImmediateChild(e,t))}}),n.updatePriority(wn(e))}{const n=[];let i=!1;const r=t;if(F(r,(t,e)=>{if("."!==t.substring(0,1)){const r=wn(e);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new Ue(t,r)))}}),0===n.length)return mn.EMPTY_NODE;const s=un(n,$e,t=>t.name,Ye);if(i){const t=un(n,cn.getCompare());return new mn(s,wn(e),new fn({".priority":t},{".priority":cn}))}return new mn(s,wn(e),fn.Default)}}sn(wn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _n extends Be{constructor(t){super(),this.indexPath_=t,Object(s["f"])(!be(t)&&".priority"!==ue(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const n=this.extractChild(t.node),i=this.extractChild(e.node),r=n.compareTo(i);return 0===r?j(t.name,e.name):r}makePost(t,e){const n=wn(t),i=mn.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ue(e,i)}maxPost(){const t=mn.EMPTY_NODE.updateChild(this.indexPath_,vn);return new Ue(N,t)}toString(){return me(this.indexPath_,0).join("/")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends Be{compare(t,e){const n=t.node.compareTo(e.node);return 0===n?j(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Ue.MIN}maxPost(){return Ue.MAX}makePost(t,e){const n=wn(t);return new Ue(e,n)}toString(){return".value"}}const Tn=new xn,Sn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Cn="-",kn="z",On=786,In=function(){let t=0;const e=[];return function(n){const i=n===t;let r;t=n;const o=new Array(8);for(r=7;r>=0;r--)o[r]=Sn.charAt(n%64),n=Math.floor(n/64);Object(s["f"])(0===n,"Cannot push at time == 0");let a=o.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=Sn.charAt(e[r]);return Object(s["f"])(20===a.length,"nextPushId: Length should be 20."),a}}(),En=function(t){if(t===""+H)return Cn;const e=G(t);if(null!=e)return""+(e+1);const n=new Array(t.length);for(let o=0;o<n.length;o++)n[o]=t.charAt(o);if(n.length<On)return n.push(Cn),n.join("");let i=n.length-1;while(i>=0&&n[i]===kn)i--;if(-1===i)return N;const r=n[i],s=Sn.charAt(Sn.indexOf(r)+1);return n[i]=s,n.slice(0,i+1).join("")},An=function(t){if(t===""+W)return P;const e=G(t);if(null!=e)return""+(e-1);const n=new Array(t.length);for(let i=0;i<n.length;i++)n[i]=t.charAt(i);return n[n.length-1]===Cn?1===n.length?""+H:(delete n[n.length-1],n.join("")):(n[n.length-1]=Sn.charAt(Sn.indexOf(n[n.length-1])-1),n.join("")+kn.repeat(On-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pn(t){return{type:"value",snapshotNode:t}}function Nn(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function jn(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Rn(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Mn(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this.index_=t}updateChild(t,e,n,i,r,o){Object(s["f"])(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(jn(e,a)):Object(s["f"])(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Nn(e,n)):o.trackChildChange(Rn(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))}updateFullNode(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(cn,(t,i)=>{e.hasChild(t)||n.trackChildChange(jn(t,i))}),e.isLeafNode()||e.forEachChild(cn,(e,i)=>{if(t.hasChild(e)){const r=t.getImmediateChild(e);r.equals(i)||n.trackChildChange(Rn(e,i,r))}else n.trackChildChange(Nn(e,i))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?mn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this.indexedFilter_=new Dn(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Ln.getStartPost_(t),this.endPost_=Ln.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,n,i,r,s){return this.matches(new Ue(e,n))||(n=mn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,r,s)}updateFullNode(t,e,n){e.isLeafNode()&&(e=mn.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(mn.EMPTY_NODE);const r=this;return e.forEachChild(cn,(t,e)=>{r.matches(new Ue(t,e))||(i=i.updateImmediateChild(t,mn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t){this.rangedFilter_=new Ln(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,n,i,r,s){return this.rangedFilter_.matches(new Ue(e,n))||(n=mn.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,r,s):this.fullLimitUpdateChild_(t,e,n,r,s)}updateFullNode(t,e,n){let i;if(e.isLeafNode()||e.isEmpty())i=mn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let t;i=mn.EMPTY_NODE.withIndex(this.index_),t=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;while(t.hasNext()&&n<this.limit_){const e=t.getNext();let r;if(r=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),e)<=0:this.index_.compare(e,this.rangedFilter_.getEndPost())<=0,!r)break;i=i.updateImmediateChild(e.name,e.node),n++}}else{let t,n,r,s;if(i=e.withIndex(this.index_),i=i.updatePriority(mn.EMPTY_NODE),this.reverse_){s=i.getReverseIterator(this.index_),t=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const e=this.index_.getCompare();r=(t,n)=>e(n,t)}else s=i.getIterator(this.index_),t=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),r=this.index_.getCompare();let o=0,a=!1;while(s.hasNext()){const e=s.getNext();!a&&r(t,e)<=0&&(a=!0);const c=a&&o<this.limit_&&r(e,n)<=0;c?o++:i=i.updateImmediateChild(e.name,mn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,n,i,r){let o;if(this.reverse_){const t=this.index_.getCompare();o=(e,n)=>t(n,e)}else o=this.index_.getCompare();const a=t;Object(s["f"])(a.numChildren()===this.limit_,"");const c=new Ue(e,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(a.hasChild(e)){const t=a.getImmediateChild(e);let s=i.getChildAfterChild(this.index_,l,this.reverse_);while(null!=s&&(s.name===e||a.hasChild(s.name)))s=i.getChildAfterChild(this.index_,s,this.reverse_);const u=null==s?1:o(s,c),d=h&&!n.isEmpty()&&u>=0;if(d)return null!=r&&r.trackChildChange(Rn(e,n,t)),a.updateImmediateChild(e,n);{null!=r&&r.trackChildChange(jn(e,t));const n=a.updateImmediateChild(e,mn.EMPTY_NODE),i=null!=s&&this.rangedFilter_.matches(s);return i?(null!=r&&r.trackChildChange(Nn(s.name,s.node)),n.updateImmediateChild(s.name,s.node)):n}}return n.isEmpty()?t:h&&o(l,c)>=0?(null!=r&&(r.trackChildChange(jn(l.name,l.node)),r.trackChildChange(Nn(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(l.name,mn.EMPTY_NODE)):t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Object(s["f"])(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Object(s["f"])(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:P}hasEnd(){return this.endSet_}getIndexEndValue(){return Object(s["f"])(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Object(s["f"])(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Object(s["f"])(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cn}copy(){const t=new Un;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Bn(t){return t.loadsAllData()?new Dn(t.getIndex()):t.hasLimit()?new Fn(t):new Ln(t)}function Vn(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function zn(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function qn(t,e,n){const i=t.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function Wn(t,e,n){let i;if(t.index_===qe)"string"===typeof e&&(e=En(e)),i=qn(t,e,n);else{let r;r=null==n?N:En(n),i=qn(t,e,r)}return i.startAfterSet_=!0,i}function Hn(t,e,n){const i=t.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function Gn(t,e,n){let i,r;return t.index_===qe?("string"===typeof e&&(e=An(e)),r=Hn(t,e,n)):(i=null==n?P:An(n),r=Hn(t,e,i)),r.endBeforeSet_=!0,r}function Kn(t,e){const n=t.copy();return n.index_=e,n}function $n(t){const e={};if(t.isDefault())return e;let n;return t.index_===cn?n="$priority":t.index_===Tn?n="$value":t.index_===qe?n="$key":(Object(s["f"])(t.index_ instanceof _n,"Unrecognized index type!"),n=t.index_.toString()),e["orderBy"]=Object(s["S"])(n),t.startSet_&&(e["startAt"]=Object(s["S"])(t.indexStartValue_),t.startNameSet_&&(e["startAt"]+=","+Object(s["S"])(t.indexStartName_))),t.endSet_&&(e["endAt"]=Object(s["S"])(t.indexEndValue_),t.endNameSet_&&(e["endAt"]+=","+Object(s["S"])(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e["limitToFirst"]=t.limit_:e["limitToLast"]=t.limit_),e}function Yn(t){const e={};if(t.startSet_&&(e["sp"]=t.indexStartValue_,t.startNameSet_&&(e["sn"]=t.indexStartName_)),t.endSet_&&(e["ep"]=t.indexEndValue_,t.endNameSet_&&(e["en"]=t.indexEndName_)),t.limitSet_){e["l"]=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e["vf"]=n}return t.index_!==cn&&(e["i"]=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends re{constructor(t,e,n,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=S("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:(Object(s["f"])(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,i){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const o=Xn.getListenId_(t,n),a={};this.listens_[o]=a;const c=$n(t._queryParams);this.restRequest_(r+".json",c,(t,e)=>{let c=e;if(404===t&&(c=null,t=null),null===t&&this.onDataUpdate_(r,c,!1,n),Object(s["P"])(this.listens_,o)===a){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(e,null)}})}unlisten(t,e){const n=Xn.getListenId_(t,e);delete this.listens_[n]}get(t){const e=$n(t._queryParams),n=t._path.toString(),i=new s["a"];return this.restRequest_(n+".json",e,(t,e)=>{let r=e;404===t&&(r=null,t=null),null===t?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e["format"]="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(e["auth"]=i.accessToken),r&&r.token&&(e["ac"]=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Object(s["N"])(e);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=Object(s["L"])(a.responseText)}catch(t){O("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&O("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.rootNode_=mn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return{value:null,children:new Map}}function Zn(t,e,n){if(be(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const i=ue(e);t.children.has(i)||t.children.set(i,Jn());const r=t.children.get(i);e=pe(e),Zn(r,e,n)}}function ti(t,e){if(be(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(cn,(e,n)=>{Zn(t,new le(e),n)}),ti(t,e)}}if(t.children.size>0){const n=ue(e);if(e=pe(e),t.children.has(n)){const i=ti(t.children.get(n),e);i&&t.children.delete(n)}return 0===t.children.size}return!0}function ei(t,e,n){null!==t.value?n(e,t.value):ni(t,(t,i)=>{const r=new le(e.toString()+"/"+t);ei(i,r,n)})}function ni(t,e){t.children.forEach((t,n)=>{e(n,t)})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&F(this.last_,(t,n)=>{e[t]=e[t]-n}),this.last_=t,e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=1e4,si=3e4,oi=3e5;class ai{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ii(t);const n=ri+(si-ri)*Math.random();Y(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),e={};let n=!1;F(t,(t,i)=>{i>0&&Object(s["l"])(this.statsToReport_,t)&&(e[t]=i,n=!0)}),n&&this.server_.reportStats(e),Y(this.reportStats_.bind(this),Math.floor(2*Math.random()*oi))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ci;function li(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function hi(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ui(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["OVERWRITE"]=0]="OVERWRITE",t[t["MERGE"]=1]="MERGE",t[t["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",t[t["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(ci||(ci={}));class di{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ci.ACK_USER_WRITE,this.source=li()}operationForChild(t){if(be(this.path)){if(null!=this.affectedTree.value)return Object(s["f"])(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new le(t));return new di(he(),e,this.revert)}}return Object(s["f"])(ue(this.path)===t,"operationForChild called for unrelated child."),new di(pe(this.path),this.affectedTree,this.revert)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t,e){this.source=t,this.path=e,this.type=ci.LISTEN_COMPLETE}operationForChild(t){return be(this.path)?new pi(this.source,he()):new pi(this.source,pe(this.path))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ci.OVERWRITE}operationForChild(t){return be(this.path)?new fi(this.source,he(),this.snap.getImmediateChild(t)):new fi(this.source,pe(this.path),this.snap)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ci.MERGE}operationForChild(t){if(be(this.path)){const e=this.children.subtree(new le(t));return e.isEmpty()?null:e.value?new fi(this.source,he(),e.value):new gi(this.source,he(),e)}return Object(s["f"])(ue(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new gi(this.source,pe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(be(t))return this.isFullyInitialized()&&!this.filtered_;const e=ue(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function vi(t,e,n,i){const r=[],s=[];return e.forEach(e=>{"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&s.push(Mn(e.childName,e.snapshotNode))}),bi(t,r,"child_removed",e,i,n),bi(t,r,"child_added",e,i,n),bi(t,r,"child_moved",s,i,n),bi(t,r,"child_changed",e,i,n),bi(t,r,"value",e,i,n),r}function bi(t,e,n,i,r,s){const o=i.filter(t=>t.type===n);o.sort((e,n)=>_i(t,e,n)),o.forEach(n=>{const i=wi(t,n,s);r.forEach(r=>{r.respondsTo(n.type)&&e.push(r.createEvent(i,t.query_))})})}function wi(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function _i(t,e,n){if(null==e.childName||null==n.childName)throw Object(s["g"])("Should only compare child_ events.");const i=new Ue(e.childName,e.snapshotNode),r=new Ue(n.childName,n.snapshotNode);return t.index_.compare(i,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t,e){return{eventCache:t,serverCache:e}}function Ti(t,e,n,i){return xi(new mi(e,n,i),t.serverCache)}function Si(t,e,n,i){return xi(t.eventCache,new mi(e,n,i))}function Ci(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ki(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oi;const Ii=()=>(Oi||(Oi=new Ke(R)),Oi);class Ei{constructor(t,e=Ii()){this.value=t,this.children=e}static fromObject(t){let e=new Ei(null);return F(t,(t,n)=>{e=e.set(new le(t),n)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:he(),value:this.value};if(be(t))return null;{const n=ue(t),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(pe(t),e);if(null!=r){const t=ve(new le(n),r.path);return{path:t,value:r.value}}return null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(be(t))return this;{const e=ue(t),n=this.children.get(e);return null!==n?n.subtree(pe(t)):new Ei(null)}}set(t,e){if(be(t))return new Ei(e,this.children);{const n=ue(t),i=this.children.get(n)||new Ei(null),r=i.set(pe(t),e),s=this.children.insert(n,r);return new Ei(this.value,s)}}remove(t){if(be(t))return this.children.isEmpty()?new Ei(null):new Ei(null,this.children);{const e=ue(t),n=this.children.get(e);if(n){const i=n.remove(pe(t));let r;return r=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&r.isEmpty()?new Ei(null):new Ei(this.value,r)}return this}}get(t){if(be(t))return this.value;{const e=ue(t),n=this.children.get(e);return n?n.get(pe(t)):null}}setTree(t,e){if(be(t))return e;{const n=ue(t),i=this.children.get(n)||new Ei(null),r=i.setTree(pe(t),e);let s;return s=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Ei(this.value,s)}}fold(t){return this.fold_(he(),t)}fold_(t,e){const n={};return this.children.inorderTraversal((i,r)=>{n[i]=r.fold_(ve(t,i),e)}),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,he(),e)}findOnPath_(t,e,n){const i=!!this.value&&n(e,this.value);if(i)return i;if(be(t))return null;{const i=ue(t),r=this.children.get(i);return r?r.findOnPath_(pe(t),ve(e,i),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,he(),e)}foreachOnPath_(t,e,n){if(be(t))return this;{this.value&&n(e,this.value);const i=ue(t),r=this.children.get(i);return r?r.foreachOnPath_(pe(t),ve(e,i),n):new Ei(null)}}foreach(t){this.foreach_(he(),t)}foreach_(t,e){this.children.inorderTraversal((n,i)=>{i.foreach_(ve(t,n),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,n)=>{n.value&&t(e,n.value)})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t){this.writeTree_=t}static empty(){return new Ai(new Ei(null))}}function Pi(t,e,n){if(be(e))return new Ai(new Ei(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=we(r,e);return s=s.updateChild(o,n),new Ai(t.writeTree_.set(r,s))}{const i=new Ei(n),r=t.writeTree_.setTree(e,i);return new Ai(r)}}}function Ni(t,e,n){let i=t;return F(n,(t,n)=>{i=Pi(i,ve(e,t),n)}),i}function ji(t,e){if(be(e))return Ai.empty();{const n=t.writeTree_.setTree(e,new Ei(null));return new Ai(n)}}function Ri(t,e){return null!=Mi(t,e)}function Mi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(we(n.path,e)):null}function Di(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(cn,(t,n)=>{e.push(new Ue(t,n))}):t.writeTree_.children.inorderTraversal((t,n)=>{null!=n.value&&e.push(new Ue(t,n.value))}),e}function Li(t,e){if(be(e))return t;{const n=Mi(t,e);return new Ai(null!=n?new Ei(n):t.writeTree_.subtree(e))}}function Fi(t){return t.writeTree_.isEmpty()}function Ui(t,e){return Bi(he(),t.writeTree_,e)}function Bi(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((e,r)=>{".priority"===e?(Object(s["f"])(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=Bi(ve(t,e),r,n)}),n.getChild(t).isEmpty()||null===i||(n=n.updateChild(ve(t,".priority"),i)),n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t,e){return hr(e,t)}function zi(t,e,n,i,r){Object(s["f"])(i>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Pi(t.visibleWrites,e,n)),t.lastWriteId=i}function qi(t,e,n,i){Object(s["f"])(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=Ni(t.visibleWrites,e,n),t.lastWriteId=i}function Wi(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function Hi(t,e){const n=t.allWrites.findIndex(t=>t.writeId===e);Object(s["f"])(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,a=t.allWrites.length-1;while(r&&a>=0){const e=t.allWrites[a];e.visible&&(a>=n&&Gi(e,i.path)?r=!1:Te(i.path,e.path)&&(o=!0)),a--}if(r){if(o)return Ki(t),!0;if(i.snap)t.visibleWrites=ji(t.visibleWrites,i.path);else{const e=i.children;F(e,e=>{t.visibleWrites=ji(t.visibleWrites,ve(i.path,e))})}return!0}return!1}function Gi(t,e){if(t.snap)return Te(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Te(ve(t.path,n),e))return!0;return!1}function Ki(t){t.visibleWrites=Yi(t.allWrites,$i,he()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function $i(t){return t.visible}function Yi(t,e,n){let i=Ai.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const t=o.path;let e;if(o.snap)Te(n,t)?(e=we(n,t),i=Pi(i,e,o.snap)):Te(t,n)&&(e=we(t,n),i=Pi(i,he(),o.snap.getChild(e)));else{if(!o.children)throw Object(s["g"])("WriteRecord should have .snap or .children");if(Te(n,t))e=we(n,t),i=Ni(i,e,o.children);else if(Te(t,n))if(e=we(t,n),be(e))i=Ni(i,he(),o.children);else{const t=Object(s["P"])(o.children,ue(e));if(t){const n=t.getChild(pe(e));i=Pi(i,he(),n)}}}}}return i}function Xi(t,e,n,i,r){if(i||r){const s=Li(t.visibleWrites,e);if(!r&&Fi(s))return n;if(r||null!=n||Ri(s,he())){const s=function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(Te(t.path,e)||Te(e,t.path))},o=Yi(t.allWrites,s,e),a=n||mn.EMPTY_NODE;return Ui(o,a)}return null}{const i=Mi(t.visibleWrites,e);if(null!=i)return i;{const i=Li(t.visibleWrites,e);if(Fi(i))return n;if(null!=n||Ri(i,he())){const t=n||mn.EMPTY_NODE;return Ui(i,t)}return null}}}function Qi(t,e,n){let i=mn.EMPTY_NODE;const r=Mi(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(cn,(t,e)=>{i=i.updateImmediateChild(t,e)}),i;if(n){const r=Li(t.visibleWrites,e);return n.forEachChild(cn,(t,e)=>{const n=Ui(Li(r,new le(t)),e);i=i.updateImmediateChild(t,n)}),Di(r).forEach(t=>{i=i.updateImmediateChild(t.name,t.node)}),i}{const n=Li(t.visibleWrites,e);return Di(n).forEach(t=>{i=i.updateImmediateChild(t.name,t.node)}),i}}function Ji(t,e,n,i,r){Object(s["f"])(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=ve(e,n);if(Ri(t.visibleWrites,o))return null;{const e=Li(t.visibleWrites,o);return Fi(e)?r.getChild(n):Ui(e,r.getChild(n))}}function Zi(t,e,n,i){const r=ve(e,n),s=Mi(t.visibleWrites,r);if(null!=s)return s;if(i.isCompleteForChild(n)){const e=Li(t.visibleWrites,r);return Ui(e,i.getNode().getImmediateChild(n))}return null}function tr(t,e){return Mi(t.visibleWrites,e)}function er(t,e,n,i,r,s,o){let a;const c=Li(t.visibleWrites,e),l=Mi(c,he());if(null!=l)a=l;else{if(null==n)return[];a=Ui(c,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const t=[],e=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let c=n.getNext();while(c&&t.length<r)0!==e(c,i)&&t.push(c),c=n.getNext();return t}}function nr(){return{visibleWrites:Ai.empty(),allWrites:[],lastWriteId:-1}}function ir(t,e,n,i){return Xi(t.writeTree,t.treePath,e,n,i)}function rr(t,e){return Qi(t.writeTree,t.treePath,e)}function sr(t,e,n,i){return Ji(t.writeTree,t.treePath,e,n,i)}function or(t,e){return tr(t.writeTree,ve(t.treePath,e))}function ar(t,e,n,i,r,s){return er(t.writeTree,t.treePath,e,n,i,r,s)}function cr(t,e,n){return Zi(t.writeTree,t.treePath,e,n)}function lr(t,e){return hr(ve(t.treePath,e),t.writeTree)}function hr(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,n=t.childName;Object(s["f"])("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(s["f"])(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===e&&"child_removed"===r)this.changeMap.set(n,Rn(n,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===r)this.changeMap.set(n,jn(n,i.oldSnap));else if("child_changed"===e&&"child_added"===r)this.changeMap.set(n,Nn(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==r)throw Object(s["g"])("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(n,Rn(n,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}}const pr=new dr;class fr{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const e=null!=this.optCompleteServerCache_?new mi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cr(this.writes_,t,e)}}getChildAfterChild(t,e,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ki(this.viewCache_),r=ar(this.writes_,i,e,1,n,t);return 0===r.length?null:r[0]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t){return{filter:t}}function mr(t,e){Object(s["f"])(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Object(s["f"])(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function yr(t,e,n,i,r){const o=new ur;let a,c;if(n.type===ci.OVERWRITE){const l=n;l.source.fromUser?a=_r(t,e,l.path,l.snap,i,r,o):(Object(s["f"])(l.source.fromServer,"Unknown source."),c=l.source.tagged||e.serverCache.isFiltered()&&!be(l.path),a=wr(t,e,l.path,l.snap,i,r,c,o))}else if(n.type===ci.MERGE){const l=n;l.source.fromUser?a=Tr(t,e,l.path,l.children,i,r,o):(Object(s["f"])(l.source.fromServer,"Unknown source."),c=l.source.tagged||e.serverCache.isFiltered(),a=Cr(t,e,l.path,l.children,i,r,c,o))}else if(n.type===ci.ACK_USER_WRITE){const s=n;a=s.revert?Ir(t,e,s.path,i,r,o):kr(t,e,s.path,s.affectedTree,i,r,o)}else{if(n.type!==ci.LISTEN_COMPLETE)throw Object(s["g"])("Unknown operation type: "+n.type);a=Or(t,e,n.path,i,o)}const l=o.getChanges();return vr(e,a,l),{viewCache:a,changes:l}}function vr(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Ci(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Pn(Ci(e)))}}function br(t,e,n,i,r,o){const a=e.eventCache;if(null!=or(i,n))return e;{let c,l;if(be(n))if(Object(s["f"])(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const n=ki(e),r=n instanceof mn?n:mn.EMPTY_NODE,s=rr(i,r);c=t.filter.updateFullNode(e.eventCache.getNode(),s,o)}else{const n=ir(i,ki(e));c=t.filter.updateFullNode(e.eventCache.getNode(),n,o)}else{const h=ue(n);if(".priority"===h){Object(s["f"])(1===de(n),"Can't have a priority with additional path components");const r=a.getNode();l=e.serverCache.getNode();const o=sr(i,n,r,l);c=null!=o?t.filter.updatePriority(r,o):a.getNode()}else{const s=pe(n);let u;if(a.isCompleteForChild(h)){l=e.serverCache.getNode();const t=sr(i,n,a.getNode(),l);u=null!=t?a.getNode().getImmediateChild(h).updateChild(s,t):a.getNode().getImmediateChild(h)}else u=cr(i,h,e.serverCache);c=null!=u?t.filter.updateChild(a.getNode(),h,u,s,r,o):a.getNode()}}return Ti(e,c,a.isFullyInitialized()||be(n),t.filter.filtersNodes())}}function wr(t,e,n,i,r,s,o,a){const c=e.serverCache;let l;const h=o?t.filter:t.filter.getIndexedFilter();if(be(n))l=h.updateFullNode(c.getNode(),i,null);else if(h.filtersNodes()&&!c.isFiltered()){const t=c.getNode().updateChild(n,i);l=h.updateFullNode(c.getNode(),t,null)}else{const t=ue(n);if(!c.isCompleteForPath(n)&&de(n)>1)return e;const r=pe(n),s=c.getNode().getImmediateChild(t),o=s.updateChild(r,i);l=".priority"===t?h.updatePriority(c.getNode(),o):h.updateChild(c.getNode(),t,o,r,pr,null)}const u=Si(e,l,c.isFullyInitialized()||be(n),h.filtersNodes()),d=new fr(r,u,s);return br(t,u,n,r,d,a)}function _r(t,e,n,i,r,s,o){const a=e.eventCache;let c,l;const h=new fr(r,e,s);if(be(n))l=t.filter.updateFullNode(e.eventCache.getNode(),i,o),c=Ti(e,l,!0,t.filter.filtersNodes());else{const r=ue(n);if(".priority"===r)l=t.filter.updatePriority(e.eventCache.getNode(),i),c=Ti(e,l,a.isFullyInitialized(),a.isFiltered());else{const s=pe(n),l=a.getNode().getImmediateChild(r);let u;if(be(s))u=i;else{const t=h.getCompleteChild(r);u=null!=t?".priority"===fe(s)&&t.getChild(ye(s)).isEmpty()?t:t.updateChild(s,i):mn.EMPTY_NODE}if(l.equals(u))c=e;else{const n=t.filter.updateChild(a.getNode(),r,u,s,h,o);c=Ti(e,n,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function xr(t,e){return t.eventCache.isCompleteForChild(e)}function Tr(t,e,n,i,r,s,o){let a=e;return i.foreach((i,c)=>{const l=ve(n,i);xr(e,ue(l))&&(a=_r(t,a,l,c,r,s,o))}),i.foreach((i,c)=>{const l=ve(n,i);xr(e,ue(l))||(a=_r(t,a,l,c,r,s,o))}),a}function Sr(t,e,n){return n.foreach((t,n)=>{e=e.updateChild(t,n)}),e}function Cr(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=be(n)?i:new Ei(null).setTree(n,i);const h=e.serverCache.getNode();return c.children.inorderTraversal((n,i)=>{if(h.hasChild(n)){const c=e.serverCache.getNode().getImmediateChild(n),h=Sr(t,c,i);l=wr(t,l,new le(n),h,r,s,o,a)}}),c.children.inorderTraversal((n,i)=>{const c=!e.serverCache.isCompleteForChild(n)&&void 0===i.value;if(!h.hasChild(n)&&!c){const c=e.serverCache.getNode().getImmediateChild(n),h=Sr(t,c,i);l=wr(t,l,new le(n),h,r,s,o,a)}}),l}function kr(t,e,n,i,r,s,o){if(null!=or(r,n))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=i.value){if(be(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return wr(t,e,n,c.getNode().getChild(n),r,s,a,o);if(be(n)){let i=new Ei(null);return c.getNode().forEachChild(qe,(t,e)=>{i=i.set(new le(t),e)}),Cr(t,e,n,i,r,s,a,o)}return e}{let l=new Ei(null);return i.foreach((t,e)=>{const i=ve(n,t);c.isCompleteForPath(i)&&(l=l.set(t,c.getNode().getChild(i)))}),Cr(t,e,n,l,r,s,a,o)}}function Or(t,e,n,i,r){const s=e.serverCache,o=Si(e,s.getNode(),s.isFullyInitialized()||be(n),s.isFiltered());return br(t,o,n,i,pr,r)}function Ir(t,e,n,i,r,o){let a;if(null!=or(i,n))return e;{const c=new fr(i,e,r),l=e.eventCache.getNode();let h;if(be(n)||".priority"===ue(n)){let n;if(e.serverCache.isFullyInitialized())n=ir(i,ki(e));else{const t=e.serverCache.getNode();Object(s["f"])(t instanceof mn,"serverChildren would be complete if leaf node"),n=rr(i,t)}n=n,h=t.filter.updateFullNode(l,n,o)}else{const r=ue(n);let s=cr(i,r,e.serverCache);null==s&&e.serverCache.isCompleteForChild(r)&&(s=l.getImmediateChild(r)),h=null!=s?t.filter.updateChild(l,r,s,pe(n),c,o):e.eventCache.getNode().hasChild(r)?t.filter.updateChild(l,r,mn.EMPTY_NODE,pe(n),c,o):l,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=ir(i,ki(e)),a.isLeafNode()&&(h=t.filter.updateFullNode(h,a,o)))}return a=e.serverCache.isFullyInitialized()||null!=or(i,he()),Ti(e,h,a,t.filter.filtersNodes())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Dn(n.getIndex()),r=Bn(n);this.processor_=gr(r);const s=e.serverCache,o=e.eventCache,a=i.updateFullNode(mn.EMPTY_NODE,s.getNode(),null),c=r.updateFullNode(mn.EMPTY_NODE,o.getNode(),null),l=new mi(a,s.isFullyInitialized(),i.filtersNodes()),h=new mi(c,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=xi(h,l),this.eventGenerator_=new yi(this.query_)}get query(){return this.query_}}function Ar(t){return t.viewCache_.serverCache.getNode()}function Pr(t){return Ci(t.viewCache_)}function Nr(t,e){const n=ki(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!be(e)&&!n.getImmediateChild(ue(e)).isEmpty())?n.getChild(e):null}function jr(t){return 0===t.eventRegistrations_.length}function Rr(t,e){t.eventRegistrations_.push(e)}function Mr(t,e,n){const i=[];if(n){Object(s["f"])(null==e,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(t=>{const e=t.createCancelEvent(n,r);e&&i.push(e)})}if(e){let n=[];for(let i=0;i<t.eventRegistrations_.length;++i){const r=t.eventRegistrations_[i];if(r.matches(e)){if(e.hasAnyCallback()){n=n.concat(t.eventRegistrations_.slice(i+1));break}}else n.push(r)}t.eventRegistrations_=n}else t.eventRegistrations_=[];return i}function Dr(t,e,n,i){e.type===ci.MERGE&&null!==e.source.queryId&&(Object(s["f"])(ki(t.viewCache_),"We should always have a full cache before handling merges"),Object(s["f"])(Ci(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=yr(t.processor_,r,e,n,i);return mr(t.processor_,o.viewCache),Object(s["f"])(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Fr(t,o.changes,o.viewCache.eventCache.getNode(),null)}function Lr(t,e){const n=t.viewCache_.eventCache,i=[];if(!n.getNode().isLeafNode()){const t=n.getNode();t.forEachChild(cn,(t,e)=>{i.push(Nn(t,e))})}return n.isFullyInitialized()&&i.push(Pn(n.getNode())),Fr(t,i,n.getNode(),e)}function Fr(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return vi(t.eventGenerator_,e,n,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur,Br;class Vr{constructor(){this.views=new Map}}function zr(t){Object(s["f"])(!Ur,"__referenceConstructor has already been defined"),Ur=t}function qr(){return Object(s["f"])(Ur,"Reference.ts has not been loaded"),Ur}function Wr(t){return 0===t.views.size}function Hr(t,e,n,i){const r=e.source.queryId;if(null!==r){const o=t.views.get(r);return Object(s["f"])(null!=o,"SyncTree gave us an op for an invalid query."),Dr(o,e,n,i)}{let r=[];for(const s of t.views.values())r=r.concat(Dr(s,e,n,i));return r}}function Gr(t,e,n,i,r){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let t=ir(n,r?i:null),s=!1;t?s=!0:i instanceof mn?(t=rr(n,i),s=!1):(t=mn.EMPTY_NODE,s=!1);const o=xi(new mi(t,s,!1),new mi(i,r,!1));return new Er(e,o)}return o}function Kr(t,e,n,i,r,s){const o=Gr(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Rr(o,n),Lr(o,n)}function $r(t,e,n,i){const r=e._queryIdentifier,s=[];let o=[];const a=Zr(t);if("default"===r)for(const[c,l]of t.views.entries())o=o.concat(Mr(l,n,i)),jr(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{const e=t.views.get(r);e&&(o=o.concat(Mr(e,n,i)),jr(e)&&(t.views.delete(r),e.query._queryParams.loadsAllData()||s.push(e.query)))}return a&&!Zr(t)&&s.push(new(qr())(e._repo,e._path)),{removed:s,events:o}}function Yr(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Xr(t,e){let n=null;for(const i of t.views.values())n=n||Nr(i,e);return n}function Qr(t,e){const n=e._queryParams;if(n.loadsAllData())return ts(t);{const n=e._queryIdentifier;return t.views.get(n)}}function Jr(t,e){return null!=Qr(t,e)}function Zr(t){return null!=ts(t)}function ts(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t){Object(s["f"])(!Br,"__referenceConstructor has already been defined"),Br=t}function ns(){return Object(s["f"])(Br,"Reference.ts has not been loaded"),Br}let is=1;class rs{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ei(null),this.pendingWriteTree_=nr(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ss(t,e,n,i,r){return zi(t.pendingWriteTree_,e,n,i,r),r?vs(t,new fi(li(),e,n)):[]}function os(t,e,n,i){qi(t.pendingWriteTree_,e,n,i);const r=Ei.fromObject(n);return vs(t,new gi(li(),e,r))}function as(t,e,n=!1){const i=Wi(t.pendingWriteTree_,e),r=Hi(t.pendingWriteTree_,e);if(r){let e=new Ei(null);return null!=i.snap?e=e.set(he(),!0):F(i.children,t=>{e=e.set(new le(t),!0)}),vs(t,new di(i.path,e,n))}return[]}function cs(t,e,n){return vs(t,new fi(hi(),e,n))}function ls(t,e,n){const i=Ei.fromObject(n);return vs(t,new gi(hi(),e,i))}function hs(t,e){return vs(t,new pi(hi(),e))}function us(t,e,n){const i=Ss(t,n);if(i){const n=Cs(i),r=n.path,s=n.queryId,o=we(r,e),a=new pi(ui(s),o);return ks(t,r,a)}return[]}function ds(t,e,n,i){const r=e._path,s=t.syncPointTree_.get(r);let o=[];if(s&&("default"===e._queryIdentifier||Jr(s,e))){const a=$r(s,e,n,i);Wr(s)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const c=a.removed;o=a.events;const l=-1!==c.findIndex(t=>t._queryParams.loadsAllData()),h=t.syncPointTree_.findOnPath(r,(t,e)=>Zr(e));if(l&&!h){const e=t.syncPointTree_.subtree(r);if(!e.isEmpty()){const n=Os(e);for(let e=0;e<n.length;++e){const i=n[e],r=i.query,s=_s(t,i);t.listenProvider_.startListening(Is(r),xs(t,r),s.hashFn,s.onComplete)}}}if(!h&&c.length>0&&!i)if(l){const n=null;t.listenProvider_.stopListening(Is(e),n)}else c.forEach(e=>{const n=t.queryToTagMap.get(Ts(e));t.listenProvider_.stopListening(Is(e),n)});Es(t,c)}return o}function ps(t,e,n,i){const r=Ss(t,i);if(null!=r){const i=Cs(r),s=i.path,o=i.queryId,a=we(s,e),c=new fi(ui(o),a,n);return ks(t,s,c)}return[]}function fs(t,e,n,i){const r=Ss(t,i);if(r){const i=Cs(r),s=i.path,o=i.queryId,a=we(s,e),c=Ei.fromObject(n),l=new gi(ui(o),a,c);return ks(t,s,l)}return[]}function gs(t,e,n){const i=e._path;let r=null,o=!1;t.syncPointTree_.foreachOnPath(i,(t,e)=>{const n=we(t,i);r=r||Xr(e,n),o=o||Zr(e)});let a,c=t.syncPointTree_.get(i);if(c?(o=o||Zr(c),r=r||Xr(c,he())):(c=new Vr,t.syncPointTree_=t.syncPointTree_.set(i,c)),null!=r)a=!0;else{a=!1,r=mn.EMPTY_NODE;const e=t.syncPointTree_.subtree(i);e.foreachChild((t,e)=>{const n=Xr(e,he());n&&(r=r.updateImmediateChild(t,n))})}const l=Jr(c,e);if(!l&&!e._queryParams.loadsAllData()){const n=Ts(e);Object(s["f"])(!t.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=As();t.queryToTagMap.set(n,i),t.tagToQueryMap.set(i,n)}const h=Vi(t.pendingWriteTree_,i);let u=Kr(c,e,n,h,r,a);if(!l&&!o){const n=Qr(c,e);u=u.concat(Ps(t,e,n))}return u}function ms(t,e,n){const i=!0,r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(t,n)=>{const i=we(t,e),r=Xr(n,i);if(r)return r});return Xi(r,e,s,n,i)}function ys(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(t,e)=>{const r=we(t,n);i=i||Xr(e,r)});let r=t.syncPointTree_.get(n);r?i=i||Xr(r,he()):(r=new Vr,t.syncPointTree_=t.syncPointTree_.set(n,r));const s=null!=i,o=s?new mi(i,!0,!1):null,a=Vi(t.pendingWriteTree_,e._path),c=Gr(r,e,a,s?o.getNode():mn.EMPTY_NODE,s);return Pr(c)}function vs(t,e){return bs(e,t.syncPointTree_,null,Vi(t.pendingWriteTree_,he()))}function bs(t,e,n,i){if(be(t.path))return ws(t,e,n,i);{const r=e.get(he());null==n&&null!=r&&(n=Xr(r,he()));let s=[];const o=ue(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const t=n?n.getImmediateChild(o):null,e=lr(i,o);s=s.concat(bs(a,c,t,e))}return r&&(s=s.concat(Hr(r,t,i,n))),s}}function ws(t,e,n,i){const r=e.get(he());null==n&&null!=r&&(n=Xr(r,he()));let s=[];return e.children.inorderTraversal((e,r)=>{const o=n?n.getImmediateChild(e):null,a=lr(i,e),c=t.operationForChild(e);c&&(s=s.concat(ws(c,r,o,a)))}),r&&(s=s.concat(Hr(r,t,i,n))),s}function _s(t,e){const n=e.query,i=xs(t,n);return{hashFn:()=>{const t=Ar(e)||mn.EMPTY_NODE;return t.hash()},onComplete:e=>{if("ok"===e)return i?us(t,n._path,i):hs(t,n._path);{const i=z(e,n);return ds(t,n,null,i)}}}}function xs(t,e){const n=Ts(e);return t.queryToTagMap.get(n)}function Ts(t){return t._path.toString()+"$"+t._queryIdentifier}function Ss(t,e){return t.tagToQueryMap.get(e)}function Cs(t){const e=t.indexOf("$");return Object(s["f"])(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new le(t.substr(0,e))}}function ks(t,e,n){const i=t.syncPointTree_.get(e);Object(s["f"])(i,"Missing sync point for query tag that we're tracking");const r=Vi(t.pendingWriteTree_,e);return Hr(i,n,r,null)}function Os(t){return t.fold((t,e,n)=>{if(e&&Zr(e)){const t=ts(e);return[t]}{let t=[];return e&&(t=Yr(e)),F(n,(e,n)=>{t=t.concat(n)}),t}})}function Is(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ns())(t._repo,t._path):t}function Es(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const e=Ts(i),n=t.queryToTagMap.get(e);t.queryToTagMap.delete(e),t.tagToQueryMap.delete(n)}}}function As(){return is++}function Ps(t,e,n){const i=e._path,r=xs(t,e),o=_s(t,n),a=t.listenProvider_.startListening(Is(e),r,o.hashFn,o.onComplete),c=t.syncPointTree_.subtree(i);if(r)Object(s["f"])(!Zr(c.value),"If we're adding a query, it shouldn't be shadowed");else{const e=c.fold((t,e,n)=>{if(!be(t)&&e&&Zr(e))return[ts(e).query];{let t=[];return e&&(t=t.concat(Yr(e).map(t=>t.query))),F(n,(e,n)=>{t=t.concat(n)}),t}});for(let n=0;n<e.length;++n){const i=e[n];t.listenProvider_.stopListening(Is(i),xs(t,i))}}return a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Ns(e)}node(){return this.node_}}class js{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=ve(this.path_,t);return new js(this.syncTree_,e)}node(){return ms(this.syncTree_,this.path_)}}const Rs=function(t){return t=t||{},t["timestamp"]=t["timestamp"]||(new Date).getTime(),t},Ms=function(t,e,n){return t&&"object"===typeof t?(Object(s["f"])(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?Ds(t[".sv"],e,n):"object"===typeof t[".sv"]?Ls(t[".sv"],e):void Object(s["f"])(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Ds=function(t,e,n){switch(t){case"timestamp":return n["timestamp"];default:Object(s["f"])(!1,"Unexpected server value: "+t)}},Ls=function(t,e,n){t.hasOwnProperty("increment")||Object(s["f"])(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t["increment"];"number"!==typeof i&&Object(s["f"])(!1,"Unexpected increment value: "+i);const r=e.node();if(Object(s["f"])(null!==r&&"undefined"!==typeof r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r,a=o.getValue();return"number"!==typeof a?i:a+i},Fs=function(t,e,n,i){return Bs(e,new js(n,t),i)},Us=function(t,e,n){return Bs(t,new Ns(e),n)};function Bs(t,e,n){const i=t.getPriority().val(),r=Ms(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const i=t,s=Ms(i.getValue(),e,n);return s!==i.getValue()||r!==i.getPriority().val()?new rn(s,wn(r)):t}{const i=t;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new rn(r))),i.forEachChild(cn,(t,i)=>{const r=Bs(i,e.getImmediateChild(t),n);r!==i&&(s=s.updateImmediateChild(t,r))}),s}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}}function zs(t,e){let n=e instanceof le?e:new le(e),i=t,r=ue(n);while(null!==r){const t=Object(s["P"])(i.node.children,r)||{children:{},childCount:0};i=new Vs(r,i,t),n=pe(n),r=ue(n)}return i}function qs(t){return t.node.value}function Ws(t,e){t.node.value=e,Qs(t)}function Hs(t){return t.node.childCount>0}function Gs(t){return void 0===qs(t)&&!Hs(t)}function Ks(t,e){F(t.node.children,(n,i)=>{e(new Vs(n,t,i))})}function $s(t,e,n,i){n&&!i&&e(t),Ks(t,t=>{$s(t,e,!0,i)}),n&&i&&e(t)}function Ys(t,e,n){let i=n?t:t.parent;while(null!==i){if(e(i))return!0;i=i.parent}return!1}function Xs(t){return new le(null===t.parent?t.name:Xs(t.parent)+"/"+t.name)}function Qs(t){null!==t.parent&&Js(t.parent,t.name,t)}function Js(t,e,n){const i=Gs(n),r=Object(s["l"])(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,Qs(t)):i||r||(t.node.children[e]=n.node,t.node.childCount++,Qs(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=/[\[\].#$\/\u0000-\u001F\u007F]/,to=/[\[\].#$\u0000-\u001F\u007F]/,eo=10485760,no=function(t){return"string"===typeof t&&0!==t.length&&!Zs.test(t)},io=function(t){return"string"===typeof t&&0!==t.length&&!to.test(t)},ro=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),io(t)},so=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!E(t)||t&&"object"===typeof t&&Object(s["l"])(t,".sv")},oo=function(t,e,n,i){i&&void 0===e||ao(Object(s["r"])(t,"value"),e,n)},ao=function(t,e,n){const i=n instanceof le?new Se(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Ie(i));if("function"===typeof e)throw new Error(t+"contains a function "+Ie(i)+" with contents = "+e.toString());if(E(e))throw new Error(t+"contains "+e.toString()+" "+Ie(i));if("string"===typeof e&&e.length>eo/3&&Object(s["Q"])(e)>eo)throw new Error(t+"contains a string greater than "+eo+" utf8 bytes "+Ie(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"===typeof e){let n=!1,r=!1;if(F(e,(e,s)=>{if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(r=!0,!no(e)))throw new Error(t+" contains an invalid key ("+e+") "+Ie(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');Ce(i,e),ao(t,s,i),ke(i)}),n&&r)throw new Error(t+' contains ".value" child '+Ie(i)+" in addition to actual children.")}},co=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const r=me(i);for(let e=0;e<r.length;e++)if(".priority"===r[e]&&e===r.length-1);else if(!no(r[e]))throw new Error(t+"contains an invalid key ("+r[e]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(_e);let r=null;for(n=0;n<e.length;n++){if(i=e[n],null!==r&&Te(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},lo=function(t,e,n,i){if(i&&void 0===e)return;const r=Object(s["r"])(t,"values");if(!e||"object"!==typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];F(e,(t,e)=>{const i=new le(t);if(ao(r,e,ve(n,i)),".priority"===fe(i)&&!so(e))throw new Error(r+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(i)}),co(r,o)},ho=function(t,e,n){if(!n||void 0!==e){if(E(e))throw new Error(Object(s["r"])(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!so(e))throw new Error(Object(s["r"])(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},uo=function(t,e,n,i){if((!i||void 0!==n)&&!no(n))throw new Error(Object(s["r"])(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},po=function(t,e,n,i){if((!i||void 0!==n)&&!io(n))throw new Error(Object(s["r"])(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fo=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),po(t,e,n,i)},go=function(t,e){if(".info"===ue(e))throw new Error(t+" failed = Can't modify data under /.info/")},mo=function(t,e){const n=e.path.toString();if("string"!==typeof e.repoInfo.host||0===e.repoInfo.host.length||!no(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!ro(n))throw new Error(Object(s["r"])(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yo{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vo(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null===n||xe(s,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function bo(t,e,n){vo(t,n),_o(t,t=>xe(t,e))}function wo(t,e,n){vo(t,n),_o(t,t=>Te(t,e)||Te(e,t))}function _o(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(xo(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function xo(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const i=n.getEventRunner();w&&T("event: "+n.toString()),K(i)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="repo_interrupt",So=25;class Co{constructor(t,e,n,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jn(),this.transactionQueueTree_=new Vs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ko(t,e,n){if(t.stats_=mt(t.repoInfo_),t.forceRestClient_||$())t.server_=new Xn(t.repoInfo_,(e,n,i,r)=>{Eo(t,e,n,i,r)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ao(t,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(s["S"])(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Fe(t.repoInfo_,e,(e,n,i,r)=>{Eo(t,e,n,i,r)},e=>{Ao(t,e)},e=>{Po(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(e=>{t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(e=>{t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=yt(t.repoInfo_,()=>new ai(t.stats_,t.server_)),t.infoData_=new Qn,t.infoSyncTree_=new rs({startListening:(e,n,i,r)=>{let s=[];const o=t.infoData_.getNode(e._path);return o.isEmpty()||(s=cs(t.infoSyncTree_,e._path,o),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),No(t,"connected",!1),t.serverSyncTree_=new rs({startListening:(e,n,i,r)=>(t.server_.listen(e,i,n,(n,i)=>{const s=r(n,i);wo(t.eventQueue_,e._path,s)}),[]),stopListening:(e,n)=>{t.server_.unlisten(e,n)}})}function Oo(t){const e=t.infoData_.getNode(new le(".info/serverTimeOffset")),n=e.val()||0;return(new Date).getTime()+n}function Io(t){return Rs({timestamp:Oo(t)})}function Eo(t,e,n,i,r){t.dataUpdateCount++;const o=new le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(r)if(i){const e=Object(s["M"])(n,t=>wn(t));a=fs(t.serverSyncTree_,o,e,r)}else{const e=wn(n);a=ps(t.serverSyncTree_,o,e,r)}else if(i){const e=Object(s["M"])(n,t=>wn(t));a=ls(t.serverSyncTree_,o,e)}else{const e=wn(n);a=cs(t.serverSyncTree_,o,e)}let c=o;a.length>0&&(c=Jo(t,o)),wo(t.eventQueue_,c,a)}function Ao(t,e){No(t,"connected",e),!1===e&&Lo(t)}function Po(t,e){F(e,(e,n)=>{No(t,e,n)})}function No(t,e,n){const i=new le("/.info/"+e),r=wn(n);t.infoData_.updateSnapshot(i,r);const s=cs(t.infoSyncTree_,i,r);wo(t.eventQueue_,i,s)}function jo(t){return t.nextWriteId_++}function Ro(t,e){const n=ys(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(n=>{const i=wn(n).withIndex(e._queryParams.getIndex()),r=cs(t.serverSyncTree_,e._path,i);return bo(t.eventQueue_,e._path,r),Promise.resolve(i)},n=>(Go(t,"get for query "+Object(s["S"])(e)+" failed: "+n),Promise.reject(new Error(n))))}function Mo(t,e,n,i,r){Go(t,"set",{path:e.toString(),value:n,priority:i});const s=Io(t),o=wn(n,i),a=ms(t.serverSyncTree_,e),c=Us(o,a,s),l=jo(t),h=ss(t.serverSyncTree_,e,c,l,!0);vo(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(n,i)=>{const s="ok"===n;s||O("set at "+e+" failed: "+n);const o=as(t.serverSyncTree_,l,!s);wo(t.eventQueue_,e,o),Ko(t,r,n,i)});const u=ra(t,e);Jo(t,u),wo(t.eventQueue_,u,[])}function Do(t,e,n,i){Go(t,"update",{path:e.toString(),value:n});let r=!0;const s=Io(t),o={};if(F(n,(n,i)=>{r=!1,o[n]=Fs(ve(e,n),wn(i),t.serverSyncTree_,s)}),r)T("update() called with empty data.  Don't do anything."),Ko(t,i,"ok",void 0);else{const r=jo(t),s=os(t.serverSyncTree_,e,o,r);vo(t.eventQueue_,s),t.server_.merge(e.toString(),n,(n,s)=>{const o="ok"===n;o||O("update at "+e+" failed: "+n);const a=as(t.serverSyncTree_,r,!o),c=a.length>0?Jo(t,e):e;wo(t.eventQueue_,c,a),Ko(t,i,n,s)}),F(n,n=>{const i=ra(t,ve(e,n));Jo(t,i)}),wo(t.eventQueue_,e,[])}}function Lo(t){Go(t,"onDisconnectEvents");const e=Io(t),n=Jn();ei(t.onDisconnect_,he(),(i,r)=>{const s=Fs(i,r,t.serverSyncTree_,e);Zn(n,i,s)});let i=[];ei(n,he(),(e,n)=>{i=i.concat(cs(t.serverSyncTree_,e,n));const r=ra(t,e);Jo(t,r)}),t.onDisconnect_=Jn(),wo(t.eventQueue_,he(),i)}function Fo(t,e,n){t.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&ti(t.onDisconnect_,e),Ko(t,n,i,r)})}function Uo(t,e,n,i){const r=wn(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),(n,s)=>{"ok"===n&&Zn(t.onDisconnect_,e,r),Ko(t,i,n,s)})}function Bo(t,e,n,i,r){const s=wn(n,i);t.server_.onDisconnectPut(e.toString(),s.val(!0),(n,i)=>{"ok"===n&&Zn(t.onDisconnect_,e,s),Ko(t,r,n,i)})}function Vo(t,e,n,i){if(Object(s["A"])(n))return T("onDisconnect().update() called with empty data.  Don't do anything."),void Ko(t,i,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(r,s)=>{"ok"===r&&F(n,(n,i)=>{const r=wn(i);Zn(t.onDisconnect_,ve(e,n),r)}),Ko(t,i,r,s)})}function zo(t,e,n){let i;i=".info"===ue(e._path)?gs(t.infoSyncTree_,e,n):gs(t.serverSyncTree_,e,n),bo(t.eventQueue_,e._path,i)}function qo(t,e,n){let i;i=".info"===ue(e._path)?ds(t.infoSyncTree_,e,n):ds(t.serverSyncTree_,e,n),bo(t.eventQueue_,e._path,i)}function Wo(t){t.persistentConnection_&&t.persistentConnection_.interrupt(To)}function Ho(t){t.persistentConnection_&&t.persistentConnection_.resume(To)}function Go(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),T(n,...e)}function Ko(t,e,n,i){e&&K(()=>{if("ok"===n)e(null);else{const t=(n||"error").toUpperCase();let r=t;i&&(r+=": "+i);const s=new Error(r);s.code=t,e(s)}})}function $o(t,e,n,i,r,o){Go(t,"transaction on "+e);const a={path:e,update:n,onComplete:i,status:null,order:y(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Yo(t,e,void 0);a.currentInputSnapshot=c;const l=a.update(c.val());if(void 0===l)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{ao("transaction failed: Data returned ",l,a.path),a.status=0;const n=zs(t.transactionQueueTree_,e),i=qs(n)||[];let r;if(i.push(a),Ws(n,i),"object"===typeof l&&null!==l&&Object(s["l"])(l,".priority"))r=Object(s["P"])(l,".priority"),Object(s["f"])(so(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{const n=ms(t.serverSyncTree_,e)||mn.EMPTY_NODE;r=n.getPriority().val()}const o=Io(t),h=wn(l,r),u=Us(h,c,o);a.currentOutputSnapshotRaw=h,a.currentOutputSnapshotResolved=u,a.currentWriteId=jo(t);const d=ss(t.serverSyncTree_,e,u,a.currentWriteId,a.applyLocally);wo(t.eventQueue_,e,d),Xo(t,t.transactionQueueTree_)}}function Yo(t,e,n){return ms(t.serverSyncTree_,e,n)||mn.EMPTY_NODE}function Xo(t,e=t.transactionQueueTree_){if(e||ia(t,e),qs(e)){const n=ea(t,e);Object(s["f"])(n.length>0,"Sending zero length transaction queue");const i=n.every(t=>0===t.status);i&&Qo(t,Xs(e),n)}else Hs(e)&&Ks(e,e=>{Xo(t,e)})}function Qo(t,e,n){const i=n.map(t=>t.currentWriteId),r=Yo(t,e,i);let o=r;const a=r.hash();for(let h=0;h<n.length;h++){const t=n[h];Object(s["f"])(0===t.status,"tryToSendTransactionQueue_: items in queue should all be run."),t.status=1,t.retryCount++;const i=we(e,t.path);o=o.updateChild(i,t.currentOutputSnapshotRaw)}const c=o.val(!0),l=e;t.server_.put(l.toString(),c,i=>{Go(t,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let e=0;e<n.length;e++)n[e].status=2,r=r.concat(as(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&i.push(()=>n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)),n[e].unwatcher();ia(t,zs(t.transactionQueueTree_,e)),Xo(t,t.transactionQueueTree_),wo(t.eventQueue_,e,r);for(let t=0;t<i.length;t++)K(i[t])}else{if("datastale"===i)for(let t=0;t<n.length;t++)3===n[t].status?n[t].status=4:n[t].status=0;else{O("transaction at "+l.toString()+" failed: "+i);for(let t=0;t<n.length;t++)n[t].status=4,n[t].abortReason=i}Jo(t,e)}},a)}function Jo(t,e){const n=ta(t,e),i=Xs(n),r=ea(t,n);return Zo(t,r,i),i}function Zo(t,e,n){if(0===e.length)return;const i=[];let r=[];const o=e.filter(t=>0===t.status),a=o.map(t=>t.currentWriteId);for(let c=0;c<e.length;c++){const o=e[c],l=we(n,o.path);let h,u=!1;if(Object(s["f"])(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)u=!0,h=o.abortReason,r=r.concat(as(t.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=So)u=!0,h="maxretry",r=r.concat(as(t.serverSyncTree_,o.currentWriteId,!0));else{const n=Yo(t,o.path,a);o.currentInputSnapshot=n;const i=e[c].update(n.val());if(void 0!==i){ao("transaction failed: Data returned ",i,o.path);let e=wn(i);const c="object"===typeof i&&null!=i&&Object(s["l"])(i,".priority");c||(e=e.updatePriority(n.getPriority()));const l=o.currentWriteId,h=Io(t),u=Us(e,n,h);o.currentOutputSnapshotRaw=e,o.currentOutputSnapshotResolved=u,o.currentWriteId=jo(t),a.splice(a.indexOf(l),1),r=r.concat(ss(t.serverSyncTree_,o.path,u,o.currentWriteId,o.applyLocally)),r=r.concat(as(t.serverSyncTree_,l,!0))}else u=!0,h="nodata",r=r.concat(as(t.serverSyncTree_,o.currentWriteId,!0))}wo(t.eventQueue_,n,r),r=[],u&&(e[c].status=2,function(t){setTimeout(t,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&("nodata"===h?i.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):i.push(()=>e[c].onComplete(new Error(h),!1,null))))}ia(t,t.transactionQueueTree_);for(let s=0;s<i.length;s++)K(i[s]);Xo(t,t.transactionQueueTree_)}function ta(t,e){let n,i=t.transactionQueueTree_;n=ue(e);while(null!==n&&void 0===qs(i))i=zs(i,n),e=pe(e),n=ue(e);return i}function ea(t,e){const n=[];return na(t,e,n),n.sort((t,e)=>t.order-e.order),n}function na(t,e,n){const i=qs(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Ks(e,e=>{na(t,e,n)})}function ia(t,e){const n=qs(e);if(n){let t=0;for(let e=0;e<n.length;e++)2!==n[e].status&&(n[t]=n[e],t++);n.length=t,Ws(e,n.length>0?n:void 0)}Ks(e,e=>{ia(t,e)})}function ra(t,e){const n=Xs(ta(t,e)),i=zs(t.transactionQueueTree_,e);return Ys(i,e=>{sa(t,e)}),sa(t,i),$s(i,e=>{sa(t,e)}),n}function sa(t,e){const n=qs(e);if(n){const i=[];let r=[],o=-1;for(let e=0;e<n.length;e++)3===n[e].status||(1===n[e].status?(Object(s["f"])(o===e-1,"All SENT items should be at beginning of queue."),o=e,n[e].status=3,n[e].abortReason="set"):(Object(s["f"])(0===n[e].status,"Unexpected transaction status in abort"),n[e].unwatcher(),r=r.concat(as(t.serverSyncTree_,n[e].currentWriteId,!0)),n[e].onComplete&&i.push(n[e].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Ws(e,void 0):n.length=o+1,wo(t.eventQueue_,Xs(e),r);for(let t=0;t<i.length;t++)K(i[t])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let t=n[r];try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(i){}e+="/"+t}return e}function aa(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):O(`Invalid query segment '${n}' in query '${t}'`)}return e}const ca=function(t,e){const n=la(t),i=n.namespace;"firebase.com"===n.domain&&k(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||k("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||I();const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ht(n.host,n.secure,i,e,r,"",i!==n.subdomain),path:new le(n.pathString)}},la=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",c=443;if("string"===typeof t){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let h=t.indexOf("/");-1===h&&(h=t.length);let u=t.indexOf("?");-1===u&&(u=t.length),e=t.substring(0,Math.min(h,u)),h<u&&(r=oa(t.substring(h,u)));const d=aa(t.substring(Math.min(t.length,u)));l=e.indexOf(":"),l>=0?(o="https"===a||"wss"===a,c=parseInt(e.substring(l+1),10)):l=e.length;const p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const t=e.indexOf(".");i=e.substring(0,t).toLowerCase(),n=e.substring(t+1),s=i}"ns"in d&&(s=d["ns"])}return{host:e,port:c,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ha{constructor(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Object(s["S"])(this.snapshot.exportVal())}}class ua{constructor(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return Object(s["f"])(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new s["a"];return Fo(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){go("OnDisconnect.remove",this._path);const t=new s["a"];return Uo(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){go("OnDisconnect.set",this._path),oo("OnDisconnect.set",t,this._path,!1);const e=new s["a"];return Uo(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){go("OnDisconnect.setWithPriority",this._path),oo("OnDisconnect.setWithPriority",t,this._path,!1),ho("OnDisconnect.setWithPriority",e,!1);const n=new s["a"];return Bo(this._repo,this._path,t,e,n.wrapCallback(()=>{})),n.promise}update(t){go("OnDisconnect.update",this._path),lo("OnDisconnect.update",t,this._path,!1);const e=new s["a"];return Vo(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,e,n,i){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=i}get key(){return be(this._path)?null:fe(this._path)}get ref(){return new va(this._repo,this._path)}get _queryIdentifier(){const t=Yn(this._queryParams),e=D(t);return"{}"===e?"default":e}get _queryObject(){return Yn(this._queryParams)}isEqual(t){if(t=Object(s["u"])(t),!(t instanceof fa))return!1;const e=this._repo===t._repo,n=xe(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return e&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+ge(this._path)}}function ga(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ma(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===qe){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){const n=t.getIndexStartName();if(n!==P)throw new Error(i);if("string"!==typeof e)throw new Error(r)}if(t.hasEnd()){const e=t.getIndexEndName();if(e!==N)throw new Error(i);if("string"!==typeof n)throw new Error(r)}}else if(t.getIndex()===cn){if(null!=e&&!so(e)||null!=n&&!so(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(s["f"])(t.getIndex()instanceof _n||t.getIndex()===Tn,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ya(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class va extends fa{constructor(t,e){super(t,e,new Un,!1)}get parent(){const t=ye(this._path);return null===t?null:new va(this._repo,t)}get root(){let t=this;while(null!==t.parent)t=t.parent;return t}}class ba{constructor(t,e,n){this._node=t,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new le(t),n=xa(this.ref,t);return new ba(this._node.getChild(e),n,cn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){if(this._node.isLeafNode())return!1;const e=this._node;return!!e.forEachChild(this._index,(e,n)=>t(new ba(n,xa(this.ref,e),cn)))}hasChild(t){const e=new le(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wa(t,e){return t=Object(s["u"])(t),t._checkNotDeleted("ref"),void 0!==e?xa(t._root,e):t._root}function _a(t,e){t=Object(s["u"])(t),t._checkNotDeleted("refFromURL");const n=ca(e,t._repo.repoInfo_.nodeAdmin);mo("refFromURL",n);const i=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||i.host===t._repo.repoInfo_.host||k("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+t._repo.repoInfo_.host+")"),wa(t,n.path.toString())}function xa(t,e){return t=Object(s["u"])(t),null===ue(t._path)?fo("child","path",e,!1):po("child","path",e,!1),new va(t._repo,ve(t._path,e))}function Ta(t,e){t=Object(s["u"])(t),go("push",t._path),oo("push",e,t._path,!0);const n=Oo(t._repo),i=In(n),r=xa(t,i),o=xa(t,i);let a;return a=null!=e?Ca(o,e).then(()=>o):Promise.resolve(o),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}function Sa(t){return go("remove",t._path),Ca(t,null)}function Ca(t,e){t=Object(s["u"])(t),go("set",t._path),oo("set",e,t._path,!1);const n=new s["a"];return Mo(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ka(t,e){t=Object(s["u"])(t),go("setPriority",t._path),ho("setPriority",e,!1);const n=new s["a"];return Mo(t._repo,ve(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function Oa(t,e,n){if(go("setWithPriority",t._path),oo("setWithPriority",e,t._path,!1),ho("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";const i=new s["a"];return Mo(t._repo,t._path,e,n,i.wrapCallback(()=>{})),i.promise}function Ia(t,e){lo("update",e,t._path,!1);const n=new s["a"];return Do(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Ea(t){return t=Object(s["u"])(t),Ro(t._repo,t).then(e=>new ba(e,new va(t._repo,t._path),t._queryParams.getIndex()))}class Aa{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const n=e._queryParams.getIndex();return new ha("value",this,new ba(t.snapshotNode,new va(e._repo,e._path),n))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new ua(this,t,e):null}matches(t){return t instanceof Aa&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Pa{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new ua(this,t,e):null}createEvent(t,e){Object(s["f"])(null!=t.childName,"Child events should have a childName.");const n=xa(new va(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new ha(t.type,this,new ba(t.snapshotNode,n,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Pa&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Na(t,e,n,i,r){let s;if("object"===typeof i&&(s=void 0,r=i),"function"===typeof i&&(s=i),r&&r.onlyOnce){const e=n,i=(n,i)=>{qo(t._repo,t,a),e(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const o=new da(n,s||void 0),a="value"===e?new Aa(o):new Pa(e,o);return zo(t._repo,t,a),()=>qo(t._repo,t,a)}function ja(t,e,n,i){return Na(t,"value",e,n,i)}function Ra(t,e,n,i){return Na(t,"child_added",e,n,i)}function Ma(t,e,n,i){return Na(t,"child_changed",e,n,i)}function Da(t,e,n,i){return Na(t,"child_moved",e,n,i)}function La(t,e,n,i){return Na(t,"child_removed",e,n,i)}function Fa(t,e,n){let i=null;const r=n?new da(n):null;"value"===e?i=new Aa(r):e&&(i=new Pa(e,r)),qo(t._repo,t,i)}class Ua{}class Ba extends Ua{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){oo("endAt",this._value,t._path,!0);const e=Hn(t._queryParams,this._value,this._key);if(ya(e),ma(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fa(t._repo,t._path,e,t._orderByCalled)}}function Va(t,e){return uo("endAt","key",e,!0),new Ba(t,e)}class za extends Ua{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){oo("endBefore",this._value,t._path,!1);const e=Gn(t._queryParams,this._value,this._key);if(ya(e),ma(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fa(t._repo,t._path,e,t._orderByCalled)}}function qa(t,e){return uo("endBefore","key",e,!0),new za(t,e)}class Wa extends Ua{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){oo("startAt",this._value,t._path,!0);const e=qn(t._queryParams,this._value,this._key);if(ya(e),ma(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fa(t._repo,t._path,e,t._orderByCalled)}}function Ha(t=null,e){return uo("startAt","key",e,!0),new Wa(t,e)}class Ga extends Ua{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){oo("startAfter",this._value,t._path,!1);const e=Wn(t._queryParams,this._value,this._key);if(ya(e),ma(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fa(t._repo,t._path,e,t._orderByCalled)}}function Ka(t,e){return uo("startAfter","key",e,!0),new Ga(t,e)}class $a extends Ua{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fa(t._repo,t._path,Vn(t._queryParams,this._limit),t._orderByCalled)}}function Ya(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new $a(t)}class Xa extends Ua{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fa(t._repo,t._path,zn(t._queryParams,this._limit),t._orderByCalled)}}function Qa(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Xa(t)}class Ja extends Ua{constructor(t){super(),this._path=t}_apply(t){ga(t,"orderByChild");const e=new le(this._path);if(be(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new _n(e),i=Kn(t._queryParams,n);return ma(i),new fa(t._repo,t._path,i,!0)}}function Za(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return po("orderByChild","path",t,!1),new Ja(t)}class tc extends Ua{_apply(t){ga(t,"orderByKey");const e=Kn(t._queryParams,qe);return ma(e),new fa(t._repo,t._path,e,!0)}}function ec(){return new tc}class nc extends Ua{_apply(t){ga(t,"orderByPriority");const e=Kn(t._queryParams,cn);return ma(e),new fa(t._repo,t._path,e,!0)}}function ic(){return new nc}class rc extends Ua{_apply(t){ga(t,"orderByValue");const e=Kn(t._queryParams,Tn);return ma(e),new fa(t._repo,t._path,e,!0)}}function sc(){return new rc}class oc extends Ua{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(oo("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ba(this._value,this._key)._apply(new Wa(this._value,this._key)._apply(t))}}function ac(t,e){return uo("equalTo","key",e,!0),new oc(t,e)}function cc(t,...e){let n=Object(s["u"])(t);for(const i of e)n=i._apply(n);return n}zr(va),es(va);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const lc="FIREBASE_DATABASE_EMULATOR_HOST",hc={};let uc=!1;function dc(t,e,n,i){t.repoInfo_=new ht(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),i&&(t.authTokenProvider_=i)}function pc(e,n,i,r,s){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||k("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),T("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");let a,c=ca(o,s),l=c.repoInfo,h=void 0;"undefined"!==typeof t&&(h=Object({NODE_ENV:"production",BASE_URL:"/"})[lc]),h?(a=!0,o=`http://${h}?ns=${l.namespace}`,c=ca(o,s),l=c.repoInfo):a=!c.repoInfo.secure;const u=s&&a?new J(J.OWNER):new Q(e.name,e.options,n);mo("Invalid Firebase Database URL",c),be(c.path)||k("Database URL must point to the root of a Firebase Database (not including a child path).");const d=gc(l,e,u,new X(e.name,i));return new mc(d,e)}function fc(t,e){const n=hc[e];n&&n[t.key]===t||k(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Wo(t),delete n[t.key]}function gc(t,e,n,i){let r=hc[e.name];r||(r={},hc[e.name]=r);let s=r[t.toURLString()];return s&&k("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Co(t,uc,n,i),r[t.toURLString()]=s,s}class mc{constructor(t,e){this._repoInternal=t,this.app=e,this["type"]="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ko(this._repoInternal,this.app.options.appId,this.app.options["databaseAuthVariableOverride"]),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new va(this._repo,he())),this._rootInternal}_delete(){return null!==this._rootInternal&&(fc(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&k("Cannot call "+t+" on a deleted database.")}}function yc(t,e,n,i={}){t=Object(s["u"])(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&k("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o=void 0;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&k('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new J(J.OWNER);else if(i.mockUserToken){const e="string"===typeof i.mockUserToken?i.mockUserToken:Object(s["m"])(i.mockUserToken,t.app.options.projectId);o=new J(e)}dc(r,e,n,o)}function vc(t){t=Object(s["u"])(t),t._checkNotDeleted("goOffline"),Wo(t._repo)}function bc(t){t=Object(s["u"])(t),t._checkNotDeleted("goOnline"),Ho(t._repo)}function wc(t,e){x(t,e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t){h(i["SDK_VERSION"]),Object(i["_registerComponent"])(new r["a"]("database",(t,{instanceIdentifier:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return pc(n,i,r,e)},"PUBLIC").setMultipleInstances(!0)),Object(i["registerVersion"])(a,c,t),Object(i["registerVersion"])(a,c,"esm2017")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc={".sv":"timestamp"};function Tc(){return xc}function Sc(t){return{".sv":{increment:t}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function kc(t,e,n){var i;if(t=Object(s["u"])(t),go("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";const r=null===(i=null===n||void 0===n?void 0:n.applyLocally)||void 0===i||i,o=new s["a"],a=(e,n,i)=>{let r=null;e?o.reject(e):(r=new ba(i,new va(t._repo,t._path),cn),o.resolve(new Cc(n,r)))},c=ja(t,()=>{});return $o(t._repo,t._path,e,a,c,r),o.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fe.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Fe.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};_c()}).call(this,n("4362"))},5606:function(t,e,n){"use strict";n.r(e),n.d(e,"SDK_VERSION",(function(){return Y})),n.d(e,"_DEFAULT_ENTRY_NAME",(function(){return D})),n.d(e,"_addComponent",(function(){return B})),n.d(e,"_addOrOverwriteComponent",(function(){return V})),n.d(e,"_apps",(function(){return F})),n.d(e,"_clearComponents",(function(){return H})),n.d(e,"_components",(function(){return U})),n.d(e,"_getProvider",(function(){return q})),n.d(e,"_registerComponent",(function(){return z})),n.d(e,"_removeServiceInstance",(function(){return W})),n.d(e,"deleteApp",(function(){return Z})),n.d(e,"getApp",(function(){return Q})),n.d(e,"getApps",(function(){return J})),n.d(e,"initializeApp",(function(){return X})),n.d(e,"onLog",(function(){return et})),n.d(e,"registerVersion",(function(){return tt})),n.d(e,"setLogLevel",(function(){return nt}));var i=n("ffa6"),r=n("4fc1"),s=n("1fd5");n.d(e,"FirebaseError",(function(){return s["c"]}));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class o{constructor(t){this.container=t}getPlatformInfoString(){const t=this.container.getProviders();return t.map(t=>{if(a(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null}).filter(t=>t).join(" ")}}function a(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}const c="@firebase/app",l="0.7.5",h=new r["b"]("@firebase/app"),u="@firebase/app-compat",d="@firebase/analytics-compat",p="@firebase/analytics",f="@firebase/app-check-compat",g="@firebase/app-check",m="@firebase/auth",y="@firebase/auth-compat",v="@firebase/database",b="@firebase/database-compat",w="@firebase/functions",_="@firebase/functions-compat",x="@firebase/installations",T="@firebase/installations-compat",S="@firebase/messaging",C="@firebase/messaging-compat",k="@firebase/performance",O="@firebase/performance-compat",I="@firebase/remote-config",E="@firebase/remote-config-compat",A="@firebase/storage",P="@firebase/storage-compat",N="@firebase/firestore",j="@firebase/firestore-compat",R="firebase",M="9.2.0",D="[DEFAULT]",L={[c]:"fire-core",[u]:"fire-core-compat",[p]:"fire-analytics",[d]:"fire-analytics-compat",[g]:"fire-app-check",[f]:"fire-app-check-compat",[m]:"fire-auth",[y]:"fire-auth-compat",[v]:"fire-rtdb",[b]:"fire-rtdb-compat",[w]:"fire-fn",[_]:"fire-fn-compat",[x]:"fire-iid",[T]:"fire-iid-compat",[S]:"fire-fcm",[C]:"fire-fcm-compat",[k]:"fire-perf",[O]:"fire-perf-compat",[I]:"fire-rc",[E]:"fire-rc-compat",[A]:"fire-gcs",[P]:"fire-gcs-compat",[N]:"fire-fst",[j]:"fire-fst-compat","fire-js":"fire-js",[R]:"fire-js-all"},F=new Map,U=new Map;function B(t,e){try{t.container.addComponent(e)}catch(n){h.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function V(t,e){t.container.addOrOverwriteComponent(e)}function z(t){const e=t.name;if(U.has(e))return h.debug(`There were multiple attempts to register component ${e}.`),!1;U.set(e,t);for(const n of F.values())B(n,t);return!0}function q(t,e){return t.container.getProvider(e)}function W(t,e,n=D){q(t,e).clearInstance(n)}function H(){U.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},K=new s["b"]("app","Firebase",G);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ${constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i["a"]("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw K.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y=M;function X(t,e={}){if("object"!==typeof e){const t=e;e={name:t}}const n=Object.assign({name:D,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!==typeof r||!r)throw K.create("bad-app-name",{appName:String(r)});const o=F.get(r);if(o){if(Object(s["p"])(t,o.options)&&Object(s["p"])(n,o.config))return o;throw K.create("duplicate-app",{appName:r})}const a=new i["b"](r);for(const i of U.values())a.addComponent(i);const c=new $(t,n,a);return F.set(r,c),c}function Q(t=D){const e=F.get(t);if(!e)throw K.create("no-app",{appName:t});return e}function J(){return Array.from(F.values())}async function Z(t){const e=t.name;F.has(e)&&(F.delete(e),await Promise.all(t.container.getProviders().map(t=>t.delete())),t.isDeleted=!0)}function tt(t,e,n){var r;let s=null!==(r=L[t])&&void 0!==r?r:t;n&&(s+="-"+n);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void h.warn(t.join(" "))}z(new i["a"](s+"-version",()=>({library:s,version:e}),"VERSION"))}function et(t,e){if(null!==t&&"function"!==typeof t)throw K.create("invalid-log-argument");Object(r["d"])(t,e)}function nt(t){Object(r["c"])(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){z(new i["a"]("platform-logger",t=>new o(t),"PRIVATE")),tt(c,l,t),tt(c,l,"esm2017"),tt("fire-js","")}it("")},5692:function(t,e,n){var i=n("c430"),r=n("c6cd");(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.18.1",mode:i?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var i=n("d066"),r=n("241c"),s=n("7418"),o=n("825a");t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(o(t)),n=s.f;return n?e.concat(n(t)):e}},"577e":function(t,e,n){var i=n("f5df");t.exports=function(t){if("Symbol"===i(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)}},5994:function(t,e,n){"use strict";(function(t){var e=n("614a"),i=n("1f5a"),r=n("ffa6"),s=n("1fd5"),o="@firebase/auth-compat",a="0.2.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const c=1e3;function l(){var t;return(null===(t=null===self||void 0===self?void 0:self.location)||void 0===t?void 0:t.protocol)||null}function h(){return"http:"===l()||"https:"===l()}function u(t=Object(s["v"])()){return!("file:"!==l()&&"ionic:"!==l()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function d(){return Object(s["G"])()||Object(s["E"])()}function p(){return Object(s["B"])()&&11===(null===document||void 0===document?void 0:document.documentMode)}function f(t=Object(s["v"])()){return/Edge\/\d+/.test(t)}function g(t=Object(s["v"])()){return p()||f(t)}function m(){try{const t=self.localStorage,e=i["r"]();if(t)return t["setItem"](e,"1"),t["removeItem"](e),!g()||Object(s["C"])()}catch(t){return y()&&Object(s["C"])()}return!1}function y(){return"undefined"!==typeof t&&"WorkerGlobalScope"in t&&"importScripts"in t}function v(){return(h()||Object(s["y"])()||u())&&!d()&&m()&&!y()}function b(){return u()&&"undefined"!==typeof document}async function w(){return!!b()&&new Promise(t=>{const e=setTimeout(()=>{t(!1)},c);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _={LOCAL:"local",NONE:"none",SESSION:"session"},x=i["o"],T="persistence";function S(t,e){x(Object.values(_).includes(e),t,"invalid-persistence-type"),Object(s["G"])()?x(e!==_.SESSION,t,"unsupported-persistence-type"):Object(s["E"])()?x(e===_.NONE,t,"unsupported-persistence-type"):y()?x(e===_.NONE||e===_.LOCAL&&Object(s["C"])(),t,"unsupported-persistence-type"):x(e===_.NONE||m(),t,"unsupported-persistence-type")}async function C(t){await t._initializationPromise;const e=O(),n=i["u"](T,t.config.apiKey,t.name);(null===e||void 0===e?void 0:e.sessionStorage)&&e.sessionStorage.setItem(n,t._getPersistence())}function k(t,e){const n=O();if(!(null===n||void 0===n?void 0:n.sessionStorage))return[];const r=i["u"](T,t,e),s=n.sessionStorage.getItem(r);switch(s){case _.NONE:return[i["K"]];case _.LOCAL:return[i["L"],i["z"]];case _.SESSION:return[i["z"]];default:return[]}}function O(){return"undefined"!==typeof window?window:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I=i["o"];class E{constructor(){this.browserResolver=i["s"](i["y"]),this.cordovaResolver=i["s"](i["D"]),this.underlyingResolver=null,this._redirectPersistence=i["z"],this._completeRedirectFn=i["t"]}async _initialize(t){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(t)}async _openPopup(t,e,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(t,e,n,i)}async _openRedirect(t,e,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(t,e,n,i)}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return b()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return I(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const t=await w();this.underlyingResolver=t?this.cordovaResolver:this.browserResolver}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(t){return t.unwrap()}function P(t){return t.wrapped()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t){return R(t)}function j(t,e){var n;const r=null===(n=e.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===e.code){const n=e;n.resolver=new L(t,i["I"](t,e))}else if(r){const t=R(e),n=e;t&&(n.credential=t,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function R(t){const{_tokenResponse:e}=t instanceof s["c"]?t.customData:t;if(!e)return null;if(!(t instanceof s["c"])&&"temporaryProof"in e&&"phoneNumber"in e)return i["i"].credentialFromResult(t);const n=e.providerId;if(!n||n===i["k"].PASSWORD)return null;let r;switch(n){case i["k"].GOOGLE:r=i["f"];break;case i["k"].FACEBOOK:r=i["d"];break;case i["k"].GITHUB:r=i["e"];break;case i["k"].TWITTER:r=i["n"];break;default:const{oauthIdToken:t,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:c}=e;return s||o||t||a?a?n.startsWith("saml.")?i["m"]._create(n,a):i["g"]._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:t,accessToken:s}):new i["h"](n).credential({idToken:t,accessToken:s,rawNonce:c}):null}return t instanceof s["c"]?r.credentialFromError(t):r.credentialFromResult(t)}function M(t,e){return e.catch(e=>{throw e instanceof s["c"]&&j(t,e),e}).then(t=>{const e=t.operationType,n=t.user;return{operationType:e,credential:N(t),additionalUserInfo:i["H"](t),user:F.getOrCreate(n)}})}async function D(t,e){const n=await e;return{verificationId:n.verificationId,confirm:e=>M(t,n.confirm(e))}}class L{constructor(t,e){this.resolver=e,this.auth=P(t)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return M(A(this.auth),this.resolver.resolveSignIn(t))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(t){this._delegate=t,this.multiFactor=i["R"](t)}static getOrCreate(t){return F.USER_MAP.has(t)||F.USER_MAP.set(t,new F(t)),F.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}async linkWithCredential(t){return M(this.auth,i["N"](this._delegate,t))}async linkWithPhoneNumber(t,e){return D(this.auth,i["O"](this._delegate,t,e))}async linkWithPopup(t){return M(this.auth,i["P"](this._delegate,t,E))}async linkWithRedirect(t){return await C(i["p"](this.auth)),i["Q"](this._delegate,t,E)}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}async reauthenticateWithCredential(t){return M(this.auth,i["S"](this._delegate,t))}reauthenticateWithPhoneNumber(t,e){return D(this.auth,i["T"](this._delegate,t,e))}reauthenticateWithPopup(t){return M(this.auth,i["U"](this._delegate,t,E))}async reauthenticateWithRedirect(t){return await C(i["p"](this.auth)),i["V"](this._delegate,t,E)}sendEmailVerification(t){return i["W"](this._delegate,t)}async unlink(t){return await i["hb"](this._delegate,t),this}updateEmail(t){return i["ib"](this._delegate,t)}updatePassword(t){return i["jb"](this._delegate,t)}updatePhoneNumber(t){return i["kb"](this._delegate,t)}updateProfile(t){return i["lb"](this._delegate,t)}verifyBeforeUpdateEmail(t,e){return i["mb"](this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}F.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const U=i["o"];class B{constructor(t,e){if(this.app=t,e.isInitialized())return this._delegate=e.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=t.options;U(n,"invalid-api-key",{appName:t.name});let r=[i["K"]];if("undefined"!==typeof window){r=k(n,t.name);for(const t of[i["L"],i["x"],i["z"]])r.includes(t)||r.push(t)}U(n,"invalid-api-key",{appName:t.name});const s="undefined"!==typeof window?E:void 0;this._delegate=e.initialize({options:{persistence:r,popupRedirectResolver:s}}),this._delegate._updateErrorMap(i["F"]),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?F.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){i["C"](this._delegate,t,e)}applyActionCode(t){return i["w"](this._delegate,t)}checkActionCode(t){return i["A"](this._delegate,t)}confirmPasswordReset(t,e){return i["B"](this._delegate,t,e)}async createUserWithEmailAndPassword(t,e){return M(this._delegate,i["E"](this._delegate,t,e))}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return i["G"](this._delegate,t)}isSignInWithEmailLink(t){return i["M"](this._delegate,t)}async getRedirectResult(){U(v(),this._delegate,"operation-not-supported-in-this-environment");const t=await i["J"](this._delegate,E);return t?M(this._delegate,Promise.resolve(t)):{credential:null,user:null}}addFrameworkForLogging(t){i["v"](this._delegate,t)}onAuthStateChanged(t,e,n){const{next:i,error:r,complete:s}=V(t,e,n);return this._delegate.onAuthStateChanged(i,r,s)}onIdTokenChanged(t,e,n){const{next:i,error:r,complete:s}=V(t,e,n);return this._delegate.onIdTokenChanged(i,r,s)}sendSignInLinkToEmail(t,e){return i["Y"](this._delegate,t,e)}sendPasswordResetEmail(t,e){return i["X"](this._delegate,t,e||void 0)}async setPersistence(t){let e;switch(S(this._delegate,t),t){case _.SESSION:e=i["z"];break;case _.LOCAL:const t=await i["s"](i["L"])._isAvailable();e=t?i["L"]:i["x"];break;case _.NONE:e=i["K"];break;default:return i["q"]("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(e)}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return M(this._delegate,i["Z"](this._delegate))}signInWithCredential(t){return M(this._delegate,i["ab"](this._delegate,t))}signInWithCustomToken(t){return M(this._delegate,i["bb"](this._delegate,t))}signInWithEmailAndPassword(t,e){return M(this._delegate,i["cb"](this._delegate,t,e))}signInWithEmailLink(t,e){return M(this._delegate,i["db"](this._delegate,t,e))}signInWithPhoneNumber(t,e){return D(this._delegate,i["eb"](this._delegate,t,e))}async signInWithPopup(t){return U(v(),this._delegate,"operation-not-supported-in-this-environment"),M(this._delegate,i["fb"](this._delegate,t,E))}async signInWithRedirect(t){return U(v(),this._delegate,"operation-not-supported-in-this-environment"),await C(this._delegate),i["gb"](this._delegate,t,E)}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return i["nb"](this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function V(t,e,n){let i=t;"function"!==typeof t&&({next:i,error:e,complete:n}=t);const r=i,s=t=>r(t&&F.getOrCreate(t));return{next:s,error:e,complete:n}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */B.Persistence=_;class z{constructor(){this.providerId="phone",this._delegate=new i["i"](A(e["a"].auth()))}static credential(t,e){return i["i"].credential(t,e)}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}z.PHONE_SIGN_IN_METHOD=i["i"].PHONE_SIGN_IN_METHOD,z.PROVIDER_ID=i["i"].PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const q=i["o"];class W{constructor(t,n,r=e["a"].app()){var s;q(null===(s=r.options)||void 0===s?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new i["l"](t,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H="auth-compat";function G(t){t.INTERNAL.registerComponent(new r["a"](H,t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("auth");return new B(e,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:i["a"].EMAIL_SIGNIN,PASSWORD_RESET:i["a"].PASSWORD_RESET,RECOVER_EMAIL:i["a"].RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:i["a"].REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:i["a"].VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:i["a"].VERIFY_EMAIL}},EmailAuthProvider:i["c"],FacebookAuthProvider:i["d"],GithubAuthProvider:i["e"],GoogleAuthProvider:i["f"],OAuthProvider:i["h"],PhoneAuthProvider:z,PhoneMultiFactorGenerator:i["j"],RecaptchaVerifier:W,TwitterAuthProvider:i["n"],Auth:B,AuthCredential:i["b"],Error:s["c"]}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(o,a)}G(e["a"])}).call(this,n("c8ba"))},"59ed":function(t,e,n){var i=n("1626"),r=n("0d51");t.exports=function(t){if(i(t))return t;throw TypeError(r(t)+" is not a function")}},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5e77":function(t,e,n){var i=n("83ab"),r=n("5135"),s=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=r(s,"name"),c=a&&"something"===function(){}.name,l=a&&(!i||i&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},"605d":function(t,e,n){var i=n("c6b6"),r=n("da84");t.exports="process"==i(r.process)},6069:function(t,e){t.exports="object"==typeof window},"60da":function(t,e,n){"use strict";var i=n("83ab"),r=n("d039"),s=n("df75"),o=n("7418"),a=n("d1e7"),c=n("7b0b"),l=n("44ad"),h=Object.assign,u=Object.defineProperty;t.exports=!h||r((function(){if(i&&1!==h({b:1},h(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||s(h({},e)).join("")!=r}))?function(t,e){var n=c(t),r=arguments.length,h=1,u=o.f,d=a.f;while(r>h){var p,f=l(arguments[h++]),g=u?s(f).concat(u(f)):s(f),m=g.length,y=0;while(m>y)p=g[y++],i&&!d.call(f,p)||(n[p]=f[p])}return n}:h},"614a":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var i=n("1fd5"),r=n("ffa6"),s=n("5606"),o=n("4fc1");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class a{constructor(t,e){this._delegate=t,this.firebase=e,Object(s["_addComponent"])(t,new r["a"]("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Object(s["deleteApp"])(this._delegate)))}_getService(t,e=s["_DEFAULT_ENTRY_NAME"]){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(t);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:e})}_removeServiceInstance(t,e=s["_DEFAULT_ENTRY_NAME"]){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){Object(s["_addComponent"])(this._delegate,t)}_addOrOverwriteComponent(t){Object(s["_addOrOverwriteComponent"])(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},l=new i["b"]("app-compat","Firebase",c);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function h(t){const e={},n={__esModule:!0,initializeApp:a,app:o,registerVersion:s["registerVersion"],setLogLevel:s["setLogLevel"],onLog:s["onLog"],apps:null,SDK_VERSION:s["SDK_VERSION"],INTERNAL:{registerComponent:h,removeApp:r,useAsService:u,modularAPIs:s}};function r(t){delete e[t]}function o(t){if(t=t||s["_DEFAULT_ENTRY_NAME"],!Object(i["l"])(e,t))throw l.create("no-app",{appName:t});return e[t]}function a(r,o={}){const a=s["initializeApp"](r,o);if(Object(i["l"])(e,a.name))return e[a.name];const c=new t(a,n);return e[a.name]=c,c}function c(){return Object.keys(e).map(t=>e[t])}function h(e){const r=e.name,a=r.replace("-compat","");if(s["_registerComponent"](e)&&"PUBLIC"===e.type){const s=(t=o())=>{if("function"!==typeof t[a])throw l.create("invalid-app-argument",{appName:r});return t[a]()};void 0!==e.serviceProps&&Object(i["q"])(s,e.serviceProps),n[a]=s,t.prototype[a]=function(...t){const n=this._getService.bind(this,r);return n.apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?n[a]:null}function u(t,e){if("serverAuth"===e)return null;const n=e;return n}return n["default"]=n,Object.defineProperty(n,"apps",{get:c}),o["App"]=t,n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u(){const t=h(a);function e(e){Object(i["q"])(t,e)}return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:u,extendNamespace:e,createSubscribe:i["n"],ErrorFactory:i["b"],deepExtend:i["q"]}),t}const d=u(),p=new o["b"]("@firebase/app-compat"),f="@firebase/app-compat",g="0.1.6";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function m(t){Object(s["registerVersion"])(f,g,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Object(i["x"])()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const y=d;m()},6547:function(t,e,n){var i=n("a691"),r=n("577e"),s=n("1d80"),o=function(t){return function(e,n){var o,a,c=r(s(e)),l=i(n),h=c.length;return l<0||l>=h?t?"":void 0:(o=c.charCodeAt(l),o<55296||o>56319||l+1===h||(a=c.charCodeAt(l+1))<56320||a>57343?t?c.charAt(l):o:t?c.slice(l,l+2):a-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},"65f0":function(t,e,n){var i=n("0b42");t.exports=function(t,e){return new(i(t))(0===e?0:e)}},"68ee":function(t,e,n){var i=n("d039"),r=n("1626"),s=n("f5df"),o=n("d066"),a=n("8925"),c=[],l=o("Reflect","construct"),h=/^\s*(?:class|function)\b/,u=h.exec,d=!h.exec((function(){})),p=function(t){if(!r(t))return!1;try{return l(Object,c,t),!0}catch(e){return!1}},f=function(t){if(!r(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return d||!!u.call(h,a(t))};t.exports=!l||i((function(){var t;return p(p.call)||!p(Object)||!p((function(){t=!0}))||t}))?f:p},"69f3":function(t,e,n){var i,r,s,o=n("7f9a"),a=n("da84"),c=n("861d"),l=n("9112"),h=n("5135"),u=n("c6cd"),d=n("f772"),p=n("d012"),f="Object already initialized",g=a.WeakMap,m=function(t){return s(t)?r(t):i(t,{})},y=function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(o||u.state){var v=u.state||(u.state=new g),b=v.get,w=v.has,_=v.set;i=function(t,e){if(w.call(v,t))throw new TypeError(f);return e.facade=t,_.call(v,t,e),e},r=function(t){return b.call(v,t)||{}},s=function(t){return w.call(v,t)}}else{var x=d("state");p[x]=!0,i=function(t,e){if(h(t,x))throw new TypeError(f);return e.facade=t,l(t,x,e),e},r=function(t){return h(t,x)?t[x]:{}},s=function(t){return h(t,x)}}t.exports={set:i,get:r,has:s,enforce:m,getterFor:y}},"6c02":function(t,e,n){"use strict";n.d(e,"a",(function(){return Zt})),n.d(e,"b",(function(){return W}));var i=n("7a23");n("3f4e");
/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
const r="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,s=t=>r?Symbol(t):"_vr_"+t,o=s("rvlm"),a=s("rvd"),c=s("r"),l=s("rl"),h=s("rvl"),u="undefined"!==typeof window;function d(t){return t.__esModule||r&&"Module"===t[Symbol.toStringTag]}const p=Object.assign;function f(t,e){const n={};for(const i in e){const r=e[i];n[i]=Array.isArray(r)?r.map(t):t(r)}return n}const g=()=>{};const m=/\/$/,y=t=>t.replace(m,"");function v(t,e,n="/"){let i,r={},s="",o="";const a=e.indexOf("?"),c=e.indexOf("#",a>-1?a:0);return a>-1&&(i=e.slice(0,a),s=e.slice(a+1,c>-1?c:e.length),r=t(s)),c>-1&&(i=i||e.slice(0,c),o=e.slice(c,e.length)),i=k(null!=i?i:e,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function b(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function w(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function _(t,e,n){const i=e.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&x(e.matched[i],n.matched[r])&&T(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function x(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function T(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!S(t[n],e[n]))return!1;return!0}function S(t,e){return Array.isArray(t)?C(t,e):Array.isArray(e)?C(e,t):t===e}function C(t,e){return Array.isArray(e)?t.length===e.length&&t.every((t,n)=>t===e[n]):1===t.length&&t[0]===e}function k(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/");let r,s,o=n.length-1;for(r=0;r<i.length;r++)if(s=i[r],1!==o&&"."!==s){if(".."!==s)break;o--}return n.slice(0,o).join("/")+"/"+i.slice(r-(r===i.length?1:0)).join("/")}var O,I;(function(t){t["pop"]="pop",t["push"]="push"})(O||(O={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(I||(I={}));function E(t){if(!t)if(u){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),y(t)}const A=/^[^#]+#/;function P(t,e){return t.replace(A,"#")+e}function N(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const j=()=>({left:window.pageXOffset,top:window.pageYOffset});function R(t){let e;if("el"in t){const n=t.el,i="string"===typeof n&&n.startsWith("#");0;const r="string"===typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=N(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function M(t,e){const n=history.state?history.state.position-e:-1;return n+t}const D=new Map;function L(t,e){D.set(t,e)}function F(t){const e=D.get(t);return D.delete(t),e}let U=()=>location.protocol+"//"+location.host;function B(t,e){const{pathname:n,search:i,hash:r}=e,s=t.indexOf("#");if(s>-1){let e=r.includes(t.slice(s))?t.slice(s).length:1,n=r.slice(e);return"/"!==n[0]&&(n="/"+n),w(n,"")}const o=w(n,t);return o+i+r}function V(t,e,n,i){let r=[],s=[],o=null;const a=({state:s})=>{const a=B(t,location),c=n.value,l=e.value;let h=0;if(s){if(n.value=a,e.value=s,o&&o===c)return void(o=null);h=l?s.position-l.position:0}else i(a);r.forEach(t=>{t(n.value,c,{delta:h,type:O.pop,direction:h?h>0?I.forward:I.back:I.unknown})})};function c(){o=n.value}function l(t){r.push(t);const e=()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)};return s.push(e),e}function h(){const{history:t}=window;t.state&&t.replaceState(p({},t.state,{scroll:j()}),"")}function u(){for(const t of s)t();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h),{pauseListeners:c,listen:l,destroy:u}}function z(t,e,n,i=!1,r=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:r?j():null}}function q(t){const{history:e,location:n}=window,i={value:B(t,n)},r={value:e.state};function s(i,s,o){const a=t.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+i:U()+t+i;try{e[o?"replaceState":"pushState"](s,"",c),r.value=s}catch(l){console.error(l),n[o?"replace":"assign"](c)}}function o(t,n){const o=p({},e.state,z(r.value.back,t,r.value.forward,!0),n,{position:r.value.position});s(t,o,!0),i.value=t}function a(t,n){const o=p({},r.value,e.state,{forward:t,scroll:j()});s(o.current,o,!0);const a=p({},z(i.value,t,null),{position:o.position+1},n);s(t,a,!1),i.value=t}return r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:i,state:r,push:a,replace:o}}function W(t){t=E(t);const e=q(t),n=V(t,e.state,e.location,e.replace);function i(t,e=!0){e||n.pauseListeners(),history.go(t)}const r=p({location:"",base:t,go:i,createHref:P.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function H(t){return"string"===typeof t||t&&"object"===typeof t}function G(t){return"string"===typeof t||"symbol"===typeof t}const K={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},$=s("nf");var Y;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(Y||(Y={}));function X(t,e){return p(new Error,{type:t,[$]:!0},e)}function Q(t,e){return t instanceof Error&&$ in t&&(null==e||!!(t.type&e))}const J="[^/]+?",Z={sensitive:!1,strict:!1,start:!0,end:!0},tt=/[.+*?^${}()[\]/\\]/g;function et(t,e){const n=p({},Z,e),i=[];let r=n.start?"^":"";const s=[];for(const h of t){const t=h.length?[]:[90];n.strict&&!h.length&&(r+="/");for(let e=0;e<h.length;e++){const i=h[e];let o=40+(n.sensitive?.25:0);if(0===i.type)e||(r+="/"),r+=i.value.replace(tt,"\\$&"),o+=40;else if(1===i.type){const{value:t,repeatable:n,optional:a,regexp:c}=i;s.push({name:t,repeatable:n,optional:a});const u=c||J;if(u!==J){o+=10;try{new RegExp(`(${u})`)}catch(l){throw new Error(`Invalid custom RegExp for param "${t}" (${u}): `+l.message)}}let d=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;e||(d=a&&h.length<2?`(?:/${d})`:"/"+d),a&&(d+="?"),r+=d,o+=20,a&&(o+=-8),n&&(o+=-20),".*"===u&&(o+=-50)}t.push(o)}i.push(t)}if(n.strict&&n.end){const t=i.length-1;i[t][i[t].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(t){const e=t.match(o),n={};if(!e)return null;for(let i=1;i<e.length;i++){const t=e[i]||"",r=s[i-1];n[r.name]=t&&r.repeatable?t.split("/"):t}return n}function c(e){let n="",i=!1;for(const r of t){i&&n.endsWith("/")||(n+="/"),i=!1;for(const t of r)if(0===t.type)n+=t.value;else if(1===t.type){const{value:s,repeatable:o,optional:a}=t,c=s in e?e[s]:"";if(Array.isArray(c)&&!o)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const l=Array.isArray(c)?c.join("/"):c;if(!l){if(!a)throw new Error(`Missing required param "${s}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=l}}return n}return{re:o,score:i,keys:s,parse:a,stringify:c}}function nt(t,e){let n=0;while(n<t.length&&n<e.length){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function it(t,e){let n=0;const i=t.score,r=e.score;while(n<i.length&&n<r.length){const t=nt(i[n],r[n]);if(t)return t;n++}return r.length-i.length}const rt={type:0,value:""},st=/[a-zA-Z0-9_]/;function ot(t){if(!t)return[[]];if("/"===t)return[[rt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${l}": ${t}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a,c=0,l="",h="";function u(){l&&(0===n?s.push({type:0,value:l}):1===n||2===n||3===n?(s.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:h,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),l="")}function d(){l+=a}while(c<t.length)if(a=t[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(l&&u(),o()):":"===a?(u(),n=1):d();break;case 4:d(),n=i;break;case 1:"("===a?n=2:st.test(a)?d():(u(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==h[h.length-1]?h=h.slice(0,-1)+a:n=3:h+=a;break;case 3:u(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,h="";break;default:e("Unknown state");break}else i=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${l}"`),u(),o(),r}function at(t,e,n){const i=et(ot(t.path),n);const r=p(i,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf===!e.record.aliasOf&&e.children.push(r),r}function ct(t,e){const n=[],i=new Map;function r(t){return i.get(t)}function s(t,n,i){const r=!i,a=ht(t);a.aliasOf=i&&i.record;const l=ft(e,t),h=[a];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)h.push(p({},a,{components:i?i.record.components:a.components,path:t,aliasOf:i?i.record:a}))}let u,d;for(const e of h){const{path:h}=e;if(n&&"/"!==h[0]){const t=n.record.path,i="/"===t[t.length-1]?"":"/";e.path=n.record.path+(h&&i+h)}if(u=at(e,n,l),i?i.alias.push(u):(d=d||u,d!==u&&d.alias.push(u),r&&t.name&&!dt(u)&&o(t.name)),"children"in a){const t=a.children;for(let e=0;e<t.length;e++)s(t[e],u,i&&i.children[e])}i=i||u,c(u)}return d?()=>{o(d)}:g}function o(t){if(G(t)){const e=i.get(t);e&&(i.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&i.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function a(){return n}function c(t){let e=0;while(e<n.length&&it(t,n[e])>=0)e++;n.splice(e,0,t),t.record.name&&!dt(t)&&i.set(t.record.name,t)}function l(t,e){let r,s,o,a={};if("name"in t&&t.name){if(r=i.get(t.name),!r)throw X(1,{location:t});o=r.record.name,a=p(lt(e.params,r.keys.filter(t=>!t.optional).map(t=>t.name)),t.params),s=r.stringify(a)}else if("path"in t)s=t.path,r=n.find(t=>t.re.test(s)),r&&(a=r.parse(s),o=r.record.name);else{if(r=e.name?i.get(e.name):n.find(t=>t.re.test(e.path)),!r)throw X(1,{location:t,currentLocation:e});o=r.record.name,a=p({},e.params,t.params),s=r.stringify(a)}const c=[];let l=r;while(l)c.unshift(l.record),l=l.parent;return{name:o,path:s,params:a,matched:c,meta:pt(c)}}return e=ft({strict:!1,end:!0,sensitive:!1},e),t.forEach(t=>s(t)),{addRoute:s,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function lt(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function ht(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:ut(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function ut(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]="boolean"===typeof n?n:n[i];return e}function dt(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function pt(t){return t.reduce((t,e)=>p(t,e.meta),{})}function ft(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}const gt=/#/g,mt=/&/g,yt=/\//g,vt=/=/g,bt=/\?/g,wt=/\+/g,_t=/%5B/g,xt=/%5D/g,Tt=/%5E/g,St=/%60/g,Ct=/%7B/g,kt=/%7C/g,Ot=/%7D/g,It=/%20/g;function Et(t){return encodeURI(""+t).replace(kt,"|").replace(_t,"[").replace(xt,"]")}function At(t){return Et(t).replace(Ct,"{").replace(Ot,"}").replace(Tt,"^")}function Pt(t){return Et(t).replace(wt,"%2B").replace(It,"+").replace(gt,"%23").replace(mt,"%26").replace(St,"`").replace(Ct,"{").replace(Ot,"}").replace(Tt,"^")}function Nt(t){return Pt(t).replace(vt,"%3D")}function jt(t){return Et(t).replace(gt,"%23").replace(bt,"%3F")}function Rt(t){return null==t?"":jt(t).replace(yt,"%2F")}function Mt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function Dt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],i=(n?t.slice(1):t).split("&");for(let r=0;r<i.length;++r){const t=i[r].replace(wt," "),n=t.indexOf("="),s=Mt(n<0?t:t.slice(0,n)),o=n<0?null:Mt(t.slice(n+1));if(s in e){let t=e[s];Array.isArray(t)||(t=e[s]=[t]),t.push(o)}else e[s]=o}return e}function Lt(t){let e="";for(let n in t){const i=t[n];if(n=Nt(n),null==i){void 0!==i&&(e+=(e.length?"&":"")+n);continue}const r=Array.isArray(i)?i.map(t=>t&&Pt(t)):[i&&Pt(i)];r.forEach(t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))})}return e}function Ft(t){const e={};for(const n in t){const i=t[n];void 0!==i&&(e[n]=Array.isArray(i)?i.map(t=>null==t?null:""+t):null==i?i:""+i)}return e}function Ut(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function Bt(t,e,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const c=t=>{!1===t?a(X(4,{from:n,to:e})):t instanceof Error?a(t):H(t)?a(X(2,{from:e,to:t})):(s&&i.enterCallbacks[r]===s&&"function"===typeof t&&s.push(t),o())},l=t.call(i&&i.instances[r],e,n,c);let h=Promise.resolve(l);t.length<3&&(h=h.then(c)),h.catch(t=>a(t))})}function Vt(t,e,n,i){const r=[];for(const s of t)for(const t in s.components){let o=s.components[t];if("beforeRouteEnter"===e||s.instances[t])if(zt(o)){const a=o.__vccOpts||o,c=a[e];c&&r.push(Bt(c,n,i,s,t))}else{let a=o();0,r.push(()=>a.then(r=>{if(!r)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${s.path}"`));const o=d(r)?r.default:r;s.components[t]=o;const a=o.__vccOpts||o,c=a[e];return c&&Bt(c,n,i,s,t)()}))}}return r}function zt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function qt(t){const e=Object(i["inject"])(c),n=Object(i["inject"])(l),r=Object(i["computed"])(()=>e.resolve(Object(i["unref"])(t.to))),s=Object(i["computed"])(()=>{const{matched:t}=r.value,{length:e}=t,i=t[e-1],s=n.matched;if(!i||!s.length)return-1;const o=s.findIndex(x.bind(null,i));if(o>-1)return o;const a=$t(t[e-2]);return e>1&&$t(i)===a&&s[s.length-1].path!==a?s.findIndex(x.bind(null,t[e-2])):o}),o=Object(i["computed"])(()=>s.value>-1&&Kt(n.params,r.value.params)),a=Object(i["computed"])(()=>s.value>-1&&s.value===n.matched.length-1&&T(n.params,r.value.params));function h(n={}){return Gt(n)?e[Object(i["unref"])(t.replace)?"replace":"push"](Object(i["unref"])(t.to)).catch(g):Promise.resolve()}return{route:r,href:Object(i["computed"])(()=>r.value.href),isActive:o,isExactActive:a,navigate:h}}const Wt=Object(i["defineComponent"])({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qt,setup(t,{slots:e}){const n=Object(i["reactive"])(qt(t)),{options:r}=Object(i["inject"])(c),s=Object(i["computed"])(()=>({[Yt(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Yt(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:Object(i["h"])("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),Ht=Wt;function Gt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Kt(t,e){for(const n in e){const i=e[n],r=t[n];if("string"===typeof i){if(i!==r)return!1}else if(!Array.isArray(r)||r.length!==i.length||i.some((t,e)=>t!==r[e]))return!1}return!0}function $t(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Yt=(t,e,n)=>null!=t?t:null!=e?e:n,Xt=Object(i["defineComponent"])({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=Object(i["inject"])(h),s=Object(i["computed"])(()=>t.route||r.value),c=Object(i["inject"])(a,0),l=Object(i["computed"])(()=>s.value.matched[c]);Object(i["provide"])(a,c+1),Object(i["provide"])(o,l),Object(i["provide"])(h,s);const u=Object(i["ref"])();return Object(i["watch"])(()=>[u.value,l.value,t.name],([t,e,n],[i,r,s])=>{e&&(e.instances[n]=t,r&&r!==e&&t&&t===i&&(e.leaveGuards.size||(e.leaveGuards=r.leaveGuards),e.updateGuards.size||(e.updateGuards=r.updateGuards))),!t||!e||r&&x(e,r)&&i||(e.enterCallbacks[n]||[]).forEach(e=>e(t))},{flush:"post"}),()=>{const r=s.value,o=l.value,a=o&&o.components[t.name],c=t.name;if(!a)return Qt(n.default,{Component:a,route:r});const h=o.props[t.name],d=h?!0===h?r.params:"function"===typeof h?h(r):h:null,f=t=>{t.component.isUnmounted&&(o.instances[c]=null)},g=Object(i["h"])(a,p({},d,e,{onVnodeUnmounted:f,ref:u}));return Qt(n.default,{Component:g,route:r})||g}}});function Qt(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const Jt=Xt;function Zt(t){const e=ct(t.routes,t),n=t.parseQuery||Dt,r=t.stringifyQuery||Lt,s=t.history;const o=Ut(),a=Ut(),d=Ut(),m=Object(i["shallowRef"])(K);let y=K;u&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=f.bind(null,t=>""+t),x=f.bind(null,Rt),T=f.bind(null,Mt);function S(t,n){let i,r;return G(t)?(i=e.getRecordMatcher(t),r=n):r=t,e.addRoute(r,i)}function C(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function k(){return e.getRoutes().map(t=>t.record)}function I(t){return!!e.getRecordMatcher(t)}function E(t,i){if(i=p({},i||m.value),"string"===typeof t){const r=v(n,t,i.path),o=e.resolve({path:r.path},i),a=s.createHref(r.fullPath);return p(r,o,{params:T(o.params),hash:Mt(r.hash),redirectedFrom:void 0,href:a})}let o;if("path"in t)o=p({},t,{path:v(n,t.path,i.path).path});else{const e=p({},t.params);for(const t in e)null==e[t]&&delete e[t];o=p({},t,{params:x(t.params)}),i.params=x(i.params)}const a=e.resolve(o,i),c=t.hash||"";a.params=w(T(a.params));const l=b(r,p({},t,{hash:At(c),path:a.path})),h=s.createHref(l);return p({fullPath:l,hash:c,query:r===Lt?Ft(t.query):t.query||{}},a,{redirectedFrom:void 0,href:h})}function A(t){return"string"===typeof t?v(n,t,m.value.path):p({},t)}function P(t,e){if(y!==t)return X(8,{from:e,to:t})}function N(t){return B(t)}function D(t){return N(p(A(t),{replace:!0}))}function U(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let i="function"===typeof n?n(t):n;return"string"===typeof i&&(i=i.includes("?")||i.includes("#")?i=A(i):{path:i},i.params={}),p({query:t.query,hash:t.hash,params:t.params},i)}}function B(t,e){const n=y=E(t),i=m.value,s=t.state,o=t.force,a=!0===t.replace,c=U(n);if(c)return B(p(A(c),{state:s,force:o,replace:a}),e||n);const l=n;let h;return l.redirectedFrom=e,!o&&_(r,i,n)&&(h=X(16,{to:l,from:i}),it(i,i,!0,!1)),(h?Promise.resolve(h):z(l,i)).catch(t=>Q(t)?t:tt(t,l,i)).then(t=>{if(t){if(Q(t,2))return B(p(A(t.to),{state:s,force:o,replace:a}),e||l)}else t=W(l,i,!0,a,s);return q(l,i,t),t})}function V(t,e){const n=P(t,e);return n?Promise.reject(n):Promise.resolve()}function z(t,e){let n;const[i,r,s]=ee(t,e);n=Vt(i.reverse(),"beforeRouteLeave",t,e);for(const o of i)o.leaveGuards.forEach(i=>{n.push(Bt(i,t,e))});const c=V.bind(null,t,e);return n.push(c),te(n).then(()=>{n=[];for(const i of o.list())n.push(Bt(i,t,e));return n.push(c),te(n)}).then(()=>{n=Vt(r,"beforeRouteUpdate",t,e);for(const i of r)i.updateGuards.forEach(i=>{n.push(Bt(i,t,e))});return n.push(c),te(n)}).then(()=>{n=[];for(const i of t.matched)if(i.beforeEnter&&!e.matched.includes(i))if(Array.isArray(i.beforeEnter))for(const r of i.beforeEnter)n.push(Bt(r,t,e));else n.push(Bt(i.beforeEnter,t,e));return n.push(c),te(n)}).then(()=>(t.matched.forEach(t=>t.enterCallbacks={}),n=Vt(s,"beforeRouteEnter",t,e),n.push(c),te(n))).then(()=>{n=[];for(const i of a.list())n.push(Bt(i,t,e));return n.push(c),te(n)}).catch(t=>Q(t,8)?t:Promise.reject(t))}function q(t,e,n){for(const i of d.list())i(t,e,n)}function W(t,e,n,i,r){const o=P(t,e);if(o)return o;const a=e===K,c=u?history.state:{};n&&(i||a?s.replace(t.fullPath,p({scroll:a&&c&&c.scroll},r)):s.push(t.fullPath,r)),m.value=t,it(t,e,n,a),nt()}let H;function $(){H=s.listen((t,e,n)=>{const i=E(t),r=U(i);if(r)return void B(p(r,{replace:!0}),i).catch(g);y=i;const o=m.value;u&&L(M(o.fullPath,n.delta),j()),z(i,o).catch(t=>Q(t,12)?t:Q(t,2)?(B(t.to,i).then(t=>{Q(t,20)&&!n.delta&&n.type===O.pop&&s.go(-1,!1)}).catch(g),Promise.reject()):(n.delta&&s.go(-n.delta,!1),tt(t,i,o))).then(t=>{t=t||W(i,o,!1),t&&(n.delta?s.go(-n.delta,!1):n.type===O.pop&&Q(t,20)&&s.go(-1,!1)),q(i,o,t)}).catch(g)})}let Y,J=Ut(),Z=Ut();function tt(t,e,n){nt(t);const i=Z.list();return i.length?i.forEach(i=>i(t,e,n)):console.error(t),Promise.reject(t)}function et(){return Y&&m.value!==K?Promise.resolve():new Promise((t,e)=>{J.add([t,e])})}function nt(t){Y||(Y=!0,$(),J.list().forEach(([e,n])=>t?n(t):e()),J.reset())}function it(e,n,r,s){const{scrollBehavior:o}=t;if(!u||!o)return Promise.resolve();const a=!r&&F(M(e.fullPath,0))||(s||!r)&&history.state&&history.state.scroll||null;return Object(i["nextTick"])().then(()=>o(e,n,a)).then(t=>t&&R(t)).catch(t=>tt(t,e,n))}const rt=t=>s.go(t);let st;const ot=new Set,at={currentRoute:m,addRoute:S,removeRoute:C,hasRoute:I,getRoutes:k,resolve:E,options:t,push:N,replace:D,go:rt,back:()=>rt(-1),forward:()=>rt(1),beforeEach:o.add,beforeResolve:a.add,afterEach:d.add,onError:Z.add,isReady:et,install(t){const e=this;t.component("RouterLink",Ht),t.component("RouterView",Jt),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>Object(i["unref"])(m)}),u&&!st&&m.value===K&&(st=!0,N(s.location).catch(t=>{0}));const n={};for(const s in K)n[s]=Object(i["computed"])(()=>m.value[s]);t.provide(c,e),t.provide(l,Object(i["reactive"])(n)),t.provide(h,m);const r=t.unmount;ot.add(t),t.unmount=function(){ot.delete(t),ot.size<1&&(y=K,H&&H(),m.value=K,st=!1,Y=!1),r()}}};return at}function te(t){return t.reduce((t,e)=>t.then(()=>e()),Promise.resolve())}function ee(t,e){const n=[],i=[],r=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const s=e.matched[o];s&&(t.matched.find(t=>x(t,s))?i.push(s):n.push(s));const a=t.matched[o];a&&(e.matched.find(t=>x(t,a))||r.push(a))}return[n,i,r]}},"6eeb":function(t,e,n){var i=n("da84"),r=n("1626"),s=n("5135"),o=n("9112"),a=n("ce4e"),c=n("8925"),l=n("69f3"),h=n("5e77").CONFIGURABLE,u=l.get,d=l.enforce,p=String(String).split("String");(t.exports=function(t,e,n,c){var l,u=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,g=!!c&&!!c.noTargetGet,m=c&&void 0!==c.name?c.name:e;r(n)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!s(n,"name")||h&&n.name!==m)&&o(n,"name",m),l=d(n),l.source||(l.source=p.join("string"==typeof m?m:""))),t!==i?(u?!g&&t[e]&&(f=!0):delete t[e],f?t[e]=n:o(t,e,n)):f?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return r(this)&&u(this).source||c(this)}))},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"746f":function(t,e,n){var i=n("428f"),r=n("5135"),s=n("e538"),o=n("9bf2").f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});r(e,t)||o(e,t,{value:s.f(t)})}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(t,e,n){var i=n("cc12"),r=i("span").classList,s=r&&r.constructor&&r.constructor.prototype;t.exports=s===Object.prototype?void 0:s},"7a23":function(t,e,n){"use strict";n.r(e),n.d(e,"EffectScope",(function(){return o})),n.d(e,"ReactiveEffect",(function(){return S})),n.d(e,"computed",(function(){return oe})),n.d(e,"customRef",(function(){return ee})),n.d(e,"effect",(function(){return k})),n.d(e,"effectScope",(function(){return a})),n.d(e,"getCurrentScope",(function(){return l})),n.d(e,"isProxy",(function(){return Ft})),n.d(e,"isReactive",(function(){return Dt})),n.d(e,"isReadonly",(function(){return Lt})),n.d(e,"isRef",(function(){return Ht})),n.d(e,"markRaw",(function(){return Bt})),n.d(e,"onScopeDispose",(function(){return h})),n.d(e,"proxyRefs",(function(){return Zt})),n.d(e,"reactive",(function(){return Pt})),n.d(e,"readonly",(function(){return jt})),n.d(e,"ref",(function(){return Gt})),n.d(e,"shallowReactive",(function(){return Nt})),n.d(e,"shallowReadonly",(function(){return Rt})),n.d(e,"shallowRef",(function(){return Kt})),n.d(e,"stop",(function(){return O})),n.d(e,"toRaw",(function(){return Ut})),n.d(e,"toRef",(function(){return re})),n.d(e,"toRefs",(function(){return ne})),n.d(e,"triggerRef",(function(){return Xt})),n.d(e,"unref",(function(){return Qt})),n.d(e,"camelize",(function(){return i["e"]})),n.d(e,"capitalize",(function(){return i["f"]})),n.d(e,"normalizeClass",(function(){return i["I"]})),n.d(e,"normalizeProps",(function(){return i["J"]})),n.d(e,"normalizeStyle",(function(){return i["K"]})),n.d(e,"toDisplayString",(function(){return i["M"]})),n.d(e,"toHandlerKey",(function(){return i["N"]})),n.d(e,"BaseTransition",(function(){return We})),n.d(e,"Comment",(function(){return Di})),n.d(e,"Fragment",(function(){return Ri})),n.d(e,"KeepAlive",(function(){return rn})),n.d(e,"Static",(function(){return Li})),n.d(e,"Suspense",(function(){return Ee})),n.d(e,"Teleport",(function(){return Ci})),n.d(e,"Text",(function(){return Mi})),n.d(e,"callWithAsyncErrorHandling",(function(){return ts})),n.d(e,"callWithErrorHandling",(function(){return Zr})),n.d(e,"cloneVNode",(function(){return rr})),n.d(e,"compatUtils",(function(){return so})),n.d(e,"createBlock",(function(){return Ki})),n.d(e,"createCommentVNode",(function(){return ar})),n.d(e,"createElementBlock",(function(){return Gi})),n.d(e,"createElementVNode",(function(){return tr})),n.d(e,"createHydrationRenderer",(function(){return di})),n.d(e,"createRenderer",(function(){return ui})),n.d(e,"createSlots",(function(){return pr})),n.d(e,"createStaticVNode",(function(){return or})),n.d(e,"createTextVNode",(function(){return sr})),n.d(e,"createVNode",(function(){return er})),n.d(e,"defineAsyncComponent",(function(){return Ze})),n.d(e,"defineComponent",(function(){return Qe})),n.d(e,"defineEmits",(function(){return Vs})),n.d(e,"defineExpose",(function(){return zs})),n.d(e,"defineProps",(function(){return Bs})),n.d(e,"devtools",(function(){return ae})),n.d(e,"getCurrentInstance",(function(){return Cr})),n.d(e,"getTransitionRawChildren",(function(){return Xe})),n.d(e,"guardReactiveProps",(function(){return ir})),n.d(e,"h",(function(){return Ys})),n.d(e,"handleError",(function(){return es})),n.d(e,"initCustomFormatter",(function(){return Js})),n.d(e,"inject",(function(){return Be})),n.d(e,"isMemoSame",(function(){return to})),n.d(e,"isRuntimeOnly",(function(){return Dr})),n.d(e,"isVNode",(function(){return $i})),n.d(e,"mergeDefaults",(function(){return Ks})),n.d(e,"mergeProps",(function(){return ur})),n.d(e,"nextTick",(function(){return ms})),n.d(e,"onActivated",(function(){return on})),n.d(e,"onBeforeMount",(function(){return fn})),n.d(e,"onBeforeUnmount",(function(){return vn})),n.d(e,"onBeforeUpdate",(function(){return mn})),n.d(e,"onDeactivated",(function(){return an})),n.d(e,"onErrorCaptured",(function(){return Tn})),n.d(e,"onMounted",(function(){return gn})),n.d(e,"onRenderTracked",(function(){return xn})),n.d(e,"onRenderTriggered",(function(){return _n})),n.d(e,"onServerPrefetch",(function(){return wn})),n.d(e,"onUnmounted",(function(){return bn})),n.d(e,"onUpdated",(function(){return yn})),n.d(e,"openBlock",(function(){return Bi})),n.d(e,"popScopeId",(function(){return ye})),n.d(e,"provide",(function(){return Ue})),n.d(e,"pushScopeId",(function(){return me})),n.d(e,"queuePostFlushCb",(function(){return Ts})),n.d(e,"registerRuntimeCompiler",(function(){return Mr})),n.d(e,"renderList",(function(){return dr})),n.d(e,"renderSlot",(function(){return fr})),n.d(e,"resolveComponent",(function(){return Ii})),n.d(e,"resolveDirective",(function(){return Pi})),n.d(e,"resolveDynamicComponent",(function(){return Ai})),n.d(e,"resolveFilter",(function(){return ro})),n.d(e,"resolveTransitionHooks",(function(){return Ge})),n.d(e,"setBlockTracking",(function(){return Wi})),n.d(e,"setDevtoolsHook",(function(){return le})),n.d(e,"setTransitionHooks",(function(){return Ye})),n.d(e,"ssrContextKey",(function(){return Xs})),n.d(e,"ssrUtils",(function(){return io})),n.d(e,"toHandlers",(function(){return mr})),n.d(e,"transformVNodeArgs",(function(){return Xi})),n.d(e,"useAttrs",(function(){return Hs})),n.d(e,"useSSRContext",(function(){return Qs})),n.d(e,"useSlots",(function(){return Ws})),n.d(e,"useTransitionState",(function(){return Ve})),n.d(e,"version",(function(){return eo})),n.d(e,"warn",(function(){return Kr})),n.d(e,"watch",(function(){return Ns})),n.d(e,"watchEffect",(function(){return Is})),n.d(e,"watchPostEffect",(function(){return Es})),n.d(e,"watchSyncEffect",(function(){return As})),n.d(e,"withAsyncContext",(function(){return $s})),n.d(e,"withCtx",(function(){return be})),n.d(e,"withDefaults",(function(){return qs})),n.d(e,"withDirectives",(function(){return ti})),n.d(e,"withMemo",(function(){return Zs})),n.d(e,"withScopeId",(function(){return ve})),n.d(e,"Transition",(function(){return Ko})),n.d(e,"TransitionGroup",(function(){return pa})),n.d(e,"VueElement",(function(){return Bo})),n.d(e,"createApp",(function(){return $a})),n.d(e,"createSSRApp",(function(){return Ya})),n.d(e,"defineCustomElement",(function(){return Lo})),n.d(e,"defineSSRCustomElement",(function(){return Fo})),n.d(e,"hydrate",(function(){return Ka})),n.d(e,"initDirectivesForSSR",(function(){return Ja})),n.d(e,"render",(function(){return Ga})),n.d(e,"useCssModule",(function(){return Vo})),n.d(e,"useCssVars",(function(){return zo})),n.d(e,"vModelCheckbox",(function(){return Ta})),n.d(e,"vModelDynamic",(function(){return Aa})),n.d(e,"vModelRadio",(function(){return Ca})),n.d(e,"vModelSelect",(function(){return ka})),n.d(e,"vModelText",(function(){return xa})),n.d(e,"vShow",(function(){return Fa})),n.d(e,"withKeys",(function(){return La})),n.d(e,"withModifiers",(function(){return Ma})),n.d(e,"compile",(function(){return Za}));var i=n("9ff4");let r;const s=[];class o{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&r&&(this.parent=r,this.index=(r.scopes||(r.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}else 0}on(){this.active&&(s.push(this),r=this)}off(){this.active&&(s.pop(),r=s[s.length-1])}stop(t){if(this.active){if(this.effects.forEach(t=>t.stop()),this.cleanups.forEach(t=>t()),this.scopes&&this.scopes.forEach(t=>t.stop(!0)),this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}function a(t){return new o(t)}function c(t,e){e=e||r,e&&e.active&&e.effects.push(t)}function l(){return r}function h(t){r&&r.cleanups.push(t)}const u=t=>{const e=new Set(t);return e.w=0,e.n=0,e},d=t=>(t.w&v)>0,p=t=>(t.n&v)>0,f=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=v},g=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];d(r)&&!p(r)?r.delete(t):e[n++]=r,r.w&=~v,r.n&=~v}e.length=n}},m=new WeakMap;let y=0,v=1;const b=30,w=[];let _;const x=Symbol(""),T=Symbol("");class S{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],c(this,n)}run(){if(!this.active)return this.fn();if(!w.includes(this))try{return w.push(_=this),P(),v=1<<++y,y<=b?f(this):C(this),this.fn()}finally{y<=b&&g(this),v=1<<--y,N(),w.pop();const t=w.length;_=t>0?w[t-1]:void 0}}stop(){this.active&&(C(this),this.onStop&&this.onStop(),this.active=!1)}}function C(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}function k(t,e){t.effect&&(t=t.effect.fn);const n=new S(t);e&&(Object(i["h"])(n,e),e.scope&&c(n,e.scope)),e&&e.lazy||n.run();const r=n.run.bind(n);return r.effect=n,r}function O(t){t.effect.stop()}let I=!0;const E=[];function A(){E.push(I),I=!1}function P(){E.push(I),I=!0}function N(){const t=E.pop();I=void 0===t||t}function j(t,e,n){if(!R())return;let i=m.get(t);i||m.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=u());const s=void 0;M(r,s)}function R(){return I&&void 0!==_}function M(t,e){let n=!1;y<=b?p(t)||(t.n|=v,n=!d(t)):n=!t.has(_),n&&(t.add(_),_.deps.push(t))}function D(t,e,n,r,s,o){const a=m.get(t);if(!a)return;let c=[];if("clear"===e)c=[...a.values()];else if("length"===n&&Object(i["o"])(t))a.forEach((t,e)=>{("length"===e||e>=r)&&c.push(t)});else switch(void 0!==n&&c.push(a.get(n)),e){case"add":Object(i["o"])(t)?Object(i["s"])(n)&&c.push(a.get("length")):(c.push(a.get(x)),Object(i["t"])(t)&&c.push(a.get(T)));break;case"delete":Object(i["o"])(t)||(c.push(a.get(x)),Object(i["t"])(t)&&c.push(a.get(T)));break;case"set":Object(i["t"])(t)&&c.push(a.get(x));break}if(1===c.length)c[0]&&L(c[0]);else{const t=[];for(const e of c)e&&t.push(...e);L(u(t))}}function L(t,e){for(const n of Object(i["o"])(t)?t:[...t])(n!==_||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const F=Object(i["H"])("__proto__,__v_isRef,__isVue"),U=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(i["E"])),B=G(),V=G(!1,!0),z=G(!0),q=G(!0,!0),W=H();function H(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...t){const n=Ut(this);for(let e=0,r=this.length;e<r;e++)j(n,"get",e+"");const i=n[e](...t);return-1===i||!1===i?n[e](...t.map(Ut)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...t){A();const n=Ut(this)[e].apply(this,t);return N(),n}}),t}function G(t=!1,e=!1){return function(n,r,s){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&s===(t?e?It:Ot:e?kt:Ct).get(n))return n;const o=Object(i["o"])(n);if(!t&&o&&Object(i["k"])(W,r))return Reflect.get(W,r,s);const a=Reflect.get(n,r,s);if(Object(i["E"])(r)?U.has(r):F(r))return a;if(t||j(n,"get",r),e)return a;if(Ht(a)){const t=!o||!Object(i["s"])(r);return t?a.value:a}return Object(i["v"])(a)?t?jt(a):Pt(a):a}}const K=Y(),$=Y(!0);function Y(t=!1){return function(e,n,r,s){let o=e[n];if(!t&&(r=Ut(r),o=Ut(o),!Object(i["o"])(e)&&Ht(o)&&!Ht(r)))return o.value=r,!0;const a=Object(i["o"])(e)&&Object(i["s"])(n)?Number(n)<e.length:Object(i["k"])(e,n),c=Reflect.set(e,n,r,s);return e===Ut(s)&&(a?Object(i["j"])(r,o)&&D(e,"set",n,r,o):D(e,"add",n,r)),c}}function X(t,e){const n=Object(i["k"])(t,e),r=t[e],s=Reflect.deleteProperty(t,e);return s&&n&&D(t,"delete",e,void 0,r),s}function Q(t,e){const n=Reflect.has(t,e);return Object(i["E"])(e)&&U.has(e)||j(t,"has",e),n}function J(t){return j(t,"iterate",Object(i["o"])(t)?"length":x),Reflect.ownKeys(t)}const Z={get:B,set:K,deleteProperty:X,has:Q,ownKeys:J},tt={get:z,set(t,e){return!0},deleteProperty(t,e){return!0}},et=Object(i["h"])({},Z,{get:V,set:$}),nt=Object(i["h"])({},tt,{get:q}),it=t=>t,rt=t=>Reflect.getPrototypeOf(t);function st(t,e,n=!1,i=!1){t=t["__v_raw"];const r=Ut(t),s=Ut(e);e!==s&&!n&&j(r,"get",e),!n&&j(r,"get",s);const{has:o}=rt(r),a=i?it:n?zt:Vt;return o.call(r,e)?a(t.get(e)):o.call(r,s)?a(t.get(s)):void(t!==r&&t.get(e))}function ot(t,e=!1){const n=this["__v_raw"],i=Ut(n),r=Ut(t);return t!==r&&!e&&j(i,"has",t),!e&&j(i,"has",r),t===r?n.has(t):n.has(t)||n.has(r)}function at(t,e=!1){return t=t["__v_raw"],!e&&j(Ut(t),"iterate",x),Reflect.get(t,"size",t)}function ct(t){t=Ut(t);const e=Ut(this),n=rt(e),i=n.has.call(e,t);return i||(e.add(t),D(e,"add",t,t)),this}function lt(t,e){e=Ut(e);const n=Ut(this),{has:r,get:s}=rt(n);let o=r.call(n,t);o||(t=Ut(t),o=r.call(n,t));const a=s.call(n,t);return n.set(t,e),o?Object(i["j"])(e,a)&&D(n,"set",t,e,a):D(n,"add",t,e),this}function ht(t){const e=Ut(this),{has:n,get:i}=rt(e);let r=n.call(e,t);r||(t=Ut(t),r=n.call(e,t));const s=i?i.call(e,t):void 0,o=e.delete(t);return r&&D(e,"delete",t,void 0,s),o}function ut(){const t=Ut(this),e=0!==t.size,n=void 0,i=t.clear();return e&&D(t,"clear",void 0,void 0,n),i}function dt(t,e){return function(n,i){const r=this,s=r["__v_raw"],o=Ut(s),a=e?it:t?zt:Vt;return!t&&j(o,"iterate",x),s.forEach((t,e)=>n.call(i,a(t),a(e),r))}}function pt(t,e,n){return function(...r){const s=this["__v_raw"],o=Ut(s),a=Object(i["t"])(o),c="entries"===t||t===Symbol.iterator&&a,l="keys"===t&&a,h=s[t](...r),u=n?it:e?zt:Vt;return!e&&j(o,"iterate",l?T:x),{next(){const{value:t,done:e}=h.next();return e?{value:t,done:e}:{value:c?[u(t[0]),u(t[1])]:u(t),done:e}},[Symbol.iterator](){return this}}}}function ft(t){return function(...e){return"delete"!==t&&this}}function gt(){const t={get(t){return st(this,t)},get size(){return at(this)},has:ot,add:ct,set:lt,delete:ht,clear:ut,forEach:dt(!1,!1)},e={get(t){return st(this,t,!1,!0)},get size(){return at(this)},has:ot,add:ct,set:lt,delete:ht,clear:ut,forEach:dt(!1,!0)},n={get(t){return st(this,t,!0)},get size(){return at(this,!0)},has(t){return ot.call(this,t,!0)},add:ft("add"),set:ft("set"),delete:ft("delete"),clear:ft("clear"),forEach:dt(!0,!1)},i={get(t){return st(this,t,!0,!0)},get size(){return at(this,!0)},has(t){return ot.call(this,t,!0)},add:ft("add"),set:ft("set"),delete:ft("delete"),clear:ft("clear"),forEach:dt(!0,!0)},r=["keys","values","entries",Symbol.iterator];return r.forEach(r=>{t[r]=pt(r,!1,!1),n[r]=pt(r,!0,!1),e[r]=pt(r,!1,!0),i[r]=pt(r,!0,!0)}),[t,n,e,i]}const[mt,yt,vt,bt]=gt();function wt(t,e){const n=e?t?bt:vt:t?yt:mt;return(e,r,s)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(Object(i["k"])(n,r)&&r in e?n:e,r,s)}const _t={get:wt(!1,!1)},xt={get:wt(!1,!0)},Tt={get:wt(!0,!1)},St={get:wt(!0,!0)};const Ct=new WeakMap,kt=new WeakMap,Ot=new WeakMap,It=new WeakMap;function Et(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function At(t){return t["__v_skip"]||!Object.isExtensible(t)?0:Et(Object(i["P"])(t))}function Pt(t){return t&&t["__v_isReadonly"]?t:Mt(t,!1,Z,_t,Ct)}function Nt(t){return Mt(t,!1,et,xt,kt)}function jt(t){return Mt(t,!0,tt,Tt,Ot)}function Rt(t){return Mt(t,!0,nt,St,It)}function Mt(t,e,n,r,s){if(!Object(i["v"])(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=s.get(t);if(o)return o;const a=At(t);if(0===a)return t;const c=new Proxy(t,2===a?r:n);return s.set(t,c),c}function Dt(t){return Lt(t)?Dt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function Lt(t){return!(!t||!t["__v_isReadonly"])}function Ft(t){return Dt(t)||Lt(t)}function Ut(t){const e=t&&t["__v_raw"];return e?Ut(e):t}function Bt(t){return Object(i["g"])(t,"__v_skip",!0),t}const Vt=t=>Object(i["v"])(t)?Pt(t):t,zt=t=>Object(i["v"])(t)?jt(t):t;function qt(t){R()&&(t=Ut(t),t.dep||(t.dep=u()),M(t.dep))}function Wt(t,e){t=Ut(t),t.dep&&L(t.dep)}function Ht(t){return Boolean(t&&!0===t.__v_isRef)}function Gt(t){return $t(t,!1)}function Kt(t){return $t(t,!0)}function $t(t,e){return Ht(t)?t:new Yt(t,e)}class Yt{constructor(t,e){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Ut(t),this._value=e?t:Vt(t)}get value(){return qt(this),this._value}set value(t){t=this._shallow?t:Ut(t),Object(i["j"])(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:Vt(t),Wt(this,t))}}function Xt(t){Wt(t,void 0)}function Qt(t){return Ht(t)?t.value:t}const Jt={get:(t,e,n)=>Qt(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return Ht(r)&&!Ht(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function Zt(t){return Dt(t)?t:new Proxy(t,Jt)}class te{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:e,set:n}=t(()=>qt(this),()=>Wt(this));this._get=e,this._set=n}get value(){return this._get()}set value(t){this._set(t)}}function ee(t){return new te(t)}function ne(t){const e=Object(i["o"])(t)?new Array(t.length):{};for(const n in t)e[n]=re(t,n);return e}class ie{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function re(t,e){const n=t[e];return Ht(n)?n:new ie(t,e)}class se{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new S(t,()=>{this._dirty||(this._dirty=!0,Wt(this))}),this["__v_isReadonly"]=n}get value(){const t=Ut(this);return qt(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function oe(t,e){let n,r;const s=Object(i["p"])(t);s?(n=t,r=i["d"]):(n=t.get,r=t.set);const o=new se(n,r,s||!r);return o}Promise.resolve();new Set;new Map;let ae,ce=[];function le(t,e){if(ae=t,ae)ae.enabled=!0,ce.forEach(({event:t,args:e})=>ae.emit(t,...e)),ce=[];else{const t=e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[];t.push(t=>{le(t,e)})}}function he(t,e,...n){const r=t.vnode.props||i["b"];let s=n;const o=e.startsWith("update:"),a=o&&e.slice(7);if(a&&a in r){const t=("modelValue"===a?"model":a)+"Modifiers",{number:e,trim:o}=r[t]||i["b"];o?s=n.map(t=>t.trim()):e&&(s=n.map(i["O"]))}let c;let l=r[c=Object(i["N"])(e)]||r[c=Object(i["N"])(Object(i["e"])(e))];!l&&o&&(l=r[c=Object(i["N"])(Object(i["l"])(e))]),l&&ts(l,t,6,s);const h=r[c+"Once"];if(h){if(t.emitted){if(t.emitted[c])return}else t.emitted={};t.emitted[c]=!0,ts(h,t,6,s)}}function ue(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(void 0!==s)return s;const o=t.emits;let a={},c=!1;if(!Object(i["p"])(t)){const r=t=>{const n=ue(t,e,!0);n&&(c=!0,Object(i["h"])(a,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||c?(Object(i["o"])(o)?o.forEach(t=>a[t]=null):Object(i["h"])(a,o),r.set(t,a),a):(r.set(t,null),null)}function de(t,e){return!(!t||!Object(i["w"])(e))&&(e=e.slice(2).replace(/Once$/,""),Object(i["k"])(t,e[0].toLowerCase()+e.slice(1))||Object(i["k"])(t,Object(i["l"])(e))||Object(i["k"])(t,e))}let pe=null,fe=null;function ge(t){const e=pe;return pe=t,fe=t&&t.type.__scopeId||null,e}function me(t){fe=t}function ye(){fe=null}const ve=t=>be;function be(t,e=pe,n){if(!e)return t;if(t._n)return t;const i=(...n)=>{i._d&&Wi(-1);const r=ge(e),s=t(...n);return ge(r),i._d&&Wi(1),s};return i._n=!0,i._c=!0,i._d=!0,i}function we(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:o,propsOptions:[a],slots:c,attrs:l,emit:h,render:u,renderCache:d,data:p,setupState:f,ctx:g,inheritAttrs:m}=t;let y,v;const b=ge(t);try{if(4&n.shapeFlag){const t=s||r;y=cr(u.call(t,t,d,o,f,p,g)),v=l}else{const t=e;0,y=cr(t.length>1?t(o,{attrs:l,slots:c,emit:h}):t(o,null)),v=e.props?l:xe(l)}}catch(_){Fi.length=0,es(_,t,1),y=er(Di)}let w=y;if(v&&!1!==m){const t=Object.keys(v),{shapeFlag:e}=w;t.length&&7&e&&(a&&t.some(i["u"])&&(v=Te(v,a)),w=rr(w,v))}return n.dirs&&(w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),y=w,ge(b),y}function _e(t){let e;for(let n=0;n<t.length;n++){const i=t[n];if(!$i(i))return;if(i.type!==Di||"v-if"===i.children){if(e)return;e=i}}return e}const xe=t=>{let e;for(const n in t)("class"===n||"style"===n||Object(i["w"])(n))&&((e||(e={}))[n]=t[n]);return e},Te=(t,e)=>{const n={};for(const r in t)Object(i["u"])(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Se(t,e,n){const{props:i,children:r,component:s}=t,{props:o,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!r&&!a||a&&a.$stable)||i!==o&&(i?!o||Ce(i,o,l):!!o);if(1024&c)return!0;if(16&c)return i?Ce(i,o,l):!!o;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(o[n]!==i[n]&&!de(l,n))return!0}}return!1}function Ce(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==t[s]&&!de(n,s))return!0}return!1}function ke({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const Oe=t=>t.__isSuspense,Ie={name:"Suspense",__isSuspense:!0,process(t,e,n,i,r,s,o,a,c,l){null==t?Pe(e,n,i,r,s,o,a,c,l):Ne(t,e,n,i,r,o,a,c,l)},hydrate:Re,create:je,normalize:Me},Ee=Ie;function Ae(t,e){const n=t.props&&t.props[e];Object(i["p"])(n)&&n()}function Pe(t,e,n,i,r,s,o,a,c){const{p:l,o:{createElement:h}}=c,u=h("div"),d=t.suspense=je(t,r,i,e,u,n,s,o,a,c);l(null,d.pendingBranch=t.ssContent,u,null,i,d,s,o),d.deps>0?(Ae(t,"onPending"),Ae(t,"onFallback"),l(null,t.ssFallback,e,n,i,null,s,o),Fe(d,t.ssFallback)):d.resolve()}function Ne(t,e,n,i,r,s,o,a,{p:c,um:l,o:{createElement:h}}){const u=e.suspense=t.suspense;u.vnode=e,e.el=t.el;const d=e.ssContent,p=e.ssFallback,{activeBranch:f,pendingBranch:g,isInFallback:m,isHydrating:y}=u;if(g)u.pendingBranch=d,Yi(d,g)?(c(g,d,u.hiddenContainer,null,r,u,s,o,a),u.deps<=0?u.resolve():m&&(c(f,p,n,i,r,null,s,o,a),Fe(u,p))):(u.pendingId++,y?(u.isHydrating=!1,u.activeBranch=g):l(g,r,u),u.deps=0,u.effects.length=0,u.hiddenContainer=h("div"),m?(c(null,d,u.hiddenContainer,null,r,u,s,o,a),u.deps<=0?u.resolve():(c(f,p,n,i,r,null,s,o,a),Fe(u,p))):f&&Yi(d,f)?(c(f,d,n,i,r,u,s,o,a),u.resolve(!0)):(c(null,d,u.hiddenContainer,null,r,u,s,o,a),u.deps<=0&&u.resolve()));else if(f&&Yi(d,f))c(f,d,n,i,r,u,s,o,a),Fe(u,d);else if(Ae(e,"onPending"),u.pendingBranch=d,u.pendingId++,c(null,d,u.hiddenContainer,null,r,u,s,o,a),u.deps<=0)u.resolve();else{const{timeout:t,pendingId:e}=u;t>0?setTimeout(()=>{u.pendingId===e&&u.fallback(p)},t):0===t&&u.fallback(p)}}function je(t,e,n,r,s,o,a,c,l,h,u=!1){const{p:d,m:p,um:f,n:g,o:{parentNode:m,remove:y}}=h,v=Object(i["O"])(t.props&&t.props.timeout),b={vnode:t,parent:e,parentComponent:n,isSVG:a,container:r,hiddenContainer:s,anchor:o,deps:0,pendingId:0,timeout:"number"===typeof v?v:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:u,isUnmounted:!1,effects:[],resolve(t=!1){const{vnode:e,activeBranch:n,pendingBranch:i,pendingId:r,effects:s,parentComponent:o,container:a}=b;if(b.isHydrating)b.isHydrating=!1;else if(!t){const t=n&&i.transition&&"out-in"===i.transition.mode;t&&(n.transition.afterLeave=()=>{r===b.pendingId&&p(i,a,e,0)});let{anchor:e}=b;n&&(e=g(n),f(n,o,b,!0)),t||p(i,a,e,0)}Fe(b,i),b.pendingBranch=null,b.isInFallback=!1;let c=b.parent,l=!1;while(c){if(c.pendingBranch){c.effects.push(...s),l=!0;break}c=c.parent}l||Ts(s),b.effects=[],Ae(e,"onResolve")},fallback(t){if(!b.pendingBranch)return;const{vnode:e,activeBranch:n,parentComponent:i,container:r,isSVG:s}=b;Ae(e,"onFallback");const o=g(n),a=()=>{b.isInFallback&&(d(null,t,r,o,i,null,s,c,l),Fe(b,t))},h=t.transition&&"out-in"===t.transition.mode;h&&(n.transition.afterLeave=a),b.isInFallback=!0,f(n,i,null,!0),h||a()},move(t,e,n){b.activeBranch&&p(b.activeBranch,t,e,n),b.container=t},next(){return b.activeBranch&&g(b.activeBranch)},registerDep(t,e){const n=!!b.pendingBranch;n&&b.deps++;const i=t.vnode.el;t.asyncDep.catch(e=>{es(e,t,0)}).then(r=>{if(t.isUnmounted||b.isUnmounted||b.pendingId!==t.suspenseId)return;t.asyncResolved=!0;const{vnode:s}=t;Rr(t,r,!1),i&&(s.el=i);const o=!i&&t.subTree.el;e(t,s,m(i||t.subTree.el),i?null:g(t.subTree),b,a,l),o&&y(o),ke(t,s.el),n&&0===--b.deps&&b.resolve()})},unmount(t,e){b.isUnmounted=!0,b.activeBranch&&f(b.activeBranch,n,t,e),b.pendingBranch&&f(b.pendingBranch,n,t,e)}};return b}function Re(t,e,n,i,r,s,o,a,c){const l=e.suspense=je(e,i,n,t.parentNode,document.createElement("div"),null,r,s,o,a,!0),h=c(t,l.pendingBranch=e.ssContent,n,l,s,o);return 0===l.deps&&l.resolve(),h}function Me(t){const{shapeFlag:e,children:n}=t,i=32&e;t.ssContent=De(i?n.default:n),t.ssFallback=i?De(n.fallback):er(Di)}function De(t){let e;if(Object(i["p"])(t)){const n=qi&&t._c;n&&(t._d=!1,Bi()),t=t(),n&&(t._d=!0,e=Ui,Vi())}if(Object(i["o"])(t)){const e=_e(t);0,t=e}return t=cr(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(e=>e!==t)),t}function Le(t,e){e&&e.pendingBranch?Object(i["o"])(t)?e.effects.push(...t):e.effects.push(t):Ts(t)}function Fe(t,e){t.activeBranch=e;const{vnode:n,parentComponent:i}=t,r=n.el=e.el;i&&i.subTree===n&&(i.vnode.el=r,ke(i,r))}function Ue(t,e){if(Sr){let n=Sr.provides;const i=Sr.parent&&Sr.parent.provides;i===n&&(n=Sr.provides=Object.create(i)),n[t]=e}else 0}function Be(t,e,n=!1){const r=Sr||pe;if(r){const s=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Object(i["p"])(e)?e.call(r.proxy):e}else 0}function Ve(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return gn(()=>{t.isMounted=!0}),vn(()=>{t.isUnmounting=!0}),t}const ze=[Function,Array],qe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ze,onEnter:ze,onAfterEnter:ze,onEnterCancelled:ze,onBeforeLeave:ze,onLeave:ze,onAfterLeave:ze,onLeaveCancelled:ze,onBeforeAppear:ze,onAppear:ze,onAfterAppear:ze,onAppearCancelled:ze},setup(t,{slots:e}){const n=Cr(),i=Ve();let r;return()=>{const s=e.default&&Xe(e.default(),!0);if(!s||!s.length)return;const o=Ut(t),{mode:a}=o;const c=s[0];if(i.isLeaving)return Ke(c);const l=$e(c);if(!l)return Ke(c);const h=Ge(l,o,i,n);Ye(l,h);const u=n.subTree,d=u&&$e(u);let p=!1;const{getTransitionKey:f}=l.type;if(f){const t=f();void 0===r?r=t:t!==r&&(r=t,p=!0)}if(d&&d.type!==Di&&(!Yi(l,d)||p)){const t=Ge(d,o,i,n);if(Ye(d,t),"out-in"===a)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,n.update()},Ke(c);"in-out"===a&&l.type!==Di&&(t.delayLeave=(t,e,n)=>{const r=He(i,d);r[String(d.key)]=d,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return c}}},We=qe;function He(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function Ge(t,e,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:h,onBeforeLeave:u,onLeave:d,onAfterLeave:p,onLeaveCancelled:f,onBeforeAppear:g,onAppear:m,onAfterAppear:y,onAppearCancelled:v}=e,b=String(t.key),w=He(n,t),_=(t,e)=>{t&&ts(t,i,9,e)},x={mode:s,persisted:o,beforeEnter(e){let i=a;if(!n.isMounted){if(!r)return;i=g||a}e._leaveCb&&e._leaveCb(!0);const s=w[b];s&&Yi(t,s)&&s.el._leaveCb&&s.el._leaveCb(),_(i,[e])},enter(t){let e=c,i=l,s=h;if(!n.isMounted){if(!r)return;e=m||c,i=y||l,s=v||h}let o=!1;const a=t._enterCb=e=>{o||(o=!0,_(e?s:i,[t]),x.delayedLeave&&x.delayedLeave(),t._enterCb=void 0)};e?(e(t,a),e.length<=1&&a()):a()},leave(e,i){const r=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return i();_(u,[e]);let s=!1;const o=e._leaveCb=n=>{s||(s=!0,i(),_(n?f:p,[e]),e._leaveCb=void 0,w[r]===t&&delete w[r])};w[r]=t,d?(d(e,o),d.length<=1&&o()):o()},clone(t){return Ge(t,e,n,i)}};return x}function Ke(t){if(en(t))return t=rr(t),t.children=null,t}function $e(t){return en(t)?t.children?t.children[0]:void 0:t}function Ye(t,e){6&t.shapeFlag&&t.component?Ye(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Xe(t,e=!1){let n=[],i=0;for(let r=0;r<t.length;r++){const s=t[r];s.type===Ri?(128&s.patchFlag&&i++,n=n.concat(Xe(s.children,e))):(e||s.type!==Di)&&n.push(s)}if(i>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}function Qe(t){return Object(i["p"])(t)?{setup:t,name:t.name}:t}const Je=t=>!!t.type.__asyncLoader;function Ze(t){Object(i["p"])(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,timeout:o,suspensible:a=!0,onError:c}=t;let l,h=null,u=0;const d=()=>(u++,h=null,p()),p=()=>{let t;return h||(t=h=e().catch(t=>{if(t=t instanceof Error?t:new Error(String(t)),c)return new Promise((e,n)=>{const i=()=>e(d()),r=()=>n(t);c(t,i,r,u+1)});throw t}).then(e=>t!==h&&h?h:(e&&(e.__esModule||"Module"===e[Symbol.toStringTag])&&(e=e.default),l=e,e)))};return Qe({name:"AsyncComponentWrapper",__asyncLoader:p,get __asyncResolved(){return l},setup(){const t=Sr;if(l)return()=>tn(l,t);const e=e=>{h=null,es(e,t,13,!r)};if(a&&t.suspense||Pr)return p().then(e=>()=>tn(e,t)).catch(t=>(e(t),()=>r?er(r,{error:t}):null));const i=Gt(!1),c=Gt(),u=Gt(!!s);return s&&setTimeout(()=>{u.value=!1},s),null!=o&&setTimeout(()=>{if(!i.value&&!c.value){const t=new Error(`Async component timed out after ${o}ms.`);e(t),c.value=t}},o),p().then(()=>{i.value=!0,t.parent&&en(t.parent.vnode)&&vs(t.parent.update)}).catch(t=>{e(t),c.value=t}),()=>i.value&&l?tn(l,t):c.value&&r?er(r,{error:c.value}):n&&!u.value?er(n):void 0}})}function tn(t,{vnode:{ref:e,props:n,children:i}}){const r=er(t,n,i);return r.ref=e,r}const en=t=>t.type.__isKeepAlive,nn={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Cr(),r=n.ctx;if(!r.renderer)return e.default;const s=new Map,o=new Set;let a=null;const c=n.suspense,{renderer:{p:l,m:h,um:u,o:{createElement:d}}}=r,p=d("div");function f(t){hn(t),u(t,n,c)}function g(t){s.forEach((e,n)=>{const i=qr(e.type);!i||t&&t(i)||m(n)})}function m(t){const e=s.get(t);a&&e.type===a.type?a&&hn(a):f(e),s.delete(t),o.delete(t)}r.activate=(t,e,n,r,s)=>{const o=t.component;h(t,e,n,0,c),l(o.vnode,t,e,n,o,c,r,t.slotScopeIds,s),hi(()=>{o.isDeactivated=!1,o.a&&Object(i["n"])(o.a);const e=t.props&&t.props.onVnodeMounted;e&&gi(e,o.parent,t)},c)},r.deactivate=t=>{const e=t.component;h(t,p,null,1,c),hi(()=>{e.da&&Object(i["n"])(e.da);const n=t.props&&t.props.onVnodeUnmounted;n&&gi(n,e.parent,t),e.isDeactivated=!0},c)},Ns(()=>[t.include,t.exclude],([t,e])=>{t&&g(e=>sn(t,e)),e&&g(t=>!sn(e,t))},{flush:"post",deep:!0});let y=null;const v=()=>{null!=y&&s.set(y,un(n.subTree))};return gn(v),yn(v),vn(()=>{s.forEach(t=>{const{subTree:e,suspense:i}=n,r=un(e);if(t.type!==r.type)f(t);else{hn(r);const t=r.component.da;t&&hi(t,i)}})}),()=>{if(y=null,!e.default)return null;const n=e.default(),i=n[0];if(n.length>1)return a=null,n;if(!$i(i)||!(4&i.shapeFlag)&&!(128&i.shapeFlag))return a=null,i;let r=un(i);const c=r.type,l=qr(Je(r)?r.type.__asyncResolved||{}:c),{include:h,exclude:u,max:d}=t;if(h&&(!l||!sn(h,l))||u&&l&&sn(u,l))return a=r,i;const p=null==r.key?c:r.key,f=s.get(p);return r.el&&(r=rr(r),128&i.shapeFlag&&(i.ssContent=r)),y=p,f?(r.el=f.el,r.component=f.component,r.transition&&Ye(r,r.transition),r.shapeFlag|=512,o.delete(p),o.add(p)):(o.add(p),d&&o.size>parseInt(d,10)&&m(o.values().next().value)),r.shapeFlag|=256,a=r,i}}},rn=nn;function sn(t,e){return Object(i["o"])(t)?t.some(t=>sn(t,e)):Object(i["D"])(t)?t.split(",").indexOf(e)>-1:!!t.test&&t.test(e)}function on(t,e){cn(t,"a",e)}function an(t,e){cn(t,"da",e)}function cn(t,e,n=Sr){const i=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}t()});if(dn(e,i,n),n){let t=n.parent;while(t&&t.parent)en(t.parent.vnode)&&ln(i,e,n,t),t=t.parent}}function ln(t,e,n,r){const s=dn(e,t,r,!0);bn(()=>{Object(i["L"])(r[e],s)},n)}function hn(t){let e=t.shapeFlag;256&e&&(e-=256),512&e&&(e-=512),t.shapeFlag=e}function un(t){return 128&t.shapeFlag?t.ssContent:t}function dn(t,e,n=Sr,i=!1){if(n){const r=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...i)=>{if(n.isUnmounted)return;A(),kr(n);const r=ts(e,n,t,i);return Or(),N(),r});return i?r.unshift(s):r.push(s),s}}const pn=t=>(e,n=Sr)=>(!Pr||"sp"===t)&&dn(t,e,n),fn=pn("bm"),gn=pn("m"),mn=pn("bu"),yn=pn("u"),vn=pn("bum"),bn=pn("um"),wn=pn("sp"),_n=pn("rtg"),xn=pn("rtc");function Tn(t,e=Sr){dn("ec",t,e)}let Sn=!0;function Cn(t){const e=En(t),n=t.proxy,r=t.ctx;Sn=!1,e.beforeCreate&&On(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:a,watch:c,provide:l,inject:h,created:u,beforeMount:d,mounted:p,beforeUpdate:f,updated:g,activated:m,deactivated:y,beforeDestroy:v,beforeUnmount:b,destroyed:w,unmounted:_,render:x,renderTracked:T,renderTriggered:S,errorCaptured:C,serverPrefetch:k,expose:O,inheritAttrs:I,components:E,directives:A,filters:P}=e,N=null;if(h&&kn(h,r,N,t.appContext.config.unwrapInjectedRef),a)for(const R in a){const t=a[R];Object(i["p"])(t)&&(r[R]=t.bind(n))}if(s){0;const e=s.call(n,n);0,Object(i["v"])(e)&&(t.data=Pt(e))}if(Sn=!0,o)for(const R in o){const t=o[R],e=Object(i["p"])(t)?t.bind(n,n):Object(i["p"])(t.get)?t.get.bind(n,n):i["d"];0;const s=!Object(i["p"])(t)&&Object(i["p"])(t.set)?t.set.bind(n):i["d"],a=oe({get:e,set:s});Object.defineProperty(r,R,{enumerable:!0,configurable:!0,get:()=>a.value,set:t=>a.value=t})}if(c)for(const i in c)In(c[i],r,n,i);if(l){const t=Object(i["p"])(l)?l.call(n):l;Reflect.ownKeys(t).forEach(e=>{Ue(e,t[e])})}function j(t,e){Object(i["o"])(e)?e.forEach(e=>t(e.bind(n))):e&&t(e.bind(n))}if(u&&On(u,t,"c"),j(fn,d),j(gn,p),j(mn,f),j(yn,g),j(on,m),j(an,y),j(Tn,C),j(xn,T),j(_n,S),j(vn,b),j(bn,_),j(wn,k),Object(i["o"])(O))if(O.length){const e=t.exposed||(t.exposed={});O.forEach(t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})})}else t.exposed||(t.exposed={});x&&t.render===i["d"]&&(t.render=x),null!=I&&(t.inheritAttrs=I),E&&(t.components=E),A&&(t.directives=A)}function kn(t,e,n=i["d"],r=!1){Object(i["o"])(t)&&(t=Rn(t));for(const s in t){const n=t[s];let o;o=Object(i["v"])(n)?"default"in n?Be(n.from||s,n.default,!0):Be(n.from||s):Be(n),Ht(o)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[s]=o}}function On(t,e,n){ts(Object(i["o"])(t)?t.map(t=>t.bind(e.proxy)):t.bind(e.proxy),e,n)}function In(t,e,n,r){const s=r.includes(".")?Ms(n,r):()=>n[r];if(Object(i["D"])(t)){const n=e[t];Object(i["p"])(n)&&Ns(s,n)}else if(Object(i["p"])(t))Ns(s,t.bind(n));else if(Object(i["v"])(t))if(Object(i["o"])(t))t.forEach(t=>In(t,e,n,r));else{const r=Object(i["p"])(t.handler)?t.handler.bind(n):e[t.handler];Object(i["p"])(r)&&Ns(s,r,t)}else 0}function En(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let c;return a?c=a:r.length||n||i?(c={},r.length&&r.forEach(t=>An(c,t,o,!0)),An(c,e,o)):c=e,s.set(e,c),c}function An(t,e,n,i=!1){const{mixins:r,extends:s}=e;s&&An(t,s,n,!0),r&&r.forEach(e=>An(t,e,n,!0));for(const o in e)if(i&&"expose"===o);else{const i=Pn[o]||n&&n[o];t[o]=i?i(t[o],e[o]):e[o]}return t}const Pn={data:Nn,props:Dn,emits:Dn,methods:Dn,computed:Dn,beforeCreate:Mn,created:Mn,beforeMount:Mn,mounted:Mn,beforeUpdate:Mn,updated:Mn,beforeDestroy:Mn,beforeUnmount:Mn,destroyed:Mn,unmounted:Mn,activated:Mn,deactivated:Mn,errorCaptured:Mn,serverPrefetch:Mn,components:Dn,directives:Dn,watch:Ln,provide:Nn,inject:jn};function Nn(t,e){return e?t?function(){return Object(i["h"])(Object(i["p"])(t)?t.call(this,this):t,Object(i["p"])(e)?e.call(this,this):e)}:e:t}function jn(t,e){return Dn(Rn(t),Rn(e))}function Rn(t){if(Object(i["o"])(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Mn(t,e){return t?[...new Set([].concat(t,e))]:e}function Dn(t,e){return t?Object(i["h"])(Object(i["h"])(Object.create(null),t),e):e}function Ln(t,e){if(!t)return e;if(!e)return t;const n=Object(i["h"])(Object.create(null),t);for(const i in e)n[i]=Mn(t[i],e[i]);return n}function Fn(t,e,n,r=!1){const s={},o={};Object(i["g"])(o,Qi,1),t.propsDefaults=Object.create(null),Bn(t,e,s,o);for(const i in t.propsOptions[0])i in s||(s[i]=void 0);n?t.props=r?s:Nt(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function Un(t,e,n,r){const{props:s,attrs:o,vnode:{patchFlag:a}}=t,c=Ut(s),[l]=t.propsOptions;let h=!1;if(!(r||a>0)||16&a){let r;Bn(t,e,s,o)&&(h=!0);for(const o in c)e&&(Object(i["k"])(e,o)||(r=Object(i["l"])(o))!==o&&Object(i["k"])(e,r))||(l?!n||void 0===n[o]&&void 0===n[r]||(s[o]=Vn(l,c,o,void 0,t,!0)):delete s[o]);if(o!==c)for(const t in o)e&&Object(i["k"])(e,t)||(delete o[t],h=!0)}else if(8&a){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];const u=e[a];if(l)if(Object(i["k"])(o,a))u!==o[a]&&(o[a]=u,h=!0);else{const e=Object(i["e"])(a);s[e]=Vn(l,c,e,u,t,!1)}else u!==o[a]&&(o[a]=u,h=!0)}}h&&D(t,"set","$attrs")}function Bn(t,e,n,r){const[s,o]=t.propsOptions;let a,c=!1;if(e)for(let l in e){if(Object(i["z"])(l))continue;const h=e[l];let u;s&&Object(i["k"])(s,u=Object(i["e"])(l))?o&&o.includes(u)?(a||(a={}))[u]=h:n[u]=h:de(t.emitsOptions,l)||h!==r[l]&&(r[l]=h,c=!0)}if(o){const e=Ut(n),r=a||i["b"];for(let a=0;a<o.length;a++){const c=o[a];n[c]=Vn(s,e,c,r[c],t,!Object(i["k"])(r,c))}}return c}function Vn(t,e,n,r,s,o){const a=t[n];if(null!=a){const t=Object(i["k"])(a,"default");if(t&&void 0===r){const t=a.default;if(a.type!==Function&&Object(i["p"])(t)){const{propsDefaults:i}=s;n in i?r=i[n]:(kr(s),r=i[n]=t.call(null,e),Or())}else r=t}a[0]&&(o&&!t?r=!1:!a[1]||""!==r&&r!==Object(i["l"])(n)||(r=!0))}return r}function zn(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const o=t.props,a={},c=[];let l=!1;if(!Object(i["p"])(t)){const r=t=>{l=!0;const[n,r]=zn(t,e,!0);Object(i["h"])(a,n),r&&c.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!l)return r.set(t,i["a"]),i["a"];if(Object(i["o"])(o))for(let u=0;u<o.length;u++){0;const t=Object(i["e"])(o[u]);qn(t)&&(a[t]=i["b"])}else if(o){0;for(const t in o){const e=Object(i["e"])(t);if(qn(e)){const n=o[t],r=a[e]=Object(i["o"])(n)||Object(i["p"])(n)?{type:n}:n;if(r){const t=Gn(Boolean,r.type),n=Gn(String,r.type);r[0]=t>-1,r[1]=n<0||t<n,(t>-1||Object(i["k"])(r,"default"))&&c.push(e)}}}}const h=[a,c];return r.set(t,h),h}function qn(t){return"$"!==t[0]}function Wn(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function Hn(t,e){return Wn(t)===Wn(e)}function Gn(t,e){return Object(i["o"])(e)?e.findIndex(e=>Hn(e,t)):Object(i["p"])(e)&&Hn(e,t)?0:-1}const Kn=t=>"_"===t[0]||"$stable"===t,$n=t=>Object(i["o"])(t)?t.map(cr):[cr(t)],Yn=(t,e,n)=>{const i=be((...t)=>$n(e(...t)),n);return i._c=!1,i},Xn=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Kn(s))continue;const n=t[s];if(Object(i["p"])(n))e[s]=Yn(s,n,r);else if(null!=n){0;const t=$n(n);e[s]=()=>t}}},Qn=(t,e)=>{const n=$n(e);t.slots.default=()=>n},Jn=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=Ut(e),Object(i["g"])(e,"_",n)):Xn(e,t.slots={})}else t.slots={},e&&Qn(t,e);Object(i["g"])(t.slots,Qi,1)},Zn=(t,e,n)=>{const{vnode:r,slots:s}=t;let o=!0,a=i["b"];if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(Object(i["h"])(s,e),n||1!==t||delete s._):(o=!e.$stable,Xn(e,s)),a=e}else e&&(Qn(t,e),a={default:1});if(o)for(const i in s)Kn(i)||i in a||delete s[i]};function ti(t,e){const n=pe;if(null===n)return t;const r=n.proxy,s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[t,n,a,c=i["b"]]=e[o];Object(i["p"])(t)&&(t={mounted:t,updated:t}),t.deep&&Ds(n),s.push({dir:t,instance:r,value:n,oldValue:void 0,arg:a,modifiers:c})}return t}function ei(t,e,n,i){const r=t.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let c=a.dir[i];c&&(A(),ts(c,n,8,[t.el,a,t,e]),N())}}function ni(){return{app:null,config:{isNativeTag:i["c"],performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ii=0;function ri(t,e){return function(n,r=null){null==r||Object(i["v"])(r)||(r=null);const s=ni(),o=new Set;let a=!1;const c=s.app={_uid:ii++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:eo,get config(){return s.config},set config(t){0},use(t,...e){return o.has(t)||(t&&Object(i["p"])(t.install)?(o.add(t),t.install(c,...e)):Object(i["p"])(t)&&(o.add(t),t(c,...e))),c},mixin(t){return s.mixins.includes(t)||s.mixins.push(t),c},component(t,e){return e?(s.components[t]=e,c):s.components[t]},directive(t,e){return e?(s.directives[t]=e,c):s.directives[t]},mount(i,o,l){if(!a){const h=er(n,r);return h.appContext=s,o&&e?e(h,i):t(h,i,l),a=!0,c._container=i,i.__vue_app__=c,Br(h.component)||h.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(t,e){return s.provides[t]=e,c}};return c}}let si=!1;const oi=t=>/svg/.test(t.namespaceURI)&&"foreignObject"!==t.tagName,ai=t=>8===t.nodeType;function ci(t){const{mt:e,p:n,o:{patchProp:r,nextSibling:s,parentNode:o,remove:a,insert:c,createComment:l}}=t,h=(t,e)=>{if(!e.hasChildNodes())return n(null,t,e),void Cs();si=!1,u(e.firstChild,t,null,null,null),Cs(),si&&console.error("Hydration completed but contains mismatches.")},u=(n,i,r,a,c,l=!1)=>{const h=ai(n)&&"["===n.data,y=()=>g(n,i,r,a,c,h),{type:v,ref:b,shapeFlag:w}=i,_=n.nodeType;i.el=n;let x=null;switch(v){case Mi:3!==_?x=y():(n.data!==i.children&&(si=!0,n.data=i.children),x=s(n));break;case Di:x=8!==_||h?y():s(n);break;case Li:if(1===_){x=n;const t=!i.children.length;for(let e=0;e<i.staticCount;e++)t&&(i.children+=x.outerHTML),e===i.staticCount-1&&(i.anchor=x),x=s(x);return x}x=y();break;case Ri:x=h?f(n,i,r,a,c,l):y();break;default:if(1&w)x=1!==_||i.type.toLowerCase()!==n.tagName.toLowerCase()?y():d(n,i,r,a,c,l);else if(6&w){i.slotScopeIds=c;const t=o(n);if(e(i,t,null,r,a,oi(t),l),x=h?m(n):s(n),Je(i)){let e;h?(e=er(Ri),e.anchor=x?x.previousSibling:t.lastChild):e=3===n.nodeType?sr(""):er("div"),e.el=n,i.component.subTree=e}}else 64&w?x=8!==_?y():i.type.hydrate(n,i,r,a,c,l,t,p):128&w&&(x=i.type.hydrate(n,i,r,a,oi(o(n)),c,l,t,u))}return null!=b&&fi(b,null,a,i),x},d=(t,e,n,s,o,c)=>{c=c||!!e.dynamicChildren;const{type:l,props:h,patchFlag:u,shapeFlag:d,dirs:f}=e,g="input"===l&&f||"option"===l;if(g||-1!==u){if(f&&ei(e,null,n,"created"),h)if(g||!c||48&u)for(const e in h)(g&&e.endsWith("value")||Object(i["w"])(e)&&!Object(i["z"])(e))&&r(t,e,null,h[e],!1,void 0,n);else h.onClick&&r(t,"onClick",null,h.onClick,!1,void 0,n);let l;if((l=h&&h.onVnodeBeforeMount)&&gi(l,n,e),f&&ei(e,null,n,"beforeMount"),((l=h&&h.onVnodeMounted)||f)&&Le(()=>{l&&gi(l,n,e),f&&ei(e,null,n,"mounted")},s),16&d&&(!h||!h.innerHTML&&!h.textContent)){let i=p(t.firstChild,e,t,n,s,o,c);while(i){si=!0;const t=i;i=i.nextSibling,a(t)}}else 8&d&&t.textContent!==e.children&&(si=!0,t.textContent=e.children)}return t.nextSibling},p=(t,e,i,r,s,o,a)=>{a=a||!!e.dynamicChildren;const c=e.children,l=c.length;for(let h=0;h<l;h++){const e=a?c[h]:c[h]=cr(c[h]);if(t)t=u(t,e,r,s,o,a);else{if(e.type===Mi&&!e.children)continue;si=!0,n(null,e,i,null,r,s,oi(i),o)}}return t},f=(t,e,n,i,r,a)=>{const{slotScopeIds:h}=e;h&&(r=r?r.concat(h):h);const u=o(t),d=p(s(t),e,u,n,i,r,a);return d&&ai(d)&&"]"===d.data?s(e.anchor=d):(si=!0,c(e.anchor=l("]"),u,d),d)},g=(t,e,i,r,c,l)=>{if(si=!0,e.el=null,l){const e=m(t);while(1){const n=s(t);if(!n||n===e)break;a(n)}}const h=s(t),u=o(t);return a(t),n(null,e,u,h,i,r,oi(u),c),h},m=t=>{let e=0;while(t)if(t=s(t),t&&ai(t)&&("["===t.data&&e++,"]"===t.data)){if(0===e)return s(t);e--}return t};return[h,u]}function li(){}const hi=Le;function ui(t){return pi(t)}function di(t){return pi(t,ci)}function pi(t,e){li();const n=Object(i["i"])();n.__VUE__=!0;const{insert:r,remove:s,patchProp:o,createElement:a,createText:c,createComment:l,setText:h,setElementText:u,parentNode:d,nextSibling:p,setScopeId:f=i["d"],cloneNode:g,insertStaticContent:m}=t,y=(t,e,n,i=null,r=null,s=null,o=!1,a=null,c=!!e.dynamicChildren)=>{if(t===e)return;t&&!Yi(t,e)&&(i=$(t),q(t,r,s,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:l,ref:h,shapeFlag:u}=e;switch(l){case Mi:v(t,e,n,i);break;case Di:b(t,e,n,i);break;case Li:null==t&&w(e,n,i,o);break;case Ri:j(t,e,n,i,r,s,o,a,c);break;default:1&u?T(t,e,n,i,r,s,o,a,c):6&u?R(t,e,n,i,r,s,o,a,c):(64&u||128&u)&&l.process(t,e,n,i,r,s,o,a,c,X)}null!=h&&r&&fi(h,t&&t.ref,s,e||t,!e)},v=(t,e,n,i)=>{if(null==t)r(e.el=c(e.children),n,i);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},b=(t,e,n,i)=>{null==t?r(e.el=l(e.children||""),n,i):e.el=t.el},w=(t,e,n,i)=>{[t.el,t.anchor]=m(t.children,e,n,i)},_=({el:t,anchor:e},n,i)=>{let s;while(t&&t!==e)s=p(t),r(t,n,i),t=s;r(e,n,i)},x=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),s(t),t=n;s(e)},T=(t,e,n,i,r,s,o,a,c)=>{o=o||"svg"===e.type,null==t?C(e,n,i,r,s,o,a,c):I(t,e,r,s,o,a,c)},C=(t,e,n,s,c,l,h,d)=>{let p,f;const{type:m,props:y,shapeFlag:v,transition:b,patchFlag:w,dirs:_}=t;if(t.el&&void 0!==g&&-1===w)p=t.el=g(t.el);else{if(p=t.el=a(t.type,l,y&&y.is,y),8&v?u(p,t.children):16&v&&O(t.children,p,null,s,c,l&&"foreignObject"!==m,h,d),_&&ei(t,null,s,"created"),y){for(const e in y)"value"===e||Object(i["z"])(e)||o(p,e,null,y[e],l,t.children,s,c,K);"value"in y&&o(p,"value",null,y.value),(f=y.onVnodeBeforeMount)&&gi(f,s,t)}k(p,t,t.scopeId,h,s)}_&&ei(t,null,s,"beforeMount");const x=(!c||c&&!c.pendingBranch)&&b&&!b.persisted;x&&b.beforeEnter(p),r(p,e,n),((f=y&&y.onVnodeMounted)||x||_)&&hi(()=>{f&&gi(f,s,t),x&&b.enter(p),_&&ei(t,null,s,"mounted")},c)},k=(t,e,n,i,r)=>{if(n&&f(t,n),i)for(let s=0;s<i.length;s++)f(t,i[s]);if(r){let n=r.subTree;if(e===n){const e=r.vnode;k(t,e,e.scopeId,e.slotScopeIds,r.parent)}}},O=(t,e,n,i,r,s,o,a,c=0)=>{for(let l=c;l<t.length;l++){const c=t[l]=a?lr(t[l]):cr(t[l]);y(null,c,e,n,i,r,s,o,a)}},I=(t,e,n,r,s,a,c)=>{const l=e.el=t.el;let{patchFlag:h,dynamicChildren:d,dirs:p}=e;h|=16&t.patchFlag;const f=t.props||i["b"],g=e.props||i["b"];let m;(m=g.onVnodeBeforeUpdate)&&gi(m,n,e,t),p&&ei(e,t,n,"beforeUpdate");const y=s&&"foreignObject"!==e.type;if(d?E(t.dynamicChildren,d,l,n,r,y,a):c||U(t,e,l,null,n,r,y,a,!1),h>0){if(16&h)P(l,e,f,g,n,r,s);else if(2&h&&f.class!==g.class&&o(l,"class",null,g.class,s),4&h&&o(l,"style",f.style,g.style,s),8&h){const i=e.dynamicProps;for(let e=0;e<i.length;e++){const a=i[e],c=f[a],h=g[a];h===c&&"value"!==a||o(l,a,c,h,s,t.children,n,r,K)}}1&h&&t.children!==e.children&&u(l,e.children)}else c||null!=d||P(l,e,f,g,n,r,s);((m=g.onVnodeUpdated)||p)&&hi(()=>{m&&gi(m,n,e,t),p&&ei(e,t,n,"updated")},r)},E=(t,e,n,i,r,s,o)=>{for(let a=0;a<e.length;a++){const c=t[a],l=e[a],h=c.el&&(c.type===Ri||!Yi(c,l)||70&c.shapeFlag)?d(c.el):n;y(c,l,h,null,i,r,s,o,!0)}},P=(t,e,n,r,s,a,c)=>{if(n!==r){for(const l in r){if(Object(i["z"])(l))continue;const h=r[l],u=n[l];h!==u&&"value"!==l&&o(t,l,u,h,c,e.children,s,a,K)}if(n!==i["b"])for(const l in n)Object(i["z"])(l)||l in r||o(t,l,n[l],null,c,e.children,s,a,K);"value"in r&&o(t,"value",n.value,r.value)}},j=(t,e,n,i,s,o,a,l,h)=>{const u=e.el=t?t.el:c(""),d=e.anchor=t?t.anchor:c("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:g}=e;g&&(l=l?l.concat(g):g),null==t?(r(u,n,i),r(d,n,i),O(e.children,n,d,s,o,a,l,h)):p>0&&64&p&&f&&t.dynamicChildren?(E(t.dynamicChildren,f,n,s,o,a,l),(null!=e.key||s&&e===s.subTree)&&mi(t,e,!0)):U(t,e,n,d,s,o,a,l,h)},R=(t,e,n,i,r,s,o,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?r.ctx.activate(e,n,i,o,c):M(e,n,i,r,s,o,c):D(t,e,c)},M=(t,e,n,i,r,s,o)=>{const a=t.component=Tr(t,i,r);if(en(t)&&(a.ctx.renderer=X),Nr(a),a.asyncDep){if(r&&r.registerDep(a,L),!t.el){const t=a.subTree=er(Di);b(null,t,e,n)}}else L(a,t,e,n,r,s,o)},D=(t,e,n)=>{const i=e.component=t.component;if(Se(t,e,n)){if(i.asyncDep&&!i.asyncResolved)return void F(i,e,n);i.next=e,ws(i.update),i.update()}else e.component=t.component,e.el=t.el,i.vnode=e},L=(t,e,n,r,s,o,a)=>{const c=()=>{if(t.isMounted){let e,{next:n,bu:r,u:c,parent:h,vnode:u}=t,p=n;0,l.allowRecurse=!1,n?(n.el=u.el,F(t,n,a)):n=u,r&&Object(i["n"])(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&gi(e,h,n,u),l.allowRecurse=!0;const f=we(t);0;const g=t.subTree;t.subTree=f,y(g,f,d(g.el),$(g),t,s,o),n.el=f.el,null===p&&ke(t,f.el),c&&hi(c,s),(e=n.props&&n.props.onVnodeUpdated)&&hi(()=>gi(e,h,n,u),s)}else{let a;const{el:c,props:h}=e,{bm:u,m:d,parent:p}=t,f=Je(e);if(l.allowRecurse=!1,u&&Object(i["n"])(u),!f&&(a=h&&h.onVnodeBeforeMount)&&gi(a,p,e),l.allowRecurse=!0,c&&J){const n=()=>{t.subTree=we(t),J(c,t.subTree,t,s,null)};f?e.type.__asyncLoader().then(()=>!t.isUnmounted&&n()):n()}else{0;const i=t.subTree=we(t);0,y(null,i,n,r,t,s,o),e.el=i.el}if(d&&hi(d,s),!f&&(a=h&&h.onVnodeMounted)){const t=e;hi(()=>gi(a,p,t),s)}256&e.shapeFlag&&t.a&&hi(t.a,s),t.isMounted=!0,e=n=r=null}},l=new S(c,()=>vs(t.update),t.scope),h=t.update=l.run.bind(l);h.id=t.uid,l.allowRecurse=h.allowRecurse=!0,h()},F=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,Un(t,e.props,i,n),Zn(t,e.children,n),A(),Ss(void 0,t.update),N()},U=(t,e,n,i,r,s,o,a,c=!1)=>{const l=t&&t.children,h=t?t.shapeFlag:0,d=e.children,{patchFlag:p,shapeFlag:f}=e;if(p>0){if(128&p)return void V(l,d,n,i,r,s,o,a,c);if(256&p)return void B(l,d,n,i,r,s,o,a,c)}8&f?(16&h&&K(l,r,s),d!==l&&u(n,d)):16&h?16&f?V(l,d,n,i,r,s,o,a,c):K(l,r,s,!0):(8&h&&u(n,""),16&f&&O(d,n,i,r,s,o,a,c))},B=(t,e,n,r,s,o,a,c,l)=>{t=t||i["a"],e=e||i["a"];const h=t.length,u=e.length,d=Math.min(h,u);let p;for(p=0;p<d;p++){const i=e[p]=l?lr(e[p]):cr(e[p]);y(t[p],i,n,null,s,o,a,c,l)}h>u?K(t,s,o,!0,!1,d):O(e,n,r,s,o,a,c,l,d)},V=(t,e,n,r,s,o,a,c,l)=>{let h=0;const u=e.length;let d=t.length-1,p=u-1;while(h<=d&&h<=p){const i=t[h],r=e[h]=l?lr(e[h]):cr(e[h]);if(!Yi(i,r))break;y(i,r,n,null,s,o,a,c,l),h++}while(h<=d&&h<=p){const i=t[d],r=e[p]=l?lr(e[p]):cr(e[p]);if(!Yi(i,r))break;y(i,r,n,null,s,o,a,c,l),d--,p--}if(h>d){if(h<=p){const t=p+1,i=t<u?e[t].el:r;while(h<=p)y(null,e[h]=l?lr(e[h]):cr(e[h]),n,i,s,o,a,c,l),h++}}else if(h>p)while(h<=d)q(t[h],s,o,!0),h++;else{const f=h,g=h,m=new Map;for(h=g;h<=p;h++){const t=e[h]=l?lr(e[h]):cr(e[h]);null!=t.key&&m.set(t.key,h)}let v,b=0;const w=p-g+1;let _=!1,x=0;const T=new Array(w);for(h=0;h<w;h++)T[h]=0;for(h=f;h<=d;h++){const i=t[h];if(b>=w){q(i,s,o,!0);continue}let r;if(null!=i.key)r=m.get(i.key);else for(v=g;v<=p;v++)if(0===T[v-g]&&Yi(i,e[v])){r=v;break}void 0===r?q(i,s,o,!0):(T[r-g]=h+1,r>=x?x=r:_=!0,y(i,e[r],n,null,s,o,a,c,l),b++)}const S=_?yi(T):i["a"];for(v=S.length-1,h=w-1;h>=0;h--){const t=g+h,i=e[t],d=t+1<u?e[t+1].el:r;0===T[h]?y(null,i,n,d,s,o,a,c,l):_&&(v<0||h!==S[v]?z(i,n,d,2):v--)}}},z=(t,e,n,i,s=null)=>{const{el:o,type:a,transition:c,children:l,shapeFlag:h}=t;if(6&h)return void z(t.component.subTree,e,n,i);if(128&h)return void t.suspense.move(e,n,i);if(64&h)return void a.move(t,e,n,X);if(a===Ri){r(o,e,n);for(let t=0;t<l.length;t++)z(l[t],e,n,i);return void r(t.anchor,e,n)}if(a===Li)return void _(t,e,n);const u=2!==i&&1&h&&c;if(u)if(0===i)c.beforeEnter(o),r(o,e,n),hi(()=>c.enter(o),s);else{const{leave:t,delayLeave:i,afterLeave:s}=c,a=()=>r(o,e,n),l=()=>{t(o,()=>{a(),s&&s()})};i?i(o,a,l):l()}else r(o,e,n)},q=(t,e,n,i=!1,r=!1)=>{const{type:s,props:o,ref:a,children:c,dynamicChildren:l,shapeFlag:h,patchFlag:u,dirs:d}=t;if(null!=a&&fi(a,null,n,t,!0),256&h)return void e.ctx.deactivate(t);const p=1&h&&d,f=!Je(t);let g;if(f&&(g=o&&o.onVnodeBeforeUnmount)&&gi(g,e,t),6&h)G(t.component,n,i);else{if(128&h)return void t.suspense.unmount(n,i);p&&ei(t,null,e,"beforeUnmount"),64&h?t.type.remove(t,e,n,r,X,i):l&&(s!==Ri||u>0&&64&u)?K(l,e,n,!1,!0):(s===Ri&&384&u||!r&&16&h)&&K(c,e,n),i&&W(t)}(f&&(g=o&&o.onVnodeUnmounted)||p)&&hi(()=>{g&&gi(g,e,t),p&&ei(t,null,e,"unmounted")},n)},W=t=>{const{type:e,el:n,anchor:i,transition:r}=t;if(e===Ri)return void H(n,i);if(e===Li)return void x(t);const o=()=>{s(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&t.shapeFlag&&r&&!r.persisted){const{leave:e,delayLeave:i}=r,s=()=>e(n,o);i?i(t.el,o,s):s()}else o()},H=(t,e)=>{let n;while(t!==e)n=p(t),s(t),t=n;s(e)},G=(t,e,n)=>{const{bum:r,scope:s,update:o,subTree:a,um:c}=t;r&&Object(i["n"])(r),s.stop(),o&&(o.active=!1,q(a,t,e,n)),c&&hi(c,e),hi(()=>{t.isUnmounted=!0},e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},K=(t,e,n,i=!1,r=!1,s=0)=>{for(let o=s;o<t.length;o++)q(t[o],e,n,i,r)},$=t=>6&t.shapeFlag?$(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),Y=(t,e,n)=>{null==t?e._vnode&&q(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,n),Cs(),e._vnode=t},X={p:y,um:q,m:z,r:W,mt:M,mc:O,pc:U,pbc:E,n:$,o:t};let Q,J;return e&&([Q,J]=e(X)),{render:Y,hydrate:Q,createApp:ri(Y,Q)}}function fi(t,e,n,r,s=!1){if(Object(i["o"])(t))return void t.forEach((t,o)=>fi(t,e&&(Object(i["o"])(e)?e[o]:e),n,r,s));if(Je(r)&&!s)return;const o=4&r.shapeFlag?Br(r.component)||r.component.proxy:r.el,a=s?null:o,{i:c,r:l}=t;const h=e&&e.r,u=c.refs===i["b"]?c.refs={}:c.refs,d=c.setupState;if(null!=h&&h!==l&&(Object(i["D"])(h)?(u[h]=null,Object(i["k"])(d,h)&&(d[h]=null)):Ht(h)&&(h.value=null)),Object(i["D"])(l)){const t=()=>{u[l]=a,Object(i["k"])(d,l)&&(d[l]=a)};a?(t.id=-1,hi(t,n)):t()}else if(Ht(l)){const t=()=>{l.value=a};a?(t.id=-1,hi(t,n)):t()}else Object(i["p"])(l)&&Zr(l,c,12,[a,u])}function gi(t,e,n,i=null){ts(t,e,7,[n,i])}function mi(t,e,n=!1){const r=t.children,s=e.children;if(Object(i["o"])(r)&&Object(i["o"])(s))for(let i=0;i<r.length;i++){const t=r[i];let e=s[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=s[i]=lr(s[i]),e.el=t.el),n||mi(t,e))}}function yi(t){const e=t.slice(),n=[0];let i,r,s,o,a;const c=t.length;for(i=0;i<c;i++){const c=t[i];if(0!==c){if(r=n[n.length-1],t[r]<c){e[i]=r,n.push(i);continue}s=0,o=n.length-1;while(s<o)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[i]=n[s-1]),n[s]=i)}}s=n.length,o=n[s-1];while(s-- >0)n[s]=o,o=e[o];return n}const vi=t=>t.__isTeleport,bi=t=>t&&(t.disabled||""===t.disabled),wi=t=>"undefined"!==typeof SVGElement&&t instanceof SVGElement,_i=(t,e)=>{const n=t&&t.to;if(Object(i["D"])(n)){if(e){const t=e(n);return t}return null}return n},xi={__isTeleport:!0,process(t,e,n,i,r,s,o,a,c,l){const{mc:h,pc:u,pbc:d,o:{insert:p,querySelector:f,createText:g,createComment:m}}=l,y=bi(e.props);let{shapeFlag:v,children:b,dynamicChildren:w}=e;if(null==t){const t=e.el=g(""),l=e.anchor=g("");p(t,n,i),p(l,n,i);const u=e.target=_i(e.props,f),d=e.targetAnchor=g("");u&&(p(d,u),o=o||wi(u));const m=(t,e)=>{16&v&&h(b,t,e,r,s,o,a,c)};y?m(n,l):u&&m(u,d)}else{e.el=t.el;const i=e.anchor=t.anchor,h=e.target=t.target,p=e.targetAnchor=t.targetAnchor,g=bi(t.props),m=g?n:h,v=g?i:p;if(o=o||wi(h),w?(d(t.dynamicChildren,w,m,r,s,o,a),mi(t,e,!0)):c||u(t,e,m,v,r,s,o,a,!1),y)g||Ti(e,n,i,l,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=_i(e.props,f);t&&Ti(e,t,null,l,0)}else g&&Ti(e,h,p,l,1)}},remove(t,e,n,i,{um:r,o:{remove:s}},o){const{shapeFlag:a,children:c,anchor:l,targetAnchor:h,target:u,props:d}=t;if(u&&s(h),(o||!bi(d))&&(s(l),16&a))for(let p=0;p<c.length;p++){const t=c[p];r(t,e,n,!0,!!t.dynamicChildren)}},move:Ti,hydrate:Si};function Ti(t,e,n,{o:{insert:i},m:r},s=2){0===s&&i(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:c,children:l,props:h}=t,u=2===s;if(u&&i(o,e,n),(!u||bi(h))&&16&c)for(let d=0;d<l.length;d++)r(l[d],e,n,2);u&&i(a,e,n)}function Si(t,e,n,i,r,s,{o:{nextSibling:o,parentNode:a,querySelector:c}},l){const h=e.target=_i(e.props,c);if(h){const c=h._lpa||h.firstChild;16&e.shapeFlag&&(bi(e.props)?(e.anchor=l(o(t),e,a(t),n,i,r,s),e.targetAnchor=c):(e.anchor=o(t),e.targetAnchor=l(c,e,h,n,i,r,s)),h._lpa=e.targetAnchor&&o(e.targetAnchor))}return e.anchor&&o(e.anchor)}const Ci=xi,ki="components",Oi="directives";function Ii(t,e){return Ni(ki,t,!0,e)||t}const Ei=Symbol();function Ai(t){return Object(i["D"])(t)?Ni(ki,t,!1)||t:t||Ei}function Pi(t){return Ni(Oi,t)}function Ni(t,e,n=!0,r=!1){const s=pe||Sr;if(s){const n=s.type;if(t===ki){const t=qr(n);if(t&&(t===e||t===Object(i["e"])(e)||t===Object(i["f"])(Object(i["e"])(e))))return n}const o=ji(s[t]||n[t],e)||ji(s.appContext[t],e);return!o&&r?n:o}}function ji(t,e){return t&&(t[e]||t[Object(i["e"])(e)]||t[Object(i["f"])(Object(i["e"])(e))])}const Ri=Symbol(void 0),Mi=Symbol(void 0),Di=Symbol(void 0),Li=Symbol(void 0),Fi=[];let Ui=null;function Bi(t=!1){Fi.push(Ui=t?null:[])}function Vi(){Fi.pop(),Ui=Fi[Fi.length-1]||null}let zi,qi=1;function Wi(t){qi+=t}function Hi(t){return t.dynamicChildren=qi>0?Ui||i["a"]:null,Vi(),qi>0&&Ui&&Ui.push(t),t}function Gi(t,e,n,i,r,s){return Hi(tr(t,e,n,i,r,s,!0))}function Ki(t,e,n,i,r){return Hi(er(t,e,n,i,r,!0))}function $i(t){return!!t&&!0===t.__v_isVNode}function Yi(t,e){return t.type===e.type&&t.key===e.key}function Xi(t){zi=t}const Qi="__vInternal",Ji=({key:t})=>null!=t?t:null,Zi=({ref:t})=>null!=t?Object(i["D"])(t)||Ht(t)||Object(i["p"])(t)?{i:pe,r:t}:t:null;function tr(t,e=null,n=null,r=0,s=null,o=(t===Ri?0:1),a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ji(e),ref:e&&Zi(e),scopeId:fe,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return c?(hr(l,n),128&o&&t.normalize(l)):n&&(l.shapeFlag|=Object(i["D"])(n)?8:16),qi>0&&!a&&Ui&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&Ui.push(l),l}const er=nr;function nr(t,e=null,n=null,r=0,s=null,o=!1){if(t&&t!==Ei||(t=Di),$i(t)){const i=rr(t,e,!0);return n&&hr(i,n),i}if(Hr(t)&&(t=t.__vccOpts),e){e=ir(e);let{class:t,style:n}=e;t&&!Object(i["D"])(t)&&(e.class=Object(i["I"])(t)),Object(i["v"])(n)&&(Ft(n)&&!Object(i["o"])(n)&&(n=Object(i["h"])({},n)),e.style=Object(i["K"])(n))}const a=Object(i["D"])(t)?1:Oe(t)?128:vi(t)?64:Object(i["v"])(t)?4:Object(i["p"])(t)?2:0;return tr(t,e,n,r,s,a,o,!0)}function ir(t){return t?Ft(t)||Qi in t?Object(i["h"])({},t):t:null}function rr(t,e,n=!1){const{props:r,ref:s,patchFlag:o,children:a}=t,c=e?ur(r||{},e):r,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Ji(c),ref:e&&e.ref?n&&s?Object(i["o"])(s)?s.concat(Zi(e)):[s,Zi(e)]:Zi(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ri?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&rr(t.ssContent),ssFallback:t.ssFallback&&rr(t.ssFallback),el:t.el,anchor:t.anchor};return l}function sr(t=" ",e=0){return er(Mi,null,t,e)}function or(t,e){const n=er(Li,null,t);return n.staticCount=e,n}function ar(t="",e=!1){return e?(Bi(),Ki(Di,null,t)):er(Di,null,t)}function cr(t){return null==t||"boolean"===typeof t?er(Di):Object(i["o"])(t)?er(Ri,null,t.slice()):"object"===typeof t?lr(t):er(Mi,null,String(t))}function lr(t){return null===t.el||t.memo?t:rr(t)}function hr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(Object(i["o"])(e))n=16;else if("object"===typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),hr(t,n()),n._c&&(n._d=!0)))}{n=32;const i=e._;i||Qi in e?3===i&&pe&&(1===pe.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=pe}}else Object(i["p"])(e)?(e={default:e,_ctx:pe},n=32):(e=String(e),64&r?(n=16,e=[sr(e)]):n=8);t.children=e,t.shapeFlag|=n}function ur(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=Object(i["I"])([e.class,r.class]));else if("style"===t)e.style=Object(i["K"])([e.style,r.style]);else if(Object(i["w"])(t)){const n=e[t],i=r[t];n!==i&&(e[t]=n?[].concat(n,i):i)}else""!==t&&(e[t]=r[t])}return e}function dr(t,e,n,r){let s;const o=n&&n[r];if(Object(i["o"])(t)||Object(i["D"])(t)){s=new Array(t.length);for(let n=0,i=t.length;n<i;n++)s[n]=e(t[n],n,void 0,o&&o[n])}else if("number"===typeof t){0,s=new Array(t);for(let n=0;n<t;n++)s[n]=e(n+1,n,void 0,o&&o[n])}else if(Object(i["v"])(t))if(t[Symbol.iterator])s=Array.from(t,(t,n)=>e(t,n,void 0,o&&o[n]));else{const n=Object.keys(t);s=new Array(n.length);for(let i=0,r=n.length;i<r;i++){const r=n[i];s[i]=e(t[r],r,i,o&&o[i])}}else s=[];return n&&(n[r]=s),s}function pr(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Object(i["o"])(r))for(let e=0;e<r.length;e++)t[r[e].name]=r[e].fn;else r&&(t[r.name]=r.fn)}return t}function fr(t,e,n={},i,r){if(pe.isCE)return er("slot","default"===e?null:{name:e},i&&i());let s=t[e];s&&s._c&&(s._d=!1),Bi();const o=s&&gr(s(n)),a=Ki(Ri,{key:n.key||"_"+e},o||(i?i():[]),o&&1===t._?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function gr(t){return t.some(t=>!$i(t)||t.type!==Di&&!(t.type===Ri&&!gr(t.children)))?t:null}function mr(t){const e={};for(const n in t)e[Object(i["N"])(n)]=t[n];return e}const yr=t=>t?Ir(t)?Br(t)||t.proxy:yr(t.parent):null,vr=Object(i["h"])(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>yr(t.parent),$root:t=>yr(t.root),$emit:t=>t.emit,$options:t=>En(t),$forceUpdate:t=>()=>vs(t.update),$nextTick:t=>ms.bind(t.proxy),$watch:t=>Rs.bind(t)}),br={get({_:t},e){const{ctx:n,setupState:r,data:s,props:o,accessCache:a,type:c,appContext:l}=t;let h;if("$"!==e[0]){const c=a[e];if(void 0!==c)switch(c){case 0:return r[e];case 1:return s[e];case 3:return n[e];case 2:return o[e]}else{if(r!==i["b"]&&Object(i["k"])(r,e))return a[e]=0,r[e];if(s!==i["b"]&&Object(i["k"])(s,e))return a[e]=1,s[e];if((h=t.propsOptions[0])&&Object(i["k"])(h,e))return a[e]=2,o[e];if(n!==i["b"]&&Object(i["k"])(n,e))return a[e]=3,n[e];Sn&&(a[e]=4)}}const u=vr[e];let d,p;return u?("$attrs"===e&&j(t,"get",e),u(t)):(d=c.__cssModules)&&(d=d[e])?d:n!==i["b"]&&Object(i["k"])(n,e)?(a[e]=3,n[e]):(p=l.config.globalProperties,Object(i["k"])(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:s,ctx:o}=t;if(s!==i["b"]&&Object(i["k"])(s,e))s[e]=n;else if(r!==i["b"]&&Object(i["k"])(r,e))r[e]=n;else if(Object(i["k"])(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:o}},a){let c;return void 0!==n[a]||t!==i["b"]&&Object(i["k"])(t,a)||e!==i["b"]&&Object(i["k"])(e,a)||(c=o[0])&&Object(i["k"])(c,a)||Object(i["k"])(r,a)||Object(i["k"])(vr,a)||Object(i["k"])(s.config.globalProperties,a)}};const wr=Object(i["h"])({},br,{get(t,e){if(e!==Symbol.unscopables)return br.get(t,e,t)},has(t,e){const n="_"!==e[0]&&!Object(i["q"])(e);return n}});const _r=ni();let xr=0;function Tr(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||_r,a={uid:xr++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,update:null,scope:new o(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zn(r,s),emitsOptions:ue(r,s),emit:null,emitted:null,propsDefaults:i["b"],inheritAttrs:r.inheritAttrs,ctx:i["b"],data:i["b"],props:i["b"],attrs:i["b"],slots:i["b"],refs:i["b"],setupState:i["b"],setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=he.bind(null,a),t.ce&&t.ce(a),a}let Sr=null;const Cr=()=>Sr||pe,kr=t=>{Sr=t,t.scope.on()},Or=()=>{Sr&&Sr.scope.off(),Sr=null};function Ir(t){return 4&t.vnode.shapeFlag}let Er,Ar,Pr=!1;function Nr(t,e=!1){Pr=e;const{props:n,children:i}=t.vnode,r=Ir(t);Fn(t,n,r,e),Jn(t,i);const s=r?jr(t,e):void 0;return Pr=!1,s}function jr(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Bt(new Proxy(t.ctx,br));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?Ur(t):null;kr(t),A();const s=Zr(r,t,0,[t.props,n]);if(N(),Or(),Object(i["y"])(s)){if(s.then(Or,Or),e)return s.then(n=>{Rr(t,n,e)}).catch(e=>{es(e,t,0)});t.asyncDep=s}else Rr(t,s,e)}else Lr(t,e)}function Rr(t,e,n){Object(i["p"])(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Object(i["v"])(e)&&(t.setupState=Zt(e)),Lr(t,n)}function Mr(t){Er=t,Ar=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,wr))}}const Dr=()=>!Er;function Lr(t,e,n){const r=t.type;if(!t.render){if(!e&&Er&&!r.render){const e=r.template;if(e){0;const{isCustomElement:n,compilerOptions:s}=t.appContext.config,{delimiters:o,compilerOptions:a}=r,c=Object(i["h"])(Object(i["h"])({isCustomElement:n,delimiters:o},s),a);r.render=Er(e,c)}}t.render=r.render||i["d"],Ar&&Ar(t)}kr(t),A(),Cn(t),N(),Or()}function Fr(t){return new Proxy(t.attrs,{get(e,n){return j(t,"get","$attrs"),e[n]}})}function Ur(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=Fr(t))},slots:t.slots,emit:t.emit,expose:e}}function Br(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Zt(Bt(t.exposed)),{get(e,n){return n in e?e[n]:n in vr?vr[n](t):void 0}}))}const Vr=/(?:^|[-_])(\w)/g,zr=t=>t.replace(Vr,t=>t.toUpperCase()).replace(/[-_]/g,"");function qr(t){return Object(i["p"])(t)&&t.displayName||t.name}function Wr(t,e,n=!1){let i=qr(e);if(!i&&e.__file){const t=e.__file.match(/([^/\\]+)\.\w+$/);t&&(i=t[1])}if(!i&&t&&t.parent){const n=t=>{for(const n in t)if(t[n]===e)return n};i=n(t.components||t.parent.type.components)||n(t.appContext.components)}return i?zr(i):n?"App":"Anonymous"}function Hr(t){return Object(i["p"])(t)&&"__vccOpts"in t}const Gr=[];function Kr(t,...e){A();const n=Gr.length?Gr[Gr.length-1].component:null,i=n&&n.appContext.config.warnHandler,r=$r();if(i)Zr(i,n,11,[t+e.join(""),n&&n.proxy,r.map(({vnode:t})=>`at <${Wr(n,t.type)}>`).join("\n"),r]);else{const n=["[Vue warn]: "+t,...e];r.length&&n.push("\n",...Yr(r)),console.warn(...n)}N()}function $r(){let t=Gr[Gr.length-1];if(!t)return[];const e=[];while(t){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const i=t.component&&t.component.parent;t=i&&i.vnode}return e}function Yr(t){const e=[];return t.forEach((t,n)=>{e.push(...0===n?[]:["\n"],...Xr(t))}),e}function Xr({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",i=!!t.component&&null==t.component.parent,r=" at <"+Wr(t.component,t.type,i),s=">"+n;return t.props?[r,...Qr(t.props),s]:[r+s]}function Qr(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(n=>{e.push(...Jr(n,t[n]))}),n.length>3&&e.push(" ..."),e}function Jr(t,e,n){return Object(i["D"])(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):"number"===typeof e||"boolean"===typeof e||null==e?n?e:[`${t}=${e}`]:Ht(e)?(e=Jr(t,Ut(e.value),!0),n?e:[t+"=Ref<",e,">"]):Object(i["p"])(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=Ut(e),n?e:[t+"=",e])}function Zr(t,e,n,i){let r;try{r=i?t(...i):t()}catch(s){es(s,e,n)}return r}function ts(t,e,n,r){if(Object(i["p"])(t)){const s=Zr(t,e,n,r);return s&&Object(i["y"])(s)&&s.catch(t=>{es(t,e,n)}),s}const s=[];for(let i=0;i<t.length;i++)s.push(ts(t[i],e,n,r));return s}function es(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const r=e.proxy,s=n;while(i){const e=i.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,r,s))return;i=i.parent}const o=e.appContext.config.errorHandler;if(o)return void Zr(o,null,10,[t,r,s])}ns(t,n,r,i)}function ns(t,e,n,i=!0){console.error(t)}let is=!1,rs=!1;const ss=[];let os=0;const as=[];let cs=null,ls=0;const hs=[];let us=null,ds=0;const ps=Promise.resolve();let fs=null,gs=null;function ms(t){const e=fs||ps;return t?e.then(this?t.bind(this):t):e}function ys(t){let e=os+1,n=ss.length;while(e<n){const i=e+n>>>1,r=ks(ss[i]);r<t?e=i+1:n=i}return e}function vs(t){ss.length&&ss.includes(t,is&&t.allowRecurse?os+1:os)||t===gs||(null==t.id?ss.push(t):ss.splice(ys(t.id),0,t),bs())}function bs(){is||rs||(rs=!0,fs=ps.then(Os))}function ws(t){const e=ss.indexOf(t);e>os&&ss.splice(e,1)}function _s(t,e,n,r){Object(i["o"])(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),bs()}function xs(t){_s(t,cs,as,ls)}function Ts(t){_s(t,us,hs,ds)}function Ss(t,e=null){if(as.length){for(gs=e,cs=[...new Set(as)],as.length=0,ls=0;ls<cs.length;ls++)cs[ls]();cs=null,ls=0,gs=null,Ss(t,e)}}function Cs(t){if(hs.length){const t=[...new Set(hs)];if(hs.length=0,us)return void us.push(...t);for(us=t,us.sort((t,e)=>ks(t)-ks(e)),ds=0;ds<us.length;ds++)us[ds]();us=null,ds=0}}const ks=t=>null==t.id?1/0:t.id;function Os(t){rs=!1,is=!0,Ss(t),ss.sort((t,e)=>ks(t)-ks(e));i["d"];try{for(os=0;os<ss.length;os++){const t=ss[os];t&&!1!==t.active&&Zr(t,null,14)}}finally{os=0,ss.length=0,Cs(t),is=!1,fs=null,(ss.length||as.length||hs.length)&&Os(t)}}function Is(t,e){return js(t,null,e)}function Es(t,e){return js(t,null,{flush:"post"})}function As(t,e){return js(t,null,{flush:"sync"})}const Ps={};function Ns(t,e,n){return js(t,e,n)}function js(t,e,{immediate:n,deep:r,flush:s,onTrack:o,onTrigger:a}=i["b"]){const c=Sr;let l,h,u=!1,d=!1;if(Ht(t)?(l=()=>t.value,u=!!t._shallow):Dt(t)?(l=()=>t,r=!0):Object(i["o"])(t)?(d=!0,u=t.some(Dt),l=()=>t.map(t=>Ht(t)?t.value:Dt(t)?Ds(t):Object(i["p"])(t)?Zr(t,c,2):void 0)):l=Object(i["p"])(t)?e?()=>Zr(t,c,2):()=>{if(!c||!c.isUnmounted)return h&&h(),ts(t,c,3,[p])}:i["d"],e&&r){const t=l;l=()=>Ds(t())}let p=t=>{h=y.onStop=()=>{Zr(t,c,4)}};if(Pr)return p=i["d"],e?n&&ts(e,c,3,[l(),d?[]:void 0,p]):l(),i["d"];let f=d?[]:Ps;const g=()=>{if(y.active)if(e){const t=y.run();(r||u||(d?t.some((t,e)=>Object(i["j"])(t,f[e])):Object(i["j"])(t,f)))&&(h&&h(),ts(e,c,3,[t,f===Ps?void 0:f,p]),f=t)}else y.run()};let m;g.allowRecurse=!!e,m="sync"===s?g:"post"===s?()=>hi(g,c&&c.suspense):()=>{!c||c.isMounted?xs(g):g()};const y=new S(l,m);return e?n?g():f=y.run():"post"===s?hi(y.run.bind(y),c&&c.suspense):y.run(),()=>{y.stop(),c&&c.scope&&Object(i["L"])(c.scope.effects,y)}}function Rs(t,e,n){const r=this.proxy,s=Object(i["D"])(t)?t.includes(".")?Ms(r,t):()=>r[t]:t.bind(r,r);let o;Object(i["p"])(e)?o=e:(o=e.handler,n=e);const a=Sr;kr(this);const c=js(s,o.bind(r),n);return a?kr(a):Or(),c}function Ms(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Ds(t,e){if(!Object(i["v"])(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),Ht(t))Ds(t.value,e);else if(Object(i["o"])(t))for(let n=0;n<t.length;n++)Ds(t[n],e);else if(Object(i["B"])(t)||Object(i["t"])(t))t.forEach(t=>{Ds(t,e)});else if(Object(i["x"])(t))for(const n in t)Ds(t[n],e);return t}const Ls=t=>"function"===typeof t,Fs=t=>null!==t&&"object"===typeof t,Us=t=>Fs(t)&&Ls(t.then)&&Ls(t.catch);function Bs(){return null}function Vs(){return null}function zs(t){0}function qs(t,e){return null}function Ws(){return Gs().slots}function Hs(){return Gs().attrs}function Gs(){const t=Cr();return t.setupContext||(t.setupContext=Ur(t))}function Ks(t,e){for(const n in e){const i=t[n];i?i.default=e[n]:null===i&&(t[n]={default:e[n]})}return t}function $s(t){const e=Cr();let n=t();return Or(),Us(n)&&(n=n.catch(t=>{throw kr(e),t})),[n,()=>kr(e)]}function Ys(t,e,n){const r=arguments.length;return 2===r?Object(i["v"])(e)&&!Object(i["o"])(e)?$i(e)?er(t,null,[e]):er(t,e):er(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&$i(n)&&(n=[n]),er(t,e,n))}const Xs=Symbol(""),Qs=()=>{{const t=Be(Xs);return t||Kr("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),t}};function Js(){return void 0}function Zs(t,e,n,i){const r=n[i];if(r&&to(r,t))return r;const s=e();return s.memo=t.slice(),n[i]=s}function to(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==e[i])return!1;return qi>0&&Ui&&Ui.push(t),!0}const eo="3.2.19",no={createComponentInstance:Tr,setupComponent:Nr,renderComponentRoot:we,setCurrentRenderingInstance:ge,isVNode:$i,normalizeVNode:cr},io=no,ro=null,so=null,oo="http://www.w3.org/2000/svg",ao="undefined"!==typeof document?document:null,co=new Map,lo={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?ao.createElementNS(oo,t):ao.createElement(t,n?{is:n}:void 0);return"select"===t&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:t=>ao.createTextNode(t),createComment:t=>ao.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ao.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,i){const r=n?n.previousSibling:e.lastChild;let s=co.get(t);if(!s){const e=ao.createElement("template");if(e.innerHTML=i?`<svg>${t}</svg>`:t,s=e.content,i){const t=s.firstChild;while(t.firstChild)s.appendChild(t.firstChild);s.removeChild(t)}co.set(t,s)}return e.insertBefore(s.cloneNode(!0),n),[r?r.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function ho(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function uo(t,e,n){const r=t.style,s=r.display;if(n)if(Object(i["D"])(n))e!==n&&(r.cssText=n);else{for(const t in n)fo(r,t,n[t]);if(e&&!Object(i["D"])(e))for(const t in e)null==n[t]&&fo(r,t,"")}else t.removeAttribute("style");"_vod"in t&&(r.display=s)}const po=/\s*!important$/;function fo(t,e,n){if(Object(i["o"])(n))n.forEach(n=>fo(t,e,n));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=yo(t,e);po.test(n)?t.setProperty(Object(i["l"])(r),n.replace(po,""),"important"):t[r]=n}}const go=["Webkit","Moz","ms"],mo={};function yo(t,e){const n=mo[e];if(n)return n;let r=Object(i["e"])(e);if("filter"!==r&&r in t)return mo[e]=r;r=Object(i["f"])(r);for(let i=0;i<go.length;i++){const n=go[i]+r;if(n in t)return mo[e]=n}return e}const vo="http://www.w3.org/1999/xlink";function bo(t,e,n,r,s){if(r&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(vo,e.slice(6,e.length)):t.setAttributeNS(vo,e,n);else{const r=Object(i["C"])(e);null==n||r&&!Object(i["m"])(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function wo(t,e,n,r,s,o,a){if("innerHTML"===e||"textContent"===e)return r&&a(r,s,o),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName){t._value=n;const i=null==n?"":n;return t.value!==i&&(t.value=i),void(null==n&&t.removeAttribute(e))}if(""===n||null==n){const r=typeof t[e];if("boolean"===r)return void(t[e]=Object(i["m"])(n));if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r){try{t[e]=0}catch(c){}return void t.removeAttribute(e)}}try{t[e]=n}catch(l){0}}let _o=Date.now,xo=!1;if("undefined"!==typeof window){_o()>document.createEvent("Event").timeStamp&&(_o=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);xo=!!(t&&Number(t[1])<=53)}let To=0;const So=Promise.resolve(),Co=()=>{To=0},ko=()=>To||(So.then(Co),To=_o());function Oo(t,e,n,i){t.addEventListener(e,n,i)}function Io(t,e,n,i){t.removeEventListener(e,n,i)}function Eo(t,e,n,i,r=null){const s=t._vei||(t._vei={}),o=s[e];if(i&&o)o.value=i;else{const[n,a]=Po(e);if(i){const o=s[e]=No(i,r);Oo(t,n,o,a)}else o&&(Io(t,n,o,a),s[e]=void 0)}}const Ao=/(?:Once|Passive|Capture)$/;function Po(t){let e;if(Ao.test(t)){let n;e={};while(n=t.match(Ao))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[Object(i["l"])(t.slice(2)),e]}function No(t,e){const n=t=>{const i=t.timeStamp||_o();(xo||i>=n.attached-1)&&ts(jo(t,n.value),e,5,[t])};return n.value=t,n.attached=ko(),n}function jo(t,e){if(Object(i["o"])(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(t=>e=>!e._stopped&&t(e))}return e}const Ro=/^on[a-z]/,Mo=(t,e,n,r,s=!1,o,a,c,l)=>{"class"===e?ho(t,r,s):"style"===e?uo(t,n,r):Object(i["w"])(e)?Object(i["u"])(e)||Eo(t,e,n,r,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):Do(t,e,r,s))?wo(t,e,r,o,a,c,l):("true-value"===e?t._trueValue=r:"false-value"===e&&(t._falseValue=r),bo(t,e,r,s))};function Do(t,e,n,r){return r?"innerHTML"===e||"textContent"===e||!!(e in t&&Ro.test(e)&&Object(i["p"])(n)):"spellcheck"!==e&&"draggable"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!Ro.test(e)||!Object(i["D"])(n))&&e in t))))}function Lo(t,e){const n=Qe(t);class i extends Bo{constructor(t){super(n,t,e)}}return i.def=n,i}const Fo=t=>Lo(t,Ka),Uo="undefined"!==typeof HTMLElement?HTMLElement:class{};class Bo extends Uo{constructor(t,e={},n){super(),this._def=t,this._props=e,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"});for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);new MutationObserver(t=>{for(const e of t)this._setAttr(e.attributeName)}).observe(this,{attributes:!0})}connectedCallback(){this._connected=!0,this._instance||(this._resolveDef(),this._update())}disconnectedCallback(){this._connected=!1,ms(()=>{this._connected||(Ga(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;const t=t=>{this._resolved=!0;const{props:e,styles:n}=t,r=!Object(i["o"])(e),s=e?r?Object.keys(e):e:[];let o;if(r)for(const a in this._props){const t=e[a];(t===Number||t&&t.type===Number)&&(this._props[a]=Object(i["O"])(this._props[a]),(o||(o=Object.create(null)))[a]=!0)}o&&(this._numberProps=o,this._update());for(const i of Object.keys(this))"_"!==i[0]&&this._setProp(i,this[i]);for(const a of s.map(i["e"]))Object.defineProperty(this,a,{get(){return this._getProp(a)},set(t){this._setProp(a,t)}});this._applyStyles(n)},e=this._def.__asyncLoader;e?e().then(t):t(this._def)}_setAttr(t){let e=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(e=Object(i["O"])(e)),this._setProp(Object(i["e"])(t),e,!1)}_getProp(t){return this._props[t]}_setProp(t,e,n=!0){e!==this._props[t]&&(this._props[t]=e,this._instance&&this._update(),n&&(!0===e?this.setAttribute(Object(i["l"])(t),""):"string"===typeof e||"number"===typeof e?this.setAttribute(Object(i["l"])(t),e+""):e||this.removeAttribute(Object(i["l"])(t))))}_update(){Ga(this._createVNode(),this.shadowRoot)}_createVNode(){const t=er(this._def,Object(i["h"])({},this._props));return this._instance||(t.ce=t=>{this._instance=t,t.isCE=!0,t.emit=(t,...e)=>{this.dispatchEvent(new CustomEvent(t,{detail:e}))};let e=this;while(e=e&&(e.parentNode||e.host))if(e instanceof Bo){t.parent=e._instance;break}}),t}_applyStyles(t){t&&t.forEach(t=>{const e=document.createElement("style");e.textContent=t,this.shadowRoot.appendChild(e)})}}function Vo(t="$style"){{const e=Cr();if(!e)return i["b"];const n=e.type.__cssModules;if(!n)return i["b"];const r=n[t];return r||i["b"]}}function zo(t){const e=Cr();if(!e)return;const n=()=>qo(e.subTree,t(e.proxy));Es(n),gn(()=>{const t=new MutationObserver(n);t.observe(e.subTree.el.parentNode,{childList:!0}),bn(()=>t.disconnect())})}function qo(t,e){if(128&t.shapeFlag){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{qo(n.activeBranch,e)})}while(t.component)t=t.component.subTree;if(1&t.shapeFlag&&t.el)Wo(t.el,e);else if(t.type===Ri)t.children.forEach(t=>qo(t,e));else if(t.type===Li){let{el:n,anchor:i}=t;while(n){if(Wo(n,e),n===i)break;n=n.nextSibling}}}function Wo(t,e){if(1===t.nodeType){const n=t.style;for(const t in e)n.setProperty("--"+t,e[t])}}const Ho="transition",Go="animation",Ko=(t,{slots:e})=>Ys(We,Jo(t),e);Ko.displayName="Transition";const $o={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Yo=Ko.props=Object(i["h"])({},We.props,$o),Xo=(t,e=[])=>{Object(i["o"])(t)?t.forEach(t=>t(...e)):t&&t(...e)},Qo=t=>!!t&&(Object(i["o"])(t)?t.some(t=>t.length>1):t.length>1);function Jo(t){const e={};for(const i in t)i in $o||(e[i]=t[i]);if(!1===t.css)return e;const{name:n="v",type:r,duration:s,enterFromClass:o=n+"-enter-from",enterActiveClass:a=n+"-enter-active",enterToClass:c=n+"-enter-to",appearFromClass:l=o,appearActiveClass:h=a,appearToClass:u=c,leaveFromClass:d=n+"-leave-from",leaveActiveClass:p=n+"-leave-active",leaveToClass:f=n+"-leave-to"}=t,g=Zo(s),m=g&&g[0],y=g&&g[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:w,onLeave:_,onLeaveCancelled:x,onBeforeAppear:T=v,onAppear:S=b,onAppearCancelled:C=w}=e,k=(t,e,n)=>{na(t,e?u:c),na(t,e?h:a),n&&n()},O=(t,e)=>{na(t,f),na(t,p),e&&e()},I=t=>(e,n)=>{const i=t?S:b,s=()=>k(e,t,n);Xo(i,[e,s]),ia(()=>{na(e,t?l:o),ea(e,t?u:c),Qo(i)||sa(e,r,m,s)})};return Object(i["h"])(e,{onBeforeEnter(t){Xo(v,[t]),ea(t,o),ea(t,a)},onBeforeAppear(t){Xo(T,[t]),ea(t,l),ea(t,h)},onEnter:I(!1),onAppear:I(!0),onLeave(t,e){const n=()=>O(t,e);ea(t,d),la(),ea(t,p),ia(()=>{na(t,d),ea(t,f),Qo(_)||sa(t,r,y,n)}),Xo(_,[t,n])},onEnterCancelled(t){k(t,!1),Xo(w,[t])},onAppearCancelled(t){k(t,!0),Xo(C,[t])},onLeaveCancelled(t){O(t),Xo(x,[t])}})}function Zo(t){if(null==t)return null;if(Object(i["v"])(t))return[ta(t.enter),ta(t.leave)];{const e=ta(t);return[e,e]}}function ta(t){const e=Object(i["O"])(t);return e}function ea(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(e)}function na(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.remove(e));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function ia(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let ra=0;function sa(t,e,n,i){const r=t._endId=++ra,s=()=>{r===t._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:c}=oa(t,e);if(!o)return i();const l=o+"end";let h=0;const u=()=>{t.removeEventListener(l,d),s()},d=e=>{e.target===t&&++h>=c&&u()};setTimeout(()=>{h<c&&u()},a+1),t.addEventListener(l,d)}function oa(t,e){const n=window.getComputedStyle(t),i=t=>(n[t]||"").split(", "),r=i(Ho+"Delay"),s=i(Ho+"Duration"),o=aa(r,s),a=i(Go+"Delay"),c=i(Go+"Duration"),l=aa(a,c);let h=null,u=0,d=0;e===Ho?o>0&&(h=Ho,u=o,d=s.length):e===Go?l>0&&(h=Go,u=l,d=c.length):(u=Math.max(o,l),h=u>0?o>l?Ho:Go:null,d=h?h===Ho?s.length:c.length:0);const p=h===Ho&&/\b(transform|all)(,|$)/.test(n[Ho+"Property"]);return{type:h,timeout:u,propCount:d,hasTransform:p}}function aa(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map((e,n)=>ca(e)+ca(t[n])))}function ca(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function la(){return document.body.offsetHeight}const ha=new WeakMap,ua=new WeakMap,da={name:"TransitionGroup",props:Object(i["h"])({},Yo,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Cr(),i=Ve();let r,s;return yn(()=>{if(!r.length)return;const e=t.moveClass||(t.name||"v")+"-move";if(!ya(r[0].el,n.vnode.el,e))return;r.forEach(fa),r.forEach(ga);const i=r.filter(ma);la(),i.forEach(t=>{const n=t.el,i=n.style;ea(n,e),i.transform=i.webkitTransform=i.transitionDuration="";const r=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",r),n._moveCb=null,na(n,e))};n.addEventListener("transitionend",r)})}),()=>{const o=Ut(t),a=Jo(o);let c=o.tag||Ri;r=s,s=e.default?Xe(e.default()):[];for(let t=0;t<s.length;t++){const e=s[t];null!=e.key&&Ye(e,Ge(e,a,i,n))}if(r)for(let t=0;t<r.length;t++){const e=r[t];Ye(e,Ge(e,a,i,n)),ha.set(e,e.el.getBoundingClientRect())}return er(c,null,s)}}},pa=da;function fa(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function ga(t){ua.set(t,t.el.getBoundingClientRect())}function ma(t){const e=ha.get(t),n=ua.get(t),i=e.left-n.left,r=e.top-n.top;if(i||r){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${i}px,${r}px)`,e.transitionDuration="0s",t}}function ya(t,e,n){const i=t.cloneNode();t._vtc&&t._vtc.forEach(t=>{t.split(/\s+/).forEach(t=>t&&i.classList.remove(t))}),n.split(/\s+/).forEach(t=>t&&i.classList.add(t)),i.style.display="none";const r=1===e.nodeType?e:e.parentNode;r.appendChild(i);const{hasTransform:s}=oa(i);return r.removeChild(i),s}const va=t=>{const e=t.props["onUpdate:modelValue"];return Object(i["o"])(e)?t=>Object(i["n"])(e,t):e};function ba(t){t.target.composing=!0}function wa(t){const e=t.target;e.composing&&(e.composing=!1,_a(e,"input"))}function _a(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}const xa={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t._assign=va(s);const o=r||s.props&&"number"===s.props.type;Oo(t,e?"change":"input",e=>{if(e.target.composing)return;let r=t.value;n?r=r.trim():o&&(r=Object(i["O"])(r)),t._assign(r)}),n&&Oo(t,"change",()=>{t.value=t.value.trim()}),e||(Oo(t,"compositionstart",ba),Oo(t,"compositionend",wa),Oo(t,"change",wa))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},o){if(t._assign=va(o),t.composing)return;if(document.activeElement===t){if(n)return;if(r&&t.value.trim()===e)return;if((s||"number"===t.type)&&Object(i["O"])(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}},Ta={deep:!0,created(t,e,n){t._assign=va(n),Oo(t,"change",()=>{const e=t._modelValue,n=Ia(t),r=t.checked,s=t._assign;if(Object(i["o"])(e)){const t=Object(i["G"])(e,n),o=-1!==t;if(r&&!o)s(e.concat(n));else if(!r&&o){const n=[...e];n.splice(t,1),s(n)}}else if(Object(i["B"])(e)){const t=new Set(e);r?t.add(n):t.delete(n),s(t)}else s(Ea(t,r))})},mounted:Sa,beforeUpdate(t,e,n){t._assign=va(n),Sa(t,e,n)}};function Sa(t,{value:e,oldValue:n},r){t._modelValue=e,Object(i["o"])(e)?t.checked=Object(i["G"])(e,r.props.value)>-1:Object(i["B"])(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Object(i["F"])(e,Ea(t,!0)))}const Ca={created(t,{value:e},n){t.checked=Object(i["F"])(e,n.props.value),t._assign=va(n),Oo(t,"change",()=>{t._assign(Ia(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=va(r),e!==n&&(t.checked=Object(i["F"])(e,r.props.value))}},ka={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Object(i["B"])(e);Oo(t,"change",()=>{const e=Array.prototype.filter.call(t.options,t=>t.selected).map(t=>n?Object(i["O"])(Ia(t)):Ia(t));t._assign(t.multiple?s?new Set(e):e:e[0])}),t._assign=va(r)},mounted(t,{value:e}){Oa(t,e)},beforeUpdate(t,e,n){t._assign=va(n)},updated(t,{value:e}){Oa(t,e)}};function Oa(t,e){const n=t.multiple;if(!n||Object(i["o"])(e)||Object(i["B"])(e)){for(let r=0,s=t.options.length;r<s;r++){const s=t.options[r],o=Ia(s);if(n)Object(i["o"])(e)?s.selected=Object(i["G"])(e,o)>-1:s.selected=e.has(o);else if(Object(i["F"])(Ia(s),e))return void(t.selectedIndex!==r&&(t.selectedIndex=r))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function Ia(t){return"_value"in t?t._value:t.value}function Ea(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Aa={created(t,e,n){Pa(t,e,n,null,"created")},mounted(t,e,n){Pa(t,e,n,null,"mounted")},beforeUpdate(t,e,n,i){Pa(t,e,n,i,"beforeUpdate")},updated(t,e,n,i){Pa(t,e,n,i,"updated")}};function Pa(t,e,n,i,r){let s;switch(t.tagName){case"SELECT":s=ka;break;case"TEXTAREA":s=xa;break;default:switch(n.props&&n.props.type){case"checkbox":s=Ta;break;case"radio":s=Ca;break;default:s=xa}}const o=s[r];o&&o(t,e,n,i)}function Na(){xa.getSSRProps=({value:t})=>({value:t}),Ca.getSSRProps=({value:t},e)=>{if(e.props&&Object(i["F"])(e.props.value,t))return{checked:!0}},Ta.getSSRProps=({value:t},e)=>{if(Object(i["o"])(t)){if(e.props&&Object(i["G"])(t,e.props.value)>-1)return{checked:!0}}else if(Object(i["B"])(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}}}const ja=["ctrl","shift","alt","meta"],Ra={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>ja.some(n=>t[n+"Key"]&&!e.includes(n))},Ma=(t,e)=>(n,...i)=>{for(let t=0;t<e.length;t++){const i=Ra[e[t]];if(i&&i(n,e))return}return t(n,...i)},Da={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},La=(t,e)=>n=>{if(!("key"in n))return;const r=Object(i["l"])(n.key);return e.some(t=>t===r||Da[t]===r)?t(n):void 0},Fa={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):Ua(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!==!n&&(i?e?(i.beforeEnter(t),Ua(t,!0),i.enter(t)):i.leave(t,()=>{Ua(t,!1)}):Ua(t,e))},beforeUnmount(t,{value:e}){Ua(t,e)}};function Ua(t,e){t.style.display=e?t._vod:"none"}function Ba(){Fa.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const Va=Object(i["h"])({patchProp:Mo},lo);let za,qa=!1;function Wa(){return za||(za=ui(Va))}function Ha(){return za=qa?za:di(Va),qa=!0,za}const Ga=(...t)=>{Wa().render(...t)},Ka=(...t)=>{Ha().hydrate(...t)},$a=(...t)=>{const e=Wa().createApp(...t);const{mount:n}=e;return e.mount=t=>{const r=Xa(t);if(!r)return;const s=e._component;Object(i["p"])(s)||s.render||s.template||(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e},Ya=(...t)=>{const e=Ha().createApp(...t);const{mount:n}=e;return e.mount=t=>{const e=Xa(t);if(e)return n(e,!0,e instanceof SVGElement)},e};function Xa(t){if(Object(i["D"])(t)){const e=document.querySelector(t);return e}return t}let Qa=!1;const Ja=()=>{Qa||(Qa=!0,Na(),Ba())};const Za=()=>{0}},"7b0b":function(t,e,n){var i=n("1d80");t.exports=function(t){return Object(i(t))}},"7c73":function(t,e,n){var i,r=n("825a"),s=n("37e8"),o=n("7839"),a=n("d012"),c=n("1be4"),l=n("cc12"),h=n("f772"),u=">",d="<",p="prototype",f="script",g=h("IE_PROTO"),m=function(){},y=function(t){return d+f+u+t+d+"/"+f+u},v=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=l("iframe"),n="java"+f+":";return e.style.display="none",c.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},w=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}w="undefined"!=typeof document?document.domain&&i?v(i):b():v(i);var t=o.length;while(t--)delete w[p][o[t]];return w()};a[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(m[p]=r(t),n=new m,m[p]=null,n[g]=t):n=w(),void 0===e?n:s(n,e)}},"7dd0":function(t,e,n){"use strict";var i=n("23e7"),r=n("c430"),s=n("5e77"),o=n("1626"),a=n("9ed3"),c=n("e163"),l=n("d2bb"),h=n("d44e"),u=n("9112"),d=n("6eeb"),p=n("b622"),f=n("3f8c"),g=n("ae93"),m=s.PROPER,y=s.CONFIGURABLE,v=g.IteratorPrototype,b=g.BUGGY_SAFARI_ITERATORS,w=p("iterator"),_="keys",x="values",T="entries",S=function(){return this};t.exports=function(t,e,n,s,p,g,C){a(n,e,s);var k,O,I,E=function(t){if(t===p&&R)return R;if(!b&&t in N)return N[t];switch(t){case _:return function(){return new n(this,t)};case x:return function(){return new n(this,t)};case T:return function(){return new n(this,t)}}return function(){return new n(this)}},A=e+" Iterator",P=!1,N=t.prototype,j=N[w]||N["@@iterator"]||p&&N[p],R=!b&&j||E(p),M="Array"==e&&N.entries||j;if(M&&(k=c(M.call(new t)),k!==Object.prototype&&k.next&&(r||c(k)===v||(l?l(k,v):o(k[w])||d(k,w,S)),h(k,A,!0,!0),r&&(f[A]=S))),m&&p==x&&j&&j.name!==x&&(!r&&y?u(N,"name",x):(P=!0,R=function(){return j.call(this)})),p)if(O={values:E(x),keys:g?R:E(_),entries:E(T)},C)for(I in O)(b||P||!(I in N))&&d(N,I,O[I]);else i({target:e,proto:!0,forced:b||P},O);return r&&!C||N[w]===R||d(N,w,R,{name:p}),f[e]=R,O}},"7f9a":function(t,e,n){var i=n("da84"),r=n("1626"),s=n("8925"),o=i.WeakMap;t.exports=r(o)&&/native code/.test(s(o))},"825a":function(t,e,n){var i=n("861d");t.exports=function(t){if(i(t))return t;throw TypeError(String(t)+" is not an object")}},"83ab":function(t,e,n){var i=n("d039");t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(t,e,n){"use strict";var i=n("a04b"),r=n("9bf2"),s=n("5c6c");t.exports=function(t,e,n){var o=i(e);o in t?r.f(t,o,s(0,n)):t[o]=n}},"861d":function(t,e,n){var i=n("1626");t.exports=function(t){return"object"===typeof t?null!==t:i(t)}},8925:function(t,e,n){var i=n("1626"),r=n("c6cd"),s=Function.toString;i(r.inspectSource)||(r.inspectSource=function(t){return s.call(t)}),t.exports=r.inspectSource},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},"8f6b":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Ii})),n.d(e,"b",(function(){return Ai})),n.d(e,"c",(function(){return Ei})),n.d(e,"d",(function(){return Ni})),n.d(e,"e",(function(){return Pi})),n.d(e,"f",(function(){return ji})),n.d(e,"g",(function(){return Ri})),n.d(e,"h",(function(){return ki})),n.d(e,"i",(function(){return Oi}));var i,r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},s={},o=o||{},a=r||self;function c(){}function l(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function u(t){return Object.prototype.hasOwnProperty.call(t,d)&&t[d]||(t[d]=++p)}var d="closure_uid_"+(1e9*Math.random()>>>0),p=0;function f(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function m(t,e,n){return m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:g,m.apply(null,arguments)}function y(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function v(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function b(){this.s=this.s,this.o=this.o}var w=0,_={};b.prototype.s=!1,b.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0!=w)){var t=u(this);delete _[t]}},b.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const x=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const i=t.length,r="string"===typeof t?t.split(""):t;for(let s=0;s<i;s++)s in r&&e.call(n,r[s],s,t)};function S(t){t:{var e=zn;const n=t.length,i="string"===typeof t?t.split(""):t;for(let r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function C(t){return Array.prototype.concat.apply([],arguments)}function k(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function O(t){return/^[\s\xa0]*$/.test(t)}var I,E=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function A(t,e){return-1!=t.indexOf(e)}function P(t,e){return t<e?-1:t>e?1:0}t:{var N=a.navigator;if(N){var j=N.userAgent;if(j){I=j;break t}}I=""}function R(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function M(t){const e={};for(const n in t)e[n]=t[n];return e}var D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<D.length;e++)n=D[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function F(t){return F[" "](t),t}function U(t){var e=J;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}F[" "]=c;var B,V=A(I,"Opera"),z=A(I,"Trident")||A(I,"MSIE"),q=A(I,"Edge"),W=q||z,H=A(I,"Gecko")&&!(A(I.toLowerCase(),"webkit")&&!A(I,"Edge"))&&!(A(I,"Trident")||A(I,"MSIE"))&&!A(I,"Edge"),G=A(I.toLowerCase(),"webkit")&&!A(I,"Edge");function K(){var t=a.document;return t?t.documentMode:void 0}t:{var $="",Y=function(){var t=I;return H?/rv:([^\);]+)(\)|;)/.exec(t):q?/Edge\/([\d\.]+)/.exec(t):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):G?/WebKit\/(\S+)/.exec(t):V?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Y&&($=Y?Y[1]:""),z){var X=K();if(null!=X&&X>parseFloat($)){B=String(X);break t}}B=$}var Q,J={};function Z(){return U((function(){let t=0;const e=E(String(B)).split("."),n=E("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;t=P(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||P(0==r[2].length,0==s[2].length)||P(r[2],s[2]),r=r[3],s=s[3]}while(0==t)}return 0<=t}))}if(a.document&&z){var tt=K();Q=tt||(parseInt(B,10)||void 0)}else Q=void 0;var et=Q,nt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",c,e),a.removeEventListener("test",c,e)}catch(n){}return t}();function it(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function rt(t,e){if(it.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(H){t:{try{F(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:st[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&rt.Z.h.call(this)}}it.prototype.h=function(){this.defaultPrevented=!0},v(rt,it);var st={2:"touch",3:"pen",4:"mouse"};rt.prototype.h=function(){rt.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),at=0;function ct(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ia=r,this.key=++at,this.ca=this.fa=!1}function lt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ht(t){this.src=t,this.g={},this.h=0}function ut(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=x(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(lt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function dt(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==i)return r}return-1}ht.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=dt(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new ct(e,this.src,s,!!i,r),e.fa=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),ft={};function gt(t,e,n,i,r){if(i&&i.once)return vt(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)gt(t,e[s],n,i,r);return null}return n=Ct(n),t&&t[ot]?t.N(e,n,h(i)?!!i.capture:!!i,r):mt(t,e,n,!1,i,r)}function mt(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=h(r)?!!r.capture:!!r,a=Tt(t);if(a||(t[pt]=a=new ht(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=yt(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)nt||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(_t(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function yt(){function t(n){return e.call(t.src,t.listener,n)}var e=xt;return t}function vt(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)vt(t,e[s],n,i,r);return null}return n=Ct(n),t&&t[ot]?t.O(e,n,h(i)?!!i.capture:!!i,r):mt(t,e,n,!0,i,r)}function bt(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)bt(t,e[s],n,i,r);else i=h(i)?!!i.capture:!!i,n=Ct(n),t&&t[ot]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=dt(s,n,i,r),-1<n&&(lt(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=Tt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dt(e,n,i,r)),(n=-1<t?e[t]:null)&&wt(n))}function wt(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ot])ut(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(_t(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Tt(e))?(ut(n,t),0==n.h&&(n.src=null,e[pt]=null)):lt(t)}}}function _t(t){return t in ft?ft[t]:ft[t]="on"+t}function xt(t,e){if(t.ca)t=!0;else{e=new rt(e,this);var n=t.listener,i=t.ia||t.src;t.fa&&wt(t),t=n.call(i,e)}return t}function Tt(t){return t=t[pt],t instanceof ht?t:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(t){return"function"===typeof t?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function kt(){b.call(this),this.i=new ht(this),this.P=this,this.I=null}function Ot(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"===typeof e)e=new it(e,t);else if(e instanceof it)e.target=e.target||t;else{var r=e;e=new it(i,t),L(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=It(o,i,!0,e)&&r}if(o=e.g=t,r=It(o,i,!0,e)&&r,r=It(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=It(o,i,!1,e)&&r}function It(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&ut(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}v(kt,b),kt.prototype[ot]=!0,kt.prototype.removeEventListener=function(t,e,n,i){bt(this,t,e,n,i)},kt.prototype.M=function(){if(kt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)lt(n[i]);delete e.g[t],e.h--}}this.I=null},kt.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},kt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Et=a.JSON.stringify;function At(){var t=Ut;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Pt{constructor(){this.h=this.g=null}add(t,e){const n=jt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}var Nt,jt=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Rt,t=>t.reset());class Rt{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Mt(t){a.setTimeout(()=>{throw t},0)}function Dt(t,e){Nt||Lt(),Ft||(Nt(),Ft=!0),Ut.add(t,e)}function Lt(){var t=a.Promise.resolve(void 0);Nt=function(){t.then(Bt)}}var Ft=!1,Ut=new Pt;function Bt(){for(var t;t=At();){try{t.h.call(t.g)}catch(n){Mt(n)}var e=jt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ft=!1}function Vt(t,e){kt.call(this),this.h=t||1,this.g=e||a,this.j=m(this.kb,this),this.l=Date.now()}function zt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function qt(t,e,n){if("function"===typeof t)n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Wt(t){t.g=qt(()=>{t.g=null,t.i&&(t.i=!1,Wt(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}v(Vt,kt),i=Vt.prototype,i.da=!1,i.S=null,i.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ot(this,"tick"),this.da&&(zt(this),this.start()))}},i.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},i.M=function(){Vt.Z.M.call(this),zt(this),delete this.g};class Ht extends b{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Wt(this)}M(){super.M(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gt(t){b.call(this),this.h=t,this.g={}}v(Gt,b);var Kt=[];function $t(t,e,n,i){Array.isArray(n)||(n&&(Kt[0]=n.toString()),n=Kt);for(var r=0;r<n.length;r++){var s=gt(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Yt(t){R(t.g,(function(t,e){this.g.hasOwnProperty(e)&&wt(t)}),t),t.g={}}function Xt(){this.g=!0}function Qt(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}function Jt(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}function Zt(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+ee(t,n)+(i?" "+i:"")}))}function te(t,e){t.info((function(){return"TIMEOUT: "+e}))}function ee(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Et(n)}catch(a){return e}}Gt.prototype.M=function(){Gt.Z.M.call(this),Yt(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xt.prototype.Aa=function(){this.g=!1},Xt.prototype.info=function(){};var ne={},ie=null;function re(){return ie=ie||new kt}function se(t){it.call(this,ne.Ma,t)}function oe(t){const e=re();Ot(e,new se(e,t))}function ae(t,e){it.call(this,ne.STAT_EVENT,t),this.stat=e}function ce(t){const e=re();Ot(e,new ae(e,t))}function le(t,e){it.call(this,ne.Na,t),this.size=e}function he(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){t()}),e)}ne.Ma="serverreachability",v(se,it),ne.STAT_EVENT="statevent",v(ae,it),ne.Na="timingevent",v(le,it);var ue={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},de={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function pe(){}function fe(t){return t.h||(t.h=t.i())}function ge(){}pe.prototype.h=null;var me,ye={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ve(){it.call(this,"d")}function be(){it.call(this,"c")}function we(){}function _e(t,e,n,i){this.l=t,this.j=e,this.m=n,this.X=i||1,this.V=new Gt(this),this.P=Te,t=W?125:void 0,this.W=new Vt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}v(ve,it),v(be,it),v(we,pe),we.prototype.g=function(){return new XMLHttpRequest},we.prototype.i=function(){return{}},me=new we;var Te=45e3,Se={},Ce={};function ke(t,e,n){t.K=1,t.v=Qe(He(e)),t.s=n,t.U=!0,Oe(t,null)}function Oe(t,e){t.F=Date.now(),Pe(t),t.A=He(t.v);var n=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),pn(n.h,"t",i),t.C=0,n=t.l.H,t.h=new xe,t.g=bi(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ht(m(t.Ia,t,t.g),t.O)),$t(t.V,t.g,"readystatechange",t.gb),e=t.H?M(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),oe(1),Qt(t.j,t.u,t.A,t.m,t.X,t.s)}function Ie(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Ee(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=Ae(t,n),i==Ce){4==e&&(t.o=4,ce(14),r=!1),Zt(t.j,t.m,null,"[Incomplete Response]");break}if(i==Se){t.o=4,ce(15),Zt(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Zt(t.j,t.m,i,null),De(t,i)}Ie(t)&&i!=Ce&&i!=Se&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ce(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ui(e),e.L=!0,ce(11))):(Zt(t.j,t.m,n,"[Invalid Chunked Response]"),Me(t),Re(t))}function Ae(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Ce:(n=Number(e.substring(n,i)),isNaN(n)?Se:(i+=1,i+n>e.length?Ce:(e=e.substr(i,n),t.C=i+n,e)))}function Pe(t){t.Y=Date.now()+t.P,Ne(t,t.P)}function Ne(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=he(m(t.eb,t),e)}function je(t){t.B&&(a.clearTimeout(t.B),t.B=null)}function Re(t){0==t.l.G||t.I||fi(t.l,t)}function Me(t){je(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,zt(t.W),Yt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function De(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||_n(n.i,t)))if(n.I=t.N,!t.J&&_n(n.i,t)&&3==n.G){try{var i=n.Ca.g.parse(e)}catch(l){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;pi(n),ei(n)}hi(n),ce(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&0==n.A&&!n.v&&(n.v=he(m(n.ab,n),6e3));if(1>=wn(n.i)&&n.ka){try{n.ka()}catch(l){}n.ka=void 0}}else mi(n,11)}else if((t.J||n.g==t)&&pi(n),!O(e))for(r=n.Ca.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const e=l[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const r=l[4];null!=r&&(n.za=r,n.h.info("SVER="+n.za));const h=l[5];null!=h&&"number"===typeof h&&0<h&&(i=1.5*h,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;!s.g&&(A(t,"spdy")||A(t,"quic")||A(t,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(xn(s,s.h),s.h=null))}if(i.D){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.sa=t,Xe(i.F,i.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),i=n;var o=t;if(i.oa=vi(i,i.H?i.la:null,i.W),o.J){Tn(i.i,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(je(a),Pe(a)),i.g=o}else li(i);0<n.l.length&&ri(n)}else"stop"!=l[0]&&"close"!=l[0]||mi(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?mi(n,7):ti(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}oe(4)}catch(l){}}function Le(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function Fe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"===typeof t)T(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(l(t)||"string"===typeof t){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;i=Le(t),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}}function Ue(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Ue)for(n=t.T(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Be(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var i=t.g[e];Ve(t.h,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.i!=t.g.length){var r={};for(n=e=0;e<t.g.length;)i=t.g[e],Ve(r,i)||(t.g[n++]=i,r[i]=1),e++;t.g.length=n}}function Ve(t,e){return Object.prototype.hasOwnProperty.call(t,e)}i=_e.prototype,i.setTimeout=function(t){this.P=t},i.gb=function(t){t=t.target;const e=this.L;e&&3==$n(t)?e.l():this.Ia(t)},i.Ia=function(t){try{if(t==this.g)t:{const u=$n(this.g);var e=this.g.Da();const d=this.g.ba();if(!(3>u)&&(3!=u||W||this.g&&(this.h.h||this.g.ga()||Yn(this.g)))){this.I||4!=u||7==e||oe(8==e||0>=d?3:2),je(this);var n=this.g.ba();this.N=n;e:if(Ie(this)){var i=Yn(this.g);t="";var r=i.length,s=4==$n(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Me(this),Re(this);var o="";break e}this.h.i=new a.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,Jt(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(c)){var h=c;break e}}h=null}if(!(n=h)){this.i=!1,this.o=3,ce(12),Me(this),Re(this);break t}Zt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,De(this,n)}this.U?(Ee(this,u,o),W&&this.i&&3==u&&($t(this.V,this.W,"tick",this.fb),this.W.start())):(Zt(this.j,this.m,o,null),De(this,o)),4==u&&Me(this),this.i&&!this.I&&(4==u?fi(this.l,this):(this.i=!1,Pe(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ce(12)):(this.o=0,ce(13)),Me(this),Re(this)}}}catch(u){}},i.fb=function(){if(this.g){var t=$n(this.g),e=this.g.ga();this.C<e.length&&(je(this),Ee(this,t,e),this.i&&4!=t&&Pe(this))}},i.cancel=function(){this.I=!0,Me(this)},i.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(te(this.j,this.A),2!=this.K&&(oe(3),ce(17)),Me(this),this.o=2,Re(this)):Ne(this,this.Y-t)},i=Ue.prototype,i.R=function(){Be(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},i.T=function(){return Be(this),this.g.concat()},i.get=function(t,e){return Ve(this.h,t)?this.h[t]:e},i.set=function(t,e){Ve(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},i.forEach=function(t,e){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);t.call(e,s,r,this)}};var ze=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function We(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof We){this.g=void 0!==e?e:t.g,Ge(this,t.j),this.s=t.s,Ke(this,t.i),$e(this,t.m),this.l=t.l,e=t.h;var n=new ln;n.i=e.i,e.g&&(n.g=new Ue(e.g),n.h=e.h),Ye(this,n),this.o=t.o}else t&&(n=String(t).match(ze))?(this.g=!!e,Ge(this,n[1]||"",!0),this.s=tn(n[2]||""),Ke(this,n[3]||"",!0),$e(this,n[4]),this.l=tn(n[5]||"",!0),Ye(this,n[6]||"",!0),this.o=tn(n[7]||"")):(this.g=!!e,this.h=new ln(null,this.g))}function He(t){return new We(t)}function Ge(t,e,n){t.j=n?tn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ke(t,e,n){t.i=n?tn(e,!0):e}function $e(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ye(t,e,n){e instanceof ln?(t.h=e,gn(t.h,t.g)):(n||(e=en(e,an)),t.h=new ln(e,t.g))}function Xe(t,e,n){t.h.set(e,n)}function Qe(t){return Xe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Je(t){return t instanceof We?He(t):new We(t,void 0)}function Ze(t,e,n,i){var r=new We(null,void 0);return t&&Ge(r,t),e&&Ke(r,e),n&&$e(r,n),i&&(r.l=i),r}function tn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function en(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,nn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function nn(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}We.prototype.toString=function(){var t=[],e=this.j;e&&t.push(en(e,rn,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(en(e,rn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(en(n,"/"==n.charAt(0)?on:sn,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",en(n,cn)),t.join("")};var rn=/[#\/\?@]/g,sn=/[#\?:]/g,on=/[#\?]/g,an=/[#\?@]/g,cn=/#/g;function ln(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function hn(t){t.g||(t.g=new Ue,t.h=0,t.i&&qe(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function un(t,e){hn(t),e=fn(t,e),Ve(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Ve(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Be(t)))}function dn(t,e){return hn(t),e=fn(t,e),Ve(t.g.h,e)}function pn(t,e,n){un(t,e),0<n.length&&(t.i=null,t.g.set(fn(t,e),k(n)),t.h+=n.length)}function fn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function gn(t,e){e&&!t.j&&(hn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(un(this,e),pn(this,n,t))}),t)),t.j=e}i=ln.prototype,i.add=function(t,e){hn(this),this.i=null,t=fn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},i.forEach=function(t,e){hn(this),this.g.forEach((function(n,i){T(n,(function(n){t.call(e,n,i,this)}),this)}),this)},i.T=function(){hn(this);for(var t=this.g.R(),e=this.g.T(),n=[],i=0;i<e.length;i++)for(var r=t[i],s=0;s<r.length;s++)n.push(e[i]);return n},i.R=function(t){hn(this);var e=[];if("string"===typeof t)dn(this,t)&&(e=C(e,this.g.get(fn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=C(e,t[n])}return e},i.set=function(t,e){return hn(this),this.i=null,t=fn(this,t),dn(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},i.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s]))),t.push(o)}}return this.i=t.join("&")};var mn=class{constructor(t,e){this.h=t,this.g=e}};function yn(t){this.l=t||vn,a.PerformanceNavigationTiming?(t=a.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(a.g&&a.g.Ea&&a.g.Ea()&&a.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vn=10;function bn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function wn(t){return t.h?1:t.g?t.g.size:0}function _n(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function xn(t,e){t.g?t.g.add(e):t.h=e}function Tn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Sn(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return k(t.i)}function Cn(){}function kn(){this.g=new Cn}function On(t,e,n){const i=n||"";try{Fe(t,(function(t,n){let r=t;h(t)&&(r=Et(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function In(t,e){const n=new Xt;if(a.Image){const i=new Image;i.onload=y(En,n,i,"TestLoadImage: loaded",!0,e),i.onerror=y(En,n,i,"TestLoadImage: error",!1,e),i.onabort=y(En,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=y(En,n,i,"TestLoadImage: timeout",!1,e),a.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}function En(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function An(t){this.l=t.$b||null,this.j=t.ib||!1}function Pn(t,e){kt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Nn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yn.prototype.cancel=function(){if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Cn.prototype.stringify=function(t){return a.JSON.stringify(t,void 0)},Cn.prototype.parse=function(t){return a.JSON.parse(t,void 0)},v(An,pe),An.prototype.g=function(){return new Pn(this.l,this.j)},An.prototype.i=function(t){return function(){return t}}({}),v(Pn,kt);var Nn=0;function jn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Rn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Mn(t)}function Mn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}i=Pn.prototype,i.open=function(t,e){if(this.readyState!=Nn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Mn(this)},i.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||a).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},i.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rn(this)),this.readyState=Nn},i.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},i.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Rn(this):Mn(this),3==this.readyState&&jn(this)}},i.Ua=function(t){this.g&&(this.response=this.responseText=t,Rn(this))},i.Ta=function(t){this.g&&(this.response=t,Rn(this))},i.ha=function(){this.g&&Rn(this)},i.setRequestHeader=function(t,e){this.v.append(t,e)},i.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Pn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Dn=a.JSON.parse;function Ln(t){kt.call(this),this.headers=new Ue,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Fn,this.K=this.L=!1}v(Ln,kt);var Fn="",Un=/^https?$/i,Bn=["POST","PUT"];function Vn(t){return z&&Z()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function zn(t){return"content-type"==t.toLowerCase()}function qn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Wn(t),Gn(t)}function Wn(t){t.D||(t.D=!0,Ot(t,"complete"),Ot(t,"error"))}function Hn(t){if(t.h&&"undefined"!=typeof o&&(!t.C[1]||4!=$n(t)||2!=t.ba()))if(t.v&&4==$n(t))qt(t.Fa,0,t);else if(Ot(t,"readystatechange"),4==$n(t)){t.h=!1;try{const o=t.ba();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===o){var r=String(t.H).match(ze)[1]||null;if(!r&&a.self&&a.self.location){var s=a.self.location.protocol;r=s.substr(0,s.length-1)}i=!Un.test(r?r.toLowerCase():"")}n=i}if(n)Ot(t,"complete"),Ot(t,"success");else{t.m=6;try{var c=2<$n(t)?t.g.statusText:""}catch(l){c=""}t.j=c+" ["+t.ba()+"]",Wn(t)}}finally{Gn(t)}}}function Gn(t,e){if(t.g){Kn(t);const i=t.g,r=t.C[0]?c:null;t.g=null,t.C=null,e||Ot(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function Kn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(a.clearTimeout(t.A),t.A=null)}function $n(t){return t.g?t.g.readyState:0}function Yn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Fn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Xn(t){let e="";return R(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Qn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Xn(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Xe(t,e,n))}function Jn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Zn(t){this.za=0,this.l=[],this.h=new Xt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jn("baseRetryDelayMs",5e3,t),this.$a=Jn("retryDelaySeedMs",1e4,t),this.Ya=Jn("forwardChannelMaxRetries",2,t),this.ra=Jn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new yn(t&&t.concurrentRequestLimit),this.Ca=new kn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function ti(t){if(ni(t),3==t.G){var e=t.V++,n=He(t.F);Xe(n,"SID",t.J),Xe(n,"RID",e),Xe(n,"TYPE","terminate"),ai(t,n),e=new _e(t,t.h,e,void 0),e.K=2,e.v=Qe(He(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(e.v.toString(),"")),!n&&a.Image&&((new Image).src=e.v,n=!0),n||(e.g=bi(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Pe(e)}yi(t)}function ei(t){t.g&&(ui(t),t.g.cancel(),t.g=null)}function ni(t){ei(t),t.u&&(a.clearTimeout(t.u),t.u=null),pi(t),t.i.cancel(),t.m&&("number"===typeof t.m&&a.clearTimeout(t.m),t.m=null)}function ii(t,e){t.l.push(new mn(t.Za++,e)),3==t.G&&ri(t)}function ri(t){bn(t.i)||t.m||(t.m=!0,Dt(t.Ha,t),t.C=0)}function si(t,e){return!(wn(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=he(m(t.Ha,t,e),gi(t,t.C)),t.C++,!0))}function oi(t,e){var n;n=e?e.m:t.V++;const i=He(t.F);Xe(i,"SID",t.J),Xe(i,"RID",n),Xe(i,"AID",t.U),ai(t,i),t.o&&t.s&&Qn(i,t.o,t.s),n=new _e(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=ci(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),xn(t.i,n),ke(n,i,e)}function ai(t,e){t.j&&Fe({},(function(t,n){Xe(e,n,t)}))}function ci(t,e,n){n=Math.min(t.l.length,n);var i=t.j?m(t.j.Oa,t.j,t):null;t:{var r=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=r[a].h;const c=r[a].g;if(n-=e,0>n)e=Math.max(0,r[a].h-100),o=!1;else try{On(c,t,"req"+n+"_")}catch(s){i&&i(c)}}if(o){i=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,i}function li(t){t.g||t.u||(t.Y=1,Dt(t.Ga,t),t.A=0)}function hi(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=he(m(t.Ga,t),gi(t,t.A)),t.A++,!0)}function ui(t){null!=t.B&&(a.clearTimeout(t.B),t.B=null)}function di(t){t.g=new _e(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=He(t.oa);Xe(e,"RID","rpc"),Xe(e,"SID",t.J),Xe(e,"CI",t.N?"0":"1"),Xe(e,"AID",t.U),ai(t,e),Xe(e,"TYPE","xmlhttp"),t.o&&t.s&&Qn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Qe(He(e)),n.s=null,n.U=!0,Oe(n,t)}function pi(t){null!=t.v&&(a.clearTimeout(t.v),t.v=null)}function fi(t,e){var n=null;if(t.g==e){pi(t),ui(t),t.g=null;var i=2}else{if(!_n(t.i,e))return;n=e.D,Tn(t.i,e),i=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;i=re(),Ot(i,new le(i,n,e,r)),ri(t)}else li(t);else if(r=e.o,3==r||0==r&&0<t.I||!(1==i&&si(t,e)||2==i&&hi(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:mi(t,5);break;case 4:mi(t,10);break;case 3:mi(t,6);break;default:mi(t,2)}}function gi(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function mi(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var i=m(t.jb,t);n||(n=new We("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Ge(n,"https"),Qe(n)),In(n.toString(),i)}else ce(2);t.G=0,t.j&&t.j.va(e),yi(t),ni(t)}function yi(t){t.G=0,t.I=-1,t.j&&(0==Sn(t.i).length&&0==t.l.length||(t.i.i.length=0,k(t.l),t.l.length=0),t.j.ua())}function vi(t,e,n){let i=Je(n);if(""!=i.i)e&&Ke(i,e+"."+i.i),$e(i,i.m);else{const t=a.location;i=Ze(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&R(t.aa,(function(t,e){Xe(i,e,t)})),e=t.D,n=t.sa,e&&n&&Xe(i,e,n),Xe(i,"VER",t.ma),ai(t,i),i}function bi(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Ln(new An({ib:!0})):new Ln(t.qa),e.L=t.H,e}function wi(){}function _i(){if(z&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function xi(t,e){kt.call(this),this.g=new Zn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!O(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!O(e)&&(this.g.D=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ci(this)}function Ti(t){ve.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Si(){be.call(this),this.status=1}function Ci(t){this.g=t}i=Ln.prototype,i.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():me.g(),this.C=this.u?fe(this.u):fe(me),this.g.onreadystatechange=m(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void qn(this,s)}t=n||"";const r=new Ue(this.headers);i&&Fe(i,(function(t,e){r.set(e,t)})),i=S(r.T()),n=a.FormData&&t instanceof a.FormData,!(0<=x(Bn,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Kn(this),0<this.B&&((this.K=Vn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=m(this.pa,this)):this.A=qt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){qn(this,s)}},i.pa=function(){"undefined"!=typeof o&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ot(this,"timeout"),this.abort(8))},i.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ot(this,"complete"),Ot(this,"abort"),Gn(this))},i.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gn(this,!0)),Ln.Z.M.call(this)},i.Fa=function(){this.s||(this.F||this.v||this.l?Hn(this):this.cb())},i.cb=function(){Hn(this)},i.ba=function(){try{return 2<$n(this)?this.g.status:-1}catch(t){return-1}},i.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},i.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Dn(e)}},i.Da=function(){return this.m},i.La=function(){return"string"===typeof this.j?this.j:String(this.j)},i=Zn.prototype,i.ma=8,i.G=1,i.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},i.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const r=new _e(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=M(s),L(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var i=this.l[n];if(i="__data__"in i.g&&(i=i.g.__data__,"string"===typeof i)?i.length:void 0,void 0===i)break;if(e+=i,4096<e){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=ci(this,r,e),n=He(this.F),Xe(n,"RID",t),Xe(n,"CVER",22),this.D&&Xe(n,"X-HTTP-Session-Id",this.D),ai(this,n),this.o&&s&&Qn(n,this.o,s),xn(this.i,r),this.Ra&&Xe(n,"TYPE","init"),this.ja?(Xe(n,"$req",e),Xe(n,"SID","null"),r.$=!0,ke(r,n,null)):ke(r,n,e),this.G=2}}else 3==this.G&&(t?oi(this,t):0==this.l.length||bn(this.i)||oi(this))},i.Ga=function(){if(this.u=null,di(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=he(m(this.bb,this),t)}},i.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ce(10),ei(this),di(this))},i.ab=function(){null!=this.v&&(this.v=null,ei(this),hi(this),ce(19))},i.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ce(2)):(this.h.info("Failed to ping google.com"),ce(1))},i=wi.prototype,i.xa=function(){},i.wa=function(){},i.va=function(){},i.ua=function(){},i.Oa=function(){},_i.prototype.g=function(t,e){return new xi(t,e)},v(xi,kt),xi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Dt(m(t.hb,t,e))),ce(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=vi(t,null,t.W),ri(t)},xi.prototype.close=function(){ti(this.g)},xi.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,ii(this.g,e)}else this.v?(e={},e.__data__=Et(t),ii(this.g,e)):ii(this.g,t)},xi.prototype.M=function(){this.g.j=null,delete this.j,ti(this.g),delete this.g,xi.Z.M.call(this)},v(Ti,ve),v(Si,be),v(Ci,wi),Ci.prototype.xa=function(){Ot(this.g,"a")},Ci.prototype.wa=function(t){Ot(this.g,new Ti(t))},Ci.prototype.va=function(t){Ot(this.g,new Si(t))},Ci.prototype.ua=function(){Ot(this.g,"b")},_i.prototype.createWebChannel=_i.prototype.g,xi.prototype.send=xi.prototype.u,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,de.COMPLETE="complete",ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",kt.prototype.listen=kt.prototype.N,Ln.prototype.listenOnce=Ln.prototype.O,Ln.prototype.getLastError=Ln.prototype.La,Ln.prototype.getLastErrorCode=Ln.prototype.Da,Ln.prototype.getStatus=Ln.prototype.ba,Ln.prototype.getResponseJson=Ln.prototype.Qa,Ln.prototype.getResponseText=Ln.prototype.ga,Ln.prototype.send=Ln.prototype.ea;var ki=s.createWebChannelTransport=function(){return new _i},Oi=s.getStatEventTarget=function(){return re()},Ii=s.ErrorCode=ue,Ei=s.EventType=de,Ai=s.Event=ne,Pi=s.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ni=s.FetchXmlHttpFactory=An,ji=s.WebChannel=ge,Ri=s.XhrIo=Ln}).call(this,n("c8ba"))},"90e3":function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+i).toString(36)}},9112:function(t,e,n){var i=n("83ab"),r=n("9bf2"),s=n("5c6c");t.exports=i?function(t,e,n){return r.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},9263:function(t,e,n){"use strict";var i=n("577e"),r=n("ad6d"),s=n("9f7f"),o=n("5692"),a=n("7c73"),c=n("69f3").get,l=n("fce3"),h=n("107c"),u=RegExp.prototype.exec,d=o("native-string-replace",String.prototype.replace),p=u,f=function(){var t=/a/,e=/b*/g;return u.call(t,"a"),u.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),g=s.UNSUPPORTED_Y||s.BROKEN_CARET,m=void 0!==/()??/.exec("")[1],y=f||m||g||l||h;y&&(p=function(t){var e,n,s,o,l,h,y,v=this,b=c(v),w=i(t),_=b.raw;if(_)return _.lastIndex=v.lastIndex,e=p.call(_,w),v.lastIndex=_.lastIndex,e;var x=b.groups,T=g&&v.sticky,S=r.call(v),C=v.source,k=0,O=w;if(T&&(S=S.replace("y",""),-1===S.indexOf("g")&&(S+="g"),O=w.slice(v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&"\n"!==w.charAt(v.lastIndex-1))&&(C="(?: "+C+")",O=" "+O,k++),n=new RegExp("^(?:"+C+")",S)),m&&(n=new RegExp("^"+C+"$(?!\\s)",S)),f&&(s=v.lastIndex),o=u.call(T?n:v,O),T?o?(o.input=o.input.slice(k),o[0]=o[0].slice(k),o.index=v.lastIndex,v.lastIndex+=o[0].length):v.lastIndex=0:f&&o&&(v.lastIndex=v.global?o.index+o[0].length:s),m&&o&&o.length>1&&d.call(o[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(o[l]=void 0)})),o&&x)for(o.groups=h=a(null),l=0;l<x.length;l++)y=x[l],h[y[0]]=o[y[1]];return o}),t.exports=p},"94ca":function(t,e,n){var i=n("d039"),r=n("1626"),s=/#|\.prototype\./,o=function(t,e){var n=c[a(t)];return n==h||n!=l&&(r(e)?i(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},c=o.data={},l=o.NATIVE="N",h=o.POLYFILL="P";t.exports=o},"99af":function(t,e,n){"use strict";var i=n("23e7"),r=n("d039"),s=n("e8b5"),o=n("861d"),a=n("7b0b"),c=n("50c4"),l=n("8418"),h=n("65f0"),u=n("1dde"),d=n("b622"),p=n("2d00"),f=d("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",y=p>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),v=u("concat"),b=function(t){if(!o(t))return!1;var e=t[f];return void 0!==e?!!e:s(t)},w=!y||!v;i({target:"Array",proto:!0,forced:w},{concat:function(t){var e,n,i,r,s,o=a(this),u=h(o,0),d=0;for(e=-1,i=arguments.length;e<i;e++)if(s=-1===e?o:arguments[e],b(s)){if(r=c(s.length),d+r>g)throw TypeError(m);for(n=0;n<r;n++,d++)n in s&&l(u,d,s[n])}else{if(d>=g)throw TypeError(m);l(u,d++,s)}return u.length=d,u}})},"9a1f":function(t,e,n){var i=n("59ed"),r=n("825a"),s=n("35a1");t.exports=function(t,e){var n=arguments.length<2?s(t):e;if(i(n))return r(n.call(t));throw TypeError(String(t)+" is not iterable")}},"9bdd":function(t,e,n){var i=n("825a"),r=n("2a62");t.exports=function(t,e,n,s){try{return s?e(i(n)[0],n[1]):e(n)}catch(o){r(t,"throw",o)}}},"9bf2":function(t,e,n){var i=n("83ab"),r=n("0cfb"),s=n("825a"),o=n("a04b"),a=Object.defineProperty;e.f=i?a:function(t,e,n){if(s(t),e=o(e),s(n),r)try{return a(t,e,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9dbb":function(t,e,n){(function(t,n){n(e)})(0,(function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function i(t,e,i){var r,s=new Promise((function(s,o){r=t[e].apply(t,i),n(r).then(s,o)}));return s.request=r,s}function r(t,e,n){var r=i(t,e,n);return r.then((function(t){if(t)return new h(t,r.request)}))}function s(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function o(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return this[e][i].apply(this[e],arguments)})}))}function c(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function l(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function u(t){this._store=t}function d(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new d(n)}function f(t){this._db=t}function g(t,e,n){var r=i(indexedDB,"open",[t,e]),s=r.request;return s&&(s.onupgradeneeded=function(t){n&&n(new p(s.result,t.oldVersion,s.transaction))}),r.then((function(t){return new f(t)}))}function m(t){return i(indexedDB,"deleteDatabase",[t])}s(l,"_index",["name","keyPath","multiEntry","unique"]),o(l,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(l,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(h,"_cursor",["direction","key","primaryKey","value"]),o(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,i=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,i),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),u.prototype.createIndex=function(){return new l(this._store.createIndex.apply(this._store,arguments))},u.prototype.index=function(){return new l(this._store.index.apply(this._store,arguments))},s(u,"_store",["name","keyPath","indexNames","autoIncrement"]),o(u,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(u,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(u,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new u(this._tx.objectStore.apply(this._tx,arguments))},s(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new u(this._db.createObjectStore.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[u,l].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),i=n[n.length-1],r=this._store||this._index,s=r[t].apply(r,n.slice(0,-1));s.onsuccess=function(){i(s.result)}})}))})),[l,u].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,i=[];return new Promise((function(r){n.iterateCursor(t,(function(t){t?(i.push(t.value),void 0===e||i.length!=e?t.continue():r(i)):r(i)}))}))})})),t.openDb=g,t.deleteDb=m,Object.defineProperty(t,"__esModule",{value:!0})}))},"9ed3":function(t,e,n){"use strict";var i=n("ae93").IteratorPrototype,r=n("7c73"),s=n("5c6c"),o=n("d44e"),a=n("3f8c"),c=function(){return this};t.exports=function(t,e,n){var l=e+" Iterator";return t.prototype=r(i,{next:s(1,n)}),o(t,l,!1,!0),a[l]=c,t}},"9f7f":function(t,e,n){var i=n("d039"),r=n("da84"),s=r.RegExp;e.UNSUPPORTED_Y=i((function(){var t=s("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=s("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},"9ff4":function(t,e,n){"use strict";(function(t){function i(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.d(e,"a",(function(){return C})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return k})),n.d(e,"e",(function(){return J})),n.d(e,"f",(function(){return et})),n.d(e,"g",(function(){return st})),n.d(e,"h",(function(){return P})),n.d(e,"i",(function(){return ct})),n.d(e,"j",(function(){return it})),n.d(e,"k",(function(){return R})),n.d(e,"l",(function(){return tt})),n.d(e,"m",(function(){return c})),n.d(e,"n",(function(){return rt})),n.d(e,"o",(function(){return M})),n.d(e,"p",(function(){return U})),n.d(e,"q",(function(){return s})),n.d(e,"r",(function(){return y})),n.d(e,"s",(function(){return $})),n.d(e,"t",(function(){return D})),n.d(e,"u",(function(){return A})),n.d(e,"v",(function(){return z})),n.d(e,"w",(function(){return E})),n.d(e,"x",(function(){return K})),n.d(e,"y",(function(){return q})),n.d(e,"z",(function(){return Y})),n.d(e,"A",(function(){return v})),n.d(e,"B",(function(){return L})),n.d(e,"C",(function(){return a})),n.d(e,"D",(function(){return B})),n.d(e,"E",(function(){return V})),n.d(e,"F",(function(){return w})),n.d(e,"G",(function(){return _})),n.d(e,"H",(function(){return i})),n.d(e,"I",(function(){return p})),n.d(e,"J",(function(){return f})),n.d(e,"K",(function(){return l})),n.d(e,"L",(function(){return N})),n.d(e,"M",(function(){return x})),n.d(e,"N",(function(){return nt})),n.d(e,"O",(function(){return ot})),n.d(e,"P",(function(){return G}));const r="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",s=i(r);const o="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a=i(o);function c(t){return!!t||""===t}function l(t){if(M(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=B(i)?d(i):l(i);if(r)for(const t in r)e[t]=r[t]}return e}return B(t)||z(t)?t:void 0}const h=/;(?![^(]*\))/g,u=/:(.+)/;function d(t){const e={};return t.split(h).forEach(t=>{if(t){const n=t.split(u);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function p(t){let e="";if(B(t))e=t;else if(M(t))for(let n=0;n<t.length;n++){const i=p(t[n]);i&&(e+=i+" ")}else if(z(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function f(t){if(!t)return null;let{class:e,style:n}=t;return e&&!B(e)&&(t.class=p(e)),n&&(t.style=l(n)),t}const g="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",m="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",y=i(g),v=i(m);function b(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=w(t[i],e[i]);return n}function w(t,e){if(t===e)return!0;let n=F(t),i=F(e);if(n||i)return!(!n||!i)&&t.getTime()===e.getTime();if(n=M(t),i=M(e),n||i)return!(!n||!i)&&b(t,e);if(n=z(t),i=z(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,s=Object.keys(e).length;if(r!==s)return!1;for(const n in t){const i=t.hasOwnProperty(n),r=e.hasOwnProperty(n);if(i&&!r||!i&&r||!w(t[n],e[n]))return!1}}return String(t)===String(e)}function _(t,e){return t.findIndex(t=>w(t,e))}const x=t=>null==t?"":M(t)||z(t)&&(t.toString===W||!U(t.toString))?JSON.stringify(t,T,2):String(t),T=(t,e)=>e&&e.__v_isRef?T(t,e.value):D(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[e,n])=>(t[e+" =>"]=n,t),{})}:L(e)?{[`Set(${e.size})`]:[...e.values()]}:!z(e)||M(e)||K(e)?e:String(e),S={},C=[],k=()=>{},O=()=>!1,I=/^on[^a-z]/,E=t=>I.test(t),A=t=>t.startsWith("onUpdate:"),P=Object.assign,N=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},j=Object.prototype.hasOwnProperty,R=(t,e)=>j.call(t,e),M=Array.isArray,D=t=>"[object Map]"===H(t),L=t=>"[object Set]"===H(t),F=t=>t instanceof Date,U=t=>"function"===typeof t,B=t=>"string"===typeof t,V=t=>"symbol"===typeof t,z=t=>null!==t&&"object"===typeof t,q=t=>z(t)&&U(t.then)&&U(t.catch),W=Object.prototype.toString,H=t=>W.call(t),G=t=>H(t).slice(8,-1),K=t=>"[object Object]"===H(t),$=t=>B(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,Y=i(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),X=t=>{const e=Object.create(null);return n=>{const i=e[n];return i||(e[n]=t(n))}},Q=/-(\w)/g,J=X(t=>t.replace(Q,(t,e)=>e?e.toUpperCase():"")),Z=/\B([A-Z])/g,tt=X(t=>t.replace(Z,"-$1").toLowerCase()),et=X(t=>t.charAt(0).toUpperCase()+t.slice(1)),nt=X(t=>t?"on"+et(t):""),it=(t,e)=>!Object.is(t,e),rt=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},st=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},ot=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let at;const ct=()=>at||(at="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{})}).call(this,n("c8ba"))},a04b:function(t,e,n){var i=n("c04e"),r=n("d9b5");t.exports=function(t){var e=i(t,"string");return r(e)?e:String(e)}},a15b:function(t,e,n){"use strict";var i=n("23e7"),r=n("44ad"),s=n("fc6a"),o=n("a640"),a=[].join,c=r!=Object,l=o("join",",");i({target:"Array",proto:!0,forced:c||!l},{join:function(t){return a.call(s(this),void 0===t?",":t)}})},a4b4:function(t,e,n){var i=n("342f");t.exports=/web0s(?!.*chrome)/i.test(i)},a4d3:function(t,e,n){"use strict";var i=n("23e7"),r=n("da84"),s=n("d066"),o=n("c430"),a=n("83ab"),c=n("4930"),l=n("d039"),h=n("5135"),u=n("e8b5"),d=n("1626"),p=n("861d"),f=n("d9b5"),g=n("825a"),m=n("7b0b"),y=n("fc6a"),v=n("a04b"),b=n("577e"),w=n("5c6c"),_=n("7c73"),x=n("df75"),T=n("241c"),S=n("057f"),C=n("7418"),k=n("06cf"),O=n("9bf2"),I=n("d1e7"),E=n("6eeb"),A=n("5692"),P=n("f772"),N=n("d012"),j=n("90e3"),R=n("b622"),M=n("e538"),D=n("746f"),L=n("d44e"),F=n("69f3"),U=n("b727").forEach,B=P("hidden"),V="Symbol",z="prototype",q=R("toPrimitive"),W=F.set,H=F.getterFor(V),G=Object[z],K=r.Symbol,$=s("JSON","stringify"),Y=k.f,X=O.f,Q=S.f,J=I.f,Z=A("symbols"),tt=A("op-symbols"),et=A("string-to-symbol-registry"),nt=A("symbol-to-string-registry"),it=A("wks"),rt=r.QObject,st=!rt||!rt[z]||!rt[z].findChild,ot=a&&l((function(){return 7!=_(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=Y(G,e);i&&delete G[e],X(t,e,n),i&&t!==G&&X(G,e,i)}:X,at=function(t,e){var n=Z[t]=_(K[z]);return W(n,{type:V,tag:t,description:e}),a||(n.description=e),n},ct=function(t,e,n){t===G&&ct(tt,e,n),g(t);var i=v(e);return g(n),h(Z,i)?(n.enumerable?(h(t,B)&&t[B][i]&&(t[B][i]=!1),n=_(n,{enumerable:w(0,!1)})):(h(t,B)||X(t,B,w(1,{})),t[B][i]=!0),ot(t,i,n)):X(t,i,n)},lt=function(t,e){g(t);var n=y(e),i=x(n).concat(ft(n));return U(i,(function(e){a&&!ut.call(n,e)||ct(t,e,n[e])})),t},ht=function(t,e){return void 0===e?_(t):lt(_(t),e)},ut=function(t){var e=v(t),n=J.call(this,e);return!(this===G&&h(Z,e)&&!h(tt,e))&&(!(n||!h(this,e)||!h(Z,e)||h(this,B)&&this[B][e])||n)},dt=function(t,e){var n=y(t),i=v(e);if(n!==G||!h(Z,i)||h(tt,i)){var r=Y(n,i);return!r||!h(Z,i)||h(n,B)&&n[B][i]||(r.enumerable=!0),r}},pt=function(t){var e=Q(y(t)),n=[];return U(e,(function(t){h(Z,t)||h(N,t)||n.push(t)})),n},ft=function(t){var e=t===G,n=Q(e?tt:y(t)),i=[];return U(n,(function(t){!h(Z,t)||e&&!h(G,t)||i.push(Z[t])})),i};if(c||(K=function(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?b(arguments[0]):void 0,e=j(t),n=function(t){this===G&&n.call(tt,t),h(this,B)&&h(this[B],e)&&(this[B][e]=!1),ot(this,e,w(1,t))};return a&&st&&ot(G,e,{configurable:!0,set:n}),at(e,t)},E(K[z],"toString",(function(){return H(this).tag})),E(K,"withoutSetter",(function(t){return at(j(t),t)})),I.f=ut,O.f=ct,k.f=dt,T.f=S.f=pt,C.f=ft,M.f=function(t){return at(R(t),t)},a&&(X(K[z],"description",{configurable:!0,get:function(){return H(this).description}}),o||E(G,"propertyIsEnumerable",ut,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:K}),U(x(it),(function(t){D(t)})),i({target:V,stat:!0,forced:!c},{for:function(t){var e=b(t);if(h(et,e))return et[e];var n=K(e);return et[e]=n,nt[n]=e,n},keyFor:function(t){if(!f(t))throw TypeError(t+" is not a symbol");if(h(nt,t))return nt[t]},useSetter:function(){st=!0},useSimple:function(){st=!1}}),i({target:"Object",stat:!0,forced:!c,sham:!a},{create:ht,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:dt}),i({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:pt,getOwnPropertySymbols:ft}),i({target:"Object",stat:!0,forced:l((function(){C.f(1)}))},{getOwnPropertySymbols:function(t){return C.f(m(t))}}),$){var gt=!c||l((function(){var t=K();return"[null]"!=$([t])||"{}"!=$({a:t})||"{}"!=$(Object(t))}));i({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,n){var i,r=[t],s=1;while(arguments.length>s)r.push(arguments[s++]);if(i=e,(p(e)||void 0!==t)&&!f(t))return u(e)||(e=function(t,e){if(d(i)&&(e=i.call(this,t,e)),!f(e))return e}),r[1]=e,$.apply(null,r)}})}if(!K[z][q]){var mt=K[z].valueOf;E(K[z],q,(function(){return mt.apply(this,arguments)}))}L(K,V),N[B]=!0},a630:function(t,e,n){var i=n("23e7"),r=n("4df4"),s=n("1c7e"),o=!s((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:o},{from:r})},a640:function(t,e,n){"use strict";var i=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},a79d:function(t,e,n){"use strict";var i=n("23e7"),r=n("c430"),s=n("fea9"),o=n("d039"),a=n("d066"),c=n("1626"),l=n("4840"),h=n("cdf9"),u=n("6eeb"),d=!!s&&o((function(){s.prototype["finally"].call({then:function(){}},(function(){}))}));if(i({target:"Promise",proto:!0,real:!0,forced:d},{finally:function(t){var e=l(this,a("Promise")),n=c(t);return this.then(n?function(n){return h(e,t()).then((function(){return n}))}:t,n?function(n){return h(e,t()).then((function(){throw n}))}:t)}}),!r&&c(s)){var p=a("Promise").prototype["finally"];s.prototype["finally"]!==p&&u(s.prototype,"finally",p,{unsafe:!0})}},ab13:function(t,e,n){var i=n("b622"),r=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(i){}}return!1}},abc5:function(t,e,n){"use strict";(function(t){function i(){return r().__VUE_DEVTOOLS_GLOBAL_HOOK__}function r(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof t?t:{}}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s}));const s="function"===typeof Proxy}).call(this,n("c8ba"))},ac1f:function(t,e,n){"use strict";var i=n("23e7"),r=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(t,e,n){"use strict";var i=n("825a");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},addb:function(t,e){var n=Math.floor,i=function(t,e){var o=t.length,a=n(o/2);return o<8?r(t,e):s(i(t.slice(0,a),e),i(t.slice(a),e),e)},r=function(t,e){var n,i,r=t.length,s=1;while(s<r){i=s,n=t[s];while(i&&e(t[i-1],n)>0)t[i]=t[--i];i!==s++&&(t[i]=n)}return t},s=function(t,e,n){var i=t.length,r=e.length,s=0,o=0,a=[];while(s<i||o<r)s<i&&o<r?a.push(n(t[s],e[o])<=0?t[s++]:e[o++]):a.push(s<i?t[s++]:e[o++]);return a};t.exports=i},ae93:function(t,e,n){"use strict";var i,r,s,o=n("d039"),a=n("1626"),c=n("7c73"),l=n("e163"),h=n("6eeb"),u=n("b622"),d=n("c430"),p=u("iterator"),f=!1;[].keys&&(s=[].keys(),"next"in s?(r=l(l(s)),r!==Object.prototype&&(i=r)):f=!0);var g=void 0==i||o((function(){var t={};return i[p].call(t)!==t}));g?i={}:d&&(i=c(i)),a(i[p])||h(i,p,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}},b041:function(t,e,n){"use strict";var i=n("00ee"),r=n("f5df");t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},b0c0:function(t,e,n){var i=n("83ab"),r=n("5e77").EXISTS,s=n("9bf2").f,o=Function.prototype,a=o.toString,c=/^\s*function ([^ (]*)/,l="name";i&&!r&&s(o,l,{configurable:!0,get:function(){try{return a.call(this).match(c)[1]}catch(t){return""}}})},b575:function(t,e,n){var i,r,s,o,a,c,l,h,u=n("da84"),d=n("06cf").f,p=n("2cf4").set,f=n("1cdc"),g=n("d4c3"),m=n("a4b4"),y=n("605d"),v=u.MutationObserver||u.WebKitMutationObserver,b=u.document,w=u.process,_=u.Promise,x=d(u,"queueMicrotask"),T=x&&x.value;T||(i=function(){var t,e;y&&(t=w.domain)&&t.exit();while(r){e=r.fn,r=r.next;try{e()}catch(n){throw r?o():s=void 0,n}}s=void 0,t&&t.enter()},f||y||m||!v||!b?!g&&_&&_.resolve?(l=_.resolve(void 0),l.constructor=_,h=l.then,o=function(){h.call(l,i)}):o=y?function(){w.nextTick(i)}:function(){p.call(u,i)}:(a=!0,c=b.createTextNode(""),new v(i).observe(c,{characterData:!0}),o=function(){c.data=a=!a})),t.exports=T||function(t){var e={fn:t,next:void 0};s&&(s.next=e),r||(r=e,o()),s=e}},b622:function(t,e,n){var i=n("da84"),r=n("5692"),s=n("5135"),o=n("90e3"),a=n("4930"),c=n("fdbf"),l=r("wks"),h=i.Symbol,u=c?h:h&&h.withoutSetter||o;t.exports=function(t){return s(l,t)&&(a||"string"==typeof l[t])||(a&&s(h,t)?l[t]=h[t]:l[t]=u("Symbol."+t)),l[t]}},b64b:function(t,e,n){var i=n("23e7"),r=n("7b0b"),s=n("df75"),o=n("d039"),a=o((function(){s(1)}));i({target:"Object",stat:!0,forced:a},{keys:function(t){return s(r(t))}})},b727:function(t,e,n){var i=n("0366"),r=n("44ad"),s=n("7b0b"),o=n("50c4"),a=n("65f0"),c=[].push,l=function(t){var e=1==t,n=2==t,l=3==t,h=4==t,u=6==t,d=7==t,p=5==t||u;return function(f,g,m,y){for(var v,b,w=s(f),_=r(w),x=i(g,m,3),T=o(_.length),S=0,C=y||a,k=e?C(f,T):n||d?C(f,0):void 0;T>S;S++)if((p||S in _)&&(v=_[S],b=x(v,S,w),t))if(e)k[S]=b;else if(b)switch(t){case 3:return!0;case 5:return v;case 6:return S;case 2:c.call(k,v)}else switch(t){case 4:return!1;case 7:c.call(k,v)}return u?-1:l||h?h:k}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},b774:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));const i="devtools-plugin:setup",r="plugin:settings:set"},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("fb6a"),n("b0c0"),n("a630");function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function s(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(c)throw o}}}}},c04e:function(t,e,n){var i=n("861d"),r=n("d9b5"),s=n("dc4a"),o=n("485a"),a=n("b622"),c=a("toPrimitive");t.exports=function(t,e){if(!i(t)||r(t))return t;var n,a=s(t,c);if(a){if(void 0===e&&(e="default"),n=a.call(t,e),!i(n)||r(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},c430:function(t,e){t.exports=!1},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var i=n("da84"),r=n("ce4e"),s="__core-js_shared__",o=i[s]||r(s,{});t.exports=o},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},ca84:function(t,e,n){var i=n("5135"),r=n("fc6a"),s=n("4d64").indexOf,o=n("d012");t.exports=function(t,e){var n,a=r(t),c=0,l=[];for(n in a)!i(o,n)&&i(a,n)&&l.push(n);while(e.length>c)i(a,n=e[c++])&&(~s(l,n)||l.push(n));return l}},caad:function(t,e,n){"use strict";var i=n("23e7"),r=n("4d64").includes,s=n("44d2");i({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},cc12:function(t,e,n){var i=n("da84"),r=n("861d"),s=i.document,o=r(s)&&r(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},cca6:function(t,e,n){var i=n("23e7"),r=n("60da");i({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},cdf9:function(t,e,n){var i=n("825a"),r=n("861d"),s=n("f069");t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=s.f(t),o=n.resolve;return o(e),n.promise}},ce4e:function(t,e,n){var i=n("da84");t.exports=function(t,e){try{Object.defineProperty(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var i=n("da84"),r=n("1626"),s=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(i[t]):i[t]&&i[t][e]}},d1e7:function(t,e,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!i.call({1:2},1);e.f=s?function(t){var e=r(this,t);return!!e&&e.enumerable}:i},d28b:function(t,e,n){var i=n("746f");i("iterator")},d2bb:function(t,e,n){var i=n("825a"),r=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(s){}return function(n,s){return i(n),r(s),e?t.call(n,s):n.__proto__=s,n}}():void 0)},d3b7:function(t,e,n){var i=n("00ee"),r=n("6eeb"),s=n("b041");i||r(Object.prototype,"toString",s,{unsafe:!0})},d44e:function(t,e,n){var i=n("9bf2").f,r=n("5135"),s=n("b622"),o=s("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},d4c3:function(t,e,n){var i=n("342f"),r=n("da84");t.exports=/ipad|iphone|ipod/i.test(i)&&void 0!==r.Pebble},d784:function(t,e,n){"use strict";n("ac1f");var i=n("6eeb"),r=n("9263"),s=n("d039"),o=n("b622"),a=n("9112"),c=o("species"),l=RegExp.prototype;t.exports=function(t,e,n,h){var u=o(t),d=!s((function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})),p=d&&!s((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[u]=/./[u]),n.exec=function(){return e=!0,null},n[u](""),!e}));if(!d||!p||n){var f=/./[u],g=e(u,""[t],(function(t,e,n,i,s){var o=e.exec;return o===r||o===l.exec?d&&!s?{done:!0,value:f.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}));i(String.prototype,t,g[0]),i(l,u,g[1])}h&&a(l[u],"sham",!0)}},d81d:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").map,s=n("1dde"),o=s("map");i({target:"Array",proto:!0,forced:!o},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},d959:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(t,e)=>{for(const[n,i]of e)t[n]=i;return t}},d998:function(t,e,n){var i=n("342f");t.exports=/MSIE|Trident/.test(i)},d9b5:function(t,e,n){var i=n("1626"),r=n("d066"),s=n("fdbf");t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&Object(t)instanceof e}},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dc4a:function(t,e,n){var i=n("59ed");t.exports=function(t,e){var n=t[e];return null==n?void 0:i(n)}},ddb0:function(t,e,n){var i=n("da84"),r=n("fdbc"),s=n("785a"),o=n("e260"),a=n("9112"),c=n("b622"),l=c("iterator"),h=c("toStringTag"),u=o.values,d=function(t,e){if(t){if(t[l]!==u)try{a(t,l,u)}catch(i){t[l]=u}if(t[h]||a(t,h,e),r[e])for(var n in o)if(t[n]!==o[n])try{a(t,n,o[n])}catch(i){t[n]=o[n]}}};for(var p in r)d(i[p]&&i[p].prototype,p);d(s,"DOMTokenList")},df75:function(t,e,n){var i=n("ca84"),r=n("7839");t.exports=Object.keys||function(t){return i(t,r)}},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t){"string"!==typeof t&&(t+="");var e,n=0,i=-1,r=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!r){n=e+1;break}}else-1===i&&(r=!1,i=e+1);return-1===i?"":t.slice(n,i)}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}e.resolve=function(){for(var e="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,i="/"===o.charAt(0))}return e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===s(t,-1);return t=n(r(t.split("/"),(function(t){return!!t})),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function i(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var r=i(t.split("/")),s=i(n.split("/")),o=Math.min(r.length,s.length),a=o,c=0;c<o;c++)if(r[c]!==s[c]){a=c;break}var l=[];for(c=a;c<r.length;c++)l.push("..");return l=l.concat(s.slice(a)),l.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,i=-1,r=!0,s=t.length-1;s>=1;--s)if(e=t.charCodeAt(s),47===e){if(!r){i=s;break}}else r=!1;return-1===i?n?"/":".":n&&1===i?"/":t.slice(0,i)},e.basename=function(t,e){var n=i(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,i=-1,r=!0,s=0,o=t.length-1;o>=0;--o){var a=t.charCodeAt(o);if(47!==a)-1===i&&(r=!1,i=o+1),46===a?-1===e?e=o:1!==s&&(s=1):-1!==e&&(s=-1);else if(!r){n=o+1;break}}return-1===e||-1===i||0===s||1===s&&e===i-1&&e===n+1?"":t.slice(e,i)};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},e01a:function(t,e,n){"use strict";var i=n("23e7"),r=n("83ab"),s=n("da84"),o=n("5135"),a=n("1626"),c=n("861d"),l=n("9bf2").f,h=n("e893"),u=s.Symbol;if(r&&a(u)&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};h(p,u);var f=p.prototype=u.prototype;f.constructor=p;var g=f.toString,m="Symbol(test)"==String(u("test")),y=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=g.call(t);if(o(d,t))return"";var n=m?e.slice(7,-1):e.replace(y,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:p})}},e163:function(t,e,n){var i=n("5135"),r=n("1626"),s=n("7b0b"),o=n("f772"),a=n("e177"),c=o("IE_PROTO"),l=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){var e=s(t);if(i(e,c))return e[c];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof Object?l:null}},e177:function(t,e,n){var i=n("d039");t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,n){"use strict";var i=n("fc6a"),r=n("44d2"),s=n("3f8c"),o=n("69f3"),a=n("7dd0"),c="Array Iterator",l=o.set,h=o.getterFor(c);t.exports=a(Array,"Array",(function(t,e){l(this,{type:c,target:i(t),index:0,kind:e})}),(function(){var t=h(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},e2cc:function(t,e,n){var i=n("6eeb");t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},e538:function(t,e,n){var i=n("b622");e.f=i},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e6cf:function(t,e,n){"use strict";var i,r,s,o,a=n("23e7"),c=n("c430"),l=n("da84"),h=n("d066"),u=n("fea9"),d=n("6eeb"),p=n("e2cc"),f=n("d2bb"),g=n("d44e"),m=n("2626"),y=n("59ed"),v=n("1626"),b=n("861d"),w=n("19aa"),_=n("8925"),x=n("2266"),T=n("1c7e"),S=n("4840"),C=n("2cf4").set,k=n("b575"),O=n("cdf9"),I=n("44de"),E=n("f069"),A=n("e667"),P=n("69f3"),N=n("94ca"),j=n("b622"),R=n("6069"),M=n("605d"),D=n("2d00"),L=j("species"),F="Promise",U=P.get,B=P.set,V=P.getterFor(F),z=u&&u.prototype,q=u,W=z,H=l.TypeError,G=l.document,K=l.process,$=E.f,Y=$,X=!!(G&&G.createEvent&&l.dispatchEvent),Q=v(l.PromiseRejectionEvent),J="unhandledrejection",Z="rejectionhandled",tt=0,et=1,nt=2,it=1,rt=2,st=!1,ot=N(F,(function(){var t=_(q),e=t!==String(q);if(!e&&66===D)return!0;if(c&&!W["finally"])return!0;if(D>=51&&/native code/.test(t))return!1;var n=new q((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))},r=n.constructor={};return r[L]=i,st=n.then((function(){}))instanceof i,!st||!e&&R&&!Q})),at=ot||!T((function(t){q.all(t)["catch"]((function(){}))})),ct=function(t){var e;return!(!b(t)||!v(e=t.then))&&e},lt=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;k((function(){var i=t.value,r=t.state==et,s=0;while(n.length>s){var o,a,c,l=n[s++],h=r?l.ok:l.fail,u=l.resolve,d=l.reject,p=l.domain;try{h?(r||(t.rejection===rt&&pt(t),t.rejection=it),!0===h?o=i:(p&&p.enter(),o=h(i),p&&(p.exit(),c=!0)),o===l.promise?d(H("Promise-chain cycle")):(a=ct(o))?a.call(o,u,d):u(o)):d(i)}catch(f){p&&!c&&p.exit(),d(f)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&ut(t)}))}},ht=function(t,e,n){var i,r;X?(i=G.createEvent("Event"),i.promise=e,i.reason=n,i.initEvent(t,!1,!0),l.dispatchEvent(i)):i={promise:e,reason:n},!Q&&(r=l["on"+t])?r(i):t===J&&I("Unhandled promise rejection",n)},ut=function(t){C.call(l,(function(){var e,n=t.facade,i=t.value,r=dt(t);if(r&&(e=A((function(){M?K.emit("unhandledRejection",i,n):ht(J,n,i)})),t.rejection=M||dt(t)?rt:it,e.error))throw e.value}))},dt=function(t){return t.rejection!==it&&!t.parent},pt=function(t){C.call(l,(function(){var e=t.facade;M?K.emit("rejectionHandled",e):ht(Z,e,t.value)}))},ft=function(t,e,n){return function(i){t(e,i,n)}},gt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=nt,lt(t,!0))},mt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw H("Promise can't be resolved itself");var i=ct(e);i?k((function(){var n={done:!1};try{i.call(e,ft(mt,n,t),ft(gt,n,t))}catch(r){gt(n,r,t)}})):(t.value=e,t.state=et,lt(t,!1))}catch(r){gt({done:!1},r,t)}}};if(ot&&(q=function(t){w(this,q,F),y(t),i.call(this);var e=U(this);try{t(ft(mt,e),ft(gt,e))}catch(n){gt(e,n)}},W=q.prototype,i=function(t){B(this,{type:F,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:tt,value:void 0})},i.prototype=p(W,{then:function(t,e){var n=V(this),i=$(S(this,q));return i.ok=!v(t)||t,i.fail=v(e)&&e,i.domain=M?K.domain:void 0,n.parent=!0,n.reactions.push(i),n.state!=tt&&lt(n,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new i,e=U(t);this.promise=t,this.resolve=ft(mt,e),this.reject=ft(gt,e)},E.f=$=function(t){return t===q||t===s?new r(t):Y(t)},!c&&v(u)&&z!==Object.prototype)){o=z.then,st||(d(z,"then",(function(t,e){var n=this;return new q((function(t,e){o.call(n,t,e)})).then(t,e)}),{unsafe:!0}),d(z,"catch",W["catch"],{unsafe:!0}));try{delete z.constructor}catch(yt){}f&&f(z,W)}a({global:!0,wrap:!0,forced:ot},{Promise:q}),g(q,F,!1,!0),m(F),s=h(F),a({target:F,stat:!0,forced:ot},{reject:function(t){var e=$(this);return e.reject.call(void 0,t),e.promise}}),a({target:F,stat:!0,forced:c||ot},{resolve:function(t){return O(c&&this===s?q:this,t)}}),a({target:F,stat:!0,forced:at},{all:function(t){var e=this,n=$(e),i=n.resolve,r=n.reject,s=A((function(){var n=y(e.resolve),s=[],o=0,a=1;x(t,(function(t){var c=o++,l=!1;s.push(void 0),a++,n.call(e,t).then((function(t){l||(l=!0,s[c]=t,--a||i(s))}),r)})),--a||i(s)}));return s.error&&r(s.value),n.promise},race:function(t){var e=this,n=$(e),i=n.reject,r=A((function(){var r=y(e.resolve);x(t,(function(t){r.call(e,t).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}})},e893:function(t,e,n){var i=n("5135"),r=n("56ef"),s=n("06cf"),o=n("9bf2");t.exports=function(t,e){for(var n=r(e),a=o.f,c=s.f,l=0;l<n.length;l++){var h=n[l];i(t,h)||a(t,h,c(e,h))}}},e8b5:function(t,e,n){var i=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==i(t)}},e95a:function(t,e,n){var i=n("b622"),r=n("3f8c"),s=i("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[s]===t)}},ea7f:function(t,e,n){"use strict";var i;(function(r,s){t.exports?(s["default"]=s,t.exports=r.document?s(r):s):(i=function(){return s(r)}.call(e,n,e,t),void 0===i||(t.exports=i))})("undefined"!==typeof window?window:this,(function(t){function e(t,e,n,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,n))}var n={};return e(n,"Core/Globals.js",[],(function(){var e,n="undefined"!==typeof t?t:"undefined"!==typeof window?window:{};return function(t){t.SVG_NS="http://www.w3.org/2000/svg",t.product="Highcharts",t.version="9.2.2",t.win=n,t.doc=t.win.document,t.svg=t.doc&&t.doc.createElementNS&&!!t.doc.createElementNS(t.SVG_NS,"svg").createSVGRect,t.userAgent=t.win.navigator&&t.win.navigator.userAgent||"",t.isChrome=-1!==t.userAgent.indexOf("Chrome"),t.isFirefox=-1!==t.userAgent.indexOf("Firefox"),t.isMS=/(edge|msie|trident)/i.test(t.userAgent)&&!t.win.opera,t.isSafari=!t.isChrome&&-1!==t.userAgent.indexOf("Safari"),t.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(t.userAgent),t.isWebKit=-1!==t.userAgent.indexOf("AppleWebKit"),t.deg2rad=2*Math.PI/360,t.hasBidiBug=t.isFirefox&&4>parseInt(t.userAgent.split("Firefox/")[1],10),t.hasTouch=!!t.win.TouchEvent,t.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],t.noop=function(){},t.supportsPassiveEvents=function(){var e=!1;if(!t.isMS){var n=Object.defineProperty({},"passive",{get:function(){e=!0}});t.win.addEventListener&&t.win.removeEventListener&&(t.win.addEventListener("testPassive",t.noop,n),t.win.removeEventListener("testPassive",t.noop,n))}return e}(),t.charts=[],t.dateFormats={},t.seriesTypes={},t.symbolSizes={},t.chartCount=0}(e||(e={})),e})),e(n,"Core/Utilities.js",[n["Core/Globals.js"]],(function(t){function e(n,i,r,s){var o=i?"Highcharts error":"Highcharts warning";32===n&&(n=o+": Deprecated member");var a=l(n),c=a?o+" #"+n+": www.highcharts.com/errors/"+n+"/":n.toString();if("undefined"!==typeof s){var h="";a&&(c+="?"),v(s,(function(t,e){h+="\n - "+e+": "+t,a&&(c+=encodeURI(e)+"="+encodeURI(t))})),c+=h}w(t,"displayError",{chart:r,code:n,message:c,params:s},(function(){if(i)throw Error(c);S.console&&-1===e.messages.indexOf(c)&&console.warn(c)})),e.messages.push(c)}function n(t,e){var i={};return v(t,(function(r,s){o(t[s],!0)&&!t.nodeType&&e[s]?(r=n(t[s],e[s]),Object.keys(r).length&&(i[s]=r)):(o(t[s])||t[s]!==e[s])&&(i[s]=t[s])})),i}function i(t,e){return parseInt(t,e||10)}function r(t){return"string"===typeof t}function s(t){return t=Object.prototype.toString.call(t),"[object Array]"===t||"[object Array Iterator]"===t}function o(t,e){return!!t&&"object"===typeof t&&(!e||!s(t))}function a(t){return o(t)&&"number"===typeof t.nodeType}function c(t){var e=t&&t.constructor;return!(!o(t,!0)||a(t)||!e||!e.name||"Object"===e.name)}function l(t){return"number"===typeof t&&!isNaN(t)&&1/0>t&&-1/0<t}function h(t){return"undefined"!==typeof t&&null!==t}function u(t,e,n){var i;return r(e)?h(n)?t.setAttribute(e,n):t&&t.getAttribute&&((i=t.getAttribute(e))||"class"!==e||(i=t.getAttribute(e+"Name"))):v(e,(function(e,n){t.setAttribute(n,e)})),i}function d(t,e){var n;for(n in t||(t={}),e)t[n]=e[n];return t}function p(){for(var t=arguments,e=t.length,n=0;n<e;n++){var i=t[n];if("undefined"!==typeof i&&null!==i)return i}}function f(e,n){t.isMS&&!t.svg&&n&&"undefined"!==typeof n.opacity&&(n.filter="alpha(opacity="+100*n.opacity+")"),d(e.style,n)}function g(t,e,n,i,r){return t=T.createElement(t),e&&d(t,e),r&&f(t,{padding:"0",border:"none",margin:"0"}),n&&f(t,n),i&&i.appendChild(t),t}function m(t,e){return parseFloat(t.toPrecision(e||14))}function y(n,r,s){var o=t.getStyle||y;if("width"===r)return r=Math.min(n.offsetWidth,n.scrollWidth),s=n.getBoundingClientRect&&n.getBoundingClientRect().width,s<r&&s>=r-1&&(r=Math.floor(s)),Math.max(0,r-(o(n,"padding-left",!0)||0)-(o(n,"padding-right",!0)||0));if("height"===r)return Math.max(0,Math.min(n.offsetHeight,n.scrollHeight)-(o(n,"padding-top",!0)||0)-(o(n,"padding-bottom",!0)||0));if(S.getComputedStyle||e(27,!0),n=S.getComputedStyle(n,void 0)){var a=n.getPropertyValue(r);p(s,"opacity"!==r)&&(a=i(a))}return a}function v(t,e,n){for(var i in t)Object.hasOwnProperty.call(t,i)&&e.call(n||t[i],t[i],i,t)}function b(e,n,i){function r(n,i){var r=e.removeEventListener||t.removeEventListenerPolyfill;r&&r.call(e,n,i,!1)}function s(t){var i;if(e.nodeName){if(n){var s={};s[n]=!0}else s=t;v(s,(function(e,n){if(t[n])for(i=t[n].length;i--;)r(n,t[n][i].fn)}))}}var o="function"===typeof e&&e.prototype||e;if(Object.hasOwnProperty.call(o,"hcEvents")){var a=o.hcEvents;n?(o=a[n]||[],i?(a[n]=o.filter((function(t){return i!==t.fn})),r(n,i)):(s(a),a[n]=[])):(s(a),delete o.hcEvents)}}function w(e,n,i,r){if(i=i||{},T.createEvent&&(e.dispatchEvent||e.fireEvent&&e!==t)){var s=T.createEvent("Events");s.initEvent(n,!0,!0),i=d(s,i),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent(n,i)}else if(e.hcEvents){i.target||d(i,{preventDefault:function(){i.defaultPrevented=!0},target:e,type:n}),s=[];for(var o=e,a=!1;o.hcEvents;)Object.hasOwnProperty.call(o,"hcEvents")&&o.hcEvents[n]&&(s.length&&(a=!0),s.unshift.apply(s,o.hcEvents[n])),o=Object.getPrototypeOf(o);a&&s.sort((function(t,e){return t.order-e.order})),s.forEach((function(t){!1===t.fn.call(e,i)&&i.preventDefault()}))}r&&!i.defaultPrevented&&r.call(e,i)}var _,x=t.charts,T=t.doc,S=t.win;(e||(e={})).messages=[],Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)};var C=Array.prototype.find?function(t,e){return t.find(e)}:function(t,e){var n,i=t.length;for(n=0;n<i;n++)if(e(t[n],n))return t[n]};v({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},(function(n,i){t[i]=function(t){var r;return e(32,!1,void 0,(r={},r["Highcharts."+i]="use Array."+n,r)),Array.prototype[n].apply(t,[].slice.call(arguments,1))}}));var k,O=function(){var t=Math.random().toString(36).substring(2,9)+"-",e=0;return function(){return"highcharts-"+(k?"":t)+e++}}();return S.jQuery&&(S.jQuery.fn.highcharts=function(){var e=[].slice.call(arguments);if(this[0])return e[0]?(new(t[r(e[0])?e.shift():"Chart"])(this[0],e[0],e[1]),this):x[u(this[0],"data-highcharts-chart")]}),C={addEvent:function(e,n,i,r){void 0===r&&(r={});var s="function"===typeof e&&e.prototype||e;Object.hasOwnProperty.call(s,"hcEvents")||(s.hcEvents={}),s=s.hcEvents,t.Point&&e instanceof t.Point&&e.series&&e.series.chart&&(e.series.chart.runTrackerClick=!0);var o=e.addEventListener||t.addEventListenerPolyfill;return o&&o.call(e,n,i,!!t.supportsPassiveEvents&&{passive:void 0===r.passive?-1!==n.indexOf("touch"):r.passive,capture:!1}),s[n]||(s[n]=[]),s[n].push({fn:i,order:"number"===typeof r.order?r.order:1/0}),s[n].sort((function(t,e){return t.order-e.order})),function(){b(e,n,i)}},arrayMax:function(t){for(var e=t.length,n=t[0];e--;)t[e]>n&&(n=t[e]);return n},arrayMin:function(t){for(var e=t.length,n=t[0];e--;)t[e]<n&&(n=t[e]);return n},attr:u,clamp:function(t,e,n){return t>e?t<n?t:n:e},cleanRecursively:n,clearTimeout:function(t){h(t)&&clearTimeout(t)},correctFloat:m,createElement:g,css:f,defined:h,destroyObjectProperties:function(t,e){v(t,(function(n,i){n&&n!==e&&n.destroy&&n.destroy(),delete t[i]}))},discardElement:function(t){_||(_=g("div")),t&&_.appendChild(t),_.innerHTML=""},erase:function(t,e){for(var n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}},error:e,extend:d,extendClass:function(t,e){var n=function(){};return n.prototype=new t,d(n.prototype,e),n},find:C,fireEvent:w,getMagnitude:function(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))},getNestedProperty:function(t,e){for(t=t.split(".");t.length&&h(e);){var n=t.shift();if("undefined"===typeof n||"__proto__"===n)return;if(e=e[n],!h(e)||"function"===typeof e||"number"===typeof e.nodeType||e===S)return}return e},getStyle:y,inArray:function(t,n,i){return e(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),n.indexOf(t,i)},isArray:s,isClass:c,isDOMElement:a,isFunction:function(t){return"function"===typeof t},isNumber:l,isObject:o,isString:r,keys:function(t){return e(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(t)},merge:function(){var t,e=arguments,n={},i=function(t,e){return"object"!==typeof t&&(t={}),v(e,(function(n,r){"__proto__"!==r&&"constructor"!==r&&(!o(n,!0)||c(n)||a(n)?t[r]=e[r]:t[r]=i(t[r]||{},n))})),t};!0===e[0]&&(n=e[1],e=Array.prototype.slice.call(e,2));var r=e.length;for(t=0;t<r;t++)n=i(n,e[t]);return n},normalizeTickInterval:function(t,e,n,i,r){var s=t;n=p(n,1);var o=t/n;for(e||(e=r?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===i&&(1===n?e=e.filter((function(t){return 0===t%1})):.1>=n&&(e=[1/n]))),i=0;i<e.length&&(s=e[i],!(r&&s*n>=t||!r&&o<=(e[i]+(e[i+1]||e[i]))/2));i++);return m(s*n,-Math.round(Math.log(.001)/Math.LN10))},objectEach:v,offset:function(t){var e=T.documentElement;return t=t.parentElement||t.parentNode?t.getBoundingClientRect():{top:0,left:0,width:0,height:0},{top:t.top+(S.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t.left+(S.pageXOffset||e.scrollLeft)-(e.clientLeft||0),width:t.width,height:t.height}},pad:function(t,e,n){return Array((e||2)+1-String(t).replace("-","").length).join(n||"0")+t},pick:p,pInt:i,relativeLength:function(t,e,n){return/%$/.test(t)?e*parseFloat(t)/100+(n||0):parseFloat(t)},removeEvent:b,splat:function(t){return s(t)?t:[t]},stableSort:function(t,e){var n,i,r=t.length;for(i=0;i<r;i++)t[i].safeI=i;for(t.sort((function(t,i){return n=e(t,i),0===n?t.safeI-i.safeI:n})),i=0;i<r;i++)delete t[i].safeI},syncTimeout:function(t,e,n){return 0<e?setTimeout(t,e,n):(t.call(0,n),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:O,useSerialIds:function(t){return k=p(t,k)},wrap:function(t,e,n){var i=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments),e=arguments,r=this;return r.proceed=function(){i.apply(r,arguments.length?arguments:e)},t.unshift(i),t=n.apply(this,t),r.proceed=null,t}}},C})),e(n,"Core/Color/Palette.js",[],(function(){return{colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" "),backgroundColor:"#ffffff",neutralColor100:"#000000",neutralColor80:"#333333",neutralColor60:"#666666",neutralColor40:"#999999",neutralColor20:"#cccccc",neutralColor10:"#e6e6e6",neutralColor5:"#f2f2f2",neutralColor3:"#f7f7f7",highlightColor100:"#003399",highlightColor80:"#335cad",highlightColor60:"#6685c2",highlightColor20:"#ccd6eb",highlightColor10:"#e6ebf5",positiveColor:"#06b535",negativeColor:"#f21313"}})),e(n,"Core/Chart/ChartDefaults.js",[n["Core/Color/Palette.js"]],(function(t){return{panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}},zoomBySingleTouch:!1,width:null,height:null,borderColor:t.highlightColor80,backgroundColor:t.backgroundColor,plotBorderColor:t.neutralColor20}})),e(n,"Core/Color/Color.js",[n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e){var n=e.isNumber,i=e.merge,r=e.pInt;return e=function(){function e(n){this.rgba=[NaN,NaN,NaN,NaN],this.input=n;var i=t.Color;return i&&i!==e?new i(n):this instanceof e?void this.init(n):new e(n)}return e.parse=function(t){return t?new e(t):e.None},e.prototype.init=function(t){var n;if("object"===typeof t&&"undefined"!==typeof t.stops)this.stops=t.stops.map((function(t){return new e(t[1])}));else if("string"===typeof t){if(this.input=t=e.names[t.toLowerCase()]||t,"#"===t.charAt(0)){var i=t.length,r=parseInt(t.substr(1),16);7===i?n=[(16711680&r)>>16,(65280&r)>>8,255&r,1]:4===i&&(n=[(3840&r)>>4|(3840&r)>>8,(240&r)>>4|240&r,(15&r)<<4|15&r,1])}if(!n)for(r=e.parsers.length;r--&&!n;){var s=e.parsers[r];(i=s.regex.exec(t))&&(n=s.parse(i))}}n&&(this.rgba=n)},e.prototype.get=function(t){var e=this.input,r=this.rgba;if("object"===typeof e&&"undefined"!==typeof this.stops){var s=i(e);return s.stops=[].slice.call(s.stops),this.stops.forEach((function(e,n){s.stops[n]=[s.stops[n][0],e.get(t)]})),s}return r&&n(r[0])?"rgb"===t||!t&&1===r[3]?"rgb("+r[0]+","+r[1]+","+r[2]+")":"a"===t?""+r[3]:"rgba("+r.join(",")+")":e},e.prototype.brighten=function(t){var e=this.rgba;if(this.stops)this.stops.forEach((function(e){e.brighten(t)}));else if(n(t)&&0!==t)for(var i=0;3>i;i++)e[i]+=r(255*t),0>e[i]&&(e[i]=0),255<e[i]&&(e[i]=255);return this},e.prototype.setOpacity=function(t){return this.rgba[3]=t,this},e.prototype.tweenTo=function(t,e){var i=this.rgba,r=t.rgba;return n(i[0])&&n(r[0])?(t=1!==r[3]||1!==i[3],(t?"rgba(":"rgb(")+Math.round(r[0]+(i[0]-r[0])*(1-e))+","+Math.round(r[1]+(i[1]-r[1])*(1-e))+","+Math.round(r[2]+(i[2]-r[2])*(1-e))+(t?","+(r[3]+(i[3]-r[3])*(1-e)):"")+")"):t.input||"none"},e.names={white:"#ffffff",black:"#000000"},e.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[r(t[1]),r(t[2]),r(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[r(t[1]),r(t[2]),r(t[3]),1]}}],e.None=new e(""),e}(),e})),e(n,"Core/Time.js",[n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e){var n=t.win,i=e.defined,r=e.error,s=e.extend,o=e.isObject,a=e.merge,c=e.objectEach,l=e.pad,h=e.pick,u=e.splat,d=e.timeUnits,p=t.isSafari&&n.Intl&&n.Intl.DateTimeFormat.prototype.formatRange,f=t.isSafari&&n.Intl&&!n.Intl.DateTimeFormat.prototype.formatRange;return e=function(){function e(t){this.options={},this.variableTimezone=this.useUTC=!1,this.Date=n.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(t)}return e.prototype.get=function(t,e){if(this.variableTimezone||this.timezoneOffset){var n=e.getTime(),i=n-this.getTimezoneOffset(e);return e.setTime(i),t=e["getUTC"+t](),e.setTime(n),t}return this.useUTC?e["getUTC"+t]():e["get"+t]()},e.prototype.set=function(t,e,n){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===t||"Seconds"===t||"Minutes"===t&&0===this.getTimezoneOffset(e)%36e5)return e["setUTC"+t](n);var i=this.getTimezoneOffset(e);return i=e.getTime()-i,e.setTime(i),e["setUTC"+t](n),t=this.getTimezoneOffset(e),i=e.getTime()+t,e.setTime(i)}return this.useUTC||p&&"FullYear"===t?e["setUTC"+t](n):e["set"+t](n)},e.prototype.update=function(t){var e=h(t&&t.useUTC,!0);this.options=t=a(!0,this.options||{},t),this.Date=t.Date||n.Date||Date,this.timezoneOffset=(this.useUTC=e)&&t.timezoneOffset,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=e&&!(!t.getTimezoneOffset&&!t.timezone)},e.prototype.makeTime=function(t,e,n,i,r,s){if(this.useUTC){var o=this.Date.UTC.apply(0,arguments),a=this.getTimezoneOffset(o);o+=a;var c=this.getTimezoneOffset(o);a!==c?o+=c-a:a-36e5!==this.getTimezoneOffset(o-36e5)||f||(o-=36e5)}else o=new this.Date(t,e,h(n,1),h(i,0),h(r,0),h(s,0)).getTime();return o},e.prototype.timezoneOffsetFunction=function(){var t=this,e=this.options,i=e.moment||n.moment;if(!this.useUTC)return function(t){return 6e4*new Date(t.toString()).getTimezoneOffset()};if(e.timezone){if(i)return function(t){return 6e4*-i.tz(t,e.timezone).utcOffset()};r(25)}return this.useUTC&&e.getTimezoneOffset?function(t){return 6e4*e.getTimezoneOffset(t.valueOf())}:function(){return 6e4*(t.timezoneOffset||0)}},e.prototype.dateFormat=function(e,n,r){if(!i(n)||isNaN(n))return t.defaultOptions.lang&&t.defaultOptions.lang.invalidDate||"";e=h(e,"%Y-%m-%d %H:%M:%S");var o=this,a=new this.Date(n),u=this.get("Hours",a),d=this.get("Day",a),p=this.get("Date",a),f=this.get("Month",a),g=this.get("FullYear",a),m=t.defaultOptions.lang,y=m&&m.weekdays,v=m&&m.shortWeekdays;return a=s({a:v?v[d]:y[d].substr(0,3),A:y[d],d:l(p),e:l(p,2," "),w:d,b:m.shortMonths[f],B:m.months[f],m:l(f+1),o:f+1,y:g.toString().substr(2,2),Y:g,H:l(u),k:u,I:l(u%12||12),l:u%12||12,M:l(this.get("Minutes",a)),p:12>u?"AM":"PM",P:12>u?"am":"pm",S:l(a.getSeconds()),L:l(Math.floor(n%1e3),3)},t.dateFormats),c(a,(function(t,i){for(;-1!==e.indexOf("%"+i);)e=e.replace("%"+i,"function"===typeof t?t.call(o,n):t)})),r?e.substr(0,1).toUpperCase()+e.substr(1):e},e.prototype.resolveDTLFormat=function(t){return o(t,!0)?t:(t=u(t),{main:t[0],from:t[1],to:t[2]})},e.prototype.getTimeTicks=function(t,e,n,r){var o,a=this,c=[],l={},u=new a.Date(e),p=t.unitRange,f=t.count||1;if(r=h(r,1),i(e)){if(a.set("Milliseconds",u,p>=d.second?0:f*Math.floor(a.get("Milliseconds",u)/f)),p>=d.second&&a.set("Seconds",u,p>=d.minute?0:f*Math.floor(a.get("Seconds",u)/f)),p>=d.minute&&a.set("Minutes",u,p>=d.hour?0:f*Math.floor(a.get("Minutes",u)/f)),p>=d.hour&&a.set("Hours",u,p>=d.day?0:f*Math.floor(a.get("Hours",u)/f)),p>=d.day&&a.set("Date",u,p>=d.month?1:Math.max(1,f*Math.floor(a.get("Date",u)/f))),p>=d.month){a.set("Month",u,p>=d.year?0:f*Math.floor(a.get("Month",u)/f));var g=a.get("FullYear",u)}p>=d.year&&a.set("FullYear",u,g-g%f),p===d.week&&(g=a.get("Day",u),a.set("Date",u,a.get("Date",u)-g+r+(g<r?-7:0))),g=a.get("FullYear",u),r=a.get("Month",u);var m=a.get("Date",u),y=a.get("Hours",u);for(e=u.getTime(),!a.variableTimezone&&a.useUTC||!i(n)||(o=n-e>4*d.month||a.getTimezoneOffset(e)!==a.getTimezoneOffset(n)),e=u.getTime(),u=1;e<n;)c.push(e),e=p===d.year?a.makeTime(g+u*f,0):p===d.month?a.makeTime(g,r+u*f):!o||p!==d.day&&p!==d.week?o&&p===d.hour&&1<f?a.makeTime(g,r,m,y+u*f):e+p*f:a.makeTime(g,r,m+u*f*(p===d.day?1:7)),u++;c.push(e),p<=d.hour&&1e4>c.length&&c.forEach((function(t){0===t%18e5&&"000000000"===a.dateFormat("%H%M%S%L",t)&&(l[t]="day")}))}return c.info=s(t,{higherRanks:l,totalRange:p*f}),c},e.prototype.getDateFormat=function(t,e,n,i){var r=this.dateFormat("%m-%d %H:%M:%S.%L",e),s={millisecond:15,second:12,minute:9,hour:6,day:3},o="millisecond";for(a in d){if(t===d.week&&+this.dateFormat("%w",e)===n&&"00:00:00.000"===r.substr(6)){var a="week";break}if(d[a]>t){a=o;break}if(s[a]&&r.substr(s[a])!=="01-01 00:00:00.000".substr(s[a]))break;"week"!==a&&(o=a)}if(a)var c=this.resolveDTLFormat(i[a]).main;return c},e}(),e})),e(n,"Core/DefaultOptions.js",[n["Core/Chart/ChartDefaults.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Color/Palette.js"],n["Core/Time.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s){e=e.parse;var o=s.merge,a={colors:i.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:t,title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},caption:{margin:15,text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},labels:{style:{position:"absolute",color:i.neutralColor80}},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:i.neutralColor40,borderRadius:0,navigation:{activeColor:i.highlightColor100,inactiveColor:i.neutralColor20},itemStyle:{color:i.neutralColor80,cursor:"pointer",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:i.neutralColor100},itemHiddenStyle:{color:i.neutralColor20},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:i.backgroundColor,opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:n.svg,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:n.isTouchDevice?25:10,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:e(i.neutralColor3).setOpacity(.85).get(),borderWidth:1,shadow:!0,stickOnContact:!1,style:{color:i.neutralColor80,cursor:"default",fontSize:"12px",whiteSpace:"nowrap"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:i.neutralColor40,fontSize:"9px"},text:"Highcharts.com"}};a.chart.styledMode=!1;var c=new r(o(a.global,a.time));return t={defaultOptions:a,defaultTime:c,getOptions:function(){return a},setOptions:function(t){return o(!0,a,t),(t.time||t.global)&&(n.time?n.time.update(o(a.global,a.time,t.global,t.time)):n.time=c),a}},t})),e(n,"Core/Animation/Fx.js",[n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e,n){var i=t.parse,r=e.win,s=n.isNumber,o=n.objectEach;return function(){function t(t,e,n){this.pos=NaN,this.options=e,this.elem=t,this.prop=n}return t.prototype.dSetter=function(){var t=this.paths,e=t&&t[0];t=t&&t[1];var n=this.now||0,i=[];if(1!==n&&e&&t)if(e.length===t.length&&1>n)for(var r=0;r<t.length;r++){for(var o=e[r],a=t[r],c=[],l=0;l<a.length;l++){var h=o[l],u=a[l];s(h)&&s(u)&&("A"!==a[0]||4!==l&&5!==l)?c[l]=h+n*(u-h):c[l]=u}i.push(c)}else i=t;else i=this.toD||[];this.elem.attr("d",i,void 0,!0)},t.prototype.update=function(){var t=this.elem,e=this.prop,n=this.now,i=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,n,null,!0):t.style[e]=n+this.unit,i&&i.call(t,n,this)},t.prototype.run=function(e,n,i){var s=this,o=s.options,a=function(t){return!a.stopped&&s.step(t)},c=r.requestAnimationFrame||function(t){setTimeout(t,13)},l=function(){for(var e=0;e<t.timers.length;e++)t.timers[e]()||t.timers.splice(e--,1);t.timers.length&&c(l)};e!==n||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=e,this.end=n,this.unit=i,this.now=this.start,this.pos=0,a.elem=this.elem,a.prop=this.prop,a()&&1===t.timers.push(a)&&c(l)):(delete o.curAnim[this.prop],o.complete&&0===Object.keys(o.curAnim).length&&o.complete.call(this.elem))},t.prototype.step=function(t){var e=+new Date,n=this.options,i=this.elem,r=n.complete,s=n.duration,a=n.curAnim;if(i.attr&&!i.element)t=!1;else if(t||e>=s+this.startTime){this.now=this.end,this.pos=1,this.update();var c=a[this.prop]=!0;o(a,(function(t){!0!==t&&(c=!1)})),c&&r&&r.call(i),t=!1}else this.pos=n.easing((e-this.startTime)/s),this.now=this.start+(this.end-this.start)*this.pos,this.update(),t=!0;return t},t.prototype.initPath=function(t,e,n){function i(t,e){for(;t.length<d;){var n=t[0],i=e[d-t.length];i&&"M"===n[0]&&(t[0]="C"===i[0]?["C",n[1],n[2],n[1],n[2],n[1],n[2]]:["L",n[1],n[2]]),t.unshift(n),c&&(n=t.pop(),t.push(t[t.length-1],n))}}function r(t,e){for(;t.length<d;)if(e=t[Math.floor(t.length/l)-1].slice(),"C"===e[0]&&(e[1]=e[5],e[2]=e[6]),c){var n=t[Math.floor(t.length/l)].slice();t.splice(t.length/2,0,e,n)}else t.push(e)}var o=t.startX,a=t.endX;n=n.slice();var c=t.isArea,l=c?2:1;if(e=e&&e.slice(),!e)return[n,n];if(o&&a&&a.length){for(t=0;t<o.length;t++){if(o[t]===a[0]){var h=t;break}if(o[0]===a[a.length-o.length+t]){h=t;var u=!0;break}if(o[o.length-1]===a[a.length-o.length+t]){h=o.length-t;break}}"undefined"===typeof h&&(e=[])}if(e.length&&s(h)){var d=n.length+h*l;u?(i(e,n),r(n,e)):(i(n,e),r(e,n))}return[e,n]},t.prototype.fillSetter=function(){t.prototype.strokeSetter.apply(this,arguments)},t.prototype.strokeSetter=function(){this.elem.attr(this.prop,i(this.start).tweenTo(i(this.end),this.pos),null,!0)},t.timers=[],t}()})),e(n,"Core/Animation/AnimationUtilities.js",[n["Core/Animation/Fx.js"],n["Core/Utilities.js"]],(function(t,e){function n(t){return c(t)?l({duration:500,defer:0},t):{duration:t?500:0,defer:0}}function i(e,n){for(var i=t.timers.length;i--;)t.timers[i].elem!==e||n&&n!==t.timers[i].prop||(t.timers[i].stopped=!0)}var r=e.defined,s=e.getStyle,o=e.isArray,a=e.isNumber,c=e.isObject,l=e.merge,h=e.objectEach,u=e.pick;return{animate:function(e,n,r){var u,d,p,f="";if(!c(r)){var g=arguments;r={duration:g[2],easing:g[3],complete:g[4]}}a(r.duration)||(r.duration=400),r.easing="function"===typeof r.easing?r.easing:Math[r.easing]||Math.easeInOutSine,r.curAnim=l(n),h(n,(function(a,c){i(e,c),p=new t(e,r,c),d=void 0,"d"===c&&o(n.d)?(p.paths=p.initPath(e,e.pathArray,n.d),p.toD=n.d,u=0,d=1):e.attr?u=e.attr(c):(u=parseFloat(s(e,c))||0,"opacity"!==c&&(f="px")),d||(d=a),"string"===typeof d&&d.match("px")&&(d=d.replace(/px/g,"")),p.run(u,d,f)}))},animObject:n,getDeferredAnimation:function(t,e,i){var s=n(e),o=0,a=0;return(i?[i]:t.series).forEach((function(t){t=n(t.options.animation),o=e&&r(e.defer)?s.defer:Math.max(o,t.duration+t.defer),a=Math.min(s.duration,t.duration)})),t.renderer.forExport&&(o=0),{defer:Math.max(0,o-a),duration:Math.min(o,a)}},setAnimation:function(t,e){e.renderer.globalAnimation=u(t,e.options.chart.animation,!0)},stop:i}})),e(n,"Core/Renderer/HTML/AST.js",[n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e){var n=t.SVG_NS,i=e.attr,r=e.createElement,s=e.discardElement,o=e.error,a=e.isString,c=e.objectEach,l=e.splat;try{var h=!!(new DOMParser).parseFromString("","text/html")}catch(u){h=!1}return e=function(){function e(t){this.nodes="string"===typeof t?this.parseMarkup(t):t}return e.filterUserAttributes=function(t){return c(t,(function(n,i){var r=!0;-1===e.allowedAttributes.indexOf(i)&&(r=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(i)&&(r=a(n)&&e.allowedReferences.some((function(t){return 0===n.indexOf(t)}))),r||(o("Highcharts warning: Invalid attribute '"+i+"' in config"),delete t[i])})),t},e.setElementHTML=function(t,n){t.innerHTML="",n&&new e(n).addToDOM(t)},e.prototype.addToDOM=function(r){function s(r,a){var h;return l(r).forEach((function(r){var l=r.tagName,u=r.textContent?t.doc.createTextNode(r.textContent):void 0;if(l)if("#text"===l)var d=u;else if(-1!==e.allowedTags.indexOf(l)){l=t.doc.createElementNS("svg"===l?n:a.namespaceURI||n,l);var p=r.attributes||{};c(r,(function(t,e){"tagName"!==e&&"attributes"!==e&&"children"!==e&&"textContent"!==e&&(p[e]=t)})),i(l,e.filterUserAttributes(p)),u&&l.appendChild(u),s(r.children||[],l),d=l}else o("Highcharts warning: Invalid tagName '"+l+"' in config");d&&a.appendChild(d),h=d})),h}return s(this.nodes,r)},e.prototype.parseMarkup=function(t){var e=[];if(t=t.trim(),h)t=(new DOMParser).parseFromString(t,"text/html");else{var n=r("div");n.innerHTML=t,t={body:n}}var i=function(t,e){var n=t.nodeName.toLowerCase(),r={tagName:n};if("#text"===n&&(r.textContent=t.textContent||""),n=t.attributes){var s={};[].forEach.call(n,(function(t){s[t.name]=t.value})),r.attributes=s}if(t.childNodes.length){var o=[];[].forEach.call(t.childNodes,(function(t){i(t,o)})),o.length&&(r.children=o)}e.push(r)};return[].forEach.call(t.body.childNodes,(function(t){return i(t,e)})),n&&s(n),e},e.allowedAttributes="aria-controls aria-describedby aria-expanded aria-haspopup aria-hidden aria-label aria-labelledby aria-live aria-pressed aria-readonly aria-roledescription aria-selected class clip-path color colspan cx cy d dx dy disabled fill height href id in markerHeight markerWidth offset opacity orient padding paddingLeft paddingRight patternUnits r refX refY role scope slope src startOffset stdDeviation stroke stroke-linecap stroke-width style tableValues result rowspan summary target tabindex text-align textAnchor textLength type valign width x x1 x2 y y1 y2 zIndex".split(" "),e.allowedReferences="https:// http:// mailto: / ../ ./ #".split(" "),e.allowedTags="a b br button caption circle clipPath code dd defs div dl dt em feComponentTransfer feFuncA feFuncB feFuncG feFuncR feGaussianBlur feOffset feMerge feMergeNode filter h1 h2 h3 h4 h5 h6 hr i img li linearGradient marker ol p path pattern pre rect small span stop strong style sub sup svg table text thead tbody tspan td th tr u ul #text".split(" "),e}(),e})),e(n,"Core/FormatUtilities.js",[n["Core/DefaultOptions.js"],n["Core/Utilities.js"]],(function(t,e){function n(t,e,n,r){t=+t||0,e=+e;var s=i.lang,l=(t.toString().split(".")[1]||"").split("e")[0].length,h=t.toString().split("e"),u=e;if(-1===e)e=Math.min(l,20);else if(o(e)){if(e&&h[1]&&0>h[1]){var d=e+ +h[1];0<=d?(h[0]=(+h[0]).toExponential(d).split("e")[0],e=d):(h[0]=h[0].split(".")[0]||0,t=20>e?(h[0]*Math.pow(10,h[1])).toFixed(e):0,h[1]=0)}}else e=2;d=(Math.abs(h[1]?h[0]:t)+Math.pow(10,-Math.max(e,l)-1)).toFixed(e),l=String(c(d));var p=3<l.length?l.length%3:0;return n=a(n,s.decimalPoint),r=a(r,s.thousandsSep),t=(0>t?"-":"")+(p?l.substr(0,p)+r:""),t=0>+h[1]&&!u?"0":t+l.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+r),e&&(t+=n+d.slice(-e)),h[1]&&0!==+t&&(t+="e"+h[1]),t}var i=t.defaultOptions,r=t.defaultTime,s=e.getNestedProperty,o=e.isNumber,a=e.pick,c=e.pInt;return{dateFormat:function(t,e,n){return r.dateFormat(t,e,n)},format:function(t,e,o){var a="{",c=!1,l=/f$/,h=/\.([0-9])/,u=i.lang,d=o&&o.time||r;o=o&&o.numberFormatter||n;for(var p=[];t;){var f=t.indexOf(a);if(-1===f)break;var g=t.slice(0,f);if(c){if(g=g.split(":"),a=s(g.shift()||"",e),g.length&&"number"===typeof a)if(g=g.join(":"),l.test(g)){var m=parseInt((g.match(h)||["","-1"])[1],10);null!==a&&(a=o(a,m,u.decimalPoint,-1<g.indexOf(",")?u.thousandsSep:""))}else a=d.dateFormat(g,a);p.push(a)}else p.push(g);t=t.slice(f+1),a=(c=!c)?"}":"{"}return p.push(t),p.join("")},numberFormat:n}})),e(n,"Core/Renderer/RendererUtilities.js",[n["Core/Utilities.js"]],(function(t){var e,n=t.clamp,i=t.pick,r=t.stableSort;return function(t){function e(t,s,o){var a,c=t,l=c.reducedLen||s,h=function(t,e){return(e.rank||0)-(t.rank||0)},u=function(t,e){return t.target-e.target},d=!0,p=[],f=0;for(a=t.length;a--;)f+=t[a].size;if(f>l){for(r(t,h),f=a=0;f<=l;)f+=t[a].size,a++;p=t.splice(a-1,t.length)}for(r(t,u),t=t.map((function(t){return{size:t.size,targets:[t.target],align:i(t.align,.5)}}));d;){for(a=t.length;a--;)l=t[a],h=(Math.min.apply(0,l.targets)+Math.max.apply(0,l.targets))/2,l.pos=n(h-l.size*l.align,0,s-l.size);for(a=t.length,d=!1;a--;)0<a&&t[a-1].pos+t[a-1].size>t[a].pos&&(t[a-1].size+=t[a].size,t[a-1].targets=t[a-1].targets.concat(t[a].targets),t[a-1].align=.5,t[a-1].pos+t[a-1].size>s&&(t[a-1].pos=s-t[a-1].size),t.splice(a,1),d=!0)}return c.push.apply(c,p),a=0,t.some((function(t){var n=0;return(t.targets||[]).some((function(){return c[a].pos=t.pos+n,"undefined"!==typeof o&&Math.abs(c[a].pos-c[a].target)>o?(c.slice(0,a+1).forEach((function(t){return delete t.pos})),c.reducedLen=(c.reducedLen||s)-.1*s,c.reducedLen>.1*s&&e(c,s,o),!0):(n+=c[a].size,a++,!1)}))})),r(c,u),c}t.distribute=e}(e||(e={})),e})),e(n,"Core/Renderer/SVG/SVGElement.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Renderer/HTML/AST.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Color/Palette.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s){var o=t.animate,a=t.animObject,c=t.stop,l=i.deg2rad,h=i.doc,u=i.noop,d=i.svg,p=i.SVG_NS,f=i.win,g=s.addEvent,m=s.attr,y=s.createElement,v=s.css,b=s.defined,w=s.erase,_=s.extend,x=s.fireEvent,T=s.isArray,S=s.isFunction,C=s.isNumber,k=s.isString,O=s.merge,I=s.objectEach,E=s.pick,A=s.pInt,P=s.syncTimeout,N=s.uniqueKey;return t=function(){function t(){this.element=void 0,this.onEvents={},this.opacity=1,this.renderer=void 0,this.SVG_NS=p,this.symbolCustomAttribs="x y width height r start end innerR anchorX anchorY rounded".split(" ")}return t.prototype._defaultGetter=function(t){return t=E(this[t+"Value"],this[t],this.element?this.element.getAttribute(t):null,0),/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},t.prototype._defaultSetter=function(t,e,n){n.setAttribute(e,t)},t.prototype.add=function(t){var e=this.renderer,n=this.element;if(t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,"undefined"!==typeof this.textStr&&"text"===this.element.nodeName&&e.buildText(this),this.added=!0,!t||t.handleZ||this.zIndex)var i=this.zIndexSetter();return i||(t?t.element:e.box).appendChild(n),this.onAdd&&this.onAdd(),this},t.prototype.addClass=function(t,e){var n=e?"":this.attr("class")||"";return t=(t||"").split(/ /g).reduce((function(t,e){return-1===n.indexOf(e)&&t.push(e),t}),n?[n]:[]).join(" "),t!==n&&this.attr("class",t),this},t.prototype.afterSetters=function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},t.prototype.align=function(t,e,n){var i,r,s,o={},a=this.renderer,c=a.alignedObjects;t?(this.alignOptions=t,this.alignByTranslate=e,(!n||k(n))&&(this.alignTo=i=n||"renderer",w(c,this),c.push(this),n=void 0)):(t=this.alignOptions,e=this.alignByTranslate,i=this.alignTo),n=E(n,a[i],"scrollablePlotBox"===i?a.plotBox:void 0,a),i=t.align;var l=t.verticalAlign;return a=(n.x||0)+(t.x||0),c=(n.y||0)+(t.y||0),"right"===i?r=1:"center"===i&&(r=2),r&&(a+=(n.width-(t.width||0))/r),o[e?"translateX":"x"]=Math.round(a),"bottom"===l?s=1:"middle"===l&&(s=2),s&&(c+=(n.height-(t.height||0))/s),o[e?"translateY":"y"]=Math.round(c),this[this.placed?"animate":"attr"](o),this.placed=!0,this.alignAttr=o,this},t.prototype.alignSetter=function(t){var e={left:"start",center:"middle",right:"end"};e[t]&&(this.alignValue=t,this.element.setAttribute("text-anchor",e[t]))},t.prototype.animate=function(t,e,n){var i=this,r=a(E(e,this.renderer.globalAnimation,!0));return e=r.defer,E(h.hidden,h.msHidden,h.webkitHidden,!1)&&(r.duration=0),0!==r.duration?(n&&(r.complete=n),P((function(){i.element&&o(i,t,r)}),e)):(this.attr(t,void 0,n),I(t,(function(t,e){r.step&&r.step.call(this,t,{prop:e,pos:1,elem:this})}),this)),this},t.prototype.applyTextOutline=function(t){var e=this.element;-1!==t.indexOf("contrast")&&(t=t.replace(/contrast/g,this.renderer.getContrast(e.style.fill)));var n=t.split(" ");if(t=n[n.length-1],(n=n[0])&&"none"!==n&&i.svg){this.fakeTS=!0,this.ySetter=this.xSetter,n=n.replace(/(^[\d\.]+)(.*?)$/g,(function(t,e,n){return 2*Number(e)+n})),this.removeTextOutline();var r=h.createElementNS(p,"tspan");m(r,{class:"highcharts-text-outline",fill:t,stroke:t,"stroke-width":n,"stroke-linejoin":"round"}),[].forEach.call(e.childNodes,(function(t){var e=t.cloneNode(!0);e.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach((function(t){return e.removeAttribute(t)})),r.appendChild(e)}));var s=h.createElementNS(p,"tspan");s.textContent="",["x","y"].forEach((function(t){var n=e.getAttribute(t);n&&s.setAttribute(t,n)})),r.appendChild(s),e.insertBefore(r,e.firstChild)}},t.prototype.attr=function(t,e,n,i){var r,s,o,a=this.element,l=this.symbolCustomAttribs,h=this;if("string"===typeof t&&"undefined"!==typeof e){var u=t;t={},t[u]=e}return"string"===typeof t?h=(this[t+"Getter"]||this._defaultGetter).call(this,t,a):(I(t,(function(e,n){s=!1,i||c(this,n),this.symbolName&&-1!==l.indexOf(n)&&(r||(this.symbolAttr(t),r=!0),s=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),s||(o=this[n+"Setter"]||this._defaultSetter,o.call(this,e,n,a),!this.styledMode&&this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,e,o))}),this),this.afterSetters()),n&&n.call(this),h},t.prototype.clip=function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":"none")},t.prototype.crisp=function(t,e){e=e||t.strokeWidth||0;var n=Math.round(e)%2/2;return t.x=Math.floor(t.x||this.x||0)+n,t.y=Math.floor(t.y||this.y||0)+n,t.width=Math.floor((t.width||this.width||0)-2*n),t.height=Math.floor((t.height||this.height||0)-2*n),b(t.strokeWidth)&&(t.strokeWidth=e),t},t.prototype.complexColor=function(t,e,i){var r,s,o,a,c,l,h,u,d,p,f,g=this.renderer,m=[];x(this.renderer,"complexColor",{args:arguments},(function(){if(t.radialGradient?s="radialGradient":t.linearGradient&&(s="linearGradient"),s){if(o=t[s],c=g.gradients,l=t.stops,d=i.radialReference,T(o)&&(t[s]=o={x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&d&&!b(o.gradientUnits)&&(a=o,o=O(o,g.getRadialAttr(d,a),{gradientUnits:"userSpaceOnUse"})),I(o,(function(t,e){"id"!==e&&m.push(e,t)})),I(l,(function(t){m.push(t)})),m=m.join(","),c[m])p=c[m].attr("id");else{o.id=p=N();var y=c[m]=g.createElement(s).attr(o).add(g.defs);y.radAttr=a,y.stops=[],l.forEach((function(t){0===t[1].indexOf("rgba")?(r=n.parse(t[1]),h=r.get("rgb"),u=r.get("a")):(h=t[1],u=1),t=g.createElement("stop").attr({offset:t[0],"stop-color":h,"stop-opacity":u}).add(y),y.stops.push(t)}))}f="url("+g.url+"#"+p+")",i.setAttribute(e,f),i.gradient=m,t.toString=function(){return f}}}))},t.prototype.css=function(t){var e=this.styles,n={},i=this.element,r=["textOutline","textOverflow","width"],s="",o=!e;if(t&&t.color&&(t.fill=t.color),e&&I(t,(function(t,i){e&&e[i]!==t&&(n[i]=t,o=!0)})),o){if(e&&(t=_(e,n)),t)if(null===t.width||"auto"===t.width)delete this.textWidth;else if("text"===i.nodeName.toLowerCase()&&t.width)var a=this.textWidth=A(t.width);if(this.styles=t,a&&!d&&this.renderer.forExport&&delete t.width,i.namespaceURI===this.SVG_NS){var c=function(t,e){return"-"+e.toLowerCase()};I(t,(function(t,e){-1===r.indexOf(e)&&(s+=e.replace(/([A-Z])/g,c)+":"+t+";")})),s&&m(i,"style",s)}else v(i,t);this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),t&&t.textOutline&&this.applyTextOutline(t.textOutline))}return this},t.prototype.dashstyleSetter=function(t){var e=this["stroke-width"];if("inherit"===e&&(e=1),t=t&&t.toLowerCase()){var n=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(t=n.length;t--;)n[t]=""+A(n[t])*E(e,NaN);t=n.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",t)}},t.prototype.destroy=function(){var t=this,e=t.element||{},n=t.renderer,i=e.ownerSVGElement,r=n.isSVG&&"SPAN"===e.nodeName&&t.parentGroup||void 0;if(e.onclick=e.onmouseout=e.onmouseover=e.onmousemove=e.point=null,c(t),t.clipPath&&i){var s=t.clipPath;[].forEach.call(i.querySelectorAll("[clip-path],[CLIP-PATH]"),(function(t){-1<t.getAttribute("clip-path").indexOf(s.element.id)&&t.removeAttribute("clip-path")})),t.clipPath=s.destroy()}if(t.stops){for(i=0;i<t.stops.length;i++)t.stops[i].destroy();t.stops.length=0,t.stops=void 0}for(t.safeRemoveChild(e),n.styledMode||t.destroyShadows();r&&r.div&&0===r.div.childNodes.length;)e=r.parentGroup,t.safeRemoveChild(r.div),delete r.div,r=e;t.alignTo&&w(n.alignedObjects,t),I(t,(function(e,n){t[n]&&t[n].parentGroup===t&&t[n].destroy&&t[n].destroy(),delete t[n]}))},t.prototype.destroyShadows=function(){(this.shadows||[]).forEach((function(t){this.safeRemoveChild(t)}),this),this.shadows=void 0},t.prototype.destroyTextPath=function(t,e){var n=t.getElementsByTagName("text")[0];if(n){if(n.removeAttribute("dx"),n.removeAttribute("dy"),e.element.setAttribute("id",""),this.textPathWrapper&&n.getElementsByTagName("textPath").length){for(t=this.textPathWrapper.element.childNodes;t.length;)n.appendChild(t[0]);n.removeChild(this.textPathWrapper.element)}}else(t.getAttribute("dx")||t.getAttribute("dy"))&&(t.removeAttribute("dx"),t.removeAttribute("dy"));this.textPathWrapper&&(this.textPathWrapper=this.textPathWrapper.destroy())},t.prototype.dSetter=function(t,e,n){T(t)&&("string"===typeof t[0]&&(t=this.renderer.pathToSegments(t)),this.pathArray=t,t=t.reduce((function(t,e,n){return e&&e.join?(n?t+" ":"")+e.join(" "):(e||"").toString()}),"")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),this[e]!==t&&(n.setAttribute(e,t),this[e]=t)},t.prototype.fadeOut=function(t){var e=this;e.animate({opacity:0},{duration:E(t,150),complete:function(){e.attr({y:-9999}).hide()}})},t.prototype.fillSetter=function(t,e,n){"string"===typeof t?n.setAttribute(e,t):t&&this.complexColor(t,e,n)},t.prototype.getBBox=function(e,n){var i=this.renderer,r=this.element,s=this.styles,o=this.textStr,a=i.cache,c=i.cacheKeys,h=r.namespaceURI===this.SVG_NS;n=E(n,this.rotation,0);var u,d=i.styledMode?r&&t.prototype.getStyle.call(r,"font-size"):s&&s.fontSize;if(b(o)){var p=o.toString();-1===p.indexOf("<")&&(p=p.replace(/[0-9]/g,"0")),p+=["",n,d,this.textWidth,s&&s.textOverflow,s&&s.fontWeight].join()}if(p&&!e&&(u=a[p]),!u){if(h||i.forExport){try{var f=this.fakeTS&&function(t){var e=r.querySelector(".highcharts-text-outline");e&&v(e,{display:t})};S(f)&&f("none"),u=r.getBBox?_({},r.getBBox()):{width:r.offsetWidth,height:r.offsetHeight},S(f)&&f("")}catch(g){}(!u||0>u.width)&&(u={width:0,height:0})}else u=this.htmlGetBBox();if(i.isSVG&&(e=u.width,i=u.height,h&&(u.height=i={"11px,17":14,"13px,20":16}[s&&s.fontSize+","+Math.round(i)]||i),n&&(s=n*l,u.width=Math.abs(i*Math.sin(s))+Math.abs(e*Math.cos(s)),u.height=Math.abs(i*Math.cos(s))+Math.abs(e*Math.sin(s)))),p&&(""===o||0<u.height)){for(;250<c.length;)delete a[c.shift()];a[p]||c.push(p),a[p]=u}}return u},t.prototype.getStyle=function(t){return f.getComputedStyle(this.element||this,"").getPropertyValue(t)},t.prototype.hasClass=function(t){return-1!==(""+this.attr("class")).split(" ").indexOf(t)},t.prototype.hide=function(t){return t?this.attr({y:-9999}):this.attr({visibility:"hidden"}),this},t.prototype.htmlGetBBox=function(){return{height:0,width:0,x:0,y:0}},t.prototype.init=function(t,e){this.element="span"===e?y(e):h.createElementNS(this.SVG_NS,e),this.renderer=t,x(this,"afterInit")},t.prototype.invert=function(t){return this.inverted=t,this.updateTransform(),this},t.prototype.on=function(t,e){var n=this.onEvents;return n[t]&&n[t](),n[t]=g(this.element,t,e),this},t.prototype.opacitySetter=function(t,e,n){this.opacity=t=Number(Number(t).toFixed(3)),n.setAttribute(e,t)},t.prototype.removeClass=function(t){return this.attr("class",(""+this.attr("class")).replace(k(t)?new RegExp("(^| )"+t+"( |$)"):t," ").replace(/ +/g," ").trim())},t.prototype.removeTextOutline=function(){var t=this.element.querySelector("tspan.highcharts-text-outline");t&&this.safeRemoveChild(t)},t.prototype.safeRemoveChild=function(t){var e=t.parentNode;e&&e.removeChild(t)},t.prototype.setRadialReference=function(t){var e=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=t,e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr)),this},t.prototype.setTextPath=function(t,n){var i=this.element,r=this.text?this.text.element:i,s={textAnchor:"text-anchor"},o=!1,a=this.textPathWrapper,c=!a;n=O(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},n);var l=e.filterUserAttributes(n.attributes);if(t&&n&&n.enabled){a&&null===a.element.parentNode?(c=!0,a=a.destroy()):a&&this.removeTextOutline.call(a.parentGroup),this.options&&this.options.padding&&(l.dx=-this.options.padding),a||(this.textPathWrapper=a=this.renderer.createElement("textPath"),o=!0);var h=a.element;if((n=t.element.getAttribute("id"))||t.element.setAttribute("id",n=N()),c)for(r.setAttribute("y",0),C(l.dx)&&r.setAttribute("x",-l.dx),t=[].slice.call(r.childNodes),c=0;c<t.length;c++){var d=t[c];d.nodeType!==Node.TEXT_NODE&&"tspan"!==d.nodeName||h.appendChild(d)}o&&a&&a.add({element:r}),h.setAttributeNS("http://www.w3.org/1999/xlink","href",this.renderer.url+"#"+n),b(l.dy)&&(h.parentNode.setAttribute("dy",l.dy),delete l.dy),b(l.dx)&&(h.parentNode.setAttribute("dx",l.dx),delete l.dx),I(l,(function(t,e){h.setAttribute(s[e]||e,t)})),i.removeAttribute("transform"),this.removeTextOutline.call(a),this.text&&!this.renderer.styledMode&&this.attr({fill:"none","stroke-width":0}),this.applyTextOutline=this.updateTransform=u}else a&&(delete this.updateTransform,delete this.applyTextOutline,this.destroyTextPath(i,t),this.updateTransform(),this.options&&this.options.rotation&&this.applyTextOutline(this.options.style.textOutline));return this},t.prototype.shadow=function(t,e,n){var i,s=[],o=this.element,a=this.oldShadowOptions,c={color:r.neutralColor100,offsetX:this.parentInverted?-1:1,offsetY:this.parentInverted?-1:1,opacity:.15,width:3},l=!1;if(!0===t?i=c:"object"===typeof t&&(i=_(c,t)),i&&(i&&a&&I(i,(function(t,e){t!==a[e]&&(l=!0)})),l&&this.destroyShadows(),this.oldShadowOptions=i),i){if(!this.shadows){var h=i.opacity/i.width,u=this.parentInverted?"translate("+i.offsetY+", "+i.offsetX+")":"translate("+i.offsetX+", "+i.offsetY+")";for(c=1;c<=i.width;c++){var d=o.cloneNode(!1),p=2*i.width+1-2*c;m(d,{stroke:t.color||r.neutralColor100,"stroke-opacity":h*c,"stroke-width":p,transform:u,fill:"none"}),d.setAttribute("class",(d.getAttribute("class")||"")+" highcharts-shadow"),n&&(m(d,"height",Math.max(m(d,"height")-p,0)),d.cutHeight=p),e?e.element.appendChild(d):o.parentNode&&o.parentNode.insertBefore(d,o),s.push(d)}this.shadows=s}}else this.destroyShadows();return this},t.prototype.show=function(t){return this.attr({visibility:t?"inherit":"visible"})},t.prototype.strokeSetter=function(e,n,i){this[n]=e,this.stroke&&this["stroke-width"]?(t.prototype.fillSetter.call(this,this.stroke,"stroke",i),i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===n&&0===e&&this.hasStroke?(i.removeAttribute("stroke"),this.hasStroke=!1):this.renderer.styledMode&&this["stroke-width"]&&(i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0)},t.prototype.strokeWidth=function(){if(!this.renderer.styledMode)return this["stroke-width"]||0;var t=this.getStyle("stroke-width"),e=0;if(t.indexOf("px")===t.length-2)e=A(t);else if(""!==t){var n=h.createElementNS(p,"rect");m(n,{width:t,"stroke-width":0}),this.element.parentNode.appendChild(n),e=n.getBBox().width,n.parentNode.removeChild(n)}return e},t.prototype.symbolAttr=function(t){var e=this;"x y r start end width height innerR anchorX anchorY clockwise".split(" ").forEach((function(n){e[n]=E(t[n],e[n])})),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},t.prototype.textSetter=function(t){t!==this.textStr&&(delete this.textPxLength,this.textStr=t,this.added&&this.renderer.buildText(this))},t.prototype.titleSetter=function(t){var e=this.element,n=e.getElementsByTagName("title")[0]||h.createElementNS(this.SVG_NS,"title");e.insertBefore?e.insertBefore(n,e.firstChild):e.appendChild(n),n.textContent=String(E(t,"")).replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")},t.prototype.toFront=function(){var t=this.element;return t.parentNode.appendChild(t),this},t.prototype.translate=function(t,e){return this.attr({translateX:t,translateY:e})},t.prototype.updateShadows=function(t,e,n){var i=this.shadows;if(i)for(var r=i.length;r--;)n.call(i[r],"height"===t?Math.max(e-(i[r].cutHeight||0),0):"d"===t?this.d:e,t,i[r])},t.prototype.updateTransform=function(){var t=this.scaleX,e=this.scaleY,n=this.inverted,i=this.rotation,r=this.matrix,s=this.element,o=this.translateX||0,a=this.translateY||0;n&&(o+=this.width,a+=this.height),o=["translate("+o+","+a+")"],b(r)&&o.push("matrix("+r.join(",")+")"),n?o.push("rotate(90) scale(-1,1)"):i&&o.push("rotate("+i+" "+E(this.rotationOriginX,s.getAttribute("x"),0)+" "+E(this.rotationOriginY,s.getAttribute("y")||0)+")"),(b(t)||b(e))&&o.push("scale("+E(t,1)+" "+E(e,1)+")"),o.length&&s.setAttribute("transform",o.join(" "))},t.prototype.visibilitySetter=function(t,e,n){"inherit"===t?n.removeAttribute(e):this[e]!==t&&n.setAttribute(e,t),this[e]=t},t.prototype.xGetter=function(t){return"circle"===this.element.nodeName&&("x"===t?t="cx":"y"===t&&(t="cy")),this._defaultGetter(t)},t.prototype.zIndexSetter=function(t,e){var n=this.renderer,i=this.parentGroup,r=(i||n).element||n.box,s=this.element;n=r===n.box;var o,a=!1,c=this.added;if(b(t)?(s.setAttribute("data-z-index",t),t=+t,this[e]===t&&(c=!1)):b(this[e])&&s.removeAttribute("data-z-index"),this[e]=t,c){for((t=this.zIndex)&&i&&(i.handleZ=!0),e=r.childNodes,o=e.length-1;0<=o&&!a;o--){i=e[o],c=i.getAttribute("data-z-index");var l=!b(c);i!==s&&(0>t&&l&&!n&&!o?(r.insertBefore(s,e[o]),a=!0):(A(c)<=t||l&&(!b(t)||0<=t))&&(r.insertBefore(s,e[o+1]||null),a=!0))}a||(r.insertBefore(s,e[n?3:0]||null),a=!0)}return a},t}(),t.prototype["stroke-widthSetter"]=t.prototype.strokeSetter,t.prototype.yGetter=t.prototype.xGetter,t.prototype.matrixSetter=t.prototype.rotationOriginXSetter=t.prototype.rotationOriginYSetter=t.prototype.rotationSetter=t.prototype.scaleXSetter=t.prototype.scaleYSetter=t.prototype.translateXSetter=t.prototype.translateYSetter=t.prototype.verticalAlignSetter=function(t,e){this[e]=t,this.doTransform=!0},t})),e(n,"Core/Renderer/RendererRegistry.js",[n["Core/Globals.js"]],(function(t){var e;return function(e){var n;e.rendererTypes={},e.getRendererType=function(t){return void 0===t&&(t=n),e.rendererTypes[t]||e.rendererTypes[n]},e.registerRendererType=function(i,r,s){e.rendererTypes[i]=r,n&&!s||(n=i,t.Renderer=r)}}(e||(e={})),e})),e(n,"Core/Renderer/SVG/SVGLabel.js",[n["Core/Renderer/SVG/SVGElement.js"],n["Core/Utilities.js"]],(function(t,e){var n=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),i=e.defined,r=e.extend,s=e.isNumber,o=e.merge,a=e.pick,c=e.removeEvent;return function(e){function l(t,n,i,r,s,o,a,c,h,u){var d,p=e.call(this)||this;return p.paddingLeftSetter=p.paddingSetter,p.paddingRightSetter=p.paddingSetter,p.init(t,"g"),p.textStr=n,p.x=i,p.y=r,p.anchorX=o,p.anchorY=a,p.baseline=h,p.className=u,p.addClass("button"===u?"highcharts-no-tooltip":"highcharts-label"),u&&p.addClass("highcharts-"+u),p.text=t.text(void 0,0,0,c).attr({zIndex:1}),"string"===typeof s&&((d=/^url\((.*?)\)$/.test(s))||p.renderer.symbols[s])&&(p.symbolKey=s),p.bBox=l.emptyBBox,p.padding=3,p.baselineOffset=0,p.needsBox=t.styledMode||d,p.deferredAttr={},p.alignFactor=0,p}return n(l,e),l.prototype.alignSetter=function(t){t={left:0,center:.5,right:1}[t],t!==this.alignFactor&&(this.alignFactor=t,this.bBox&&s(this.xSetting)&&this.attr({x:this.xSetting}))},l.prototype.anchorXSetter=function(t,e){this.anchorX=t,this.boxAttr(e,Math.round(t)-this.getCrispAdjust()-this.xSetting)},l.prototype.anchorYSetter=function(t,e){this.anchorY=t,this.boxAttr(e,t-this.ySetting)},l.prototype.boxAttr=function(t,e){this.box?this.box.attr(t,e):this.deferredAttr[t]=e},l.prototype.css=function(e){if(e){var n={};e=o(e),l.textProps.forEach((function(t){"undefined"!==typeof e[t]&&(n[t]=e[t],delete e[t])})),this.text.css(n);var i="width"in n;"fontSize"in n||"fontWeight"in n?this.updateTextPadding():i&&this.updateBoxSize()}return t.prototype.css.call(this,e)},l.prototype.destroy=function(){c(this.element,"mouseenter"),c(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),t.prototype.destroy.call(this)},l.prototype.fillSetter=function(t,e){t&&(this.needsBox=!0),this.fill=t,this.boxAttr(e,t)},l.prototype.getBBox=function(){this.textStr&&0===this.bBox.width&&0===this.bBox.height&&this.updateBoxSize();var t=this.padding,e=a(this.paddingLeft,t);return{width:this.width,height:this.height,x:this.bBox.x-e,y:this.bBox.y-t}},l.prototype.getCrispAdjust=function(){return this.renderer.styledMode&&this.box?this.box.strokeWidth()%2/2:(this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2},l.prototype.heightSetter=function(t){this.heightSetting=t},l.prototype.onAdd=function(){var t=this.textStr;this.text.add(this),this.attr({text:i(t)?t:"",x:this.x,y:this.y}),this.box&&i(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})},l.prototype.paddingSetter=function(t,e){s(t)?t!==this[e]&&(this[e]=t,this.updateTextPadding()):this[e]=void 0},l.prototype.rSetter=function(t,e){this.boxAttr(e,t)},l.prototype.shadow=function(t){return t&&!this.renderer.styledMode&&(this.updateBoxSize(),this.box&&this.box.shadow(t)),this},l.prototype.strokeSetter=function(t,e){this.stroke=t,this.boxAttr(e,t)},l.prototype["stroke-widthSetter"]=function(t,e){t&&(this.needsBox=!0),this["stroke-width"]=t,this.boxAttr(e,t)},l.prototype["text-alignSetter"]=function(t){this.textAlign=t},l.prototype.textSetter=function(t){"undefined"!==typeof t&&this.text.attr({text:t}),this.updateTextPadding()},l.prototype.updateBoxSize=function(){var t=this.text.element.style,e={},n=this.padding,o=this.bBox=s(this.widthSetting)&&s(this.heightSetting)&&!this.textAlign||!i(this.text.textStr)?l.emptyBBox:this.text.getBBox();this.width=this.getPaddedWidth(),this.height=(this.heightSetting||o.height||0)+2*n,t=this.renderer.fontMetrics(t&&t.fontSize,this.text),this.baselineOffset=n+Math.min((this.text.firstLineMetrics||t).b,o.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-t.h)/2),this.needsBox&&(this.box||(n=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect(),n.addClass(("button"===this.className?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),n.add(this)),n=this.getCrispAdjust(),e.x=n,e.y=(this.baseline?-this.baselineOffset:0)+n,e.width=Math.round(this.width),e.height=Math.round(this.height),this.box.attr(r(e,this.deferredAttr)),this.deferredAttr={})},l.prototype.updateTextPadding=function(){var t=this.text;this.updateBoxSize();var e=this.baseline?0:this.baselineOffset,n=a(this.paddingLeft,this.padding);i(this.widthSetting)&&this.bBox&&("center"===this.textAlign||"right"===this.textAlign)&&(n+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),n===t.x&&e===t.y||(t.attr("x",n),t.hasBoxWidthChanged&&(this.bBox=t.getBBox(!0)),"undefined"!==typeof e&&t.attr("y",e)),t.x=n,t.y=e},l.prototype.widthSetter=function(t){this.widthSetting=s(t)?t:void 0},l.prototype.getPaddedWidth=function(){var t=this.padding,e=a(this.paddingLeft,t);return t=a(this.paddingRight,t),(this.widthSetting||this.bBox.width||0)+e+t},l.prototype.xSetter=function(t){this.x=t,this.alignFactor&&(t-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(t),this.attr("translateX",this.xSetting)},l.prototype.ySetter=function(t){this.ySetting=this.y=Math.round(t),this.attr("translateY",this.ySetting)},l.emptyBBox={width:0,height:0,x:0,y:0},l.textProps="color direction fontFamily fontSize fontStyle fontWeight lineHeight textAlign textDecoration textOutline textOverflow width".split(" "),l}(t)})),e(n,"Core/Renderer/SVG/Symbols.js",[n["Core/Utilities.js"]],(function(t){function e(t,e,n,i,s){var a=[];if(s){var c=s.start||0,l=o(s.r,n);n=o(s.r,i||n);var h=(s.end||0)-.001;i=s.innerR;var u=o(s.open,.001>Math.abs((s.end||0)-c-2*Math.PI)),d=Math.cos(c),p=Math.sin(c),f=Math.cos(h),g=Math.sin(h);c=o(s.longArc,.001>h-c-Math.PI?0:1),a.push(["M",t+l*d,e+n*p],["A",l,n,0,c,o(s.clockwise,1),t+l*f,e+n*g]),r(i)&&a.push(u?["M",t+i*f,e+i*g]:["L",t+i*f,e+i*g],["A",i,i,0,c,r(s.clockwise)?1-s.clockwise:0,t+i*d,e+i*p]),u||a.push(["Z"])}return a}function n(t,e,n,r,s){return s&&s.r?i(t,e,n,r,s):[["M",t,e],["L",t+n,e],["L",t+n,e+r],["L",t,e+r],["Z"]]}function i(t,e,n,i,r){return r=r&&r.r||0,[["M",t+r,e],["L",t+n-r,e],["C",t+n,e,t+n,e,t+n,e+r],["L",t+n,e+i-r],["C",t+n,e+i,t+n,e+i,t+n-r,e+i],["L",t+r,e+i],["C",t,e+i,t,e+i,t,e+i-r],["L",t,e+r],["C",t,e,t,e,t+r,e]]}var r=t.defined,s=t.isNumber,o=t.pick;return{arc:e,callout:function(t,e,n,r,o){var a=Math.min(o&&o.r||0,n,r),c=a+6,l=o&&o.anchorX;o=o&&o.anchorY||0;var h=i(t,e,n,r,{r:a});return s(l)?(t+l>=n?o>e+c&&o<e+r-c?h.splice(3,1,["L",t+n,o-6],["L",t+n+6,o],["L",t+n,o+6],["L",t+n,e+r-a]):h.splice(3,1,["L",t+n,r/2],["L",l,o],["L",t+n,r/2],["L",t+n,e+r-a]):0>=t+l?o>e+c&&o<e+r-c?h.splice(7,1,["L",t,o+6],["L",t-6,o],["L",t,o-6],["L",t,e+a]):h.splice(7,1,["L",t,r/2],["L",l,o],["L",t,r/2],["L",t,e+a]):o&&o>r&&l>t+c&&l<t+n-c?h.splice(5,1,["L",l+6,e+r],["L",l,e+r+6],["L",l-6,e+r],["L",t+a,e+r]):o&&0>o&&l>t+c&&l<t+n-c&&h.splice(1,1,["L",l-6,e],["L",l,e-6],["L",l+6,e],["L",n-a,e]),h):h},circle:function(t,n,i,r){return e(t+i/2,n+r/2,i/2,r/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(t,e,n,i){return[["M",t+n/2,e],["L",t+n,e+i/2],["L",t+n/2,e+i],["L",t,e+i/2],["Z"]]},rect:n,roundedRect:i,square:n,triangle:function(t,e,n,i){return[["M",t+n/2,e],["L",t+n,e+i],["L",t,e+i],["Z"]]},"triangle-down":function(t,e,n,i){return[["M",t,e],["L",t+n,e],["L",t+n/2,e+i],["Z"]]}}})),e(n,"Core/Renderer/SVG/TextBuilder.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e,n){var i=e.doc,r=e.SVG_NS,s=n.attr,o=n.isString,a=n.objectEach,c=n.pick;return function(){function e(t){var e=t.styles;this.renderer=t.renderer,this.svgElement=t,this.width=t.textWidth,this.textLineHeight=e&&e.lineHeight,this.textOutline=e&&e.textOutline,this.ellipsis=!(!e||"ellipsis"!==e.textOverflow),this.noWrap=!(!e||"nowrap"!==e.whiteSpace),this.fontSize=e&&e.fontSize}return e.prototype.buildSVG=function(){var e=this.svgElement,n=e.element,r=e.renderer,s=c(e.textStr,"").toString(),a=-1!==s.indexOf("<"),l=n.childNodes;r=this.width&&!e.added&&r.box;var h=/<br.*?>/g,u=[s,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,this.fontSize,this.width].join();if(u!==e.textCache){for(e.textCache=u,delete e.actualWidth,u=l.length;u--;)n.removeChild(l[u]);a||this.ellipsis||this.width||-1!==s.indexOf(" ")&&(!this.noWrap||h.test(s))?""!==s&&(r&&r.appendChild(n),s=new t(s),this.modifyTree(s.nodes),s.addToDOM(e.element),this.modifyDOM(),this.ellipsis&&-1!==(n.textContent||"").indexOf("")&&e.attr("title",this.unescapeEntities(e.textStr||"",["&lt;","&gt;"])),r&&r.removeChild(n)):n.appendChild(i.createTextNode(this.unescapeEntities(s))),o(this.textOutline)&&e.applyTextOutline&&e.applyTextOutline(this.textOutline)}},e.prototype.modifyDOM=function(){var t,e=this,n=this.svgElement,o=s(n.element,"x");for(n.firstLineMetrics=void 0;t=n.element.firstChild;){if(!/^[\s\u200B]*$/.test(t.textContent||" "))break;n.element.removeChild(t)}[].forEach.call(n.element.querySelectorAll("tspan.highcharts-br"),(function(t,i){t.nextSibling&&t.previousSibling&&(0===i&&1===t.previousSibling.nodeType&&(n.firstLineMetrics=n.renderer.fontMetrics(void 0,t.previousSibling)),s(t,{dy:e.getLineHeight(t.nextSibling),x:o}))}));var a=this.width||0;if(a){var c=function(t,c){var l=t.textContent||"",h=l.replace(/([^\^])-/g,"$1- ").split(" "),u=!e.noWrap&&(1<h.length||1<n.element.childNodes.length),d=e.getLineHeight(c),p=0,f=n.actualWidth;if(e.ellipsis)l&&e.truncate(t,l,void 0,0,Math.max(0,a-parseInt(e.fontSize||12,10)),(function(t,e){return t.substring(0,e)+""}));else if(u){for(l=[],u=[];c.firstChild&&c.firstChild!==t;)u.push(c.firstChild),c.removeChild(c.firstChild);for(;h.length;)h.length&&!e.noWrap&&0<p&&(l.push(t.textContent||""),t.textContent=h.join(" ").replace(/- /g,"-")),e.truncate(t,void 0,h,0===p&&f||0,a,(function(t,e){return h.slice(0,e).join(" ").replace(/- /g,"-")})),f=n.actualWidth,p++;u.forEach((function(e){c.insertBefore(e,t)})),l.forEach((function(e){c.insertBefore(i.createTextNode(e),t),e=i.createElementNS(r,"tspan"),e.textContent="",s(e,{dy:d,x:o}),c.insertBefore(e,t)}))}},l=function(t){[].slice.call(t.childNodes).forEach((function(e){e.nodeType===Node.TEXT_NODE?c(e,t):(-1!==e.className.baseVal.indexOf("highcharts-br")&&(n.actualWidth=0),l(e))}))};l(n.element)}},e.prototype.getLineHeight=function(t){var e;return t=t.nodeType===Node.TEXT_NODE?t.parentElement:t,this.renderer.styledMode||(e=t&&/(px|em)$/.test(t.style.fontSize)?t.style.fontSize:this.fontSize||this.renderer.style.fontSize||12),this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(e,t||this.svgElement.element).h},e.prototype.modifyTree=function(t){var e=this,n=function(i,r){var s=i.tagName,a=e.renderer.styledMode,c=i.attributes||{};"b"===s||"strong"===s?a?c["class"]="highcharts-strong":c.style="font-weight:bold;"+(c.style||""):"i"!==s&&"em"!==s||(a?c["class"]="highcharts-emphasized":c.style="font-style:italic;"+(c.style||"")),o(c.style)&&(c.style=c.style.replace(/(;| |^)color([ :])/,"$1fill$2")),"br"===s&&(c["class"]="highcharts-br",i.textContent="",(r=t[r+1])&&r.textContent&&(r.textContent=r.textContent.replace(/^ +/gm,""))),"#text"!==s&&"a"!==s&&(i.tagName="tspan"),i.attributes=c,i.children&&i.children.filter((function(t){return"#text"!==t.tagName})).forEach(n)};t.forEach(n)},e.prototype.truncate=function(t,e,n,i,r,s){var o,a=this.svgElement,c=a.renderer,l=a.rotation,h=[],u=n?1:0,d=(e||n||"").length,p=d,f=function(r,o){o=o||r;var l=t.parentNode;if(l&&"undefined"===typeof h[o])if(l.getSubStringLength)try{h[o]=i+l.getSubStringLength(0,n?o+1:o)}catch(u){}else c.getSpanWidth&&(t.textContent=s(e||n,r),h[o]=i+c.getSpanWidth(a,t));return h[o]};a.rotation=0;var g=f(t.textContent.length);if(i+g>r){for(;u<=d;)p=Math.ceil((u+d)/2),n&&(o=s(n,p)),g=f(p,o&&o.length-1),u===d?u=d+1:g>r?d=p-1:u=p;0===d?t.textContent="":e&&d===e.length-1||(t.textContent=o||s(e||n,p))}n&&n.splice(0,p),a.actualWidth=g,a.rotation=l},e.prototype.unescapeEntities=function(t,e){return a(this.renderer.escapes,(function(n,i){e&&-1!==e.indexOf(n)||(t=t.toString().replace(new RegExp(n,"g"),i))})),t},e}()})),e(n,"Core/Renderer/SVG/SVGRenderer.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Color/Palette.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Renderer/SVG/SVGLabel.js"],n["Core/Renderer/SVG/Symbols.js"],n["Core/Renderer/SVG/TextBuilder.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s,o,a,c,l){var h,u=n.charts,d=n.deg2rad,p=n.doc,f=n.isFirefox,g=n.isMS,m=n.isWebKit,y=n.noop,v=n.SVG_NS,b=n.symbolSizes,w=n.win,_=l.addEvent,x=l.attr,T=l.createElement,S=l.css,C=l.defined,k=l.destroyObjectProperties,O=l.extend,I=l.isArray,E=l.isNumber,A=l.isObject,P=l.isString,N=l.merge,j=l.pick,R=l.pInt,M=l.uniqueKey;return n=function(){function n(t,e,n,i,r,s,o){this.width=this.url=this.style=this.isSVG=this.imgCount=this.height=this.gradients=this.globalAnimation=this.defs=this.chartIndex=this.cacheKeys=this.cache=this.boxWrapper=this.box=this.alignedObjects=void 0,this.init(t,e,n,i,r,s,o)}return n.prototype.init=function(t,e,n,i,r,s,o){var a,c=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),l=c.element;o||c.css(this.getStyle(i)),t.appendChild(l),x(t,"dir","ltr"),-1===t.innerHTML.indexOf("xmlns")&&x(l,"xmlns",this.SVG_NS),this.isSVG=!0,this.box=l,this.boxWrapper=c,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(p.createTextNode("Created with Highcharts 9.2.2")),this.defs=this.createElement("defs").add(),this.allowHTML=s,this.forExport=r,this.styledMode=o,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(e,n,!1),f&&t.getBoundingClientRect&&(e=function(){S(t,{left:0,top:0}),a=t.getBoundingClientRect(),S(t,{left:Math.ceil(a.left)-a.left+"px",top:Math.ceil(a.top)-a.top+"px"})},e(),this.unSubPixelFix=_(w,"resize",e))},n.prototype.definition=function(e){return new t([e]).addToDOM(this.defs.element)},n.prototype.getReferenceURL=function(){if((f||m)&&p.getElementsByTagName("base").length){if(!C(h)){var e=M();e=new t([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:e},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":"url(#"+e+")",fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(p.body),S(e,{position:"fixed",top:0,left:0,zIndex:9e5});var n=p.elementFromPoint(6,6);h="hitme"===(n&&n.id),p.body.removeChild(e)}if(h)return w.location.href.split("#")[0].replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20")}return""},n.prototype.getStyle=function(t){return this.style=O({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t)},n.prototype.setStyle=function(t){this.boxWrapper.css(this.getStyle(t))},n.prototype.isHidden=function(){return!this.boxWrapper.getBBox().width},n.prototype.destroy=function(){var t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),k(this.gradients||{}),this.gradients=null,t&&(this.defs=t.destroy()),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null},n.prototype.createElement=function(t){var e=new this.Element;return e.init(this,t),e},n.prototype.getRadialAttr=function(t,e){return{cx:t[0]-t[2]/2+(e.cx||0)*t[2],cy:t[1]-t[2]/2+(e.cy||0)*t[2],r:(e.r||0)*t[2]}},n.prototype.buildText=function(t){new c(t).buildSVG()},n.prototype.getContrast=function(t){return t=e.parse(t).rgba,t[0]*=1,t[1]*=1.2,t[2]*=.5,459<t[0]+t[1]+t[2]?"#000000":"#FFFFFF"},n.prototype.button=function(e,n,r,s,o,a,c,l,h,u){var d=this.label(e,n,r,h,void 0,void 0,u,void 0,"button"),p=this.styledMode,f=0,m=o?N(o):{};if(e=m&&m.style||{},m=t.filterUserAttributes(m),d.attr(N({padding:8,r:2},m)),!p){m=N({fill:i.neutralColor3,stroke:i.neutralColor20,"stroke-width":1,style:{color:i.neutralColor80,cursor:"pointer",fontWeight:"normal"}},{style:e},m);var y=m.style;delete m.style,a=N(m,{fill:i.neutralColor10},t.filterUserAttributes(a||{}));var v=a.style;delete a.style,c=N(m,{fill:i.highlightColor10,style:{color:i.neutralColor100,fontWeight:"bold"}},t.filterUserAttributes(c||{}));var b=c.style;delete c.style,l=N(m,{style:{color:i.neutralColor20}},t.filterUserAttributes(l||{}));var w=l.style;delete l.style}return _(d.element,g?"mouseover":"mouseenter",(function(){3!==f&&d.setState(1)})),_(d.element,g?"mouseout":"mouseleave",(function(){3!==f&&d.setState(f)})),d.setState=function(t){1!==t&&(d.state=f=t),d.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][t||0]),p||d.attr([m,a,c,l][t||0]).css([y,v,b,w][t||0])},p||d.attr(m).css(O({cursor:"default"},y)),d.on("touchstart",(function(t){return t.stopPropagation()})).on("click",(function(t){3!==f&&s.call(d,t)}))},n.prototype.crispLine=function(t,e,n){void 0===n&&(n="round");var i=t[0],r=t[1];return C(i[1])&&i[1]===r[1]&&(i[1]=r[1]=Math[n](i[1])-e%2/2),C(i[2])&&i[2]===r[2]&&(i[2]=r[2]=Math[n](i[2])+e%2/2),t},n.prototype.path=function(t){var e=this.styledMode?{}:{fill:"none"};return I(t)?e.d=t:A(t)&&O(e,t),this.createElement("path").attr(e)},n.prototype.circle=function(t,e,n){return t=A(t)?t:"undefined"===typeof t?{}:{x:t,y:e,r:n},e=this.createElement("circle"),e.xSetter=e.ySetter=function(t,e,n){n.setAttribute("c"+e,t)},e.attr(t)},n.prototype.arc=function(t,e,n,i,r,s){return A(t)?(i=t,e=i.y,n=i.r,t=i.x):i={innerR:i,start:r,end:s},t=this.symbol("arc",t,e,n,n,i),t.r=n,t},n.prototype.rect=function(t,e,n,i,r,s){r=A(t)?t.r:r;var o=this.createElement("rect");return t=A(t)?t:"undefined"===typeof t?{}:{x:t,y:e,width:Math.max(n,0),height:Math.max(i,0)},this.styledMode||("undefined"!==typeof s&&(t["stroke-width"]=s,t=o.crisp(t)),t.fill="none"),r&&(t.r=r),o.rSetter=function(t,e,n){o.r=t,x(n,{rx:t,ry:t})},o.rGetter=function(){return o.r||0},o.attr(t)},n.prototype.setSize=function(t,e,n){this.width=t,this.height=e,this.boxWrapper.animate({width:t,height:e},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:j(n,!0)?void 0:0}),this.alignElements()},n.prototype.g=function(t){var e=this.createElement("g");return t?e.attr({class:"highcharts-"+t}):e},n.prototype.image=function(t,e,n,i,r,s){var o={preserveAspectRatio:"none"},a=function(t,e){t.setAttributeNS?t.setAttributeNS("http://www.w3.org/1999/xlink","href",e):t.setAttribute("hc-svg-href",e)};1<arguments.length&&O(o,{x:e,y:n,width:i,height:r});var c=this.createElement("image").attr(o);if(o=function(e){a(c.element,t),s.call(c,e)},s){a(c.element,"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==");var l=new w.Image;_(l,"load",o),l.src=t,l.complete&&o({})}else a(c.element,t);return c},n.prototype.symbol=function(t,e,n,i,r,s){var o,a=this,c=/^url\((.*?)\)$/,l=c.test(t),h=!l&&(this.symbols[t]?t:"circle"),d=h&&this.symbols[h];if(d){"number"===typeof e&&(o=d.call(this.symbols,Math.round(e||0),Math.round(n||0),i||0,r||0,s));var f=this.path(o);a.styledMode||f.attr("fill","none"),O(f,{symbolName:h||void 0,x:e,y:n,width:i,height:r}),s&&O(f,s)}else if(l){var g=t.match(c)[1],m=f=this.image(g);m.imgwidth=j(b[g]&&b[g].width,s&&s.width),m.imgheight=j(b[g]&&b[g].height,s&&s.height);var y=function(t){return t.attr({width:t.width,height:t.height})};["width","height"].forEach((function(t){m[t+"Setter"]=function(t,e){var n=this["img"+e];this[e]=t,C(n)&&(s&&"within"===s.backgroundSize&&this.width&&this.height&&(n=Math.round(n*Math.min(this.width/this.imgwidth,this.height/this.imgheight))),this.element&&this.element.setAttribute(e,n),this.alignByTranslate||(t=((this[e]||0)-n)/2,this.attr("width"===e?{translateX:t}:{translateY:t})))}})),C(e)&&m.attr({x:e,y:n}),m.isImg=!0,C(m.imgwidth)&&C(m.imgheight)?y(m):(m.attr({width:0,height:0}),T("img",{onload:function(){var t=u[a.chartIndex];0===this.width&&(S(this,{position:"absolute",top:"-999em"}),p.body.appendChild(this)),b[g]={width:this.width,height:this.height},m.imgwidth=this.width,m.imgheight=this.height,m.element&&y(m),this.parentNode&&this.parentNode.removeChild(this),a.imgCount--,a.imgCount||!t||t.hasLoaded||t.onload()},src:g}),this.imgCount++)}return f},n.prototype.clipRect=function(t,e,n,i){var r=M()+"-",s=this.createElement("clipPath").attr({id:r}).add(this.defs);return t=this.rect(t,e,n,i,0).add(s),t.id=r,t.clipPath=s,t.count=0,t},n.prototype.text=function(t,e,n,i){var r={};return!i||!this.allowHTML&&this.forExport?(r.x=Math.round(e||0),n&&(r.y=Math.round(n)),C(t)&&(r.text=t),t=this.createElement("text").attr(r),(!i||this.forExport&&!this.allowHTML)&&(t.xSetter=function(t,e,n){for(var i,r=n.getElementsByTagName("tspan"),s=n.getAttribute(e),o=0;o<r.length;o++)i=r[o],i.getAttribute(e)===s&&i.setAttribute(e,t);n.setAttribute(e,t)}),t):this.html(t,e,n)},n.prototype.fontMetrics=function(t,e){return t=!this.styledMode&&/px/.test(t)||!w.getComputedStyle?t||e&&e.style&&e.style.fontSize||this.style&&this.style.fontSize:e&&s.prototype.getStyle.call(e,"font-size"),t=/px/.test(t)?R(t):12,e=24>t?t+3:Math.round(1.2*t),{h:e,b:Math.round(.8*e),f:t}},n.prototype.rotCorr=function(t,e,n){var i=t;return e&&n&&(i=Math.max(i*Math.cos(e*d),4)),{x:-t/3*Math.sin(e*d),y:i}},n.prototype.pathToSegments=function(t){for(var e=[],n=[],i={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2},r=0;r<t.length;r++)P(n[0])&&E(t[r])&&n.length===i[n[0].toUpperCase()]&&t.splice(r,0,n[0].replace("M","L").replace("m","l")),"string"===typeof t[r]&&(n.length&&e.push(n.slice(0)),n.length=0),n.push(t[r]);return e.push(n.slice(0)),e},n.prototype.label=function(t,e,n,i,r,s,a,c,l){return new o(this,t,e,n,i,r,s,a,c,l)},n.prototype.alignElements=function(){this.alignedObjects.forEach((function(t){return t.align()}))},n}(),O(n.prototype,{Element:s,SVG_NS:v,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:a,draw:y}),r.registerRendererType("svg",n,!0),n})),e(n,"Core/Renderer/HTML/HTMLElement.js",[n["Core/Globals.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Utilities.js"]],(function(t,e,n){var i=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=t.isFirefox,s=t.isMS,o=t.isWebKit,a=t.win,c=n.css,l=n.defined,h=n.extend,u=n.pick,d=n.pInt;return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.compose=function(t){if(-1===e.composedClasses.indexOf(t)){e.composedClasses.push(t);var n=e.prototype,i=t.prototype;i.getSpanCorrection=n.getSpanCorrection,i.htmlCss=n.htmlCss,i.htmlGetBBox=n.htmlGetBBox,i.htmlUpdateTransform=n.htmlUpdateTransform,i.setSpanRotation=n.setSpanRotation}return t},e.prototype.getSpanCorrection=function(t,e,n){this.xCorr=-t*n,this.yCorr=-e},e.prototype.htmlCss=function(t){var e="SPAN"===this.element.tagName&&t&&"width"in t,n=u(e&&t.width,void 0);if(e){delete t.width,this.textWidth=n;var i=!0}return t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),this.styles=h(this.styles,t),c(this.element,t),i&&this.htmlUpdateTransform(),this},e.prototype.htmlGetBBox=function(){var t=this.element;return{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},e.prototype.htmlUpdateTransform=function(){if(this.added){var t=this.renderer,e=this.element,n=this.translateX||0,i=this.translateY||0,r=this.x||0,s=this.y||0,o=this.textAlign||"left",a={left:0,center:.5,right:1}[o],h=this.styles;if(h=h&&h.whiteSpace,c(e,{marginLeft:n,marginTop:i}),!t.styledMode&&this.shadows&&this.shadows.forEach((function(t){c(t,{marginLeft:n+1,marginTop:i+1})})),this.inverted&&[].forEach.call(e.childNodes,(function(n){t.invertChild(n,e)})),"SPAN"===e.tagName){var u=this.rotation,p=this.textWidth&&d(this.textWidth),f=[u,o,e.innerHTML,this.textWidth,this.textAlign].join(),g=void 0;(g=p!==this.oldTextWidth)&&!(g=p>this.oldTextWidth)&&((g=this.textPxLength)||(c(e,{width:"",whiteSpace:h||"nowrap"}),g=e.offsetWidth),g=g>p),g&&(/[ \-]/.test(e.textContent||e.innerText)||"ellipsis"===e.style.textOverflow)?(c(e,{width:p+"px",display:"block",whiteSpace:h||"normal"}),this.oldTextWidth=p,this.hasBoxWidthChanged=!0):this.hasBoxWidthChanged=!1,f!==this.cTT&&(g=t.fontMetrics(e.style.fontSize,e).b,!l(u)||u===(this.oldRotation||0)&&o===this.oldAlign||this.setSpanRotation(u,a,g),this.getSpanCorrection(!l(u)&&this.textPxLength||e.offsetWidth,g,a,u,o)),c(e,{left:r+(this.xCorr||0)+"px",top:s+(this.yCorr||0)+"px"}),this.cTT=f,this.oldRotation=u,this.oldAlign=o}}else this.alignOnAdd=!0},e.prototype.setSpanRotation=function(t,e,n){var i={},l=s&&!/Edge/.test(a.navigator.userAgent)?"-ms-transform":o?"-webkit-transform":r?"MozTransform":a.opera?"-o-transform":void 0;l&&(i[l]=i.transform="rotate("+t+"deg)",i[l+(r?"Origin":"-origin")]=i.transformOrigin=100*e+"% "+n+"px",c(this.element,i))},e.composedClasses=[],e}(e)})),e(n,"Core/Renderer/HTML/HTMLRenderer.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Renderer/SVG/SVGRenderer.js"],n["Core/Utilities.js"]],(function(t,e,n,i){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=i.attr,o=i.createElement,a=i.extend,c=i.pick;return function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return r(i,n),i.compose=function(t){return-1===i.composedClasses.indexOf(t)&&(i.composedClasses.push(t),t.prototype.html=i.prototype.html),t},i.prototype.html=function(n,i,r){var l=this.createElement("span"),h=l.element,u=l.renderer,d=u.isSVG,p=function(t,n){["opacity","visibility"].forEach((function(i){t[i+"Setter"]=function(r,s,o){var a=t.div?t.div.style:n;e.prototype[i+"Setter"].call(this,r,s,o),a&&(a[s]=r)}})),t.addedSetters=!0};return l.textSetter=function(e){e!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,t.setElementHTML(this.element,c(e,"")),this.textStr=e,l.doTransform=!0)},d&&p(l,l.element.style),l.xSetter=l.ySetter=l.alignSetter=l.rotationSetter=function(t,e){"align"===e?l.alignValue=l.textAlign=t:l[e]=t,l.doTransform=!0},l.afterSetters=function(){this.doTransform&&(this.htmlUpdateTransform(),this.doTransform=!1)},l.attr({text:n,x:Math.round(i),y:Math.round(r)}).css({position:"absolute"}),u.styledMode||l.css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),h.style.whiteSpace="nowrap",l.css=l.htmlCss,d&&(l.add=function(t){var e=u.box.parentNode,n=[];if(this.parentGroup=t){var i=t.div;if(!i){for(;t;)n.push(t),t=t.parentGroup;n.reverse().forEach((function(t){function r(e,n){t[n]=e,"translateX"===n?u.left=e+"px":u.top=e+"px",t.doTransform=!0}var c=s(t.element,"class"),h=t.styles||{};i=t.div=t.div||o("div",c?{className:c}:void 0,{position:"absolute",left:(t.translateX||0)+"px",top:(t.translateY||0)+"px",display:t.display,opacity:t.opacity,cursor:h.cursor,pointerEvents:h.pointerEvents,visibility:t.visibility},i||e);var u=i.style;a(t,{classSetter:function(t){return function(e){this.element.setAttribute("class",e),t.className=e}}(i),on:function(){return n[0].div&&l.on.apply({element:n[0].div,onEvents:t.onEvents},arguments),t},translateXSetter:r,translateYSetter:r}),t.addedSetters||p(t)}))}}else i=e;return i.appendChild(h),l.added=!0,l.alignOnAdd&&l.htmlUpdateTransform(),l}),l},i.composedClasses=[],i}(n)})),e(n,"Core/Axis/AxisDefaults.js",[n["Core/Color/Palette.js"]],(function(t){var e;return function(e){e.defaultXAxisOptions={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e. %b"},week:{main:"%e. %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotation:void 0,autoRotationLimit:80,distance:void 0,enabled:!0,indentation:10,overflow:"justify",padding:5,reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,x:0,zIndex:7,style:{color:t.neutralColor60,cursor:"default",fontSize:"11px"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minPadding:.01,offset:void 0,opposite:!1,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",rotation:0,useHTML:!1,x:0,y:0,style:{color:t.neutralColor60}},type:"linear",uniqueNames:!0,visible:!0,minorGridLineColor:t.neutralColor5,minorGridLineWidth:1,minorTickColor:t.neutralColor40,lineColor:t.highlightColor20,lineWidth:1,gridLineColor:t.neutralColor10,gridLineWidth:void 0,tickColor:t.highlightColor20},e.defaultYAxisOptions={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){var t=this.axis.chart.numberFormatter;return t(this.total,-1)},style:{color:t.neutralColor100,fontSize:"11px",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},e.defaultLeftAxisOptions={labels:{x:-15},title:{rotation:270}},e.defaultRightAxisOptions={labels:{x:15},title:{rotation:90}},e.defaultBottomAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},e.defaultTopAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}}}(e||(e={})),e})),e(n,"Core/Foundation.js",[n["Core/Utilities.js"]],(function(t){var e=t.addEvent,n=t.isFunction,i=t.objectEach,r=t.removeEvent;return{registerEventOptions:function(t,s){t.eventOptions=t.eventOptions||{},i(s.events,(function(i,s){t.eventOptions[s]!==i&&(t.eventOptions[s]&&(r(t,s,t.eventOptions[s]),delete t.eventOptions[s]),n(i)&&(t.eventOptions[s]=i,e(t,s,i)))}))}}})),e(n,"Core/Axis/Tick.js",[n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e,n){var i=e.deg2rad,r=n.clamp,s=n.correctFloat,o=n.defined,a=n.destroyObjectProperties,c=n.extend,l=n.fireEvent,h=n.isNumber,u=n.merge,d=n.objectEach,p=n.pick;return e=function(){function e(t,e,n,i,r){this.isNewLabel=this.isNew=!0,this.axis=t,this.pos=e,this.type=n||"",this.parameters=r||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,l(this,"init"),n||i||this.addLabel()}return e.prototype.addLabel=function(){var e=this,n=e.axis,i=n.options,r=n.chart,a=n.categories,u=n.logarithmic,d=n.names,f=e.pos,g=p(e.options&&e.options.labels,i.labels),m=n.tickPositions,y=f===m[0],v=f===m[m.length-1],b=(!g.step||1===g.step)&&1===n.tickInterval;m=m.info;var w,_=e.label;if(a=this.parameters.category||(a?p(a[f],d[f],f):f),u&&h(a)&&(a=s(u.lin2log(a))),n.dateTime)if(m)var x=r.time.resolveDTLFormat(i.dateTimeLabelFormats[!i.grid&&m.higherRanks[f]||m.unitName]),T=x.main;else h(a)&&(T=n.dateTime.getXDateFormat(a,i.dateTimeLabelFormats||{}));e.isFirst=y,e.isLast=v;var S={axis:n,chart:r,dateTimeLabelFormat:T,isFirst:y,isLast:v,pos:f,tick:e,tickPositionInfo:m,value:a};l(this,"labelFormat",S);var C=function(e){return g.formatter?g.formatter.call(e,e):g.format?(e.text=n.defaultLabelFormatter.call(e),t.format(g.format,e,r)):n.defaultLabelFormatter.call(e,e)};i=C.call(S,S);var k=x&&x.list;e.shortenLabel=k?function(){for(w=0;w<k.length;w++)if(c(S,{dateTimeLabelFormat:k[w]}),_.attr({text:C.call(S,S)}),_.getBBox().width<n.getSlotWidth(e)-2*g.padding)return;_.attr({text:""})}:void 0,b&&n._addedPlotLB&&e.moveLabel(i,g),o(_)||e.movedLabel?_&&_.textStr!==i&&!b&&(!_.textWidth||g.style.width||_.styles.width||_.css({width:null}),_.attr({text:i}),_.textPxLength=_.getBBox().width):(e.label=_=e.createLabel({x:0,y:0},i,g),e.rotation=0)},e.prototype.createLabel=function(t,e,n){var i=this.axis,r=i.chart;return(t=o(e)&&n.enabled?r.renderer.text(e,t.x,t.y,n.useHTML).add(i.labelGroup):null)&&(r.styledMode||t.css(u(n.style)),t.textPxLength=t.getBBox().width),t},e.prototype.destroy=function(){a(this,this.axis)},e.prototype.getPosition=function(t,e,n,i){var o=this.axis,a=o.chart,c=i&&a.oldChartHeight||a.chartHeight;return t={x:t?s(o.translate(e+n,null,null,i)+o.transB):o.left+o.offset+(o.opposite?(i&&a.oldChartWidth||a.chartWidth)-o.right-o.left:0),y:t?c-o.bottom+o.offset-(o.opposite?o.height:0):s(c-o.translate(e+n,null,null,i)-o.transB)},t.y=r(t.y,-1e5,1e5),l(this,"afterGetPosition",{pos:t}),t},e.prototype.getLabelPosition=function(t,e,n,r,s,a,c,h){var u=this.axis,d=u.transA,p=u.isLinked&&u.linkedParent?u.linkedParent.reversed:u.reversed,f=u.staggerLines,g=u.tickRotCorr||{x:0,y:0},m=r||u.reserveSpaceDefault?0:-u.labelOffset*("center"===u.labelAlign?.5:1),y={},v=s.y;return o(v)||(v=0===u.side?n.rotation?-8:-n.getBBox().height:2===u.side?g.y+8:Math.cos(n.rotation*i)*(g.y-n.getBBox(!1,0).height/2)),t=t+s.x+m+g.x-(a&&r?a*d*(p?-1:1):0),e=e+v-(a&&!r?a*d*(p?1:-1):0),f&&(n=c/(h||1)%f,u.opposite&&(n=f-n-1),e+=u.labelOffset/f*n),y.x=t,y.y=Math.round(e),l(this,"afterGetLabelPosition",{pos:y,tickmarkOffset:a,index:c}),y},e.prototype.getLabelSize=function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},e.prototype.getMarkPath=function(t,e,n,i,r,s){return s.crispLine([["M",t,e],["L",t+(r?0:-n),e+(r?n:0)]],i)},e.prototype.handleOverflow=function(t){var e=this.axis,n=e.options.labels,r=t.x,s=e.chart.chartWidth,o=e.chart.spacing,a=p(e.labelLeft,Math.min(e.pos,o[3]));o=p(e.labelRight,Math.max(e.isRadial?0:e.pos+e.len,s-o[1]));var c,l=this.label,h=this.rotation,u={left:0,center:.5,right:1}[e.labelAlign||l.attr("align")],d=l.getBBox().width,f=e.getSlotWidth(this),g={},m=f,y=1;h||"justify"!==n.overflow?0>h&&r-u*d<a?c=Math.round(r/Math.cos(h*i)-a):0<h&&r+u*d>o&&(c=Math.round((s-r)/Math.cos(h*i))):(s=r+(1-u)*d,r-u*d<a?m=t.x+m*(1-u)-a:s>o&&(m=o-t.x+m*u,y=-1),m=Math.min(f,m),m<f&&"center"===e.labelAlign&&(t.x+=y*(f-m-u*(f-Math.min(d,m)))),(d>m||e.autoRotation&&(l.styles||{}).width)&&(c=m)),c&&(this.shortenLabel?this.shortenLabel():(g.width=Math.floor(c)+"px",(n.style||{}).textOverflow||(g.textOverflow="ellipsis"),l.css(g)))},e.prototype.moveLabel=function(t,e){var n=this,i=n.label,r=n.axis,s=r.reversed,o=!1;if(i&&i.textStr===t?(n.movedLabel=i,o=!0,delete n.label):d(r.ticks,(function(e){o||e.isNew||e===n||!e.label||e.label.textStr!==t||(n.movedLabel=e.label,o=!0,e.labelPos=n.movedLabel.xy,delete e.label)})),!o&&(n.labelPos||i)){var a=n.labelPos||i.xy;i=r.horiz?s?0:r.width+r.left:a.x,r=r.horiz?a.y:s?r.width+r.left:0,n.movedLabel=n.createLabel({x:i,y:r},t,e),n.movedLabel&&n.movedLabel.attr({opacity:0})}},e.prototype.render=function(t,e,n){var i=this.axis,r=i.horiz,s=this.pos,o=p(this.tickmarkOffset,i.tickmarkOffset);s=this.getPosition(r,s,o,e),o=s.x;var a=s.y;i=r&&o===i.pos+i.len||!r&&a===i.pos?-1:1,r=p(n,this.label&&this.label.newOpacity,1),n=p(n,1),this.isActive=!0,this.renderGridLine(e,n,i),this.renderMark(s,n,i),this.renderLabel(s,e,r,t),this.isNew=!1,l(this,"afterRender")},e.prototype.renderGridLine=function(t,e,n){var i=this.axis,r=i.options,s={},o=this.pos,a=this.type,c=p(this.tickmarkOffset,i.tickmarkOffset),l=i.chart.renderer,h=this.gridLine,u=r.gridLineWidth,d=r.gridLineColor,f=r.gridLineDashStyle;"minor"===this.type&&(u=r.minorGridLineWidth,d=r.minorGridLineColor,f=r.minorGridLineDashStyle),h||(i.chart.styledMode||(s.stroke=d,s["stroke-width"]=u||0,s.dashstyle=f),a||(s.zIndex=1),t&&(e=0),this.gridLine=h=l.path().attr(s).addClass("highcharts-"+(a?a+"-":"")+"grid-line").add(i.gridGroup)),h&&(n=i.getPlotLinePath({value:o+c,lineWidth:h.strokeWidth()*n,force:"pass",old:t}))&&h[t||this.isNew?"attr":"animate"]({d:n,opacity:e})},e.prototype.renderMark=function(t,e,n){var i=this.axis,r=i.options,s=i.chart.renderer,o=this.type,a=i.tickSize(o?o+"Tick":"tick"),c=t.x;t=t.y;var l=p(r["minor"!==o?"tickWidth":"minorTickWidth"],!o&&i.isXAxis?1:0);r=r["minor"!==o?"tickColor":"minorTickColor"];var h=this.mark,u=!h;a&&(i.opposite&&(a[0]=-a[0]),h||(this.mark=h=s.path().addClass("highcharts-"+(o?o+"-":"")+"tick").add(i.axisGroup),i.chart.styledMode||h.attr({stroke:r,"stroke-width":l})),h[u?"attr":"animate"]({d:this.getMarkPath(c,t,a[0],h.strokeWidth()*n,i.horiz,s),opacity:e}))},e.prototype.renderLabel=function(t,e,n,i){var r=this.axis,s=r.horiz,o=r.options,a=this.label,c=o.labels,l=c.step;r=p(this.tickmarkOffset,r.tickmarkOffset);var u=t.x;t=t.y;var d=!0;a&&h(u)&&(a.xy=t=this.getLabelPosition(u,t,a,s,c,r,i,l),this.isFirst&&!this.isLast&&!o.showFirstLabel||this.isLast&&!this.isFirst&&!o.showLastLabel?d=!1:!s||c.step||c.rotation||e||0===n||this.handleOverflow(t),l&&i%l&&(d=!1),d&&h(t.y)?(t.opacity=n,a[this.isNewLabel?"attr":"animate"](t),this.isNewLabel=!1):(a.attr("y",-9999),this.isNewLabel=!0))},e.prototype.replaceMovedLabel=function(){var t=this.label,e=this.axis,n=e.reversed;if(t&&!this.isNew){var i=e.horiz?n?e.left:e.width+e.left:t.xy.x;n=e.horiz?t.xy.y:n?e.width+e.top:e.top,t.animate({x:i,y:n,opacity:0},void 0,t.destroy),delete this.label}e.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel},e}(),e})),e(n,"Core/Axis/Axis.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/AxisDefaults.js"],n["Core/Color/Color.js"],n["Core/Color/Palette.js"],n["Core/DefaultOptions.js"],n["Core/Foundation.js"],n["Core/Globals.js"],n["Core/Axis/Tick.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s,o,a,c){var l=t.animObject,h=r.defaultOptions,u=s.registerEventOptions,d=o.deg2rad,p=c.arrayMax,f=c.arrayMin,g=c.clamp,m=c.correctFloat,y=c.defined,v=c.destroyObjectProperties,b=c.erase,w=c.error,_=c.extend,x=c.fireEvent,T=c.getMagnitude,S=c.isArray,C=c.isNumber,k=c.isString,O=c.merge,I=c.normalizeTickInterval,E=c.objectEach,A=c.pick,P=c.relativeLength,N=c.removeEvent,j=c.splat,R=c.syncTimeout;return t=function(){function t(t,e){this.zoomEnabled=this.width=this.visible=this.userOptions=this.translationSlope=this.transB=this.transA=this.top=this.ticks=this.tickRotCorr=this.tickPositions=this.tickmarkOffset=this.tickInterval=this.tickAmount=this.side=this.series=this.right=this.positiveValuesOnly=this.pos=this.pointRangePadding=this.pointRange=this.plotLinesAndBandsGroups=this.plotLinesAndBands=this.paddedTicks=this.overlap=this.options=this.offset=this.names=this.minPixelPadding=this.minorTicks=this.minorTickInterval=this.min=this.maxLabelLength=this.max=this.len=this.left=this.labelFormatter=this.labelEdge=this.isLinked=this.height=this.hasVisibleSeries=this.hasNames=this.eventOptions=this.coll=this.closestPointRange=this.chart=this.categories=this.bottom=this.alternateBands=void 0,this.init(t,e)}return t.prototype.init=function(t,e){var n=e.isX;this.chart=t,this.horiz=t.inverted&&!this.isZAxis?!n:n,this.isXAxis=n,this.coll=this.coll||(n?"xAxis":"yAxis"),x(this,"init",{userOptions:e}),this.opposite=A(e.opposite,this.opposite),this.side=A(e.side,this.side,this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(e);var i=this.options,r=i.labels,s=i.type;this.userOptions=e,this.minPixelPadding=0,this.reversed=A(i.reversed,this.reversed),this.visible=i.visible,this.zoomEnabled=i.zoomEnabled,this.hasNames="category"===s||!0===i.categories,this.categories=i.categories||this.hasNames,this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=y(i.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=i.minRange||i.maxZoom,this.range=i.range,this.offset=i.offset||0,this.min=this.max=null,e=A(i.crosshair,j(t.options.tooltip.crosshairs)[n?0:1]),this.crosshair=!0===e?{}:e,-1===t.axes.indexOf(this)&&(n?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),t[this.coll].push(this)),this.series=this.series||[],t.inverted&&!this.isZAxis&&n&&"undefined"===typeof this.reversed&&(this.reversed=!0),this.labelRotation=C(r.rotation)?r.rotation:void 0,u(this,i),x(this,"afterInit")},t.prototype.setOptions=function(t){this.options=O(e.defaultXAxisOptions,"yAxis"===this.coll&&e.defaultYAxisOptions,[e.defaultTopAxisOptions,e.defaultRightAxisOptions,e.defaultBottomAxisOptions,e.defaultLeftAxisOptions][this.side],O(h[this.coll],t)),x(this,"afterSetOptions",{userOptions:t})},t.prototype.defaultLabelFormatter=function(t){var e=this.axis;t=this.chart.numberFormatter;var n=C(this.value)?this.value:NaN,i=e.chart.time,r=this.dateTimeLabelFormat,s=h.lang,o=s.numericSymbols;s=s.numericSymbolMagnitude||1e3;var a=e.logarithmic?Math.abs(n):e.tickInterval,c=o&&o.length;if(e.categories)var l=""+this.value;else if(r)l=i.dateFormat(r,n);else if(c&&1e3<=a)for(;c--&&"undefined"===typeof l;)e=Math.pow(s,c+1),a>=e&&0===10*n%e&&null!==o[c]&&0!==n&&(l=t(n/e,-1)+o[c]);return"undefined"===typeof l&&(l=1e4<=Math.abs(n)?t(n,-1):t(n,-1,void 0,"")),l},t.prototype.getSeriesExtremes=function(){var t,e=this,n=e.chart;x(this,"getSeriesExtremes",null,(function(){e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.threshold=null,e.softThreshold=!e.isXAxis,e.stacking&&e.stacking.buildStacks(),e.series.forEach((function(i){if(i.visible||!n.options.chart.ignoreHiddenSeries){var r=i.options,s=r.threshold;if(e.hasVisibleSeries=!0,e.positiveValuesOnly&&0>=s&&(s=null),e.isXAxis){if(r=i.xData,r.length){r=e.logarithmic?r.filter(e.validatePositiveValue):r,t=i.getXExtremes(r);var o=t.min,a=t.max;C(o)||o instanceof Date||(r=r.filter(C),t=i.getXExtremes(r),o=t.min,a=t.max),r.length&&(e.dataMin=Math.min(A(e.dataMin,o),o),e.dataMax=Math.max(A(e.dataMax,a),a))}}else i=i.applyExtremes(),C(i.dataMin)&&(o=i.dataMin,e.dataMin=Math.min(A(e.dataMin,o),o)),C(i.dataMax)&&(a=i.dataMax,e.dataMax=Math.max(A(e.dataMax,a),a)),y(s)&&(e.threshold=s),(!r.softThreshold||e.positiveValuesOnly)&&(e.softThreshold=!1)}}))})),x(this,"afterGetSeriesExtremes")},t.prototype.translate=function(t,e,n,i,r,s){var o=this.linkedParent||this,a=i&&o.old?o.old.min:o.min,c=o.minPixelPadding;r=(o.isOrdinal||o.brokenAxis&&o.brokenAxis.hasBreaks||o.logarithmic&&r)&&o.lin2val;var l=1,h=0;return i=i&&o.old?o.old.transA:o.transA,i||(i=o.transA),n&&(l*=-1,h=o.len),o.reversed&&(l*=-1,h-=l*(o.sector||o.len)),e?(t=(t*l+h-c)/i+a,r&&(t=o.lin2val(t))):(r&&(t=o.val2lin(t)),t=C(a)?l*(t-a)*i+h+l*c+(C(s)?i*s:0):void 0),t},t.prototype.toPixels=function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},t.prototype.toValue=function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},t.prototype.getPlotLinePath=function(t){function e(t,e,n){return("pass"!==b&&t<e||t>n)&&(b?t=g(t,e,n):o=!0),t}var n,i,r,s,o,a=this,c=a.chart,l=a.left,h=a.top,u=t.old,d=t.value,p=t.lineWidth,f=u&&c.oldChartHeight||c.chartHeight,m=u&&c.oldChartWidth||c.chartWidth,y=a.transB,v=t.translatedValue,b=t.force;return t={value:d,lineWidth:p,old:u,force:b,acrossPanes:t.acrossPanes,translatedValue:v},x(this,"getPlotLinePath",t,(function(t){v=A(v,a.translate(d,null,null,u)),v=g(v,-1e5,1e5),n=r=Math.round(v+y),i=s=Math.round(f-v-y),C(v)?a.horiz?(i=h,s=f-a.bottom,n=r=e(n,l,l+a.width)):(n=l,r=m-a.right,i=s=e(i,h,h+a.height)):(o=!0,b=!1),t.path=o&&!b?null:c.renderer.crispLine([["M",n,i],["L",r,s]],p||1)})),t.path},t.prototype.getLinearTickPositions=function(t,e,n){var i=m(Math.floor(e/t)*t);n=m(Math.ceil(n/t)*t);var r,s=[];if(m(i+t)===i&&(r=20),this.single)return[e];for(e=i;e<=n;){if(s.push(e),e=m(e+t,r),e===o)break;var o=e}return s},t.prototype.getMinorTickInterval=function(){var t=this.options;return!0===t.minorTicks?A(t.minorTickInterval,"auto"):!1===t.minorTicks?null:t.minorTickInterval},t.prototype.getMinorTickPositions=function(){var t=this.options,e=this.tickPositions,n=this.minorTickInterval,i=this.pointRangePadding||0,r=this.min-i;i=this.max+i;var s=i-r,o=[];if(s&&s/n<this.len/3){var a=this.logarithmic;if(a)this.paddedTicks.forEach((function(t,e,i){e&&o.push.apply(o,a.getLogTickPositions(n,i[e-1],i[e],!0))}));else if(this.dateTime&&"auto"===this.getMinorTickInterval())o=o.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(n),r,i,t.startOfWeek));else for(t=r+(e[0]-r)%n;t<=i&&t!==o[0];t+=n)o.push(t)}return 0!==o.length&&this.trimTicks(o),o},t.prototype.adjustForMinRange=function(){var t,e,n,i,r=this.options,s=this.logarithmic,o=this.min,a=this.max,c=0;if(this.isXAxis&&"undefined"===typeof this.minRange&&!s&&(y(r.min)||y(r.max)?this.minRange=null:(this.series.forEach((function(r){if(n=r.xData,i=r.xIncrement?1:n.length-1,1<n.length)for(t=i;0<t;t--)e=n[t]-n[t-1],(!c||e<c)&&(c=e)})),this.minRange=Math.min(5*c,this.dataMax-this.dataMin))),a-o<this.minRange){var l=this.dataMax-this.dataMin>=this.minRange,h=this.minRange,u=(h-a+o)/2;u=[o-u,A(r.min,o-u)],l&&(u[2]=this.logarithmic?this.logarithmic.log2lin(this.dataMin):this.dataMin),o=p(u),a=[o+h,A(r.max,o+h)],l&&(a[2]=s?s.log2lin(this.dataMax):this.dataMax),a=f(a),a-o<h&&(u[0]=a-h,u[1]=A(r.min,a-h),o=p(u))}this.min=o,this.max=a},t.prototype.getClosest=function(){var t;return this.categories?t=1:this.series.forEach((function(e){var n=e.closestPointRange,i=e.visible||!e.chart.options.chart.ignoreHiddenSeries;!e.noSharedTooltip&&y(n)&&i&&(t=y(t)?Math.min(t,n):n)})),t},t.prototype.nameToX=function(t){var e=S(this.categories),n=e?this.categories:this.names,i=t.options.x;if(t.series.requireSorting=!1,y(i)||(i=this.options.uniqueNames?e?n.indexOf(t.name):A(n.keys[t.name],-1):t.series.autoIncrement()),-1===i){if(!e)var r=n.length}else r=i;return"undefined"!==typeof r&&(this.names[r]=t.name,this.names.keys[t.name]=r),r},t.prototype.updateNames=function(){var t=this,e=this.names;0<e.length&&(Object.keys(e.keys).forEach((function(t){delete e.keys[t]})),e.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach((function(e){e.xIncrement=null,e.points&&!e.isDirtyData||(t.max=Math.max(t.max,e.xData.length-1),e.processData(),e.generatePoints()),e.data.forEach((function(n,i){if(n&&n.options&&"undefined"!==typeof n.name){var r=t.nameToX(n);"undefined"!==typeof r&&r!==n.x&&(n.x=r,e.xData[i]=r)}}))})))},t.prototype.setAxisTranslation=function(){var t=this,e=t.max-t.min,n=t.linkedParent,i=!!t.categories,r=t.isXAxis,s=t.axisPointRange||0,o=0,a=0,c=t.transA;if(r||i||s){var l=t.getClosest();n?(o=n.minPointOffset,a=n.pointRangePadding):t.series.forEach((function(e){var n=i?1:r?A(e.options.pointRange,l,0):t.axisPointRange||0,c=e.options.pointPlacement;s=Math.max(s,n),t.single&&!i||(e=e.is("xrange")?!r:r,o=Math.max(o,e&&k(c)?0:n/2),a=Math.max(a,e&&"on"===c?0:n))})),n=t.ordinal&&t.ordinal.slope&&l?t.ordinal.slope/l:1,t.minPointOffset=o*=n,t.pointRangePadding=a*=n,t.pointRange=Math.min(s,t.single&&i?1:e),r&&(t.closestPointRange=l)}t.translationSlope=t.transA=c=t.staticScale||t.len/(e+a||1),t.transB=t.horiz?t.left:t.bottom,t.minPixelPadding=c*o,x(this,"afterSetAxisTranslation")},t.prototype.minFromRange=function(){return this.max-this.range},t.prototype.setTickInterval=function(t){var e=this,n=e.chart,i=e.logarithmic,r=e.options,s=e.isXAxis,o=e.isLinked,a=r.tickPixelInterval,c=e.categories,l=e.softThreshold,h=r.maxPadding,u=r.minPadding,d=r.tickInterval,p=C(e.threshold)?e.threshold:null;e.dateTime||c||o||this.getTickAmount();var f=A(e.userMin,r.min),g=A(e.userMax,r.max);if(o){e.linkedParent=n[e.coll][r.linkedTo];var v=e.linkedParent.getExtremes();e.min=A(v.min,v.dataMin),e.max=A(v.max,v.dataMax),r.type!==e.linkedParent.options.type&&w(11,1,n)}else{if(l&&y(p))if(e.dataMin>=p)v=p,u=0;else if(e.dataMax<=p){var b=p;h=0}e.min=A(f,v,e.dataMin),e.max=A(g,b,e.dataMax)}i&&(e.positiveValuesOnly&&!t&&0>=Math.min(e.min,A(e.dataMin,e.min))&&w(10,1,n),e.min=m(i.log2lin(e.min),16),e.max=m(i.log2lin(e.max),16)),e.range&&y(e.max)&&(e.userMin=e.min=f=Math.max(e.dataMin,e.minFromRange()),e.userMax=g=e.max,e.range=null),x(e,"foundExtremes"),e.beforePadding&&e.beforePadding(),e.adjustForMinRange(),!(c||e.axisPointRange||e.stacking&&e.stacking.usePercentage||o)&&y(e.min)&&y(e.max)&&(n=e.max-e.min)&&(!y(f)&&u&&(e.min-=n*u),!y(g)&&h&&(e.max+=n*h)),C(e.userMin)||(C(r.softMin)&&r.softMin<e.min&&(e.min=f=r.softMin),C(r.floor)&&(e.min=Math.max(e.min,r.floor))),C(e.userMax)||(C(r.softMax)&&r.softMax>e.max&&(e.max=g=r.softMax),C(r.ceiling)&&(e.max=Math.min(e.max,r.ceiling))),l&&y(e.dataMin)&&(p=p||0,!y(f)&&e.min<p&&e.dataMin>=p?e.min=e.options.minRange?Math.min(p,e.max-e.minRange):p:!y(g)&&e.max>p&&e.dataMax<=p&&(e.max=e.options.minRange?Math.max(p,e.min+e.minRange):p)),C(e.min)&&C(e.max)&&!this.chart.polar&&e.min>e.max&&(y(e.options.min)?e.max=e.min:y(e.options.max)&&(e.min=e.max)),e.tickInterval=e.min===e.max||"undefined"===typeof e.min||"undefined"===typeof e.max?1:o&&e.linkedParent&&!d&&a===e.linkedParent.options.tickPixelInterval?d=e.linkedParent.tickInterval:A(d,this.tickAmount?(e.max-e.min)/Math.max(this.tickAmount-1,1):void 0,c?1:(e.max-e.min)*a/Math.max(e.len,a)),s&&!t&&(e.series.forEach((function(t){t.forceCrop=t.forceCropping&&t.forceCropping(),t.processData(e.min!==(e.old&&e.old.min)||e.max!==(e.old&&e.old.max))})),x(this,"postProcessData")),e.setAxisTranslation(),x(this,"initialAxisTranslation"),e.pointRange&&!d&&(e.tickInterval=Math.max(e.pointRange,e.tickInterval)),t=A(r.minTickInterval,e.dateTime&&!e.series.some((function(t){return t.noSharedTooltip}))?e.closestPointRange:0),!d&&e.tickInterval<t&&(e.tickInterval=t),e.dateTime||e.logarithmic||d||(e.tickInterval=I(e.tickInterval,void 0,T(e.tickInterval),A(r.allowDecimals,.5>e.tickInterval||void 0!==this.tickAmount),!!this.tickAmount)),this.tickAmount||(e.tickInterval=e.unsquish()),this.setTickPositions()},t.prototype.setTickPositions=function(){var t=this.options,e=t.tickPositions,n=this.getMinorTickInterval(),i=this.hasVerticalPanning(),r="colorAxis"===this.coll,s=(r||!i)&&t.startOnTick;i=(r||!i)&&t.endOnTick,r=t.tickPositioner,this.tickmarkOffset=this.categories&&"between"===t.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===n&&this.tickInterval?this.tickInterval/5:n,this.single=this.min===this.max&&y(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==t.allowDecimals),this.tickPositions=n=e&&e.slice(),!n&&(this.ordinal&&this.ordinal.positions||!((this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))?n=this.dateTime?this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,t.units),this.min,this.max,t.startOfWeek,this.ordinal&&this.ordinal.positions,this.closestPointRange,!0):this.logarithmic?this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max):(n=[this.min,this.max],w(19,!1,this.chart)),n.length>this.len&&(n=[n[0],n.pop()],n[0]===n[1]&&(n.length=1)),this.tickPositions=n,r&&(r=r.apply(this,[this.min,this.max])))&&(this.tickPositions=n=r),this.paddedTicks=n.slice(0),this.trimTicks(n,s,i),this.isLinked||(this.single&&2>n.length&&!this.categories&&!this.series.some((function(t){return t.is("heatmap")&&"between"===t.options.pointPlacement}))&&(this.min-=.5,this.max+=.5),e||r||this.adjustTickAmount()),x(this,"afterSetTickPositions")},t.prototype.trimTicks=function(t,e,n){var i=t[0],r=t[t.length-1],s=!this.isOrdinal&&this.minPointOffset||0;if(x(this,"trimTicks"),!this.isLinked){if(e&&-1/0!==i)this.min=i;else for(;this.min-s>t[0];)t.shift();if(n)this.max=r;else for(;this.max+s<t[t.length-1];)t.pop();0===t.length&&y(i)&&!this.options.tickPositions&&t.push((r+i)/2)}},t.prototype.alignToOthers=function(){var t,e={},n=this.options;return!1!==this.chart.options.chart.alignTicks&&n.alignTicks&&!1!==n.startOnTick&&!1!==n.endOnTick&&!this.logarithmic&&this.chart[this.coll].forEach((function(n){var i=n.options;i=[n.horiz?i.left:i.top,i.width,i.height,i.pane].join(),n.series.length&&(e[i]?t=!0:e[i]=1)})),t},t.prototype.getTickAmount=function(){var t=this.options,e=t.tickPixelInterval,n=t.tickAmount;!y(t.tickInterval)&&!n&&this.len<e&&!this.isRadial&&!this.logarithmic&&t.startOnTick&&t.endOnTick&&(n=2),!n&&this.alignToOthers()&&(n=Math.ceil(this.len/e)+1),4>n&&(this.finalTickAmt=n,n=5),this.tickAmount=n},t.prototype.adjustTickAmount=function(){var t=this.options,e=this.tickInterval,n=this.tickPositions,i=this.tickAmount,r=this.finalTickAmt,s=n&&n.length,o=A(this.threshold,this.softThreshold?0:null);if(this.hasData()&&C(this.min)&&C(this.max)){if(s<i){for(;n.length<i;)n.length%2||this.min===o?n.push(m(n[n.length-1]+e)):n.unshift(m(n[0]-e));this.transA*=(s-1)/(i-1),this.min=t.startOnTick?n[0]:Math.min(this.min,n[0]),this.max=t.endOnTick?n[n.length-1]:Math.max(this.max,n[n.length-1])}else s>i&&(this.tickInterval*=2,this.setTickPositions());if(y(r)){for(e=t=n.length;e--;)(3===r&&1===e%2||2>=r&&0<e&&e<t-1)&&n.splice(e,1);this.finalTickAmt=void 0}}},t.prototype.setScale=function(){var t=!1,e=!1;this.series.forEach((function(n){t=t||n.isDirtyData||n.isDirty,e=e||n.xAxis&&n.xAxis.isDirty||!1})),this.setAxisSize();var n=this.len!==(this.old&&this.old.len);n||t||e||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(this.stacking&&this.stacking.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.isDirty||(this.isDirty=n||this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max))):this.stacking&&this.stacking.cleanStacks(),t&&this.panningState&&(this.panningState.isDirty=!0),x(this,"afterSetScale")},t.prototype.setExtremes=function(t,e,n,i,r){var s=this,o=s.chart;n=A(n,!0),s.series.forEach((function(t){delete t.kdTree})),r=_(r,{min:t,max:e}),x(s,"setExtremes",r,(function(){s.userMin=t,s.userMax=e,s.eventArgs=r,n&&o.redraw(i)}))},t.prototype.zoom=function(t,e){var n=this,i=this.dataMin,r=this.dataMax,s=this.options,o=Math.min(i,A(s.min,i)),a=Math.max(r,A(s.max,r));return t={newMin:t,newMax:e},x(this,"zoom",t,(function(t){var e=t.newMin,s=t.newMax;e===n.min&&s===n.max||(n.allowZoomOutside||(y(i)&&(e<o&&(e=o),e>a&&(e=a)),y(r)&&(s<o&&(s=o),s>a&&(s=a))),n.displayBtn="undefined"!==typeof e||"undefined"!==typeof s,n.setExtremes(e,s,!1,void 0,{trigger:"zoom"})),t.zoomed=!0})),t.zoomed},t.prototype.setAxisSize=function(){var t=this.chart,e=this.options,n=e.offsets||[0,0,0,0],i=this.horiz,r=this.width=Math.round(P(A(e.width,t.plotWidth-n[3]+n[1]),t.plotWidth)),s=this.height=Math.round(P(A(e.height,t.plotHeight-n[0]+n[2]),t.plotHeight)),o=this.top=Math.round(P(A(e.top,t.plotTop+n[0]),t.plotHeight,t.plotTop));e=this.left=Math.round(P(A(e.left,t.plotLeft+n[3]),t.plotWidth,t.plotLeft)),this.bottom=t.chartHeight-s-o,this.right=t.chartWidth-r-e,this.len=Math.max(i?r:s,0),this.pos=i?e:o},t.prototype.getExtremes=function(){var t=this.logarithmic;return{min:t?m(t.lin2log(this.min)):this.min,max:t?m(t.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},t.prototype.getThreshold=function(t){var e=this.logarithmic,n=e?e.lin2log(this.min):this.min;return e=e?e.lin2log(this.max):this.max,null===t||-1/0===t?t=n:1/0===t?t=e:n>t?t=n:e<t&&(t=e),this.translate(t,0,1,0,1)},t.prototype.autoLabelAlign=function(t){var e=(A(t,0)-90*this.side+720)%360;return t={align:"center"},x(this,"autoLabelAlign",t,(function(t){15<e&&165>e?t.align="right":195<e&&345>e&&(t.align="left")})),t.align},t.prototype.tickSize=function(t){var e=this.options,n=A(e["tick"===t?"tickWidth":"minorTickWidth"],"tick"===t&&this.isXAxis&&!this.categories?1:0),i=e["tick"===t?"tickLength":"minorTickLength"];if(n&&i){"inside"===e[t+"Position"]&&(i=-i);var r=[i,n]}return t={tickSize:r},x(this,"afterTickSize",t),t.tickSize},t.prototype.labelMetrics=function(){var t=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style.fontSize,this.ticks[t]&&this.ticks[t].label)},t.prototype.unsquish=function(){var t,e,n=this.options.labels,i=this.horiz,r=this.tickInterval,s=this.len/(((this.categories?1:0)+this.max-this.min)/r),o=n.rotation,a=this.labelMetrics(),c=Math.max(this.max-this.min,0),l=function(t){var e=t/(s||1);return e=1<e?Math.ceil(e):1,e*r>c&&1/0!==t&&1/0!==s&&c&&(e=Math.ceil(c/r)),m(e*r)},h=r,u=Number.MAX_VALUE;if(i){if(!n.staggerLines&&!n.step)if(C(o))var p=[o];else s<n.autoRotationLimit&&(p=n.autoRotation);p&&p.forEach((function(n){if(n===o||n&&-90<=n&&90>=n){e=l(Math.abs(a.h/Math.sin(d*n)));var i=e+Math.abs(n/360);i<u&&(u=i,t=n,h=e)}}))}else n.step||(h=l(a.h));return this.autoRotation=p,this.labelRotation=A(t,C(o)?o:0),h},t.prototype.getSlotWidth=function(t){var e=this.chart,n=this.horiz,i=this.options.labels,r=Math.max(this.tickPositions.length-(this.categories?0:1),1),s=e.margin[3];if(t&&C(t.slotWidth))return t.slotWidth;if(n&&2>i.step)return i.rotation?0:(this.staggerLines||1)*this.len/r;if(!n){if(t=i.style.width,void 0!==t)return parseInt(String(t),10);if(s)return s-e.spacing[3]}return.33*e.chartWidth},t.prototype.renderUnsquish=function(){var t=this.chart,e=t.renderer,n=this.tickPositions,i=this.ticks,r=this.options.labels,s=r.style,o=this.horiz,a=this.getSlotWidth(),c=Math.max(1,Math.round(a-2*r.padding)),l={},h=this.labelMetrics(),u=s.textOverflow,d=0;if(k(r.rotation)||(l.rotation=r.rotation||0),n.forEach((function(t){t=i[t],t.movedLabel&&t.replaceMovedLabel(),t&&t.label&&t.label.textPxLength>d&&(d=t.label.textPxLength)})),this.maxLabelLength=d,this.autoRotation)d>c&&d>h.h?l.rotation=this.labelRotation:this.labelRotation=0;else if(a){var p=c;if(!u){var f="clip";for(c=n.length;!o&&c--;){var g=n[c];(g=i[g].label)&&(g.styles&&"ellipsis"===g.styles.textOverflow?g.css({textOverflow:"clip"}):g.textPxLength>a&&g.css({width:a+"px"}),g.getBBox().height>this.len/n.length-(h.h-h.f)&&(g.specificTextOverflow="ellipsis"))}}}l.rotation&&(p=d>.5*t.chartHeight?.33*t.chartHeight:d,u||(f="ellipsis")),(this.labelAlign=r.align||this.autoLabelAlign(this.labelRotation))&&(l.align=this.labelAlign),n.forEach((function(t){var e=(t=i[t])&&t.label,n=s.width,r={};e&&(e.attr(l),t.shortenLabel?t.shortenLabel():p&&!n&&"nowrap"!==s.whiteSpace&&(p<e.textPxLength||"SPAN"===e.element.tagName)?(r.width=p+"px",u||(r.textOverflow=e.specificTextOverflow||f),e.css(r)):e.styles&&e.styles.width&&!r.width&&!n&&e.css({width:null}),delete e.specificTextOverflow,t.rotation=l.rotation)}),this),this.tickRotCorr=e.rotCorr(h.b,this.labelRotation||0,0!==this.side)},t.prototype.hasData=function(){return this.series.some((function(t){return t.hasData()}))||this.options.showEmpty&&y(this.min)&&y(this.max)},t.prototype.addTitle=function(t){var e,n=this.chart.renderer,i=this.horiz,r=this.opposite,s=this.options.title,o=this.chart.styledMode;this.axisTitle||((e=s.textAlign)||(e=(i?{low:"left",middle:"center",high:"right"}:{low:r?"right":"left",middle:"center",high:r?"left":"right"})[s.align]),this.axisTitle=n.text(s.text||"",0,0,s.useHTML).attr({zIndex:7,rotation:s.rotation,align:e}).addClass("highcharts-axis-title"),o||this.axisTitle.css(O(s.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),o||s.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[t?"show":"hide"](t)},t.prototype.generateTick=function(t){var e=this.ticks;e[t]?e[t].addLabel():e[t]=new a(this,t)},t.prototype.getOffset=function(){var t=this,e=this,n=e.chart,i=n.renderer,r=e.options,s=e.tickPositions,o=e.ticks,a=e.horiz,c=e.side,l=n.inverted&&!e.isZAxis?[1,0,3,2][c]:c,h=e.hasData(),u=r.title,d=r.labels,p=n.axisOffset;n=n.clipOffset;var f,g=[-1,1,1,-1][c],m=r.className,v=e.axisParent,b=0,w=0,_=0;if(e.showAxis=f=h||r.showEmpty,e.staggerLines=e.horiz&&d.staggerLines||void 0,!e.axisGroup){var T=function(e,n,r){return i.g(e).attr({zIndex:r}).addClass("highcharts-"+t.coll.toLowerCase()+n+" "+(t.isRadial?"highcharts-radial-axis"+n+" ":"")+(m||"")).add(v)};e.gridGroup=T("grid","-grid",r.gridZIndex),e.axisGroup=T("axis","",r.zIndex),e.labelGroup=T("axis-labels","-labels",d.zIndex)}if(h||e.isLinked?(s.forEach((function(t){e.generateTick(t)})),e.renderUnsquish(),e.reserveSpaceDefault=0===c||2===c||{1:"left",3:"right"}[c]===e.labelAlign,A(d.reserveSpace,"center"===e.labelAlign||null,e.reserveSpaceDefault)&&s.forEach((function(t){_=Math.max(o[t].getLabelSize(),_)})),e.staggerLines&&(_*=e.staggerLines),e.labelOffset=_*(e.opposite?-1:1)):E(o,(function(t,e){t.destroy(),delete o[e]})),u&&u.text&&!1!==u.enabled&&(e.addTitle(f),f&&!1!==u.reserveSpace)){e.titleOffset=b=e.axisTitle.getBBox()[a?"height":"width"];var S=u.offset;w=y(S)?0:A(u.margin,a?5:10)}e.renderLine(),e.offset=g*A(r.offset,p[c]?p[c]+(r.margin||0):0),e.tickRotCorr=e.tickRotCorr||{x:0,y:0},u=0===c?-e.labelMetrics().h:2===c?e.tickRotCorr.y:0,h=Math.abs(_)+w,_&&(h=h-u+g*(a?A(d.y,e.tickRotCorr.y+8*g):d.x)),e.axisTitleMargin=A(S,h),e.getMaxLabelDimensions&&(e.maxLabelDimensions=e.getMaxLabelDimensions(o,s)),a=this.tickSize("tick"),p[c]=Math.max(p[c],(e.axisTitleMargin||0)+b+g*e.offset,h,s&&s.length&&a?a[0]+g*e.offset:0),r=r.offset?0:2*Math.floor(e.axisLine.strokeWidth()/2),n[l]=Math.max(n[l],r),x(this,"afterGetOffset")},t.prototype.getLinePath=function(t){var e=this.chart,n=this.opposite,i=this.offset,r=this.horiz,s=this.left+(n?this.width:0)+i;return i=e.chartHeight-this.bottom-(n?this.height:0)+i,n&&(t*=-1),e.renderer.crispLine([["M",r?this.left:s,r?i:this.top],["L",r?e.chartWidth-this.right:s,r?i:e.chartHeight-this.bottom]],t)},t.prototype.renderLine=function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},t.prototype.getTitlePosition=function(){var t=this.horiz,e=this.left,n=this.top,i=this.len,r=this.options.title,s=t?e:n,o=this.opposite,a=this.offset,c=r.x,l=r.y,h=this.axisTitle,u=this.chart.renderer.fontMetrics(r.style.fontSize,h);return h=Math.max(h.getBBox(null,0).height-u.h-1,0),i={low:s+(t?0:i),middle:s+i/2,high:s+(t?i:0)}[r.align],e=(t?n+this.height:e)+(t?1:-1)*(o?-1:1)*this.axisTitleMargin+[-h,h,u.f,-h][this.side],t={x:t?i+c:e+(o?this.width:0)+a+c,y:t?e+l-(o?this.height:0)+a:i+l},x(this,"afterGetTitlePosition",{titlePosition:t}),t},t.prototype.renderMinorTick=function(t,e){var n=this.minorTicks;n[t]||(n[t]=new a(this,t,"minor")),e&&n[t].isNew&&n[t].render(null,!0),n[t].render(null,!1,1)},t.prototype.renderTick=function(t,e,n){var i=this.ticks;(!this.isLinked||t>=this.min&&t<=this.max||this.grid&&this.grid.isColumn)&&(i[t]||(i[t]=new a(this,t)),n&&i[t].isNew&&i[t].render(e,!0,-1),i[t].render(e))},t.prototype.render=function(){var t,e,n=this,i=n.chart,r=n.logarithmic,s=n.options,c=n.isLinked,h=n.tickPositions,u=n.axisTitle,d=n.ticks,p=n.minorTicks,f=n.alternateBands,g=s.stackLabels,m=s.alternateGridColor,y=n.tickmarkOffset,v=n.axisLine,b=n.showAxis,w=l(i.renderer.globalAnimation);if(n.labelEdge.length=0,n.overlap=!1,[d,p,f].forEach((function(t){E(t,(function(t){t.isActive=!1}))})),n.hasData()||c){var _=n.chart.hasRendered&&n.old&&C(n.old.min);n.minorTickInterval&&!n.categories&&n.getMinorTickPositions().forEach((function(t){n.renderMinorTick(t,_)})),h.length&&(h.forEach((function(t,e){n.renderTick(t,e,_)})),y&&(0===n.min||n.single)&&(d[-1]||(d[-1]=new a(n,-1,null,!0)),d[-1].render(-1))),m&&h.forEach((function(s,a){e="undefined"!==typeof h[a+1]?h[a+1]+y:n.max-y,0===a%2&&s<n.max&&e<=n.max+(i.polar?-y:y)&&(f[s]||(f[s]=new o.PlotLineOrBand(n)),t=s+y,f[s].options={from:r?r.lin2log(t):t,to:r?r.lin2log(e):e,color:m,className:"highcharts-alternate-grid"},f[s].render(),f[s].isActive=!0)})),n._addedPlotLB||(n._addedPlotLB=!0,(s.plotLines||[]).concat(s.plotBands||[]).forEach((function(t){n.addPlotBandOrLine(t)})))}[d,p,f].forEach((function(t){var e=[],n=w.duration;E(t,(function(t,n){t.isActive||(t.render(n,!1,0),t.isActive=!1,e.push(n))})),R((function(){for(var n=e.length;n--;)t[e[n]]&&!t[e[n]].isActive&&(t[e[n]].destroy(),delete t[e[n]])}),t!==f&&i.hasRendered&&n?n:0)})),v&&(v[v.isPlaced?"animate":"attr"]({d:this.getLinePath(v.strokeWidth())}),v.isPlaced=!0,v[b?"show":"hide"](b)),u&&b&&(s=n.getTitlePosition(),C(s.y)?(u[u.isNew?"attr":"animate"](s),u.isNew=!1):(u.attr("y",-9999),u.isNew=!0)),g&&g.enabled&&n.stacking&&n.stacking.renderStackTotals(),n.old={len:n.len,max:n.max,min:n.min,transA:n.transA,userMax:n.userMax,userMin:n.userMin},n.isDirty=!1,x(this,"afterRender")},t.prototype.redraw=function(){this.visible&&(this.render(),this.plotLinesAndBands.forEach((function(t){t.render()}))),this.series.forEach((function(t){t.isDirty=!0}))},t.prototype.getKeepProps=function(){return this.keepProps||t.keepProps},t.prototype.destroy=function(t){var e=this,n=e.plotLinesAndBands,i=this.eventOptions;if(x(this,"destroy",{keepEvents:t}),t||N(e),[e.ticks,e.minorTicks,e.alternateBands].forEach((function(t){v(t)})),n)for(t=n.length;t--;)n[t].destroy();for(var r in"axisLine axisTitle axisGroup gridGroup labelGroup cross scrollbar".split(" ").forEach((function(t){e[t]&&(e[t]=e[t].destroy())})),e.plotLinesAndBandsGroups)e.plotLinesAndBandsGroups[r]=e.plotLinesAndBandsGroups[r].destroy();E(e,(function(t,n){-1===e.getKeepProps().indexOf(n)&&delete e[n]})),this.eventOptions=i},t.prototype.drawCrosshair=function(t,e){var r,s=this.crosshair,o=A(s&&s.snap,!0),a=this.chart,c=this.cross;if(x(this,"drawCrosshair",{e:t,point:e}),t||(t=this.cross&&this.cross.e),s&&!1!==(y(e)||!o)){if(o?y(e)&&(r=A("colorAxis"!==this.coll?e.crosshairPos:null,this.isXAxis?e.plotX:this.len-e.plotY)):r=t&&(this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos),y(r)){var l={value:e&&(this.isXAxis?e.x:A(e.stackY,e.y)),translatedValue:r};a.polar&&_(l,{isCrosshair:!0,chartX:t&&t.chartX,chartY:t&&t.chartY,point:e}),l=this.getPlotLinePath(l)||null}if(!y(l))return void this.hideCrosshair();o=this.categories&&!this.isRadial,c||(this.cross=c=a.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(o?"category ":"thin ")+(s.className||"")).attr({zIndex:A(s.zIndex,2)}).add(),a.styledMode||(c.attr({stroke:s.color||(o?n.parse(i.highlightColor20).setOpacity(.25).get():i.neutralColor20),"stroke-width":A(s.width,1)}).css({"pointer-events":"none"}),s.dashStyle&&c.attr({dashstyle:s.dashStyle}))),c.show().attr({d:l}),o&&!s.width&&c.attr({"stroke-width":this.transA}),this.cross.e=t}else this.hideCrosshair();x(this,"afterDrawCrosshair",{e:t,point:e})},t.prototype.hideCrosshair=function(){this.cross&&this.cross.hide(),x(this,"afterHideCrosshair")},t.prototype.hasVerticalPanning=function(){var t=this.chart.options.chart.panning;return!!(t&&t.enabled&&/y/.test(t.type))},t.prototype.validatePositiveValue=function(t){return C(t)&&0<t},t.prototype.update=function(t,e){var n=this.chart;t=O(this.userOptions,t),this.destroy(!0),this.init(n,t),n.isDirtyBox=!0,A(e,!0)&&n.redraw()},t.prototype.remove=function(t){for(var e=this.chart,n=this.coll,i=this.series,r=i.length;r--;)i[r]&&i[r].remove(!1);b(e.axes,this),b(e[n],this),e[n].forEach((function(t,e){t.options.index=t.userOptions.index=e})),this.destroy(),e.isDirtyBox=!0,A(t,!0)&&e.redraw()},t.prototype.setTitle=function(t,e){this.update({title:t},e)},t.prototype.setCategories=function(t,e){this.update({categories:t},e)},t.defaultOptions=e.defaultXAxisOptions,t.keepProps="extKey hcEvents names series userMax userMin".split(" "),t}(),t})),e(n,"Core/Axis/DateTimeAxis.js",[n["Core/Utilities.js"]],(function(t){var e,n=t.addEvent,i=t.getMagnitude,r=t.normalizeTickInterval,s=t.timeUnits;return function(t){function e(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function o(t){"datetime"!==t.userOptions.type?this.dateTime=void 0:this.dateTime||(this.dateTime=new c(this))}var a=[];t.compose=function(t){return-1===a.indexOf(t)&&(a.push(t),t.keepProps.push("dateTime"),t.prototype.getTimeTicks=e,n(t,"init",o)),t};var c=function(){function t(t){this.axis=t}return t.prototype.normalizeTimeTickInterval=function(t,e){var n=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];e=n[n.length-1];var o,a=s[e[0]],c=e[1];for(o=0;o<n.length&&(e=n[o],a=s[e[0]],c=e[1],!(n[o+1]&&t<=(a*c[c.length-1]+s[n[o+1][0]])/2));o++);return a===s.year&&t<5*a&&(c=[1,2,5]),t=r(t/a,c,"year"===e[0]?Math.max(i(t/a),1):1),{unitRange:a,count:t,unitName:e[0]}},t.prototype.getXDateFormat=function(t,e){var n=this.axis;return n.closestPointRange?n.chart.time.getDateFormat(n.closestPointRange,t,n.options.startOfWeek,e)||e.year:e.day},t}();t.Additions=c}(e||(e={})),e})),e(n,"Core/Axis/LogarithmicAxis.js",[n["Core/Utilities.js"]],(function(t){var e,n=t.addEvent,i=t.getMagnitude,r=t.normalizeTickInterval,s=t.pick;return function(t){function e(t){var e=this.logarithmic;"logarithmic"!==t.userOptions.type?this.logarithmic=void 0:e||(this.logarithmic=new c(this))}function o(){var t=this.logarithmic;t&&(this.lin2val=function(e){return t.lin2log(e)},this.val2lin=function(e){return t.log2lin(e)})}var a=[];t.compose=function(t){return-1===a.indexOf(t)&&(a.push(t),t.keepProps.push("logarithmic"),n(t,"init",e),n(t,"afterInit",o)),t};var c=function(){function t(t){this.axis=t}return t.prototype.getLogTickPositions=function(t,e,n,o){var a=this.axis,c=a.len,l=a.options,h=[];if(o||(this.minorAutoInterval=void 0),.5<=t)t=Math.round(t),h=a.getLinearTickPositions(t,e,n);else if(.08<=t){var u,d=Math.floor(e),p=l=void 0;for(c=.3<t?[1,2,4]:.15<t?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];d<n+1&&!p;d++){var f=c.length;for(u=0;u<f&&!p;u++){var g=this.log2lin(this.lin2log(d)*c[u]);g>e&&(!o||l<=n)&&"undefined"!==typeof l&&h.push(l),l>n&&(p=!0),l=g}}}else e=this.lin2log(e),n=this.lin2log(n),t=o?a.getMinorTickInterval():l.tickInterval,t=s("auto"===t?null:t,this.minorAutoInterval,l.tickPixelInterval/(o?5:1)*(n-e)/((o?c/a.tickPositions.length:c)||1)),t=r(t,void 0,i(t)),h=a.getLinearTickPositions(t,e,n).map(this.log2lin),o||(this.minorAutoInterval=t/5);return o||(a.tickInterval=t),h},t.prototype.lin2log=function(t){return Math.pow(10,t)},t.prototype.log2lin=function(t){return Math.log(t)/Math.LN10},t}();t.Additions=c}(e||(e={})),e})),e(n,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[n["Core/Utilities.js"]],(function(t){var e,n=t.erase,i=t.extend,r=t.isNumber;return function(t){var e,s=[];t.compose=function(t,n){return e||(e=t),-1===s.indexOf(n)&&(s.push(n),i(n.prototype,o.prototype)),n};var o=function(){function t(){}return t.prototype.getPlotBandPath=function(t,e,n){void 0===n&&(n=this.options);var i=this.getPlotLinePath({value:e,force:!0,acrossPanes:n.acrossPanes}),s=[],o=this.horiz;if(e=!r(this.min)||!r(this.max)||t<this.min&&e<this.min||t>this.max&&e>this.max,t=this.getPlotLinePath({value:t,force:!0,acrossPanes:n.acrossPanes}),n=1,t&&i){if(e){var a=t.toString()===i.toString();n=0}for(e=0;e<t.length;e+=2){var c=t[e],l=t[e+1],h=i[e],u=i[e+1];"M"!==c[0]&&"L"!==c[0]||"M"!==l[0]&&"L"!==l[0]||"M"!==h[0]&&"L"!==h[0]||"M"!==u[0]&&"L"!==u[0]||(o&&h[1]===c[1]?(h[1]+=n,u[1]+=n):o||h[2]!==c[2]||(h[2]+=n,u[2]+=n),s.push(["M",c[1],c[2]],["L",l[1],l[2]],["L",u[1],u[2]],["L",h[1],h[2]],["Z"])),s.isFlat=a}}return s},t.prototype.addPlotBand=function(t){return this.addPlotBandOrLine(t,"plotBands")},t.prototype.addPlotLine=function(t){return this.addPlotBandOrLine(t,"plotLines")},t.prototype.addPlotBandOrLine=function(t,n){var i=this,r=this.userOptions,s=new e(this,t);if(this.visible&&(s=s.render()),s){if(this._addedPlotLB||(this._addedPlotLB=!0,(r.plotLines||[]).concat(r.plotBands||[]).forEach((function(t){i.addPlotBandOrLine(t)}))),n){var o=r[n]||[];o.push(t),r[n]=o}this.plotLinesAndBands.push(s)}return s},t.prototype.removePlotBandOrLine=function(t){var e=this.plotLinesAndBands,i=this.options,r=this.userOptions;if(e){for(var s=e.length;s--;)e[s].id===t&&e[s].destroy();[i.plotLines||[],r.plotLines||[],i.plotBands||[],r.plotBands||[]].forEach((function(e){for(s=e.length;s--;)(e[s]||{}).id===t&&n(e,e[s])}))}},t.prototype.removePlotBand=function(t){this.removePlotBandOrLine(t)},t.prototype.removePlotLine=function(t){this.removePlotBandOrLine(t)},t}()}(e||(e={})),e})),e(n,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[n["Core/Color/Palette.js"],n["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],n["Core/Utilities.js"]],(function(t,e,n){var i=n.arrayMax,r=n.arrayMin,s=n.defined,o=n.destroyObjectProperties,a=n.erase,c=n.fireEvent,l=n.merge,h=n.objectEach,u=n.pick;return n=function(){function n(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)}return n.compose=function(t){return e.compose(n,t)},n.prototype.render=function(){c(this,"render");var e=this,n=e.axis,i=n.horiz,r=n.logarithmic,o=e.options,a=o.color,d=u(o.zIndex,0),p=o.events,f={},g=n.chart.renderer,m=o.label,y=e.label,v=o.to,b=o.from,w=o.value,_=e.svgElem,x=[],T=s(b)&&s(v);x=s(w);var S=!_,C={class:"highcharts-plot-"+(T?"band ":"line ")+(o.className||"")},k=T?"bands":"lines";if(r&&(b=r.log2lin(b),v=r.log2lin(v),w=r.log2lin(w)),n.chart.styledMode||(x?(C.stroke=a||t.neutralColor40,C["stroke-width"]=u(o.width,1),o.dashStyle&&(C.dashstyle=o.dashStyle)):T&&(C.fill=a||t.highlightColor10,o.borderWidth&&(C.stroke=o.borderColor,C["stroke-width"]=o.borderWidth))),f.zIndex=d,k+="-"+d,(r=n.plotLinesAndBandsGroups[k])||(n.plotLinesAndBandsGroups[k]=r=g.g("plot-"+k).attr(f).add()),S&&(e.svgElem=_=g.path().attr(C).add(r)),x)x=n.getPlotLinePath({value:w,lineWidth:_.strokeWidth(),acrossPanes:o.acrossPanes});else{if(!T)return;x=n.getPlotBandPath(b,v,o)}return!e.eventsAdded&&p&&(h(p,(function(t,n){_.on(n,(function(t){p[n].apply(e,[t])}))})),e.eventsAdded=!0),(S||!_.d)&&x&&x.length?_.attr({d:x}):_&&(x?(_.show(!0),_.animate({d:x})):_.d&&(_.hide(),y&&(e.label=y=y.destroy()))),m&&(s(m.text)||s(m.formatter))&&x&&x.length&&0<n.width&&0<n.height&&!x.isFlat?(m=l({align:i&&T&&"center",x:i?!T&&4:10,verticalAlign:!i&&T&&"middle",y:i?T?16:10:T?6:-4,rotation:i&&!T&&90},m),this.renderLabel(m,x,T,d)):y&&y.hide(),e},n.prototype.renderLabel=function(t,e,n,s){var o=this.axis,a=o.chart.renderer,c=this.label;c||(this.label=c=a.text(this.getLabelText(t),0,0,t.useHTML).attr({align:t.textAlign||t.align,rotation:t.rotation,class:"highcharts-plot-"+(n?"band":"line")+"-label "+(t.className||""),zIndex:s}).add(),o.chart.styledMode||c.css(l({textOverflow:"ellipsis"},t.style))),s=e.xBounds||[e[0][1],e[1][1],n?e[2][1]:e[0][1]],e=e.yBounds||[e[0][2],e[1][2],n?e[2][2]:e[0][2]],n=r(s),a=r(e),c.align(t,!1,{x:n,y:a,width:i(s)-n,height:i(e)-a}),c.alignValue&&"left"!==c.alignValue||c.css({width:(90===c.rotation?o.height-(c.alignAttr.y-o.top):o.width-(c.alignAttr.x-o.left))+"px"}),c.show(!0)},n.prototype.getLabelText=function(t){return s(t.formatter)?t.formatter.call(this):t.text},n.prototype.destroy=function(){a(this.axis.plotLinesAndBands,this),delete this.axis,o(this)},n}(),n})),e(n,"Core/Tooltip.js",[n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Color/Palette.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s){var o=t.format,a=e.doc,c=i.distribute,l=s.addEvent,h=s.clamp,u=s.css,d=s.defined,p=s.discardElement,f=s.extend,g=s.fireEvent,m=s.isArray,y=s.isNumber,v=s.isString,b=s.merge,w=s.pick,_=s.splat,x=s.syncTimeout;return t=function(){function t(t,e){this.container=void 0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.now={},this.options={},this.outside=!1,this.chart=t,this.init(t,e)}return t.prototype.applyFilter=function(){var t=this.chart;t.renderer.definition({tagName:"filter",attributes:{id:"drop-shadow-"+t.index,opacity:.5},children:[{tagName:"feGaussianBlur",attributes:{in:"SourceAlpha",stdDeviation:1}},{tagName:"feOffset",attributes:{dx:1,dy:1}},{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"linear",slope:.3}}]},{tagName:"feMerge",children:[{tagName:"feMergeNode"},{tagName:"feMergeNode",attributes:{in:"SourceGraphic"}}]}]})},t.prototype.bodyFormatter=function(t){return t.map((function(t){var e=t.series.tooltipOptions;return(e[(t.point.formatPrefix||"point")+"Formatter"]||t.point.tooltipFormatter).call(t.point,e[(t.point.formatPrefix||"point")+"Format"]||"")}))},t.prototype.cleanSplit=function(t){this.chart.series.forEach((function(e){var n=e&&e.tt;n&&(!n.isActive||t?e.tt=n.destroy():n.isActive=!1)}))},t.prototype.defaultFormatter=function(t){var e=this.points||_(this),n=[t.tooltipFooterHeaderFormatter(e[0])];return n=n.concat(t.bodyFormatter(e)),n.push(t.tooltipFooterHeaderFormatter(e[0],!0)),n},t.prototype.destroy=function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy()),this.renderer&&(this.renderer=this.renderer.destroy(),p(this.container)),s.clearTimeout(this.hideTimer),s.clearTimeout(this.tooltipTimeout)},t.prototype.getAnchor=function(t,e){var n,i,r=this.chart,s=r.pointer,o=r.inverted,a=r.plotTop,c=r.plotLeft,l=0,h=0;return t=_(t),this.followPointer&&e?("undefined"===typeof e.chartX&&(e=s.normalize(e)),s=[e.chartX-c,e.chartY-a]):t[0].tooltipPos?s=t[0].tooltipPos:(t.forEach((function(t){n=t.series.yAxis,i=t.series.xAxis,l+=t.plotX||0,h+=t.plotLow?(t.plotLow+(t.plotHigh||0))/2:t.plotY||0,i&&n&&(o?(l+=a+r.plotHeight-i.len-i.pos,h+=c+r.plotWidth-n.len-n.pos):(l+=i.pos-c,h+=n.pos-a))})),l/=t.length,h/=t.length,s=[o?r.plotWidth-h:l,o?r.plotHeight-l:h],this.shared&&1<t.length&&e&&(o?s[0]=e.chartX-c:s[1]=e.chartY-a)),s.map(Math.round)},t.prototype.getLabel=function(){var t,n=this,i=this.chart.styledMode,s=this.options,o="tooltip"+(d(s.className)?" "+s.className:""),a=s.style.pointerEvents||(!this.followPointer&&s.stickOnContact?"auto":"none"),c=function(){n.inContact=!0},h=function(t){var e=n.chart.hoverSeries;n.inContact=n.shouldStickOnContact()&&n.chart.pointer.inClass(t.relatedTarget,"highcharts-tooltip"),!n.inContact&&e&&e.onMouseOut&&e.onMouseOut()},p=this.chart.renderer;if(!this.label){if(this.outside){var f=this.chart.options.chart.style,g=r.getRendererType();this.container=t=e.doc.createElement("div"),t.className="highcharts-tooltip-container",u(t,{position:"absolute",top:"1px",pointerEvents:a,zIndex:Math.max(this.options.style.zIndex||0,(f&&f.zIndex||0)+3)}),l(t,"mouseenter",c),l(t,"mouseleave",h),e.doc.body.appendChild(t),this.renderer=p=new g(t,0,0,f,void 0,void 0,p.styledMode)}if(this.split?this.label=p.g(o):(this.label=p.label("",0,0,s.shape,void 0,void 0,s.useHTML,void 0,o).attr({padding:s.padding,r:s.borderRadius}),i||this.label.attr({fill:s.backgroundColor,"stroke-width":s.borderWidth}).css(s.style).css({pointerEvents:a}).shadow(s.shadow)),i&&s.shadow&&(this.applyFilter(),this.label.attr({filter:"url(#drop-shadow-"+this.chart.index+")"})),n.outside&&!n.split){var m=this.label,y=m.xSetter,v=m.ySetter;m.xSetter=function(e){y.call(m,n.distance),t.style.left=e+"px"},m.ySetter=function(e){v.call(m,n.distance),t.style.top=e+"px"}}this.label.on("mouseenter",c).on("mouseleave",h).attr({zIndex:8}).add()}return this.label},t.prototype.getPosition=function(t,e,n){var i,r=this.chart,s=this.distance,o={},c=r.inverted&&n.h||0,l=this.outside,h=l?a.documentElement.clientWidth-2*s:r.chartWidth,u=l?Math.max(a.body.scrollHeight,a.documentElement.scrollHeight,a.body.offsetHeight,a.documentElement.offsetHeight,a.documentElement.clientHeight):r.chartHeight,d=r.pointer.getChartPosition(),p=function(i){var o="x"===i;return[i,o?h:u,o?t:e].concat(l?[o?t*d.scaleX:e*d.scaleY,o?d.left-s+(n.plotX+r.plotLeft)*d.scaleX:d.top-s+(n.plotY+r.plotTop)*d.scaleY,0,o?h:u]:[o?t:e,o?n.plotX+r.plotLeft:n.plotY+r.plotTop,o?r.plotLeft:r.plotTop,o?r.plotLeft+r.plotWidth:r.plotTop+r.plotHeight])},f=p("y"),g=p("x"),m=!this.followPointer&&w(n.ttBelow,!r.inverted===!!n.negative),y=function(t,e,n,i,r,a,h){var u=l?"y"===t?s*d.scaleY:s*d.scaleX:s,p=(n-i)/2,f=i<r-s,g=r+s+i<e,y=r-u-n+p;if(r=r+u-p,m&&g)o[t]=r;else if(!m&&f)o[t]=y;else if(f)o[t]=Math.min(h-i,0>y-c?y:y-c);else{if(!g)return!1;o[t]=Math.max(a,r+c+n>e?r:r+c)}},v=function(t,e,n,i,r){var a;return r<s||r>e-s?a=!1:o[t]=r<n/2?1:r>e-i/2?e-i-2:r-n/2,a},b=function(t){var e=f;f=g,g=e,i=t},_=function(){!1!==y.apply(0,f)?!1!==v.apply(0,g)||i||(b(!0),_()):i?o.x=o.y=0:(b(!0),_())};return(r.inverted||1<this.len)&&b(),_(),o},t.prototype.hide=function(t){var e=this;s.clearTimeout(this.hideTimer),t=w(t,this.options.hideDelay),this.isHidden||(this.hideTimer=x((function(){e.getLabel().fadeOut(t?void 0:t),e.isHidden=!0}),t))},t.prototype.init=function(t,e){this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=e.split&&!t.inverted&&!t.polar,this.shared=e.shared||this.split,this.outside=w(e.outside,!(!t.scrollablePixelsX&&!t.scrollablePixelsY))},t.prototype.shouldStickOnContact=function(){return!(this.followPointer||!this.options.stickOnContact)},t.prototype.isStickyOnContact=function(){return!(!this.shouldStickOnContact()||!this.inContact)},t.prototype.move=function(t,e,n,i){var r=this,o=r.now,a=!1!==r.options.animation&&!r.isHidden&&(1<Math.abs(t-o.x)||1<Math.abs(e-o.y)),c=r.followPointer||1<r.len;f(o,{x:a?(2*o.x+t)/3:t,y:a?(o.y+e)/2:e,anchorX:c?void 0:a?(2*o.anchorX+n)/3:n,anchorY:c?void 0:a?(o.anchorY+i)/2:i}),r.getLabel().attr(o),r.drawTracker(),a&&(s.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout((function(){r&&r.move(t,e,n,i)}),32))},t.prototype.refresh=function(t,e){var i=this.chart,r=this.options,o=_(t),a=o[0],c=[],l=r.formatter||this.defaultFormatter,h=this.shared,u=i.styledMode,d={};if(r.enabled){s.clearTimeout(this.hideTimer),this.followPointer=!this.split&&a.series.tooltipOptions.followPointer;var p=this.getAnchor(t,e),f=p[0],y=p[1];if(!h||!m(t)&&t.series&&t.series.noSharedTooltip?d=a.getLabelConfig():(i.pointer.applyInactiveState(o),o.forEach((function(t){t.setState("hover"),c.push(t.getLabelConfig())})),d={x:a.category,y:a.y},d.points=c),this.len=c.length,t=l.call(d,this),l=a.series,this.distance=w(l.tooltipOptions.distance,16),!1===t)this.hide();else{if(this.split)this.renderSplit(t,o);else{if(o=f,h=y,e&&i.pointer.isDirectTouch&&(o=e.chartX-i.plotLeft,h=e.chartY-i.plotTop),!i.polar&&!1!==l.options.clip&&!l.shouldShowTooltip(o,h))return void this.hide();e=this.getLabel(),r.style.width&&!u||e.css({width:this.chart.spacingBox.width+"px"}),e.attr({text:t&&t.join?t.join(""):t}),e.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+w(a.colorIndex,l.colorIndex)),u||e.attr({stroke:r.borderColor||a.color||l.color||n.neutralColor60}),this.updatePosition({plotX:f,plotY:y,negative:a.negative,ttBelow:a.ttBelow,h:p[2]||0})}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}g(this,"refresh")}},t.prototype.renderSplit=function(t,e){function i(t,e,n,i,s){return void 0===s&&(s=!0),n?(e=A?0:R,t=h(t-i/2,O.left,O.right-i-(r.outside?P:0))):(e-=N,t=s?t-i-S:t+S,t=h(t,s?t:O.left,O.right)),{x:t,y:e}}var r=this,s=r.chart,o=r.chart,l=o.chartWidth,u=o.chartHeight,d=o.plotHeight,p=o.plotLeft,g=o.plotTop,m=o.pointer,y=o.scrollablePixelsY;y=void 0===y?0:y;var b=o.scrollablePixelsX,_=o.scrollingContainer;_=void 0===_?{scrollLeft:0,scrollTop:0}:_;var x=_.scrollLeft;_=_.scrollTop;var T=o.styledMode,S=r.distance,C=r.options,k=r.options.positioner,O=r.outside&&"number"!==typeof b?a.documentElement.getBoundingClientRect():{left:x,right:x+l,top:_,bottom:_+u},I=r.getLabel(),E=this.renderer||s.renderer,A=!(!s.xAxis[0]||!s.xAxis[0].opposite);s=m.getChartPosition();var P=s.left;s=s.top;var N=g+_,j=0,R=d-y;v(t)&&(t=[!1,t]),t=t.slice(0,e.length+1).reduce((function(t,s,o){if(!1!==s&&""!==s){o=e[o-1]||{isHeader:!0,plotX:e[0].plotX,plotY:d,series:{}};var a=o.isHeader,c=a?r:o.series;s=s.toString();var l=c.tt,u=o.isHeader,f=o.series,m="highcharts-color-"+w(o.colorIndex,f.colorIndex,"none");if(l||(l={padding:C.padding,r:C.borderRadius},T||(l.fill=C.backgroundColor,l["stroke-width"]=C.borderWidth),l=E.label("",0,0,C[u?"headerShape":"shape"],void 0,void 0,C.useHTML).addClass((u?"highcharts-tooltip-header ":"")+"highcharts-tooltip-box "+m).attr(l).add(I)),l.isActive=!0,l.attr({text:s}),T||l.css(C.style).shadow(C.shadow).attr({stroke:C.borderColor||o.color||f.color||n.neutralColor80}),c=c.tt=l,u=c.getBBox(),s=u.width+c.strokeWidth(),a&&(j=u.height,R+=j,A&&(N-=j)),f=o.plotX,f=void 0===f?0:f,m=o.plotY,m=void 0===m?0:m,l=o.series,o.isHeader){f=p+f;var y=g+d/2}else{var v=l.xAxis,b=l.yAxis;f=v.pos+h(f,-S,v.len+S),l.shouldShowTooltip(0,b.pos-g+m,{ignoreX:!0})&&(y=b.pos+m)}f=h(f,O.left-S,O.right+S),"number"===typeof y?(u=u.height+1,m=k?k.call(r,s,u,o):i(f,y,a,s),t.push({align:k?0:void 0,anchorX:f,anchorY:y,boxWidth:s,point:o,rank:w(m.rank,a?1:0),size:u,target:m.y,tt:c,x:m.x})):c.isActive=!1}return t}),[]),!k&&t.some((function(t){var e=(r.outside?P:0)+t.anchorX;return e<O.left&&e+t.boxWidth<O.right||e<P-O.left+t.boxWidth&&O.right-e>e}))&&(t=t.map((function(t){var e=i(t.anchorX,t.anchorY,t.point.isHeader,t.boxWidth,!1);return f(t,{target:e.y,x:e.x})}))),r.cleanSplit(),c(t,R);var M=P,D=P;t.forEach((function(t){var e=t.x,n=t.boxWidth;t=t.isHeader,t||(r.outside&&P+e<M&&(M=P+e),!t&&r.outside&&M+n>D&&(D=P+e))})),t.forEach((function(t){var e=t.x,n=t.anchorX,i=t.pos,s=t.point.isHeader;if(i={visibility:"undefined"===typeof i?"hidden":"inherit",x:e,y:i+N,anchorX:n,anchorY:t.anchorY},r.outside&&e<n){var o=P-M;0<o&&(s||(i.x=e+o,i.anchorX=n+o),s&&(i.x=(D-M)/2,i.anchorX=n+o))}t.tt.attr(i)})),t=r.container,y=r.renderer,r.outside&&t&&y&&(o=I.getBBox(),y.setSize(o.width+o.x,o.height+o.y,!1),t.style.left=M+"px",t.style.top=s+"px")},t.prototype.drawTracker=function(){if(this.followPointer||!this.options.stickOnContact)this.tracker&&this.tracker.destroy();else{var t=this.chart,e=this.label,n=this.shared?t.hoverPoints:t.hoverPoint;if(e&&n){var i={x:0,y:0,width:0,height:0};n=this.getAnchor(n);var r=e.getBBox();n[0]+=t.plotLeft-e.translateX,n[1]+=t.plotTop-e.translateY,i.x=Math.min(0,n[0]),i.y=Math.min(0,n[1]),i.width=0>n[0]?Math.max(Math.abs(n[0]),r.width-n[0]):Math.max(Math.abs(n[0]),r.width),i.height=0>n[1]?Math.max(Math.abs(n[1]),r.height-Math.abs(n[1])):Math.max(Math.abs(n[1]),r.height),this.tracker?this.tracker.attr(i):(this.tracker=e.renderer.rect(i).addClass("highcharts-tracker").add(e),t.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}}},t.prototype.styledModeFormat=function(t){return t.replace('style="font-size: 10px"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex}"')},t.prototype.tooltipFooterHeaderFormatter=function(t,e){var n=t.series,i=n.tooltipOptions,r=n.xAxis,s=r&&r.dateTime;r={isFooter:e,labelConfig:t};var a=i.xDateFormat,c=i[e?"footerFormat":"headerFormat"];return g(this,"headerFormatter",r,(function(e){s&&!a&&y(t.key)&&(a=s.getXDateFormat(t.key,i.dateTimeLabelFormats)),s&&a&&(t.point&&t.point.tooltipDateKeys||["key"]).forEach((function(t){c=c.replace("{point."+t+"}","{point."+t+":"+a+"}")})),n.chart.styledMode&&(c=this.styledModeFormat(c)),e.text=o(c,{point:t,series:n},this.chart)})),r.text},t.prototype.update=function(t){this.destroy(),b(!0,this.chart.options.tooltip.userOptions,t),this.init(this.chart,b(!0,this.options,t))},t.prototype.updatePosition=function(t){var e=this.chart,n=this.options,i=e.pointer,r=this.getLabel();i=i.getChartPosition();var s=(n.positioner||this.getPosition).call(this,r.width,r.height,t),o=t.plotX+e.plotLeft;t=t.plotY+e.plotTop,this.outside&&(n=n.borderWidth+2*this.distance,this.renderer.setSize(r.width+n,r.height+n,!1),1===i.scaleX&&1===i.scaleY||(u(this.container,{transform:"scale("+i.scaleX+", "+i.scaleY+")"}),o*=i.scaleX,t*=i.scaleY),o+=i.left-s.x,t+=i.top-s.y),this.move(Math.round(s.x),Math.round(s.y||0),o,t)},t}(),t})),e(n,"Core/Series/Point.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Animation/AnimationUtilities.js"],n["Core/DefaultOptions.js"],n["Core/FormatUtilities.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r){var s=e.animObject,o=n.defaultOptions,a=i.format,c=r.addEvent,l=r.defined,h=r.erase,u=r.extend,d=r.fireEvent,p=r.getNestedProperty,f=r.isArray,g=r.isFunction,m=r.isNumber,y=r.isObject,v=r.merge,b=r.objectEach,w=r.pick,_=r.syncTimeout,x=r.removeEvent,T=r.uniqueKey;return e=function(){function e(){this.colorIndex=this.category=void 0,this.formatPrefix="point",this.id=void 0,this.isNull=!1,this.percentage=this.options=this.name=void 0,this.selected=!1,this.total=this.series=void 0,this.visible=!0,this.x=void 0}return e.prototype.animateBeforeDestroy=function(){var t=this,e={x:t.startXPos,opacity:0},n=t.getGraphicalProps();n.singular.forEach((function(n){t[n]=t[n].animate("dataLabel"===n?{x:t[n].startXPos,y:t[n].startYPos,opacity:0}:e)})),n.plural.forEach((function(e){t[e].forEach((function(e){e.element&&e.animate(u({x:t.startXPos},e.startYPos?{x:e.startXPos,y:e.startYPos}:{}))}))}))},e.prototype.applyOptions=function(t,n){var i=this.series,r=i.options.pointValKey||i.pointValKey;return t=e.prototype.optionsToObject.call(this,t),u(this,t),this.options=this.options?u(this.options,t):t,t.group&&delete this.group,t.dataLabels&&delete this.dataLabels,r&&(this.y=e.prototype.getNestedProperty.call(this,r)),this.formatPrefix=(this.isNull=w(this.isValid&&!this.isValid(),null===this.x||!m(this.y)))?"null":"point",this.selected&&(this.state="select"),"name"in this&&"undefined"===typeof n&&i.xAxis&&i.xAxis.hasNames&&(this.x=i.xAxis.nameToX(this)),"undefined"===typeof this.x&&i?this.x="undefined"===typeof n?i.autoIncrement():n:m(t.x)&&i.options.relativeXValue&&(this.x=i.autoIncrement(t.x)),this},e.prototype.destroy=function(){function t(){for(r in(e.graphic||e.dataLabel||e.dataLabels)&&(x(e),e.destroyElements()),e)e[r]=null}var e=this,n=e.series,i=n.chart;n=n.options.dataSorting;var r,o=i.hoverPoints,a=s(e.series.chart.renderer.globalAnimation);e.legendItem&&i.legend.destroyItem(e),o&&(e.setState(),h(o,e),o.length||(i.hoverPoints=null)),e===i.hoverPoint&&e.onMouseOut(),n&&n.enabled?(this.animateBeforeDestroy(),_(t,a.duration)):t(),i.pointCount--},e.prototype.destroyElements=function(t){var e=this;t=e.getGraphicalProps(t),t.singular.forEach((function(t){e[t]=e[t].destroy()})),t.plural.forEach((function(t){e[t].forEach((function(t){t.element&&t.destroy()})),delete e[t]}))},e.prototype.firePointEvent=function(t,e,n){var i=this,r=this.series.options;(r.point.events[t]||i.options&&i.options.events&&i.options.events[t])&&i.importEvents(),"click"===t&&r.allowPointSelect&&(n=function(t){i.select&&i.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),d(i,t,e,n)},e.prototype.getClassName=function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+("undefined"!==typeof this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},e.prototype.getGraphicalProps=function(t){var e,n=this,i=[],r={singular:[],plural:[]};for(t=t||{graphic:1,dataLabel:1},t.graphic&&i.push("graphic","upperGraphic","shadowGroup"),t.dataLabel&&i.push("dataLabel","dataLabelUpper","connector"),e=i.length;e--;){var s=i[e];n[s]&&r.singular.push(s)}return["dataLabel","connector"].forEach((function(e){var i=e+"s";t[e]&&n[i]&&r.plural.push(i)})),r},e.prototype.getLabelConfig=function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},e.prototype.getNestedProperty=function(t){if(t)return 0===t.indexOf("custom.")?p(t,this.options):this[t]},e.prototype.getZone=function(){var t=this.series,e=t.zones;t=t.zoneAxis||"y";var n,i=0;for(n=e[i];this[t]>=n.value;)n=e[++i];return this.nonZonedColor||(this.nonZonedColor=this.color),this.color=n&&n.color&&!this.options.color?n.color:this.nonZonedColor,n},e.prototype.hasNewShapeType=function(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType},e.prototype.init=function(t,e,n){return this.series=t,this.applyOptions(e,n),this.id=l(this.id)?this.id:T(),this.resolveColor(),t.chart.pointCount++,d(this,"afterInit"),this},e.prototype.optionsToObject=function(t){var n=this.series,i=n.options.keys,r=i||n.pointArrayMap||["y"],s=r.length,o={},a=0,c=0;if(m(t)||null===t)o[r[0]]=t;else if(f(t))for(!i&&t.length>s&&(n=typeof t[0],"string"===n?o.name=t[0]:"number"===n&&(o.x=t[0]),a++);c<s;)i&&"undefined"===typeof t[a]||(0<r[c].indexOf(".")?e.prototype.setNestedProperty(o,t[a],r[c]):o[r[c]]=t[a]),a++,c++;else"object"===typeof t&&(o=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return o},e.prototype.resolveColor=function(){var t=this.series,e=t.chart.styledMode,n=t.chart.options.chart.colorCount;if(delete this.nonZonedColor,t.options.colorByPoint){if(!e){n=t.options.colors||t.chart.options.colors;var i=n[t.colorCounter];n=n.length}e=t.colorCounter,t.colorCounter++,t.colorCounter===n&&(t.colorCounter=0)}else e||(i=t.color),e=t.colorIndex;this.colorIndex=w(this.options.colorIndex,e),this.color=w(this.options.color,i)},e.prototype.setNestedProperty=function(t,e,n){return n.split(".").reduce((function(t,n,i,r){return t[n]=r.length-1===i?e:y(t[n],!0)?t[n]:{},t[n]}),t),t},e.prototype.tooltipFormatter=function(t){var e=this.series,n=e.tooltipOptions,i=w(n.valueDecimals,""),r=n.valuePrefix||"",s=n.valueSuffix||"";return e.chart.styledMode&&(t=e.chart.tooltip.styledModeFormat(t)),(e.pointArrayMap||["y"]).forEach((function(e){e="{point."+e,(r||s)&&(t=t.replace(RegExp(e+"}","g"),r+e+"}"+s)),t=t.replace(RegExp(e+"}","g"),e+":,."+i+"f}")})),a(t,{point:this,series:this.series},e.chart)},e.prototype.update=function(t,e,n,i){function r(){o.applyOptions(t);var i=c&&o.hasDummyGraphic;i=null===o.y?!i:i,c&&i&&(o.graphic=c.destroy(),delete o.hasDummyGraphic),y(t,!0)&&(c&&c.element&&t&&t.marker&&"undefined"!==typeof t.marker.symbol&&(o.graphic=c.destroy()),t&&t.dataLabels&&o.dataLabel&&(o.dataLabel=o.dataLabel.destroy()),o.connector&&(o.connector=o.connector.destroy())),s=o.index,a.updateParallelArrays(o,s),h.data[s]=y(h.data[s],!0)||y(t,!0)?o.options:w(t,h.data[s]),a.isDirty=a.isDirtyData=!0,!a.fixedBox&&a.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===h.legendType&&(l.isDirtyLegend=!0),e&&l.redraw(n)}var s,o=this,a=o.series,c=o.graphic,l=a.chart,h=a.options;e=w(e,!0),!1===i?r():o.firePointEvent("update",{options:t},r)},e.prototype.remove=function(t,e){this.series.removePoint(this.series.data.indexOf(this),t,e)},e.prototype.select=function(t,e){var n=this,i=n.series,r=i.chart;this.selectedStaging=t=w(t,!n.selected),n.firePointEvent(t?"select":"unselect",{accumulate:e},(function(){n.selected=n.options.selected=t,i.options.data[i.data.indexOf(n)]=n.options,n.setState(t&&"select"),e||r.getSelectedPoints().forEach((function(t){var e=t.series;t.selected&&t!==n&&(t.selected=t.options.selected=!1,e.options.data[e.data.indexOf(t)]=t.options,t.setState(r.hoverPoints&&e.options.inactiveOtherPoints?"inactive":""),t.firePointEvent("unselect"))}))})),delete this.selectedStaging},e.prototype.onMouseOver=function(t){var e=this.series.chart,n=e.pointer;t=t?n.normalize(t):n.getChartCoordinatesFromPoint(this,e.inverted),n.runPointActions(t,this)},e.prototype.onMouseOut=function(){var t=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(t.hoverPoints||[]).forEach((function(t){t.setState()})),t.hoverPoints=t.hoverPoint=null},e.prototype.importEvents=function(){if(!this.hasImportedEvents){var t=this,e=v(t.series.options.point,t.options).events;t.events=e,b(e,(function(e,n){g(e)&&c(t,n,e)})),this.hasImportedEvents=!0}},e.prototype.setState=function(e,n){var i,r=this.series,s=this.state,a=r.options.states[e||"normal"]||{},c=o.plotOptions[r.type].marker&&r.options.marker,l=c&&!1===c.enabled,h=c&&c.states&&c.states[e||"normal"]||{},p=!1===h.enabled,f=this.marker||{},g=r.chart,y=c&&r.markerAttribs,v=r.halo,b=r.stateMarkerGraphic;if(e=e||"",!(e===this.state&&!n||this.selected&&"select"!==e||!1===a.enabled||e&&(p||l&&!1===h.enabled)||e&&f.states&&f.states[e]&&!1===f.states[e].enabled)){if(this.state=e,y&&(i=r.markerAttribs(this,e)),this.graphic&&!this.hasDummyGraphic){if(s&&this.graphic.removeClass("highcharts-point-"+s),e&&this.graphic.addClass("highcharts-point-"+e),!g.styledMode){var _=r.pointAttribs(this,e),x=w(g.options.chart.animation,a.animation);r.options.inactiveOtherPoints&&m(_.opacity)&&((this.dataLabels||[]).forEach((function(t){t&&t.animate({opacity:_.opacity},x)})),this.connector&&this.connector.animate({opacity:_.opacity},x)),this.graphic.animate(_,x)}i&&this.graphic.animate(i,w(g.options.chart.animation,h.animation,c.animation)),b&&b.hide()}else e&&h&&(s=f.symbol||r.symbol,b&&b.currentSymbol!==s&&(b=b.destroy()),i&&(b?b[n?"animate":"attr"]({x:i.x,y:i.y}):s&&(r.stateMarkerGraphic=b=g.renderer.symbol(s,i.x,i.y,i.width,i.height).add(r.markerGroup),b.currentSymbol=s)),!g.styledMode&&b&&b.attr(r.pointAttribs(this,e))),b&&(b[e&&this.isInside?"show":"hide"](),b.element.point=this,b.addClass(this.getClassName(),!0));a=a.halo,i=(b=this.graphic||b)&&b.visibility||"inherit",a&&a.size&&b&&"hidden"!==i&&!this.isCluster?(v||(r.halo=v=g.renderer.path().add(b.parentGroup)),v.show()[n?"animate":"attr"]({d:this.haloPath(a.size)}),v.attr({class:"highcharts-halo highcharts-color-"+w(this.colorIndex,r.colorIndex)+(this.className?" "+this.className:""),visibility:i,zIndex:-1}),v.point=this,g.styledMode||v.attr(u({fill:this.color||r.color,"fill-opacity":a.opacity},t.filterUserAttributes(a.attributes||{})))):v&&v.point&&v.point.haloPath&&v.animate({d:v.point.haloPath(0)},null,v.hide),d(this,"afterSetState",{state:e})}},e.prototype.haloPath=function(t){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-t,this.plotY-t,2*t,2*t)},e}(),e})),e(n,"Core/Pointer.js",[n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Color/Palette.js"],n["Core/Tooltip.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r){var s=t.parse,o=e.charts,a=e.noop,c=r.addEvent,l=r.attr,h=r.css,u=r.defined,d=r.extend,p=r.find,f=r.fireEvent,g=r.isNumber,m=r.isObject,y=r.objectEach,v=r.offset,b=r.pick,w=r.splat;return t=function(){function t(t,e){this.lastValidTouch={},this.pinchDown=[],this.runChartClick=!1,this.eventsToUnbind=[],this.chart=t,this.hasDragged=!1,this.options=e,this.init(t,e)}return t.prototype.applyInactiveState=function(t){var e,n=[];(t||[]).forEach((function(t){e=t.series,n.push(e),e.linkedParent&&n.push(e.linkedParent),e.linkedSeries&&(n=n.concat(e.linkedSeries)),e.navigatorSeries&&n.push(e.navigatorSeries)})),this.chart.series.forEach((function(t){-1===n.indexOf(t)?t.setState("inactive",!0):t.options.inactiveOtherPoints&&t.setAllPointsToState("inactive")}))},t.prototype.destroy=function(){var n=this;this.eventsToUnbind.forEach((function(t){return t()})),this.eventsToUnbind=[],e.chartCount||(t.unbindDocumentMouseUp&&(t.unbindDocumentMouseUp=t.unbindDocumentMouseUp()),t.unbindDocumentTouchEnd&&(t.unbindDocumentTouchEnd=t.unbindDocumentTouchEnd())),clearInterval(n.tooltipTimeout),y(n,(function(t,e){n[e]=void 0}))},t.prototype.drag=function(t){var e=this.chart,i=e.options.chart,r=this.zoomHor,o=this.zoomVert,a=e.plotLeft,c=e.plotTop,l=e.plotWidth,h=e.plotHeight,u=this.mouseDownX||0,d=this.mouseDownY||0,p=m(i.panning)?i.panning&&i.panning.enabled:i.panning,f=i.panKey&&t[i.panKey+"Key"],g=t.chartX,y=t.chartY,v=this.selectionMarker;if((!v||!v.touch)&&(g<a?g=a:g>a+l&&(g=a+l),y<c?y=c:y>c+h&&(y=c+h),this.hasDragged=Math.sqrt(Math.pow(u-g,2)+Math.pow(d-y,2)),10<this.hasDragged)){var b=e.isInsidePlot(u-a,d-c,{visiblePlotOnly:!0});e.hasCartesianSeries&&(this.zoomX||this.zoomY)&&b&&!f&&!v&&(this.selectionMarker=v=e.renderer.rect(a,c,r?1:l,o?1:h,0).attr({class:"highcharts-selection-marker",zIndex:7}).add(),e.styledMode||v.attr({fill:i.selectionMarkerFill||s(n.highlightColor80).setOpacity(.25).get()})),v&&r&&(r=g-u,v.attr({width:Math.abs(r),x:(0<r?0:r)+u})),v&&o&&(r=y-d,v.attr({height:Math.abs(r),y:(0<r?0:r)+d})),b&&!v&&p&&e.pan(t,i.panning)}},t.prototype.dragStart=function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},t.prototype.drop=function(t){var e=this,n=this.chart,i=this.hasPinched;if(this.selectionMarker){var r,s={originalEvent:t,xAxis:[],yAxis:[]},o=this.selectionMarker,a=o.attr?o.attr("x"):o.x,c=o.attr?o.attr("y"):o.y,l=o.attr?o.attr("width"):o.width,p=o.attr?o.attr("height"):o.height;(this.hasDragged||i)&&(n.axes.forEach((function(n){if(n.zoomEnabled&&u(n.min)&&(i||e[{xAxis:"zoomX",yAxis:"zoomY"}[n.coll]])&&g(a)&&g(c)){var o=n.horiz,h="touchend"===t.type?n.minPixelPadding:0,d=n.toValue((o?a:c)+h);o=n.toValue((o?a+l:c+p)-h),s[n.coll].push({axis:n,min:Math.min(d,o),max:Math.max(d,o)}),r=!0}})),r&&f(n,"selection",s,(function(t){n.zoom(d(t,i?{animation:!1}:null))}))),g(n.index)&&(this.selectionMarker=this.selectionMarker.destroy()),i&&this.scaleGroups()}n&&g(n.index)&&(h(n.container,{cursor:n._cursor}),n.cancelClick=10<this.hasDragged,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},t.prototype.findNearestKDPoint=function(t,e,n){var i,r=this.chart,s=r.hoverPoint;return r=r.tooltip,s&&r&&r.isStickyOnContact()?s:(t.forEach((function(t){var r=!(t.noSharedTooltip&&e)&&0>t.options.findNearestPointBy.indexOf("y");if(t=t.searchPoint(n,r),(r=m(t,!0)&&t.series)&&!(r=!m(i,!0))){r=i.distX-t.distX;var s=i.dist-t.dist,o=(t.series.group&&t.series.group.zIndex)-(i.series.group&&i.series.group.zIndex);r=0<(0!==r&&e?r:0!==s?s:0!==o?o:i.series.index>t.series.index?-1:1)}r&&(i=t)})),i)},t.prototype.getChartCoordinatesFromPoint=function(t,e){var n=t.series,i=n.xAxis;n=n.yAxis;var r=t.shapeArgs;if(i&&n){var s=b(t.clientX,t.plotX),o=t.plotY||0;return t.isNode&&r&&g(r.x)&&g(r.y)&&(s=r.x,o=r.y),e?{chartX:n.len+n.pos-o,chartY:i.len+i.pos-s}:{chartX:s+i.pos,chartY:o+n.pos}}if(r&&r.x&&r.y)return{chartX:r.x,chartY:r.y}},t.prototype.getChartPosition=function(){if(this.chartPosition)return this.chartPosition;var t=this.chart.container,e=v(t);this.chartPosition={left:e.left,top:e.top,scaleX:1,scaleY:1};var n=t.offsetWidth;return t=t.offsetHeight,2<n&&2<t&&(this.chartPosition.scaleX=e.width/n,this.chartPosition.scaleY=e.height/t),this.chartPosition},t.prototype.getCoordinates=function(t){var e={xAxis:[],yAxis:[]};return this.chart.axes.forEach((function(n){e[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(t[n.horiz?"chartX":"chartY"])})})),e},t.prototype.getHoverData=function(t,e,n,i,r,s){var o=[];i=!(!i||!t);var a={chartX:s?s.chartX:void 0,chartY:s?s.chartY:void 0,shared:r};f(this,"beforeGetHoverData",a);var c=e&&!e.stickyTracking?[e]:n.filter((function(t){return a.filter?a.filter(t):t.visible&&!(!r&&t.directTouch)&&b(t.options.enableMouseTracking,!0)&&t.stickyTracking})),l=i||!s?t:this.findNearestKDPoint(c,r,s);return e=l&&l.series,l&&(r&&!e.noSharedTooltip?(c=n.filter((function(t){return a.filter?a.filter(t):t.visible&&!(!r&&t.directTouch)&&b(t.options.enableMouseTracking,!0)&&!t.noSharedTooltip})),c.forEach((function(t){var e=p(t.points,(function(t){return t.x===l.x&&!t.isNull}));m(e)&&(t.chart.isBoosting&&(e=t.getPoint(e)),o.push(e))}))):o.push(l)),a={hoverPoint:l},f(this,"afterGetHoverData",a),{hoverPoint:a.hoverPoint,hoverSeries:e,hoverPoints:o}},t.prototype.getPointFromEvent=function(t){t=t.target;for(var e;t&&!e;)e=t.point,t=t.parentNode;return e},t.prototype.onTrackerMouseOut=function(t){t=t.relatedTarget||t.toElement;var e=this.chart.hoverSeries;this.isDirectTouch=!1,!e||!t||e.stickyTracking||this.inClass(t,"highcharts-tooltip")||this.inClass(t,"highcharts-series-"+e.index)&&this.inClass(t,"highcharts-tracker")||e.onMouseOut()},t.prototype.inClass=function(t,e){for(var n;t;){if(n=l(t,"class")){if(-1!==n.indexOf(e))return!0;if(-1!==n.indexOf("highcharts-container"))return!1}t=t.parentNode}},t.prototype.init=function(t,e){this.options=e,this.chart=t,this.runChartClick=!(!e.chart.events||!e.chart.events.click),this.pinchDown=[],this.lastValidTouch={},i&&(t.tooltip=new i(t,e.tooltip),this.followTouchMove=b(e.tooltip.followTouchMove,!0)),this.setDOMEvents()},t.prototype.normalize=function(t,e){var n=t.touches,i=n?n.length?n.item(0):b(n.changedTouches,t.changedTouches)[0]:t;return e||(e=this.getChartPosition()),n=i.pageX-e.left,i=i.pageY-e.top,n/=e.scaleX,i/=e.scaleY,d(t,{chartX:Math.round(n),chartY:Math.round(i)})},t.prototype.onContainerClick=function(t){var e=this.chart,n=e.hoverPoint;t=this.normalize(t);var i=e.plotLeft,r=e.plotTop;e.cancelClick||(n&&this.inClass(t.target,"highcharts-tracker")?(f(n.series,"click",d(t,{point:n})),e.hoverPoint&&n.firePointEvent("click",t)):(d(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-i,t.chartY-r,{visiblePlotOnly:!0})&&f(e,"click",t)))},t.prototype.onContainerMouseDown=function(t){var n=1===(1&(t.buttons||t.button));t=this.normalize(t),e.isFirefox&&0!==t.button&&this.onContainerMouseMove(t),("undefined"===typeof t.button||n)&&(this.zoomOption(t),n&&t.preventDefault&&t.preventDefault(),this.dragStart(t))},t.prototype.onContainerMouseLeave=function(e){var n=o[b(t.hoverChartIndex,-1)],i=this.chart.tooltip;i&&i.shouldStickOnContact()&&this.inClass(e.relatedTarget,"highcharts-tooltip-container")||(e=this.normalize(e),n&&(e.relatedTarget||e.toElement)&&(n.pointer.reset(),n.pointer.chartPosition=void 0),i&&!i.isHidden&&this.reset())},t.prototype.onContainerMouseEnter=function(t){delete this.chartPosition},t.prototype.onContainerMouseMove=function(t){var e=this.chart;t=this.normalize(t),this.setHoverChartIndex(),t.preventDefault||(t.returnValue=!1),("mousedown"===e.mouseIsDown||this.touchSelect(t))&&this.drag(t),e.openMenu||!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop,{visiblePlotOnly:!0})||(this.inClass(t.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(t))},t.prototype.onDocumentTouchEnd=function(e){var n=o[b(t.hoverChartIndex,-1)];n&&n.pointer.drop(e)},t.prototype.onContainerTouchMove=function(t){this.touchSelect(t)?this.onContainerMouseMove(t):this.touch(t)},t.prototype.onContainerTouchStart=function(t){this.touchSelect(t)?this.onContainerMouseDown(t):(this.zoomOption(t),this.touch(t,!0))},t.prototype.onDocumentMouseMove=function(t){var e=this.chart,n=this.chartPosition;t=this.normalize(t,n);var i=e.tooltip;!n||i&&i.isStickyOnContact()||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop,{visiblePlotOnly:!0})||this.inClass(t.target,"highcharts-tracker")||this.reset()},t.prototype.onDocumentMouseUp=function(e){var n=o[b(t.hoverChartIndex,-1)];n&&n.pointer.drop(e)},t.prototype.pinch=function(t){var e=this,n=e.chart,i=e.pinchDown,r=t.touches||[],s=r.length,o=e.lastValidTouch,c=e.hasZoom,l={},h=1===s&&(e.inClass(t.target,"highcharts-tracker")&&n.runTrackerClick||e.runChartClick),u={},p=e.selectionMarker;1<s?e.initiated=!0:1===s&&this.followTouchMove&&(e.initiated=!1),c&&e.initiated&&!h&&!1!==t.cancelable&&t.preventDefault(),[].map.call(r,(function(t){return e.normalize(t)})),"touchstart"===t.type?([].forEach.call(r,(function(t,e){i[e]={chartX:t.chartX,chartY:t.chartY}})),o.x=[i[0].chartX,i[1]&&i[1].chartX],o.y=[i[0].chartY,i[1]&&i[1].chartY],n.axes.forEach((function(t){if(t.zoomEnabled){var e=n.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,r=t.toPixels(Math.min(b(t.options.min,t.dataMin),t.dataMin)),s=t.toPixels(Math.max(b(t.options.max,t.dataMax),t.dataMax)),o=Math.max(r,s);e.min=Math.min(t.pos,Math.min(r,s)-i),e.max=Math.max(t.pos+t.len,o+i)}})),e.res=!0):e.followTouchMove&&1===s?this.runPointActions(e.normalize(t)):i.length&&(p||(e.selectionMarker=p=d({destroy:a,touch:!0},n.plotBox)),e.pinchTranslate(i,r,l,p,u,o),e.hasPinched=c,e.scaleGroups(l,u),e.res&&(e.res=!1,this.reset(!1,0)))},t.prototype.pinchTranslate=function(t,e,n,i,r,s){this.zoomHor&&this.pinchTranslateDirection(!0,t,e,n,i,r,s),this.zoomVert&&this.pinchTranslateDirection(!1,t,e,n,i,r,s)},t.prototype.pinchTranslateDirection=function(t,e,n,i,r,s,o,a){var c=this.chart,l=t?"x":"y",h=t?"X":"Y",u="chart"+h,d=t?"width":"height",p=c["plot"+(t?"Left":"Top")],f=c.inverted,g=c.bounds[t?"h":"v"],m=1===e.length,y=e[0][u],v=!m&&e[1][u];e=function(){"number"===typeof T&&20<Math.abs(y-v)&&(_=a||Math.abs(x-T)/Math.abs(y-v)),w=(p-x)/_+y,b=c["plot"+(t?"Width":"Height")]/_};var b,w,_=a||1,x=n[0][u],T=!m&&n[1][u];if(e(),n=w,n<g.min){n=g.min;var S=!0}else n+b>g.max&&(n=g.max-b,S=!0);S?(x-=.8*(x-o[l][0]),"number"===typeof T&&(T-=.8*(T-o[l][1])),e()):o[l]=[x,T],f||(s[l]=w-p,s[d]=b),s=f?1/_:_,r[d]=b,r[l]=n,i[f?t?"scaleY":"scaleX":"scale"+h]=_,i["translate"+h]=s*p+(x-s*y)},t.prototype.reset=function(t,e){var n=this.chart,i=n.hoverSeries,r=n.hoverPoint,s=n.hoverPoints,o=n.tooltip,a=o&&o.shared?s:r;t&&a&&w(a).forEach((function(e){e.series.isCartesian&&"undefined"===typeof e.plotX&&(t=!1)})),t?o&&a&&w(a).length&&(o.refresh(a),o.shared&&s?s.forEach((function(t){t.setState(t.state,!0),t.series.isCartesian&&(t.series.xAxis.crosshair&&t.series.xAxis.drawCrosshair(null,t),t.series.yAxis.crosshair&&t.series.yAxis.drawCrosshair(null,t))})):r&&(r.setState(r.state,!0),n.axes.forEach((function(t){t.crosshair&&r.series[t.coll]===t&&t.drawCrosshair(null,r)})))):(r&&r.onMouseOut(),s&&s.forEach((function(t){t.setState()})),i&&i.onMouseOut(),o&&o.hide(e),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),n.axes.forEach((function(t){t.hideCrosshair()})),this.hoverX=n.hoverPoints=n.hoverPoint=null)},t.prototype.runPointActions=function(e,n){var i=this.chart,r=i.tooltip&&i.tooltip.options.enabled?i.tooltip:void 0,s=!!r&&r.shared,a=n||i.hoverPoint,l=a&&a.series||i.hoverSeries;n=this.getHoverData(a,l,i.series,(!e||"touchmove"!==e.type)&&(!!n||l&&l.directTouch&&this.isDirectTouch),s,e),a=n.hoverPoint,l=n.hoverSeries;var h=n.hoverPoints;if(n=l&&l.tooltipOptions.followPointer&&!l.tooltipOptions.split,s=s&&l&&!l.noSharedTooltip,a&&(a!==i.hoverPoint||r&&r.isHidden)){if((i.hoverPoints||[]).forEach((function(t){-1===h.indexOf(t)&&t.setState()})),i.hoverSeries!==l&&l.onMouseOver(),this.applyInactiveState(h),(h||[]).forEach((function(t){t.setState("hover")})),i.hoverPoint&&i.hoverPoint.firePointEvent("mouseOut"),!a.series)return;i.hoverPoints=h,i.hoverPoint=a,a.firePointEvent("mouseOver"),r&&r.refresh(s?h:a,e)}else n&&r&&!r.isHidden&&(a=r.getAnchor([{}],e),i.isInsidePlot(a[0],a[1],{visiblePlotOnly:!0})&&r.updatePosition({plotX:a[0],plotY:a[1]}));this.unDocMouseMove||(this.unDocMouseMove=c(i.container.ownerDocument,"mousemove",(function(e){var n=o[t.hoverChartIndex];n&&n.pointer.onDocumentMouseMove(e)})),this.eventsToUnbind.push(this.unDocMouseMove)),i.axes.forEach((function(t){var n,r=b((t.crosshair||{}).snap,!0);r&&((n=i.hoverPoint)&&n.series[t.coll]===t||(n=p(h,(function(e){return e.series[t.coll]===t})))),n||!r?t.drawCrosshair(e,n):t.hideCrosshair()}))},t.prototype.scaleGroups=function(t,e){var n=this.chart;n.series.forEach((function(i){var r=t||i.getPlotBox();i.xAxis&&i.xAxis.zoomEnabled&&i.group&&(i.group.attr(r),i.markerGroup&&(i.markerGroup.attr(r),i.markerGroup.clip(e?n.clipRect:null)),i.dataLabelsGroup&&i.dataLabelsGroup.attr(r))})),n.clipRect.attr(e||n.clipBox)},t.prototype.setDOMEvents=function(){var n=this,i=this.chart.container,r=i.ownerDocument;i.onmousedown=this.onContainerMouseDown.bind(this),i.onmousemove=this.onContainerMouseMove.bind(this),i.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(c(i,"mouseenter",this.onContainerMouseEnter.bind(this))),this.eventsToUnbind.push(c(i,"mouseleave",this.onContainerMouseLeave.bind(this))),t.unbindDocumentMouseUp||(t.unbindDocumentMouseUp=c(r,"mouseup",this.onDocumentMouseUp.bind(this)));for(var s=this.chart.renderTo.parentElement;s&&"BODY"!==s.tagName;)this.eventsToUnbind.push(c(s,"scroll",(function(){delete n.chartPosition}))),s=s.parentElement;e.hasTouch&&(this.eventsToUnbind.push(c(i,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1})),this.eventsToUnbind.push(c(i,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),t.unbindDocumentTouchEnd||(t.unbindDocumentTouchEnd=c(r,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})))},t.prototype.setHoverChartIndex=function(){var n=this.chart,i=e.charts[b(t.hoverChartIndex,-1)];i&&i!==n&&i.pointer.onContainerMouseLeave({relatedTarget:!0}),i&&i.mouseIsDown||(t.hoverChartIndex=n.index)},t.prototype.touch=function(t,e){var n=this.chart;if(this.setHoverChartIndex(),1===t.touches.length)if(t=this.normalize(t),n.isInsidePlot(t.chartX-n.plotLeft,t.chartY-n.plotTop,{visiblePlotOnly:!0})&&!n.openMenu){if(e&&this.runPointActions(t),"touchmove"===t.type){e=this.pinchDown;var i=!!e[0]&&4<=Math.sqrt(Math.pow(e[0].chartX-t.chartX,2)+Math.pow(e[0].chartY-t.chartY,2))}b(i,!0)&&this.pinch(t)}else e&&this.reset();else 2===t.touches.length&&this.pinch(t)},t.prototype.touchSelect=function(t){return!(!this.chart.options.chart.zoomBySingleTouch||!t.touches||1!==t.touches.length)},t.prototype.zoomOption=function(t){var e=this.chart,n=e.options.chart;e=e.inverted;var i=n.zoomType||"";/touch/.test(t.type)&&(i=b(n.pinchType,i)),this.zoomX=t=/x/.test(i),this.zoomY=n=/y/.test(i),this.zoomHor=t&&!e||n&&e,this.zoomVert=n&&!e||t&&e,this.hasZoom=t||n},t}(),t})),e(n,"Core/MSPointer.js",[n["Core/Globals.js"],n["Core/Pointer.js"],n["Core/Utilities.js"]],(function(t,e,n){function i(){var t=[];return t.item=function(t){return this[t]},d(f,(function(e){t.push({pageX:e.pageX,pageY:e.pageY,target:e.target})})),t}function r(t,n,r,s){var a=o[e.hoverChartIndex||NaN];"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!a||(a=a.pointer,s(t),a[n]({type:r,target:t.currentTarget,preventDefault:c,touches:i()}))}var s=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=t.charts,a=t.doc,c=t.noop,l=t.win,h=n.addEvent,u=n.css,d=n.objectEach,p=n.removeEvent,f={},g=!!l.PointerEvent;return function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return s(n,e),n.isRequired=function(){return!(t.hasTouch||!l.PointerEvent&&!l.MSPointerEvent)},n.prototype.batchMSEvents=function(t){t(this.chart.container,g?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,g?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(a,g?"pointerup":"MSPointerUp",this.onDocumentPointerUp)},n.prototype.destroy=function(){this.batchMSEvents(p),e.prototype.destroy.call(this)},n.prototype.init=function(t,n){e.prototype.init.call(this,t,n),this.hasZoom&&u(t.container,{"-ms-touch-action":"none","touch-action":"none"})},n.prototype.onContainerPointerDown=function(t){r(t,"onContainerTouchStart","touchstart",(function(t){f[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}}))},n.prototype.onContainerPointerMove=function(t){r(t,"onContainerTouchMove","touchmove",(function(t){f[t.pointerId]={pageX:t.pageX,pageY:t.pageY},f[t.pointerId].target||(f[t.pointerId].target=t.currentTarget)}))},n.prototype.onDocumentPointerUp=function(t){r(t,"onDocumentTouchEnd","touchend",(function(t){delete f[t.pointerId]}))},n.prototype.setDOMEvents=function(){e.prototype.setDOMEvents.call(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(h)},n}(e)})),e(n,"Core/Legend/Legend.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Series/Point.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s){var o=t.animObject,a=t.setAnimation,c=e.format;t=n.isFirefox;var l=n.marginNames;n=n.win;var h=r.distribute,u=s.addEvent,d=s.createElement,p=s.css,f=s.defined,g=s.discardElement,m=s.find,y=s.fireEvent,v=s.isNumber,b=s.merge,w=s.pick,_=s.relativeLength,x=s.stableSort,T=s.syncTimeout;return r=s.wrap,s=function(){function t(t,e){this.allItems=[],this.contentGroup=this.box=void 0,this.display=!1,this.group=void 0,this.offsetWidth=this.maxLegendWidth=this.maxItemWidth=this.legendWidth=this.legendHeight=this.lastLineHeight=this.lastItemY=this.itemY=this.itemX=this.itemMarginTop=this.itemMarginBottom=this.itemHeight=this.initialItemY=0,this.options={},this.padding=0,this.pages=[],this.proximate=!1,this.scrollGroup=void 0,this.widthOption=this.totalItemWidth=this.titleHeight=this.symbolWidth=this.symbolHeight=0,this.chart=t,this.init(t,e)}return t.prototype.init=function(t,e){this.chart=t,this.setOptions(e),e.enabled&&(this.render(),u(this.chart,"endResize",(function(){this.legend.positionCheckboxes()})),this.proximate?this.unchartrender=u(this.chart,"render",(function(){this.legend.proximatePositions(),this.legend.positionItems()})):this.unchartrender&&this.unchartrender())},t.prototype.setOptions=function(t){var e=w(t.padding,8);this.options=t,this.chart.styledMode||(this.itemStyle=t.itemStyle,this.itemHiddenStyle=b(this.itemStyle,t.itemHiddenStyle)),this.itemMarginTop=t.itemMarginTop||0,this.itemMarginBottom=t.itemMarginBottom||0,this.padding=e,this.initialItemY=e-5,this.symbolWidth=w(t.symbolWidth,16),this.pages=[],this.proximate="proximate"===t.layout&&!this.chart.inverted,this.baseline=void 0},t.prototype.update=function(t,e){var n=this.chart;this.setOptions(b(!0,this.options,t)),this.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,w(e,!0)&&n.redraw(),y(this,"afterUpdate")},t.prototype.colorizeItem=function(t,e){if(t.legendGroup[e?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){var n=this.options,i=t.legendItem,r=t.legendLine,s=t.legendSymbol,o=this.itemHiddenStyle.color;n=e?n.itemStyle.color:o;var a=e&&t.color||o,c=t.options&&t.options.marker,l={fill:a};i&&i.css({fill:n,color:n}),r&&r.attr({stroke:a}),s&&(c&&s.isMarker&&(l=t.pointAttribs(),e||(l.stroke=l.fill=o)),s.attr(l))}y(this,"afterColorizeItem",{item:t,visible:e})},t.prototype.positionItems=function(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()},t.prototype.positionItem=function(t){var e=this,n=this.options,i=n.symbolPadding,r=!n.rtl,s=t._legendItemPos;n=s[0],s=s[1];var o=t.checkbox,a=t.legendGroup;a&&a.element&&(i={translateX:r?n:this.legendWidth-n-2*i-4,translateY:s},r=function(){y(e,"afterPositionItem",{item:t})},f(a.translateY)?a.animate(i,void 0,r):(a.attr(i),r())),o&&(o.x=n,o.y=s)},t.prototype.destroyItem=function(t){var e=t.checkbox;["legendItem","legendLine","legendSymbol","legendGroup"].forEach((function(e){t[e]&&(t[e]=t[e].destroy())})),e&&g(t.checkbox)},t.prototype.destroy=function(){function t(t){this[t]&&(this[t]=this[t].destroy())}this.getAllItems().forEach((function(e){["legendItem","legendGroup"].forEach(t,e)})),"clipRect up down pager nav box title group".split(" ").forEach(t,this),this.display=null},t.prototype.positionCheckboxes=function(){var t=this.group&&this.group.alignAttr,e=this.clipHeight||this.legendHeight,n=this.titleHeight;if(t){var i=t.translateY;this.allItems.forEach((function(r){var s=r.checkbox;if(s){var o=i+n+s.y+(this.scrollOffset||0)+3;p(s,{left:t.translateX+r.checkboxOffset+s.x-20+"px",top:o+"px",display:this.proximate||o>i-6&&o<i+e-6?"":"none"})}}),this)}},t.prototype.renderTitle=function(){var t=this.options,e=this.padding,n=t.title,i=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,e-3,e-4,null,null,null,t.useHTML,null,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(n.style),this.title.add(this.group)),n.width||this.title.css({width:this.maxLegendWidth+"px"}),t=this.title.getBBox(),i=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:i})),this.titleHeight=i},t.prototype.setText=function(t){var e=this.options;t.legendItem.attr({text:e.labelFormat?c(e.labelFormat,t,this.chart):e.labelFormatter.call(t)})},t.prototype.renderItem=function(t){var e=this.chart,n=e.renderer,i=this.options,r=this.symbolWidth,s=i.symbolPadding||0,o=this.itemStyle,a=this.itemHiddenStyle,c="horizontal"===i.layout?w(i.itemDistance,20):0,l=!i.rtl,h=!t.series,u=!h&&t.series.drawLegendSymbol?t.series:t,d=u.options,p=this.createCheckboxForItem&&d&&d.showCheckbox,f=i.useHTML,g=t.options.className,m=t.legendItem;d=r+s+c+(p?20:0),m||(t.legendGroup=n.g("legend-item").addClass("highcharts-"+u.type+"-series highcharts-color-"+t.colorIndex+(g?" "+g:"")+(h?" highcharts-series-"+t.index:"")).attr({zIndex:1}).add(this.scrollGroup),t.legendItem=m=n.text("",l?r+s:-s,this.baseline||0,f),e.styledMode||m.css(b(t.visible?o:a)),m.attr({align:l?"left":"right",zIndex:2}).add(t.legendGroup),this.baseline||(this.fontMetrics=n.fontMetrics(e.styledMode?12:o.fontSize,m),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,m.attr("y",this.baseline),this.symbolHeight=i.symbolHeight||this.fontMetrics.f,i.squareSymbol&&(this.symbolWidth=w(i.symbolWidth,Math.max(this.symbolHeight,16)),d=this.symbolWidth+s+c+(p?20:0),l&&m.attr("x",this.symbolWidth+s))),u.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,m,f)),p&&!t.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(t),this.colorizeItem(t,t.visible),!e.styledMode&&o.width||m.css({width:(i.itemWidth||this.widthOption||e.spacingBox.width)-d+"px"}),this.setText(t),e=m.getBBox(),t.itemWidth=t.checkboxOffset=i.itemWidth||t.legendItemWidth||e.width+d,this.maxItemWidth=Math.max(this.maxItemWidth,t.itemWidth),this.totalItemWidth+=t.itemWidth,this.itemHeight=t.itemHeight=Math.round(t.legendItemHeight||e.height||this.symbolHeight)},t.prototype.layoutItem=function(t){var e=this.options,n=this.padding,i="horizontal"===e.layout,r=t.itemHeight,s=this.itemMarginBottom,o=this.itemMarginTop,a=i?w(e.itemDistance,20):0,c=this.maxLegendWidth;e=e.alignColumns&&this.totalItemWidth>c?this.maxItemWidth:t.itemWidth,i&&this.itemX-n+e>c&&(this.itemX=n,this.lastLineHeight&&(this.itemY+=o+this.lastLineHeight+s),this.lastLineHeight=0),this.lastItemY=o+this.itemY+s,this.lastLineHeight=Math.max(r,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],i?this.itemX+=e:(this.itemY+=o+r+s,this.lastLineHeight=r),this.offsetWidth=this.widthOption||Math.max((i?this.itemX-n-(t.checkbox?0:a):e)+n,this.offsetWidth)},t.prototype.getAllItems=function(){var t=[];return this.chart.series.forEach((function(e){var n=e&&e.options;e&&w(n.showInLegend,!f(n.linkedTo)&&void 0,!0)&&(t=t.concat(e.legendItems||("point"===n.legendType?e.data:e)))})),y(this,"afterGetAllItems",{allItems:t}),t},t.prototype.getAlignment=function(){var t=this.options;return this.proximate?t.align.charAt(0)+"tv":t.floating?"":t.align.charAt(0)+t.verticalAlign.charAt(0)+t.layout.charAt(0)},t.prototype.adjustMargins=function(t,e){var n=this.chart,i=this.options,r=this.getAlignment();r&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach((function(s,o){s.test(r)&&!f(t[o])&&(n[l[o]]=Math.max(n[l[o]],n.legend[(o+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][o]*i[o%2?"x":"y"]+w(i.margin,12)+e[o]+(n.titleOffset[o]||0)))}))},t.prototype.proximatePositions=function(){var t=this.chart,e=[],n="left"===this.options.align;this.allItems.forEach((function(i){var r,s=n;if(i.yAxis){i.xAxis.options.reversed&&(s=!s),i.points&&(r=m(s?i.points:i.points.slice(0).reverse(),(function(t){return v(t.plotY)}))),s=this.itemMarginTop+i.legendItem.getBBox().height+this.itemMarginBottom;var o=i.yAxis.top-t.plotTop;i.visible?(r=r?r.plotY:i.yAxis.height,r+=o-.3*s):r=o+i.yAxis.height,e.push({target:r,size:s,item:i})}}),this),h(e,t.plotHeight).forEach((function(e){e.item._legendItemPos&&(e.item._legendItemPos[1]=t.plotTop-t.spacing[0]+e.pos)}))},t.prototype.render=function(){var t=this.chart,e=t.renderer,n=this.options,i=this.padding,r=this.getAllItems(),s=this.group,o=this.box;this.itemX=i,this.itemY=this.initialItemY,this.lastItemY=this.offsetWidth=0,this.widthOption=_(n.width,t.spacingBox.width-i);var a=t.spacingBox.width-2*i-n.x;-1<["rm","lm"].indexOf(this.getAlignment().substring(0,2))&&(a/=2),this.maxLegendWidth=this.widthOption||a,s||(this.group=s=e.g("legend").addClass(n.className||"").attr({zIndex:7}).add(),this.contentGroup=e.g().attr({zIndex:1}).add(s),this.scrollGroup=e.g().add(this.contentGroup)),this.renderTitle(),x(r,(function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)})),n.reversed&&r.reverse(),this.allItems=r,this.display=a=!!r.length,this.itemHeight=this.totalItemWidth=this.maxItemWidth=this.lastLineHeight=0,r.forEach(this.renderItem,this),r.forEach(this.layoutItem,this),r=(this.widthOption||this.offsetWidth)+i;var c=this.lastItemY+this.lastLineHeight+this.titleHeight;c=this.handleOverflow(c),c+=i,o||(this.box=o=e.rect().addClass("highcharts-legend-box").attr({r:n.borderRadius}).add(s),o.isNew=!0),t.styledMode||o.attr({stroke:n.borderColor,"stroke-width":n.borderWidth||0,fill:n.backgroundColor||"none"}).shadow(n.shadow),0<r&&0<c&&(o[o.isNew?"attr":"animate"](o.crisp.call({},{x:0,y:0,width:r,height:c},o.strokeWidth())),o.isNew=!1),o[a?"show":"hide"](),t.styledMode&&"none"===s.getStyle("display")&&(r=c=0),this.legendWidth=r,this.legendHeight=c,a&&this.align(),this.proximate||this.positionItems(),y(this,"afterRender")},t.prototype.align=function(t){void 0===t&&(t=this.chart.spacingBox);var e=this.chart,n=this.options,i=t.y;/(lth|ct|rth)/.test(this.getAlignment())&&0<e.titleOffset[0]?i+=e.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&0<e.titleOffset[2]&&(i-=e.titleOffset[2]),i!==t.y&&(t=b(t,{y:i})),this.group.align(b(n,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":n.verticalAlign}),!0,t)},t.prototype.handleOverflow=function(t){var e,n,i=this,r=this.chart,s=r.renderer,o=this.options,a=o.y,c="top"===o.verticalAlign,l=this.padding,h=o.maxHeight,u=o.navigation,d=w(u.animation,!0),p=u.arrowSize||12,f=this.pages,g=this.allItems,m=function(t){"number"===typeof t?b.attr({height:t}):b&&(i.clipRect=b.destroy(),i.contentGroup.clip()),i.contentGroup.div&&(i.contentGroup.div.style.clip=t?"rect("+l+"px,9999px,"+(l+t)+"px,0)":"auto")},y=function(t){return i[t]=s.circle(0,0,1.3*p).translate(p/2,p/2).add(v),r.styledMode||i[t].attr("fill","rgba(0,0,0,0.0001)"),i[t]};a=r.spacingBox.height+(c?-a:a)-l;var v=this.nav,b=this.clipRect;return"horizontal"!==o.layout||"middle"===o.verticalAlign||o.floating||(a/=2),h&&(a=Math.min(a,h)),f.length=0,t&&0<a&&t>a&&!1!==u.enabled?(this.clipHeight=e=Math.max(a-20-this.titleHeight-l,0),this.currentPage=w(this.currentPage,1),this.fullHeight=t,g.forEach((function(t,i){var r=t._legendItemPos[1],s=Math.round(t.legendItem.getBBox().height),o=f.length;(!o||r-f[o-1]>e&&(n||r)!==f[o-1])&&(f.push(n||r),o++),t.pageIx=o-1,n&&(g[i-1].pageIx=o-1),i===g.length-1&&r+s-f[o-1]>e&&r!==n&&(f.push(r),t.pageIx=o),r!==n&&(n=r)})),b||(b=i.clipRect=s.clipRect(0,l,9999,0),i.contentGroup.clip(b)),m(e),v||(this.nav=v=s.g().attr({zIndex:1}).add(this.group),this.up=s.symbol("triangle",0,0,p,p).add(v),y("upTracker").on("click",(function(){i.scroll(-1,d)})),this.pager=s.text("",15,10).addClass("highcharts-legend-navigation"),r.styledMode||this.pager.css(u.style),this.pager.add(v),this.down=s.symbol("triangle-down",0,0,p,p).add(v),y("downTracker").on("click",(function(){i.scroll(1,d)}))),i.scroll(0),t=a):v&&(m(),this.nav=v.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},t.prototype.scroll=function(t,e){var n=this,i=this.chart,r=this.pages,s=r.length,c=this.clipHeight,l=this.options.navigation,h=this.pager,u=this.padding,d=this.currentPage+t;d>s&&(d=s),0<d&&("undefined"!==typeof e&&a(e,i),this.nav.attr({translateX:u,translateY:c+this.padding+7+this.titleHeight,visibility:"visible"}),[this.up,this.upTracker].forEach((function(t){t.attr({class:1===d?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})})),h.attr({text:d+"/"+s}),[this.down,this.downTracker].forEach((function(t){t.attr({x:18+this.pager.getBBox().width,class:d===s?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),this),i.styledMode||(this.up.attr({fill:1===d?l.inactiveColor:l.activeColor}),this.upTracker.css({cursor:1===d?"default":"pointer"}),this.down.attr({fill:d===s?l.inactiveColor:l.activeColor}),this.downTracker.css({cursor:d===s?"default":"pointer"})),this.scrollOffset=-r[d-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=d,this.positionCheckboxes(),t=o(w(e,i.renderer.globalAnimation,!0)),T((function(){y(n,"afterScroll",{currentPage:d})}),t.duration))},t.prototype.setItemEvents=function(t,e,n){var r=this,s=r.chart.renderer.boxWrapper,o=t instanceof i,a="highcharts-legend-"+(o?"point":"series")+"-active",c=r.chart.styledMode,l=function(e){r.allItems.forEach((function(n){t!==n&&[n].concat(n.linkedSeries||[]).forEach((function(t){t.setState(e,!o)}))}))};(n?[e,t.legendSymbol]:[t.legendGroup]).forEach((function(n){n&&n.on("mouseover",(function(){t.visible&&l("inactive"),t.setState("hover"),t.visible&&s.addClass(a),c||e.css(r.options.itemHoverStyle)})).on("mouseout",(function(){r.chart.styledMode||e.css(b(t.visible?r.itemStyle:r.itemHiddenStyle)),l(""),s.removeClass(a),t.setState()})).on("click",(function(e){var n=function(){t.setVisible&&t.setVisible(),l(t.visible?"inactive":"")};s.removeClass(a),e={browserEvent:e},t.firePointEvent?t.firePointEvent("legendItemClick",e,n):y(t,"legendItemClick",e,n)}))}))},t.prototype.createCheckboxForItem=function(t){t.checkbox=d("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),u(t.checkbox,"click",(function(e){y(t.series||t,"checkboxClick",{checked:e.target.checked,item:t},(function(){t.select()}))}))},t}(),(/Trident\/7\.0/.test(n.navigator&&n.navigator.userAgent)||t)&&r(s.prototype,"positionItem",(function(t,e){var n=this,i=function(){e._legendItemPos&&t.call(n,e)};i(),n.bubbleLegend||setTimeout(i)})),s})),e(n,"Core/Series/SeriesRegistry.js",[n["Core/Globals.js"],n["Core/DefaultOptions.js"],n["Core/Series/Point.js"],n["Core/Utilities.js"]],(function(t,e,n,i){var r,s=e.defaultOptions,o=i.error,a=i.extendClass,c=i.merge;return function(e){function i(t,i){var r=s.plotOptions||{},o=i.defaultOptions;i.prototype.pointClass||(i.prototype.pointClass=n),i.prototype.type=t,o&&(r[t]=o),e.seriesTypes[t]=i}e.seriesTypes=t.seriesTypes,e.getSeries=function(t,n){void 0===n&&(n={});var i=t.options.chart;i=n.type||i.type||i.defaultSeriesType||"";var r=e.seriesTypes[i];return e||o(17,!0,t,{missingModuleFor:i}),i=new r,"function"===typeof i.init&&i.init(t,n),i},e.registerSeriesType=i,e.seriesType=function(t,r,o,l,h){var u=s.plotOptions||{};return r=r||"",u[t]=c(u[r],o),i(t,a(e.seriesTypes[r]||function(){},l)),e.seriesTypes[t].prototype.type=t,h&&(e.seriesTypes[t].prototype.pointClass=a(n,h)),e.seriesTypes[t]}}(r||(r={})),r})),e(n,"Core/Chart/Chart.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/Axis.js"],n["Core/FormatUtilities.js"],n["Core/Foundation.js"],n["Core/Globals.js"],n["Core/Legend/Legend.js"],n["Core/MSPointer.js"],n["Core/DefaultOptions.js"],n["Core/Color/Palette.js"],n["Core/Pointer.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Renderer/SVG/SVGRenderer.js"],n["Core/Time.js"],n["Core/Utilities.js"],n["Core/Renderer/HTML/AST.js"]],(function(t,e,n,i,r,s,o,a,c,l,h,u,d,p,f,g){var m=t.animate,y=t.animObject,v=t.setAnimation,b=n.numberFormat,w=i.registerEventOptions,_=r.charts,x=r.doc,T=r.marginNames,S=r.svg,C=r.win,k=a.defaultOptions,O=a.defaultTime,I=u.seriesTypes,E=f.addEvent,A=f.attr,P=f.cleanRecursively,N=f.createElement,j=f.css,R=f.defined,M=f.discardElement,D=f.erase,L=f.error,F=f.extend,U=f.find,B=f.fireEvent,V=f.getStyle,z=f.isArray,q=f.isNumber,W=f.isObject,H=f.isString,G=f.merge,K=f.objectEach,$=f.pick,Y=f.pInt,X=f.relativeLength,Q=f.removeEvent,J=f.splat,Z=f.syncTimeout,tt=f.uniqueKey;return t=function(){function t(t,e,n){this.series=this.renderTo=this.renderer=this.pointer=this.pointCount=this.plotWidth=this.plotTop=this.plotLeft=this.plotHeight=this.plotBox=this.options=this.numberFormatter=this.margin=this.legend=this.labelCollectors=this.isResizing=this.index=this.eventOptions=this.container=this.colorCounter=this.clipBox=this.chartWidth=this.chartHeight=this.bounds=this.axisOffset=this.axes=void 0,this.sharedClips={},this.yAxis=this.xAxis=this.userOptions=this.titleOffset=this.time=this.symbolCounter=this.spacingBox=this.spacing=void 0,this.getArgs(t,e,n)}return t.chart=function(e,n,i){return new t(e,n,i)},t.prototype.getArgs=function(t,e,n){H(t)||t.nodeName?(this.renderTo=t,this.init(e,n)):this.init(t,e)},t.prototype.init=function(t,e){var n=t.plotOptions||{};B(this,"init",{args:arguments},(function(){var i=G(k,t),s=i.chart;K(i.plotOptions,(function(t,e){W(t)&&(t.tooltip=n[e]&&G(n[e].tooltip)||void 0)})),i.tooltip.userOptions=t.chart&&t.chart.forExport&&t.tooltip.userOptions||t.tooltip,this.userOptions=t,this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.labelCollectors=[],this.callback=e,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.time=t.time&&Object.keys(t.time).length?new p(t.time):r.time,this.numberFormatter=s.numberFormatter||b,this.styledMode=s.styledMode,this.hasCartesianSeries=s.showAxes,this.index=_.length,_.push(this),r.chartCount++,w(this,s),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,B(this,"afterInit"),this.firstRender()}))},t.prototype.initSeries=function(t){var e=this.options.chart;e=t.type||e.type||e.defaultSeriesType;var n=I[e];return n||L(17,!0,this,{missingModuleFor:e}),e=new n,"function"===typeof e.init&&e.init(this,t),e},t.prototype.setSeriesData=function(){this.getSeriesOrderByLinks().forEach((function(t){t.points||t.data||!t.enabledDataSorting||t.setData(t.options.data,!1)}))},t.prototype.getSeriesOrderByLinks=function(){return this.series.concat().sort((function(t,e){return t.linkedSeries.length||e.linkedSeries.length?e.linkedSeries.length-t.linkedSeries.length:0}))},t.prototype.orderSeries=function(t){var e=this.series;t=t||0;for(var n=e.length;t<n;++t)e[t]&&(e[t].index=t,e[t].name=e[t].getName())},t.prototype.isInsidePlot=function(t,e,n){void 0===n&&(n={});var i=this.inverted,r=this.plotBox,s=this.plotLeft,o=this.plotTop,a=this.scrollablePlotBox,c=0,l=0;n.visiblePlotOnly&&this.scrollingContainer&&(l=this.scrollingContainer,c=l.scrollLeft,l=l.scrollTop);var h=n.series;if(r=n.visiblePlotOnly&&a||r,a=n.inverted?e:t,e=n.inverted?t:e,t={x:a,y:e,isInsidePlot:!0},!n.ignoreX){var u=h&&(i?h.yAxis:h.xAxis)||{pos:s,len:1/0};a=n.paneCoordinates?u.pos+a:s+a,a>=Math.max(c+s,u.pos)&&a<=Math.min(c+s+r.width,u.pos+u.len)||(t.isInsidePlot=!1)}return!n.ignoreY&&t.isInsidePlot&&(i=h&&(i?h.xAxis:h.yAxis)||{pos:o,len:1/0},n=n.paneCoordinates?i.pos+e:o+e,n>=Math.max(l+o,i.pos)&&n<=Math.min(l+o+r.height,i.pos+i.len)||(t.isInsidePlot=!1)),B(this,"afterIsInsidePlot",t),t.isInsidePlot},t.prototype.redraw=function(t){B(this,"beforeRedraw");var e=this.hasCartesianSeries?this.axes:this.colorAxis||[],n=this.series,i=this.pointer,r=this.legend,s=this.userOptions.legend,o=this.renderer,a=o.isHidden(),c=[],l=this.isDirtyBox,h=this.isDirtyLegend;for(this.setResponsive&&this.setResponsive(!1),v(!!this.hasRendered&&t,this),a&&this.temporaryDisplay(),this.layOutTitles(),t=n.length;t--;){var u=n[t];if(u.options.stacking||u.options.centerInCategory){var d=!0;if(u.isDirty){var p=!0;break}}}if(p)for(t=n.length;t--;)u=n[t],u.options.stacking&&(u.isDirty=!0);n.forEach((function(t){t.isDirty&&("point"===t.options.legendType?("function"===typeof t.updateTotals&&t.updateTotals(),h=!0):s&&(s.labelFormatter||s.labelFormat)&&(h=!0)),t.isDirtyData&&B(t,"updatedData")})),h&&r&&r.options.enabled&&(r.render(),this.isDirtyLegend=!1),d&&this.getStacks(),e.forEach((function(t){t.updateNames(),t.setScale()})),this.getMargins(),e.forEach((function(t){t.isDirty&&(l=!0)})),e.forEach((function(t){var e=t.min+","+t.max;t.extKey!==e&&(t.extKey=e,c.push((function(){B(t,"afterSetExtremes",F(t.eventArgs,t.getExtremes())),delete t.eventArgs}))),(l||d)&&t.redraw()})),l&&this.drawChartBox(),B(this,"predraw"),n.forEach((function(t){(l||t.isDirty)&&t.visible&&t.redraw(),t.isDirtyData=!1})),i&&i.reset(!0),o.draw(),B(this,"redraw"),B(this,"render"),a&&this.temporaryDisplay(!0),c.forEach((function(t){t.call()}))},t.prototype.get=function(t){function e(e){return e.id===t||e.options&&e.options.id===t}for(var n=this.series,i=U(this.axes,e)||U(this.series,e),r=0;!i&&r<n.length;r++)i=U(n[r].points||[],e);return i},t.prototype.getAxes=function(){var t=this,n=this.options,i=n.xAxis=J(n.xAxis||{});n=n.yAxis=J(n.yAxis||{}),B(this,"getAxes"),i.forEach((function(t,e){t.index=e,t.isX=!0})),n.forEach((function(t,e){t.index=e})),i.concat(n).forEach((function(n){new e(t,n)})),B(this,"afterGetAxes")},t.prototype.getSelectedPoints=function(){return this.series.reduce((function(t,e){return e.getPointsCollection().forEach((function(e){$(e.selectedStaging,e.selected)&&t.push(e)})),t}),[])},t.prototype.getSelectedSeries=function(){return this.series.filter((function(t){return t.selected}))},t.prototype.setTitle=function(t,e,n){this.applyDescription("title",t),this.applyDescription("subtitle",e),this.applyDescription("caption",void 0),this.layOutTitles(n)},t.prototype.applyDescription=function(t,e){var n=this,i="title"===t?{color:c.neutralColor80,fontSize:this.options.isStock?"16px":"18px"}:{color:c.neutralColor60};i=this.options[t]=G(!this.styledMode&&{style:i},this.options[t],e);var r=this[t];r&&e&&(this[t]=r=r.destroy()),i&&!r&&(r=this.renderer.text(i.text,0,0,i.useHTML).attr({align:i.align,class:"highcharts-"+t,zIndex:i.zIndex||4}).add(),r.update=function(e){n[{title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"}[t]](e)},this.styledMode||r.css(i.style),this[t]=r)},t.prototype.layOutTitles=function(t){var e=[0,0,0],n=this.renderer,i=this.spacingBox;["title","subtitle","caption"].forEach((function(t){var r,s=this[t],o=this.options[t],a=o.verticalAlign||"top";if(t="title"===t?"top"===a?-3:0:"top"===a?e[0]+2:0,s){this.styledMode||(r=o.style&&o.style.fontSize),r=n.fontMetrics(r,s).b,s.css({width:(o.width||i.width+(o.widthAdjust||0))+"px"});var c=Math.round(s.getBBox(o.useHTML).height);s.align(F({y:"bottom"===a?r:t+r,height:c},o),!1,"spacingBox"),o.floating||("top"===a?e[0]=Math.ceil(e[0]+c):"bottom"===a&&(e[2]=Math.ceil(e[2]+c)))}}),this),e[0]&&"top"===(this.options.title.verticalAlign||"top")&&(e[0]+=this.options.title.margin),e[2]&&"bottom"===this.options.caption.verticalAlign&&(e[2]+=this.options.caption.margin);var r=!this.titleOffset||this.titleOffset.join(",")!==e.join(",");this.titleOffset=e,B(this,"afterLayOutTitles"),!this.isDirtyBox&&r&&(this.isDirtyBox=this.isDirtyLegend=r,this.hasRendered&&$(t,!0)&&this.isDirtyBox&&this.redraw())},t.prototype.getChartSize=function(){var t=this.options.chart,e=t.width;t=t.height;var n=this.renderTo;R(e)||(this.containerWidth=V(n,"width")),R(t)||(this.containerHeight=V(n,"height")),this.chartWidth=Math.max(0,e||this.containerWidth||600),this.chartHeight=Math.max(0,X(t,this.chartWidth)||(1<this.containerHeight?this.containerHeight:400))},t.prototype.temporaryDisplay=function(t){var e=this.renderTo;if(t)for(;e&&e.style;)e.hcOrigStyle&&(j(e,e.hcOrigStyle),delete e.hcOrigStyle),e.hcOrigDetached&&(x.body.removeChild(e),e.hcOrigDetached=!1),e=e.parentNode;else for(;e&&e.style;)if(x.body.contains(e)||e.parentNode||(e.hcOrigDetached=!0,x.body.appendChild(e)),("none"===V(e,"display",!1)||e.hcOricDetached)&&(e.hcOrigStyle={display:e.style.display,height:e.style.height,overflow:e.style.overflow},t={display:"block",overflow:"hidden"},e!==this.renderTo&&(t.height=0),j(e,t),e.offsetWidth||e.style.setProperty("display","block","important")),e=e.parentNode,e===x.body)break},t.prototype.setClassName=function(t){this.container.className="highcharts-container "+(t||"")},t.prototype.getContainer=function(){var t,e=this.options,n=e.chart,i=tt(),r=this.renderTo;r||(this.renderTo=r=n.renderTo),H(r)&&(this.renderTo=r=x.getElementById(r)),r||L(13,!0,this);var s=Y(A(r,"data-highcharts-chart"));q(s)&&_[s]&&_[s].hasRendered&&_[s].destroy(),A(r,"data-highcharts-chart",this.index),r.innerHTML="",n.skipClone||r.offsetWidth||this.temporaryDisplay(),this.getChartSize(),s=this.chartWidth;var o=this.chartHeight;if(j(r,{overflow:"hidden"}),this.styledMode||(t=F({position:"relative",overflow:"hidden",width:s+"px",height:o+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none"},n.style||{})),this.container=i=N("div",{id:i},t,r),this._cursor=i.style.cursor,this.renderer=new(n.renderer||!S?h.getRendererType(n.renderer):d)(i,s,o,void 0,n.forExport,e.exporting&&e.exporting.allowHTML,this.styledMode),v(void 0,this),this.setClassName(n.className),this.styledMode)for(var a in e.defs)this.renderer.definition(e.defs[a]);else this.renderer.setStyle(n.style);this.renderer.chartIndex=this.index,B(this,"afterGetContainer")},t.prototype.getMargins=function(t){var e=this.spacing,n=this.margin,i=this.titleOffset;this.resetMargins(),i[0]&&!R(n[0])&&(this.plotTop=Math.max(this.plotTop,i[0]+e[0])),i[2]&&!R(n[2])&&(this.marginBottom=Math.max(this.marginBottom,i[2]+e[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(n,e),B(this,"getMargins"),t||this.getAxisMargins()},t.prototype.getAxisMargins=function(){var t=this,e=t.axisOffset=[0,0,0,0],n=t.colorAxis,i=t.margin,r=function(t){t.forEach((function(t){t.visible&&t.getOffset()}))};t.hasCartesianSeries?r(t.axes):n&&n.length&&r(n),T.forEach((function(n,r){R(i[r])||(t[n]+=e[r])})),t.setChartSize()},t.prototype.reflow=function(t){var e=this,n=e.options.chart,i=e.renderTo,r=R(n.width)&&R(n.height),s=n.width||V(i,"width");n=n.height||V(i,"height"),i=t?t.target:C,delete e.pointer.chartPosition,r||e.isPrinting||!s||!n||i!==C&&i!==x||(s===e.containerWidth&&n===e.containerHeight||(f.clearTimeout(e.reflowTimeout),e.reflowTimeout=Z((function(){e.container&&e.setSize(void 0,void 0,!1)}),t?100:0)),e.containerWidth=s,e.containerHeight=n)},t.prototype.setReflow=function(t){var e=this;!1===t||this.unbindReflow?!1===t&&this.unbindReflow&&(this.unbindReflow=this.unbindReflow()):(this.unbindReflow=E(C,"resize",(function(t){e.options&&e.reflow(t)})),E(this,"destroy",this.unbindReflow))},t.prototype.setSize=function(t,e,n){var i=this,r=i.renderer;i.isResizing+=1,v(n,i),n=r.globalAnimation,i.oldChartHeight=i.chartHeight,i.oldChartWidth=i.chartWidth,"undefined"!==typeof t&&(i.options.chart.width=t),"undefined"!==typeof e&&(i.options.chart.height=e),i.getChartSize(),i.styledMode||(n?m:j)(i.container,{width:i.chartWidth+"px",height:i.chartHeight+"px"},n),i.setChartSize(!0),r.setSize(i.chartWidth,i.chartHeight,n),i.axes.forEach((function(t){t.isDirty=!0,t.setScale()})),i.isDirtyLegend=!0,i.isDirtyBox=!0,i.layOutTitles(),i.getMargins(),i.redraw(n),i.oldChartHeight=null,B(i,"resize"),Z((function(){i&&B(i,"endResize",null,(function(){--i.isResizing}))}),y(n).duration)},t.prototype.setChartSize=function(t){var e,n,i,r,s=this.inverted,o=this.renderer,a=this.chartWidth,c=this.chartHeight,l=this.options.chart,h=this.spacing,u=this.clipOffset;this.plotLeft=e=Math.round(this.plotLeft),this.plotTop=n=Math.round(this.plotTop),this.plotWidth=i=Math.max(0,Math.round(a-e-this.marginRight)),this.plotHeight=r=Math.max(0,Math.round(c-n-this.marginBottom)),this.plotSizeX=s?r:i,this.plotSizeY=s?i:r,this.plotBorderWidth=l.plotBorderWidth||0,this.spacingBox=o.spacingBox={x:h[3],y:h[0],width:a-h[3]-h[1],height:c-h[0]-h[2]},this.plotBox=o.plotBox={x:e,y:n,width:i,height:r},s=2*Math.floor(this.plotBorderWidth/2),a=Math.ceil(Math.max(s,u[3])/2),c=Math.ceil(Math.max(s,u[0])/2),this.clipBox={x:a,y:c,width:Math.floor(this.plotSizeX-Math.max(s,u[1])/2-a),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(s,u[2])/2-c))},t||(this.axes.forEach((function(t){t.setAxisSize(),t.setAxisTranslation()})),o.alignElements()),B(this,"afterSetChartSize",{skipAxes:t})},t.prototype.resetMargins=function(){B(this,"resetMargins");var t=this,e=t.options.chart;["margin","spacing"].forEach((function(n){var i=e[n],r=W(i)?i:[i,i,i,i];["Top","Right","Bottom","Left"].forEach((function(i,s){t[n][s]=$(e[n+i],r[s])}))})),T.forEach((function(e,n){t[e]=$(t.margin[n],t.spacing[n])})),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},t.prototype.drawChartBox=function(){var t,e=this.options.chart,n=this.renderer,i=this.chartWidth,r=this.chartHeight,s=this.styledMode,o=this.plotBGImage,a=e.backgroundColor,c=e.plotBackgroundColor,l=e.plotBackgroundImage,h=this.plotLeft,u=this.plotTop,d=this.plotWidth,p=this.plotHeight,f=this.plotBox,g=this.clipRect,m=this.clipBox,y=this.chartBackground,v=this.plotBackground,b=this.plotBorder,w="animate";if(y||(this.chartBackground=y=n.rect().addClass("highcharts-background").add(),w="attr"),s)var _=t=y.strokeWidth();else _=e.borderWidth||0,t=_+(e.shadow?8:0),a={fill:a||"none"},(_||y["stroke-width"])&&(a.stroke=e.borderColor,a["stroke-width"]=_),y.attr(a).shadow(e.shadow);y[w]({x:t/2,y:t/2,width:i-t-_%2,height:r-t-_%2,r:e.borderRadius}),w="animate",v||(w="attr",this.plotBackground=v=n.rect().addClass("highcharts-plot-background").add()),v[w](f),s||(v.attr({fill:c||"none"}).shadow(e.plotShadow),l&&(o?(l!==o.attr("href")&&o.attr("href",l),o.animate(f)):this.plotBGImage=n.image(l,h,u,d,p).add())),g?g.animate({width:m.width,height:m.height}):this.clipRect=n.clipRect(m),w="animate",b||(w="attr",this.plotBorder=b=n.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),s||b.attr({stroke:e.plotBorderColor,"stroke-width":e.plotBorderWidth||0,fill:"none"}),b[w](b.crisp({x:h,y:u,width:d,height:p},-b.strokeWidth())),this.isDirtyBox=!1,B(this,"afterDrawChartBox")},t.prototype.propFromSeries=function(){var t,e,n,i=this,r=i.options.chart,s=i.options.series;["inverted","angular","polar"].forEach((function(o){for(e=I[r.type||r.defaultSeriesType],n=r[o]||e&&e.prototype[o],t=s&&s.length;!n&&t--;)(e=I[s[t].type])&&e.prototype[o]&&(n=!0);i[o]=n}))},t.prototype.linkSeries=function(){var t=this,e=t.series;e.forEach((function(t){t.linkedSeries.length=0})),e.forEach((function(e){var n=e.options.linkedTo;H(n)&&(n=":previous"===n?t.series[e.index-1]:t.get(n))&&n.linkedParent!==e&&(n.linkedSeries.push(e),e.linkedParent=n,n.enabledDataSorting&&e.setDataSortingOptions(),e.visible=$(e.options.visible,n.options.visible,e.visible))})),B(this,"afterLinkSeries")},t.prototype.renderSeries=function(){this.series.forEach((function(t){t.translate(),t.render()}))},t.prototype.renderLabels=function(){var t=this,e=t.options.labels;e.items&&e.items.forEach((function(n){var i=F(e.style,n.style),r=Y(i.left)+t.plotLeft,s=Y(i.top)+t.plotTop+12;delete i.left,delete i.top,t.renderer.text(n.html,r,s).attr({zIndex:2}).css(i).add()}))},t.prototype.render=function(){var t=this.axes,e=this.colorAxis,n=this.renderer,i=this.options,r=function(t){t.forEach((function(t){t.visible&&t.render()}))},o=0;this.setTitle(),this.legend=new s(this,i.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),i=this.plotWidth,t.some((function(t){if(t.horiz&&t.visible&&t.options.labels.enabled&&t.series.length)return o=21,!0}));var a=this.plotHeight=Math.max(this.plotHeight-o,0);t.forEach((function(t){t.setScale()})),this.getAxisMargins();var c=1.1<i/this.plotWidth,l=1.05<a/this.plotHeight;(c||l)&&(t.forEach((function(t){(t.horiz&&c||!t.horiz&&l)&&t.setTickInterval(!0)})),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries?r(t):e&&e.length&&r(e),this.seriesGroup||(this.seriesGroup=n.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0},t.prototype.addCredits=function(t){var e=this,n=G(!0,this.options.credits,t);n.enabled&&!this.credits&&(this.credits=this.renderer.text(n.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",(function(){n.href&&(C.location.href=n.href)})).attr({align:n.position.align,zIndex:8}),e.styledMode||this.credits.css(n.style),this.credits.add().align(n.position),this.credits.update=function(t){e.credits=e.credits.destroy(),e.addCredits(t)})},t.prototype.destroy=function(){var t,e=this,n=e.axes,i=e.series,s=e.container,o=s&&s.parentNode;for(B(e,"destroy"),e.renderer.forExport?D(_,e):_[e.index]=void 0,r.chartCount--,e.renderTo.removeAttribute("data-highcharts-chart"),Q(e),t=n.length;t--;)n[t]=n[t].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),t=i.length;t--;)i[t]=i[t].destroy();"title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" ").forEach((function(t){var n=e[t];n&&n.destroy&&(e[t]=n.destroy())})),s&&(s.innerHTML="",Q(s),o&&M(s)),K(e,(function(t,n){delete e[n]}))},t.prototype.firstRender=function(){var t=this,e=t.options;t.isReadyToRender&&!t.isReadyToRender()||(t.getContainer(),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),(z(e.series)?e.series:[]).forEach((function(e){t.initSeries(e)})),t.linkSeries(),t.setSeriesData(),B(t,"beforeRender"),l&&(o.isRequired()?t.pointer=new o(t,e):t.pointer=new l(t,e)),t.render(),t.pointer.getChartPosition(),t.renderer.imgCount||t.hasLoaded||t.onload(),t.temporaryDisplay(!0))},t.prototype.onload=function(){this.callbacks.concat([this.callback]).forEach((function(t){t&&"undefined"!==typeof this.index&&t.apply(this,[this])}),this),B(this,"load"),B(this,"render"),R(this.index)&&this.setReflow(this.options.chart.reflow),this.hasLoaded=!0},t.prototype.addSeries=function(t,e,n){var i,r=this;return t&&(e=$(e,!0),B(r,"addSeries",{options:t},(function(){i=r.initSeries(t),r.isDirtyLegend=!0,r.linkSeries(),i.enabledDataSorting&&i.setData(t.data,!1),B(r,"afterAddSeries",{series:i}),e&&r.redraw(n)}))),i},t.prototype.addAxis=function(t,e,n,i){return this.createAxis(e?"xAxis":"yAxis",{axis:t,redraw:n,animation:i})},t.prototype.addColorAxis=function(t,e,n){return this.createAxis("colorAxis",{axis:t,redraw:e,animation:n})},t.prototype.createAxis=function(t,n){return t=new e(this,G(n.axis,{index:this[t].length,isX:"xAxis"===t})),$(n.redraw,!0)&&this.redraw(n.animation),t},t.prototype.showLoading=function(t){var e=this,n=e.options,i=n.loading,r=function(){s&&j(s,{left:e.plotLeft+"px",top:e.plotTop+"px",width:e.plotWidth+"px",height:e.plotHeight+"px"})},s=e.loadingDiv,o=e.loadingSpan;s||(e.loadingDiv=s=N("div",{className:"highcharts-loading highcharts-loading-hidden"},null,e.container)),o||(e.loadingSpan=o=N("span",{className:"highcharts-loading-inner"},null,s),E(e,"redraw",r)),s.className="highcharts-loading",g.setElementHTML(o,$(t,n.lang.loading,"")),e.styledMode||(j(s,F(i.style,{zIndex:10})),j(o,i.labelStyle),e.loadingShown||(j(s,{opacity:0,display:""}),m(s,{opacity:i.style.opacity||.5},{duration:i.showDuration||0}))),e.loadingShown=!0,r()},t.prototype.hideLoading=function(){var t=this.options,e=this.loadingDiv;e&&(e.className="highcharts-loading highcharts-loading-hidden",this.styledMode||m(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){j(e,{display:"none"})}})),this.loadingShown=!1},t.prototype.update=function(t,e,n,i){var r,s,o=this,a={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},c=t.isResponsiveOptions,l=[];B(o,"update",{options:t}),c||o.setResponsive(!1,!0),t=P(t,o.options),o.userOptions=G(o.userOptions,t);var h=t.chart;if(h){if(G(!0,o.options.chart,h),"className"in h&&o.setClassName(h.className),"reflow"in h&&o.setReflow(h.reflow),"inverted"in h||"polar"in h||"type"in h){o.propFromSeries();var u=!0}"alignTicks"in h&&(u=!0),"events"in h&&w(this,h),K(h,(function(t,e){-1!==o.propsRequireUpdateSeries.indexOf("chart."+e)&&(r=!0),-1!==o.propsRequireDirtyBox.indexOf(e)&&(o.isDirtyBox=!0),-1!==o.propsRequireReflow.indexOf(e)&&(c?o.isDirtyBox=!0:s=!0)})),!o.styledMode&&h.style&&o.renderer.setStyle(o.options.chart.style||{})}!o.styledMode&&t.colors&&(this.options.colors=t.colors),t.time&&(this.time===O&&(this.time=new p(t.time)),G(!0,o.options.time,t.time)),K(t,(function(e,n){o[n]&&"function"===typeof o[n].update?o[n].update(e,!1):"function"===typeof o[a[n]]?o[a[n]](e):"colors"!==n&&-1===o.collectionsWithUpdate.indexOf(n)&&G(!0,o.options[n],t[n]),"chart"!==n&&-1!==o.propsRequireUpdateSeries.indexOf(n)&&(r=!0)})),this.collectionsWithUpdate.forEach((function(e){if(t[e]){var i=[];o[e].forEach((function(t,e){t.options.isInternal||i.push($(t.options.index,e))})),J(t[e]).forEach((function(t,r){var s,a=R(t.id);a&&(s=o.get(t.id)),!s&&o[e]&&(s=o[e][i?i[r]:r])&&a&&R(s.options.id)&&(s=void 0),s&&s.coll===e&&(s.update(t,!1),n&&(s.touched=!0)),!s&&n&&o.collectionsWithInit[e]&&(o.collectionsWithInit[e][0].apply(o,[t].concat(o.collectionsWithInit[e][1]||[]).concat([!1])).touched=!0)})),n&&o[e].forEach((function(t){t.touched||t.options.isInternal?delete t.touched:l.push(t)}))}})),l.forEach((function(t){t.chart&&t.remove&&t.remove(!1)})),u&&o.axes.forEach((function(t){t.update({},!1)})),r&&o.getSeriesOrderByLinks().forEach((function(t){t.chart&&t.update({},!1)}),this),u=h&&h.width,h=h&&(H(h.height)?X(h.height,u||o.chartWidth):h.height),s||q(u)&&u!==o.chartWidth||q(h)&&h!==o.chartHeight?o.setSize(u,h,i):$(e,!0)&&o.redraw(i),B(o,"afterUpdate",{options:t,redraw:e,animation:i})},t.prototype.setSubtitle=function(t,e){this.applyDescription("subtitle",t),this.layOutTitles(e)},t.prototype.setCaption=function(t,e){this.applyDescription("caption",t),this.layOutTitles(e)},t.prototype.showResetZoom=function(){function t(){e.zoomOut()}var e=this,n=k.lang,i=e.options.chart.resetZoomButton,r=i.theme,s=r.states,o="chart"===i.relativeTo||"spacingBox"===i.relativeTo?null:"scrollablePlotBox";B(this,"beforeShowResetZoom",null,(function(){e.resetZoomButton=e.renderer.button(n.resetZoom,null,null,t,r,s&&s.hover).attr({align:i.position.align,title:n.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(i.position,!1,o)})),B(this,"afterShowResetZoom")},t.prototype.zoomOut=function(){B(this,"selection",{resetSelection:!0},this.zoom)},t.prototype.zoom=function(t){var e,n=this,i=n.pointer,r=n.inverted?i.mouseDownX:i.mouseDownY,s=!1;!t||t.resetSelection?(n.axes.forEach((function(t){e=t.zoom()})),i.initiated=!1):t.xAxis.concat(t.yAxis).forEach((function(t){var o=t.axis,a=n.inverted?o.left:o.top,c=n.inverted?a+o.width:a+o.height,l=o.isXAxis,h=!1;(!l&&r>=a&&r<=c||l||!R(r))&&(h=!0),i[l?"zoomX":"zoomY"]&&h&&(e=o.zoom(t.min,t.max),o.displayBtn&&(s=!0))}));var o=n.resetZoomButton;s&&!o?n.showResetZoom():!s&&W(o)&&(n.resetZoomButton=o.destroy()),e&&n.redraw($(n.options.chart.animation,t&&t.animation,100>n.pointCount))},t.prototype.pan=function(t,e){var n=this,i=n.hoverPoints;e="object"===typeof e?e:{enabled:e,type:"x"};var r=n.options.chart,s=n.options.mapNavigation&&n.options.mapNavigation.enabled;r&&r.panning&&(r.panning=e);var o,a=e.type;B(this,"pan",{originalEvent:t},(function(){i&&i.forEach((function(t){t.setState()}));var e=n.xAxis;"xy"===a?e=e.concat(n.yAxis):"y"===a&&(e=n.yAxis);var r={};e.forEach((function(e){if(e.options.panningEnabled&&!e.options.isInternal){var i=e.horiz,c=t[i?"chartX":"chartY"];i=i?"mouseDownX":"mouseDownY";var l=n[i],h=e.minPointOffset||0,u=e.reversed&&!n.inverted||!e.reversed&&n.inverted?-1:1,d=e.getExtremes(),p=e.toValue(l-c,!0)+h*u,f=e.toValue(l+e.len-c,!0)-(h*u||e.isXAxis&&e.pointRangePadding||0),g=f<p;u=e.hasVerticalPanning(),l=g?f:p,p=g?p:f;var m=e.panningState;!u||e.isXAxis||m&&!m.isDirty||e.series.forEach((function(t){var e=t.getProcessedData(!0);e=t.getExtremes(e.yData,!0),m||(m={startMin:Number.MAX_VALUE,startMax:-Number.MAX_VALUE}),q(e.dataMin)&&q(e.dataMax)&&(m.startMin=Math.min($(t.options.threshold,1/0),e.dataMin,m.startMin),m.startMax=Math.max($(t.options.threshold,-1/0),e.dataMax,m.startMax))})),u=Math.min($(m&&m.startMin,d.dataMin),h?d.min:e.toValue(e.toPixels(d.min)-e.minPixelPadding)),f=Math.max($(m&&m.startMax,d.dataMax),h?d.max:e.toValue(e.toPixels(d.max)+e.minPixelPadding)),e.panningState=m,e.isOrdinal||(h=u-l,0<h&&(p+=h,l=u),h=p-f,0<h&&(p=f,l-=h),e.series.length&&l!==d.min&&p!==d.max&&l>=u&&p<=f&&(e.setExtremes(l,p,!1,!1,{trigger:"pan"}),n.resetZoomButton||s||l===u||p===f||!a.match("y")||(n.showResetZoom(),e.displayBtn=!1),o=!0),r[i]=c)}})),K(r,(function(t,e){n[e]=t})),o&&n.redraw(!1),j(n.container,{cursor:"move"})}))},t}(),F(t.prototype,{callbacks:[],collectionsWithInit:{xAxis:[t.prototype.addAxis,[!0]],yAxis:[t.prototype.addAxis,[!1]],series:[t.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:"backgroundColor borderColor borderWidth borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireReflow:"margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions time tooltip".split(" ")}),t})),e(n,"Core/Legend/LegendSymbol.js",[n["Core/Utilities.js"]],(function(t){var e,n=t.merge,i=t.pick;return function(t){t.drawLineMarker=function(t){var e=this.options,r=t.symbolWidth,s=t.symbolHeight,o=s/2,a=this.chart.renderer,c=this.legendGroup;t=t.baseline-Math.round(.3*t.fontMetrics.b);var l={},h=e.marker;this.chart.styledMode||(l={"stroke-width":e.lineWidth||0},e.dashStyle&&(l.dashstyle=e.dashStyle)),this.legendLine=a.path([["M",0,t],["L",r,t]]).addClass("highcharts-graph").attr(l).add(c),h&&!1!==h.enabled&&r&&(e=Math.min(i(h.radius,o),o),0===this.symbol.indexOf("url")&&(h=n(h,{width:s,height:s}),e=0),this.legendSymbol=r=a.symbol(this.symbol,r/2-e,t-e,2*e,2*e,h).addClass("highcharts-point").add(c),r.isMarker=!0)},t.drawRectangle=function(t,e){var n=t.symbolHeight,r=t.options.squareSymbol;e.legendSymbol=this.chart.renderer.rect(r?(t.symbolWidth-n)/2:0,t.baseline-n+1,r?n:t.symbolWidth,n,i(t.options.symbolRadius,n/2)).addClass("highcharts-point").attr({zIndex:3}).add(e.legendGroup)}}(e||(e={})),e})),e(n,"Core/Series/SeriesDefaults.js",[n["Core/Color/Palette.js"]],(function(t){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{enabledThreshold:2,lineColor:t.backgroundColor,lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:t.neutralColor20,lineColor:t.neutralColor100,lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",defer:!0,formatter:function(){var t=this.series.chart.numberFormatter;return"number"!==typeof this.y?"":t(this.y,-1)},padding:5,style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:50},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}})),e(n,"Core/Series/Series.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/DefaultOptions.js"],n["Core/Foundation.js"],n["Core/Globals.js"],n["Core/Legend/LegendSymbol.js"],n["Core/Color/Palette.js"],n["Core/Series/Point.js"],n["Core/Series/SeriesDefaults.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s,o,a,c,l,h){var u=t.animObject,d=t.setAnimation,p=e.defaultOptions,f=n.registerEventOptions,g=i.hasTouch,m=i.svg,y=i.win,v=c.seriesTypes,b=h.addEvent,w=h.arrayMax,_=h.arrayMin,x=h.clamp,T=h.cleanRecursively,S=h.correctFloat,C=h.defined,k=h.erase,O=h.error,I=h.extend,E=h.find,A=h.fireEvent,P=h.getNestedProperty,N=h.isArray,j=h.isNumber,R=h.isString,M=h.merge,D=h.objectEach,L=h.pick,F=h.removeEvent,U=h.splat,B=h.syncTimeout;return t=function(){function t(){this.zones=this.yAxis=this.xAxis=this.userOptions=this.tooltipOptions=this.processedYData=this.processedXData=this.points=this.options=this.linkedSeries=this.index=this.eventsToUnbind=this.eventOptions=this.data=this.chart=this._i=void 0}return t.prototype.init=function(t,e){A(this,"init",{options:e});var n=this,i=t.series;this.eventsToUnbind=[],n.chart=t,n.options=n.setOptions(e),e=n.options,n.linkedSeries=[],n.bindAxes(),I(n,{name:e.name,state:"",visible:!1!==e.visible,selected:!0===e.selected}),f(this,e);var r,s=e.events;(s&&s.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)&&(t.runTrackerClick=!0),n.getColor(),n.getSymbol(),n.parallelArrays.forEach((function(t){n[t+"Data"]||(n[t+"Data"]=[])})),n.isCartesian&&(t.hasCartesianSeries=!0),i.length&&(r=i[i.length-1]),n._i=L(r&&r._i,-1)+1,n.opacity=n.options.opacity,t.orderSeries(this.insert(i)),e.dataSorting&&e.dataSorting.enabled?n.setDataSortingOptions():n.points||n.data||n.setData(e.data,!1),A(this,"afterInit")},t.prototype.is=function(t){return v[t]&&this instanceof v[t]},t.prototype.insert=function(t){var e,n=this.options.index;if(j(n)){for(e=t.length;e--;)if(n>=L(t[e].options.index,t[e]._i)){t.splice(e+1,0,this);break}-1===e&&t.unshift(this),e+=1}else t.push(this);return L(e,t.length-1)},t.prototype.bindAxes=function(){var t,e=this,n=e.options,i=e.chart;A(this,"bindAxes",null,(function(){(e.axisTypes||[]).forEach((function(r){var s=0;i[r].forEach((function(i){t=i.options,(n[r]===s&&!t.isInternal||"undefined"!==typeof n[r]&&n[r]===t.id||"undefined"===typeof n[r]&&0===t.index)&&(e.insert(i.series),e[r]=i,i.isDirty=!0),t.isInternal||s++})),e[r]||e.optionalAxis===r||O(18,!0,i)}))})),A(this,"afterBindAxes")},t.prototype.updateParallelArrays=function(t,e){var n=t.series,i=arguments,r=j(e)?function(i){var r="y"===i&&n.toYData?n.toYData(t):t[i];n[i+"Data"][e]=r}:function(t){Array.prototype[e].apply(n[t+"Data"],Array.prototype.slice.call(i,2))};n.parallelArrays.forEach(r)},t.prototype.hasData=function(){return this.visible&&"undefined"!==typeof this.dataMax&&"undefined"!==typeof this.dataMin||this.visible&&this.yData&&0<this.yData.length},t.prototype.autoIncrement=function(t){var e,n=this.options,i=n.pointIntervalUnit,r=n.relativeXValue,s=this.chart.time,o=this.xIncrement;return o=L(o,n.pointStart,0),this.pointInterval=e=L(this.pointInterval,n.pointInterval,1),r&&j(t)&&(e*=t),i&&(n=new s.Date(o),"day"===i?s.set("Date",n,s.get("Date",n)+e):"month"===i?s.set("Month",n,s.get("Month",n)+e):"year"===i&&s.set("FullYear",n,s.get("FullYear",n)+e),e=n.getTime()-o),r&&j(t)?o+e:(this.xIncrement=o+e,o)},t.prototype.setDataSortingOptions=function(){var t=this.options;I(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),C(t.pointRange)||(t.pointRange=1)},t.prototype.setOptions=function(t){var e=this.chart,n=e.options,i=n.plotOptions,r=e.userOptions||{};t=M(t),e=e.styledMode;var s={plotOptions:i,userOptions:t};A(this,"setOptions",s);var o=s.plotOptions[this.type],a=r.plotOptions||{};return this.userOptions=s.userOptions,r=M(o,i.series,r.plotOptions&&r.plotOptions[this.type],t),this.tooltipOptions=M(p.tooltip,p.plotOptions.series&&p.plotOptions.series.tooltip,p.plotOptions[this.type].tooltip,n.tooltip.userOptions,i.series&&i.series.tooltip,i[this.type].tooltip,t.tooltip),this.stickyTracking=L(t.stickyTracking,a[this.type]&&a[this.type].stickyTracking,a.series&&a.series.stickyTracking,!(!this.tooltipOptions.shared||this.noSharedTooltip)||r.stickyTracking),null===o.marker&&delete r.marker,this.zoneAxis=r.zoneAxis,i=this.zones=(r.zones||[]).slice(),!r.negativeColor&&!r.negativeFillColor||r.zones||(n={value:r[this.zoneAxis+"Threshold"]||r.threshold||0,className:"highcharts-negative"},e||(n.color=r.negativeColor,n.fillColor=r.negativeFillColor),i.push(n)),i.length&&C(i[i.length-1].value)&&i.push(e?{}:{color:this.color,fillColor:this.fillColor}),A(this,"afterSetOptions",{options:r}),r},t.prototype.getName=function(){return L(this.options.name,"Series "+(this.index+1))},t.prototype.getCyclic=function(t,e,n){var i=this.chart,r=this.userOptions,s=t+"Index",o=t+"Counter",a=n?n.length:L(i.options.chart[t+"Count"],i[t+"Count"]);if(!e){var c=L(r[s],r["_"+s]);C(c)||(i.series.length||(i[o]=0),r["_"+s]=c=i[o]%a,i[o]+=1),n&&(e=n[c])}"undefined"!==typeof c&&(this[s]=c),this[t]=e},t.prototype.getColor=function(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color=s.neutralColor20:this.getCyclic("color",this.options.color||p.plotOptions[this.type].color,this.chart.options.colors)},t.prototype.getPointsCollection=function(){return(this.hasGroupedData?this.points:this.data)||[]},t.prototype.getSymbol=function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},t.prototype.findPointIndex=function(t,e){var n,i,r=t.id,s=t.x,a=this.points,c=this.options.dataSorting;if(r)c=this.chart.get(r),c instanceof o&&(n=c);else if((this.linkedParent||this.enabledDataSorting||this.options.relativeXValue)&&(n=function(e){return!e.touched&&e.index===t.index},c&&c.matchByName?n=function(e){return!e.touched&&e.name===t.name}:this.options.relativeXValue&&(n=function(e){return!e.touched&&e.options.x===t.x}),n=E(a,n),!n))return;if(n){var l=n&&n.index;"undefined"!==typeof l&&(i=!0)}return"undefined"===typeof l&&j(s)&&(l=this.xData.indexOf(s,e)),-1!==l&&"undefined"!==typeof l&&this.cropped&&(l=l>=this.cropStart?l-this.cropStart:l),!i&&j(l)&&a[l]&&a[l].touched&&(l=void 0),l},t.prototype.updateData=function(t,e){var n,i,r,s=this.options,o=s.dataSorting,a=this.points,c=[],l=this.requireSorting,h=t.length===a.length,u=!0;if(this.xIncrement=null,t.forEach((function(t,e){var i=C(t)&&this.pointClass.prototype.optionsToObject.call({series:this},t)||{},u=i.x;i.id||j(u)?(i=this.findPointIndex(i,r),-1===i||"undefined"===typeof i?c.push(t):a[i]&&t!==s.data[i]?(a[i].update(t,!1,null,!1),a[i].touched=!0,l&&(r=i+1)):a[i]&&(a[i].touched=!0),(!h||e!==i||o&&o.enabled||this.hasDerivedData)&&(n=!0)):c.push(t)}),this),n)for(t=a.length;t--;)(i=a[t])&&!i.touched&&i.remove&&i.remove(!1,e);else!h||o&&o.enabled?u=!1:(t.forEach((function(t,e){t!==a[e].y&&a[e].update&&a[e].update(t,!1,null,!1)})),c.length=0);return a.forEach((function(t){t&&(t.touched=!1)})),!!u&&(c.forEach((function(t){this.addPoint(t,!1,null,null,!1)}),this),null===this.xIncrement&&this.xData&&this.xData.length&&(this.xIncrement=w(this.xData),this.autoIncrement()),!0)},t.prototype.setData=function(t,e,n,i){var r=this,s=r.points,o=s&&s.length||0,a=r.options,c=r.chart,l=a.dataSorting,h=r.xAxis,u=a.turboThreshold,d=this.xData,p=this.yData,f=r.pointArrayMap;f=f&&f.length;var g,m=a.keys,y=0,v=1,b=null;t=t||[];var w=t.length;if(e=L(e,!0),l&&l.enabled&&(t=this.sortData(t)),!1!==i&&w&&o&&!r.cropped&&!r.hasGroupedData&&r.visible&&!r.isSeriesBoosting&&(g=this.updateData(t,n)),!g){if(r.xIncrement=null,r.colorCounter=0,this.parallelArrays.forEach((function(t){r[t+"Data"].length=0})),u&&w>u)if(b=r.getFirstValidPoint(t),j(b))for(n=0;n<w;n++)d[n]=this.autoIncrement(),p[n]=t[n];else if(N(b))if(f)for(n=0;n<w;n++)i=t[n],d[n]=i[0],p[n]=i.slice(1,f+1);else for(m&&(y=m.indexOf("x"),v=m.indexOf("y"),y=0<=y?y:0,v=0<=v?v:1),n=0;n<w;n++)i=t[n],d[n]=i[y],p[n]=i[v];else O(12,!1,c);else for(n=0;n<w;n++)"undefined"!==typeof t[n]&&(i={series:r},r.pointClass.prototype.applyOptions.apply(i,[t[n]]),r.updateParallelArrays(i,n));for(p&&R(p[0])&&O(14,!0,c),r.data=[],r.options.data=r.userOptions.data=t,n=o;n--;)s[n]&&s[n].destroy&&s[n].destroy();h&&(h.minRange=h.userMinRange),r.isDirty=c.isDirtyBox=!0,r.isDirtyData=!!s,n=!1}"point"===a.legendType&&(this.processData(),this.generatePoints()),e&&c.redraw(n)},t.prototype.sortData=function(t){var e=this,n=e.options.dataSorting.sortKey||"y",i=function(t,e){return C(e)&&t.pointClass.prototype.optionsToObject.call({series:t},e)||{}};return t.forEach((function(n,r){t[r]=i(e,n),t[r].index=r}),this),t.concat().sort((function(t,e){return t=P(n,t),e=P(n,e),e<t?-1:e>t?1:0})).forEach((function(t,e){t.x=e}),this),e.linkedSeries&&e.linkedSeries.forEach((function(e){var n=e.options,r=n.data;n.dataSorting&&n.dataSorting.enabled||!r||(r.forEach((function(n,s){r[s]=i(e,n),t[s]&&(r[s].x=t[s].x,r[s].index=s)})),e.setData(r,!1))})),t},t.prototype.getProcessedData=function(t){var e=this.xAxis,n=this.options,i=n.cropThreshold,r=t||this.getExtremesFromAll||n.getExtremesFromAll,s=this.isCartesian;t=e&&e.val2lin,n=!(!e||!e.logarithmic);var o=0,a=this.xData,c=this.yData,l=this.requireSorting,h=!1,u=a.length;if(e){h=e.getExtremes();var d=h.min,p=h.max;h=e.categories&&!e.names.length}if(s&&this.sorted&&!r&&(!i||u>i||this.forceCrop))if(a[u-1]<d||a[0]>p)a=[],c=[];else if(this.yData&&(a[0]<d||a[u-1]>p)){var f=this.cropData(this.xData,this.yData,d,p);a=f.xData,c=f.yData,o=f.start,f=!0}for(i=a.length||1;--i;)if(e=n?t(a[i])-t(a[i-1]):a[i]-a[i-1],0<e&&("undefined"===typeof g||e<g))var g=e;else 0>e&&l&&!h&&(O(15,!1,this.chart),l=!1);return{xData:a,yData:c,cropped:f,cropStart:o,closestPointRange:g}},t.prototype.processData=function(t){var e=this.xAxis;if(this.isCartesian&&!this.isDirty&&!e.isDirty&&!this.yAxis.isDirty&&!t)return!1;t=this.getProcessedData(),this.cropped=t.cropped,this.cropStart=t.cropStart,this.processedXData=t.xData,this.processedYData=t.yData,this.closestPointRange=this.basePointRange=t.closestPointRange},t.prototype.cropData=function(t,e,n,i,r){var s,o=t.length,a=0,c=o;for(r=L(r,this.cropShoulder),s=0;s<o;s++)if(t[s]>=n){a=Math.max(0,s-r);break}for(n=s;n<o;n++)if(t[n]>i){c=n+r;break}return{xData:t.slice(a,c),yData:e.slice(a,c),start:a,end:c}},t.prototype.generatePoints=function(){var t=this.options,e=t.data,n=this.processedXData,i=this.processedYData,r=this.pointClass,s=n.length,o=this.cropStart||0,a=this.hasGroupedData,c=t.keys,l=[];t=t.dataGrouping&&t.dataGrouping.groupAll?o:0;var h,u,d=this.data;if(!d&&!a){var p=[];p.length=e.length,d=this.data=p}for(c&&a&&(this.options.keys=!1),u=0;u<s;u++){if(p=o+u,a){var f=(new r).init(this,[n[u]].concat(U(i[u])));f.dataGroup=this.groupMap[t+u],f.dataGroup.options&&(f.options=f.dataGroup.options,I(f,f.dataGroup.options),delete f.dataLabels)}else(f=d[p])||"undefined"===typeof e[p]||(d[p]=f=(new r).init(this,e[p],n[u]));f&&(f.index=a?t+u:p,l[u]=f)}if(this.options.keys=c,d&&(s!==(h=d.length)||a))for(u=0;u<h;u++)u!==o||a||(u+=s),d[u]&&(d[u].destroyElements(),d[u].plotX=void 0);this.data=d,this.points=l,A(this,"afterGeneratePoints")},t.prototype.getXExtremes=function(t){return{min:_(t),max:w(t)}},t.prototype.getExtremes=function(t,e){var n=this.xAxis,i=this.yAxis,r=this.processedXData||this.xData,s=[],o=this.requireSorting?this.cropShoulder:0;i=!!i&&i.positiveValuesOnly;var a,c=0,l=0,h=0;t=t||this.stackedYData||this.processedYData||[];var u=t.length;if(n){var d=n.getExtremes();c=d.min,l=d.max}for(a=0;a<u;a++){var p=r[a];d=t[a];var f=(j(d)||N(d))&&(d.length||0<d||!i);if(p=e||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!n||(r[a+o]||p)>=c&&(r[a-o]||p)<=l,f&&p)if(f=d.length)for(;f--;)j(d[f])&&(s[h++]=d[f]);else s[h++]=d}return t={dataMin:_(s),dataMax:w(s)},A(this,"afterGetExtremes",{dataExtremes:t}),t},t.prototype.applyExtremes=function(){var t=this.getExtremes();return this.dataMin=t.dataMin,this.dataMax=t.dataMax,t},t.prototype.getFirstValidPoint=function(t){for(var e=t.length,n=0,i=null;null===i&&n<e;)i=t[n],n++;return i},t.prototype.translate=function(){this.processedXData||this.processData(),this.generatePoints();var t,e,n=this.options,i=n.stacking,r=this.xAxis,s=r.categories,o=this.enabledDataSorting,a=this.yAxis,c=this.points,l=c.length,h=!!this.modifyValue,u=this.pointPlacementToXValue(),d=!!u,p=n.threshold,f=n.startFromThreshold?p:0,g=this.zoneAxis||"y",m=Number.MAX_VALUE;for(t=0;t<l;t++){var y=c[t],v=y.x,b=void 0,w=void 0,_=y.y,T=y.low,k=i&&a.stacking&&a.stacking.stacks[(this.negStacks&&_<(f?0:p)?"-":"")+this.stackKey];if((a.positiveValuesOnly&&!a.validatePositiveValue(_)||r.positiveValuesOnly&&!r.validatePositiveValue(v))&&(y.isNull=!0),y.plotX=e=S(x(r.translate(v,0,0,0,1,u,"flags"===this.type),-1e5,1e5)),i&&this.visible&&k&&k[v]){var O=this.getStackIndicator(O,v,this.index);y.isNull||(b=k[v],w=b.points[O.key])}if(N(w)&&(T=w[0],_=w[1],T===f&&O.key===k[v].base&&(T=L(j(p)&&p,a.min)),a.positiveValuesOnly&&0>=T&&(T=null),y.total=y.stackTotal=b.total,y.percentage=b.total&&y.y/b.total*100,y.stackY=_,this.irregularWidths||b.setOffset(this.pointXOffset||0,this.barW||0)),y.yBottom=C(T)?x(a.translate(T,0,1,0,1),-1e5,1e5):null,h&&(_=this.modifyValue(_,y)),y.plotY=void 0,j(_)&&(b=a.translate(_,!1,!0,!1,!0),"undefined"!==typeof b&&(y.plotY=x(b,-1e5,1e5))),y.isInside=this.isPointInside(y),y.clientX=d?S(r.translate(v,0,0,0,1,u)):e,y.negative=y[g]<(n[g+"Threshold"]||p||0),y.category=s&&"undefined"!==typeof s[y.x]?s[y.x]:y.x,!y.isNull&&!1!==y.visible){"undefined"!==typeof I&&(m=Math.min(m,Math.abs(e-I)));var I=e}y.zone=this.zones.length&&y.getZone(),!y.graphic&&this.group&&o&&(y.isNew=!0)}this.closestPointRangePx=m,A(this,"afterTranslate")},t.prototype.getValidPoints=function(t,e,n){var i=this.chart;return(t||this.points||[]).filter((function(t){return!(e&&!i.isInsidePlot(t.plotX,t.plotY,{inverted:i.inverted}))&&(!1!==t.visible&&(n||!t.isNull))}))},t.prototype.getClipBox=function(t,e){var n=this.options,i=this.chart,r=i.inverted,s=this.xAxis,o=s&&this.yAxis,a=i.options.chart.scrollablePlotArea||{};return t&&!1===n.clip&&o?t=r?{y:-i.chartWidth+o.len+o.pos,height:i.chartWidth,width:i.chartHeight,x:-i.chartHeight+s.len+s.pos}:{y:-o.pos,height:i.chartHeight,width:i.chartWidth,x:-s.pos}:(t=this.clipBox||i.clipBox,e&&(t.width=i.plotSizeX,t.x=(i.scrollablePixelsX||0)*(a.scrollPositionX||0))),e?{width:t.width,x:t.x}:t},t.prototype.getSharedClipKey=function(t){if(this.sharedClipKey)return this.sharedClipKey;var e=[t&&t.duration,t&&t.easing,t&&t.defer,this.getClipBox(t).height,this.options.xAxis,this.options.yAxis].join();return(!1!==this.options.clip||t)&&(this.sharedClipKey=e),e},t.prototype.setClip=function(t){var e=this.chart,n=this.options,i=e.renderer,r=e.inverted,s=this.clipBox,o=this.getClipBox(t),a=this.getSharedClipKey(t),c=e.sharedClips[a],l=e.sharedClips[a+"m"];t&&(o.width=0,r&&(o.x=e.plotHeight+(!1!==n.clip?0:e.plotTop))),c?e.hasLoaded||c.attr(o):(t&&(e.sharedClips[a+"m"]=l=i.clipRect(r?(e.plotSizeX||0)+99:-99,r?-e.plotLeft:-e.plotTop,99,r?e.chartWidth:e.chartHeight)),e.sharedClips[a]=c=i.clipRect(o),c.count={length:0}),t&&!c.count[this.index]&&(c.count[this.index]=!0,c.count.length+=1),(!1!==n.clip||t)&&(this.group.clip(t||s?c:e.clipRect),this.markerGroup.clip(l)),t||(c.count[this.index]&&(delete c.count[this.index],--c.count.length),0===c.count.length&&(s||(e.sharedClips[a]=c.destroy()),l&&(e.sharedClips[a+"m"]=l.destroy())))},t.prototype.animate=function(t){var e=this.chart,n=u(this.options.animation),i=this.sharedClipKey;if(t)this.setClip(n);else if(i){t=e.sharedClips[i],i=e.sharedClips[i+"m"];var r=this.getClipBox(n,!0);t&&t.animate(r,n),i&&i.animate({width:r.width+99,x:r.x-(e.inverted?0:99)},n)}},t.prototype.afterAnimate=function(){this.setClip(),A(this,"afterAnimate"),this.finishedAnimating=!0},t.prototype.drawPoints=function(){var t,e,n=this.points,i=this.chart,r=this.options.marker,s=this[this.specialGroup]||this.markerGroup,o=this.xAxis,a=L(r.enabled,!(o&&!o.isRadial)||null,this.closestPointRangePx>=r.enabledThreshold*r.radius);if(!1!==r.enabled||this._hasPointMarkers)for(t=0;t<n.length;t++){var c=n[t],l=(e=c.graphic)?"animate":"attr",h=c.marker||{},u=!!c.marker;if((a&&"undefined"===typeof h.enabled||h.enabled)&&!c.isNull&&!1!==c.visible){var d=L(h.symbol,this.symbol,"rect"),p=this.markerAttribs(c,c.selected&&"select");this.enabledDataSorting&&(c.startXPos=o.reversed?-(p.width||0):o.width);var f=!1!==c.isInside;e?e[f?"show":"hide"](f).animate(p):f&&(0<(p.width||0)||c.hasImage)&&(c.graphic=e=i.renderer.symbol(d,p.x,p.y,p.width,p.height,u?h:r).add(s),this.enabledDataSorting&&i.hasRendered&&(e.attr({x:c.startXPos}),l="animate")),e&&"animate"===l&&e[f?"show":"hide"](f).animate(p),e&&!i.styledMode&&e[l](this.pointAttribs(c,c.selected&&"select")),e&&e.addClass(c.getClassName(),!0)}else e&&(c.graphic=e.destroy())}},t.prototype.markerAttribs=function(t,e){var n=this.options,i=n.marker,r=t.marker||{},s=r.symbol||i.symbol,o=L(r.radius,i.radius);return e&&(i=i.states[e],e=r.states&&r.states[e],o=L(e&&e.radius,i&&i.radius,o+(i&&i.radiusPlus||0))),t.hasImage=s&&0===s.indexOf("url"),t.hasImage&&(o=0),t={x:n.crisp?Math.floor(t.plotX-o):t.plotX-o,y:t.plotY-o},o&&(t.width=t.height=2*o),t},t.prototype.pointAttribs=function(t,e){var n=this.options.marker,i=t&&t.options,r=i&&i.marker||{},s=i&&i.color,o=t&&t.color,a=t&&t.zone&&t.zone.color,c=this.color;return t=L(r.lineWidth,n.lineWidth),i=1,c=s||a||o||c,s=r.fillColor||n.fillColor||c,o=r.lineColor||n.lineColor||c,e=e||"normal",n=n.states[e],e=r.states&&r.states[e]||{},t=L(e.lineWidth,n.lineWidth,t+L(e.lineWidthPlus,n.lineWidthPlus,0)),s=e.fillColor||n.fillColor||s,o=e.lineColor||n.lineColor||o,i=L(e.opacity,n.opacity,i),{stroke:o,"stroke-width":t,fill:s,opacity:i}},t.prototype.destroy=function(t){var e,n,i,r,s=this,o=s.chart,a=/AppleWebKit\/533/.test(y.navigator.userAgent),c=s.data||[];for(A(s,"destroy"),this.removeEvents(t),(s.axisTypes||[]).forEach((function(t){(r=s[t])&&r.series&&(k(r.series,s),r.isDirty=r.forceRedraw=!0)})),s.legendItem&&s.chart.legend.destroyItem(s),n=c.length;n--;)(i=c[n])&&i.destroy&&i.destroy();s.clips&&s.clips.forEach((function(t){return t.destroy()})),h.clearTimeout(s.animationTimeout),D(s,(function(t,n){t instanceof l&&!t.survive&&(e=a&&"group"===n?"hide":"destroy",t[e]())})),o.hoverSeries===s&&(o.hoverSeries=void 0),k(o.series,s),o.orderSeries(),D(s,(function(e,n){t&&"hcEvents"===n||delete s[n]}))},t.prototype.applyZones=function(){var t,e,n,i,r,s,o,a,c=this,l=this.chart,h=l.renderer,u=this.zones,d=this.clips||[],p=this.graph,f=this.area,g=Math.max(l.chartWidth,l.chartHeight),m=this[(this.zoneAxis||"y")+"Axis"],y=l.inverted,v=!1;if(u.length&&(p||f)&&m&&"undefined"!==typeof m.min){var b=m.reversed,w=m.horiz;p&&!this.showLine&&p.hide(),f&&f.hide();var _=m.getExtremes();u.forEach((function(u,T){t=b?w?l.plotWidth:0:w?0:m.toPixels(_.min)||0,t=x(L(e,t),0,g),e=x(Math.round(m.toPixels(L(u.value,_.max),!0)||0),0,g),v&&(t=e=m.toPixels(_.max)),i=Math.abs(t-e),r=Math.min(t,e),s=Math.max(t,e),m.isXAxis?(n={x:y?s:r,y:0,width:i,height:g},w||(n.x=l.plotHeight-n.x)):(n={x:0,y:y?s:r,width:g,height:i},w&&(n.y=l.plotWidth-n.y)),y&&h.isVML&&(n=m.isXAxis?{x:0,y:b?r:s,height:n.width,width:l.chartWidth}:{x:n.y-l.plotLeft-l.spacingBox.x,y:0,width:n.height,height:l.chartHeight}),d[T]?d[T].animate(n):d[T]=h.clipRect(n),o=c["zone-area-"+T],a=c["zone-graph-"+T],p&&a&&a.clip(d[T]),f&&o&&o.clip(d[T]),v=u.value>_.max,c.resetZones&&0===e&&(e=void 0)})),this.clips=d}else c.visible&&(p&&p.show(!0),f&&f.show(!0))},t.prototype.invertGroups=function(t){function e(){["group","markerGroup"].forEach((function(e){n[e]&&(i.renderer.isVML&&n[e].attr({width:n.yAxis.len,height:n.xAxis.len}),n[e].width=n.yAxis.len,n[e].height=n.xAxis.len,n[e].invert(!n.isRadialSeries&&t))}))}var n=this,i=n.chart;n.xAxis&&(n.eventsToUnbind.push(b(i,"resize",e)),e(),n.invertGroups=e)},t.prototype.plotGroup=function(t,e,n,i,r){var s=this[t],o=!s;return n={visibility:n,zIndex:i||.1},"undefined"===typeof this.opacity||this.chart.styledMode||"inactive"===this.state||(n.opacity=this.opacity),o&&(this[t]=s=this.chart.renderer.g().add(r)),s.addClass("highcharts-"+e+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(C(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(s.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),s.attr(n)[o?"attr":"animate"](this.getPlotBox()),s},t.prototype.getPlotBox=function(){var t=this.chart,e=this.xAxis,n=this.yAxis;return t.inverted&&(e=n,n=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:n?n.top:t.plotTop,scaleX:1,scaleY:1}},t.prototype.removeEvents=function(t){t||F(this),this.eventsToUnbind.length&&(this.eventsToUnbind.forEach((function(t){t()})),this.eventsToUnbind.length=0)},t.prototype.render=function(){var t=this,e=t.chart,n=t.options,i=u(n.animation),r=t.visible?"inherit":"hidden",s=n.zIndex,o=t.hasRendered,a=e.seriesGroup,c=e.inverted,l=!t.finishedAnimating&&e.renderer.isSVG&&i.duration;A(this,"render");var h=t.plotGroup("group","series",r,s,a);t.markerGroup=t.plotGroup("markerGroup","markers",r,s,a),l&&t.animate&&t.animate(!0),h.inverted=!!L(t.invertible,t.isCartesian)&&c,t.drawGraph&&(t.drawGraph(),t.applyZones()),t.visible&&t.drawPoints(),t.drawDataLabels&&t.drawDataLabels(),t.redrawPoints&&t.redrawPoints(),t.drawTracker&&!1!==t.options.enableMouseTracking&&t.drawTracker(),t.invertGroups(c),!1===n.clip||t.sharedClipKey||o||h.clip(e.clipRect),l&&t.animate&&t.animate(),o||(l&&i.defer&&(l+=i.defer),t.animationTimeout=B((function(){t.afterAnimate()}),l||0)),t.isDirty=!1,t.hasRendered=!0,A(t,"afterRender")},t.prototype.redraw=function(){var t=this.chart,e=this.isDirty||this.isDirtyData,n=this.group,i=this.xAxis,r=this.yAxis;n&&(t.inverted&&n.attr({width:t.plotWidth,height:t.plotHeight}),n.animate({translateX:L(i&&i.left,t.plotLeft),translateY:L(r&&r.top,t.plotTop)})),this.translate(),this.render(),e&&delete this.kdTree},t.prototype.searchPoint=function(t,e){var n=this.xAxis,i=this.yAxis,r=this.chart.inverted;return this.searchKDTree({clientX:r?n.len-t.chartY+n.pos:t.chartX-n.pos,plotY:r?i.len-t.chartX+i.pos:t.chartY-i.pos},e,t)},t.prototype.buildKDTree=function(t){function e(t,i,r){var s=t&&t.length;if(s){var o=n.kdAxisArray[i%r];return t.sort((function(t,e){return t[o]-e[o]})),s=Math.floor(s/2),{point:t[s],left:e(t.slice(0,s),i+1,r),right:e(t.slice(s+1),i+1,r)}}}this.buildingKdTree=!0;var n=this,i=-1<n.options.findNearestPointBy.indexOf("y")?2:1;delete n.kdTree,B((function(){n.kdTree=e(n.getValidPoints(null,!n.directTouch),i,i),n.buildingKdTree=!1}),n.options.kdNow||t&&"touchstart"===t.type?0:1)},t.prototype.searchKDTree=function(t,e,n){function i(t,e,n,c){var l=e.point,h=r.kdAxisArray[n%c],u=l,d=C(t[s])&&C(l[s])?Math.pow(t[s]-l[s],2):null,p=C(t[o])&&C(l[o])?Math.pow(t[o]-l[o],2):null;return p=(d||0)+(p||0),l.dist=C(p)?Math.sqrt(p):Number.MAX_VALUE,l.distX=C(d)?Math.sqrt(d):Number.MAX_VALUE,h=t[h]-l[h],p=0>h?"left":"right",d=0>h?"right":"left",e[p]&&(p=i(t,e[p],n+1,c),u=p[a]<u[a]?p:l),e[d]&&Math.sqrt(h*h)<u[a]&&(t=i(t,e[d],n+1,c),u=t[a]<u[a]?t:u),u}var r=this,s=this.kdAxisArray[0],o=this.kdAxisArray[1],a=e?"distX":"dist";if(e=-1<r.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree(n),this.kdTree)return i(t,this.kdTree,e,e)},t.prototype.pointPlacementToXValue=function(){var t=this.options,e=t.pointRange,n=this.xAxis;return t=t.pointPlacement,"between"===t&&(t=n.reversed?-.5:.5),j(t)?t*(e||n.pointRange):0},t.prototype.isPointInside=function(t){return"undefined"!==typeof t.plotY&&"undefined"!==typeof t.plotX&&0<=t.plotY&&t.plotY<=this.yAxis.len&&0<=t.plotX&&t.plotX<=this.xAxis.len},t.prototype.drawTracker=function(){var t=this,e=t.options,n=e.trackByArea,i=[].concat(n?t.areaPath:t.graphPath),r=t.chart,s=r.pointer,o=r.renderer,a=r.options.tooltip.snap,c=t.tracker,l=function(e){r.hoverSeries!==t&&t.onMouseOver()},h="rgba(192,192,192,"+(m?1e-4:.002)+")";c?c.attr({d:i}):t.graph&&(t.tracker=o.path(i).attr({visibility:t.visible?"visible":"hidden",zIndex:2}).addClass(n?"highcharts-tracker-area":"highcharts-tracker-line").add(t.group),r.styledMode||t.tracker.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:h,fill:n?h:"none","stroke-width":t.graph.strokeWidth()+(n?0:2*a)}),[t.tracker,t.markerGroup,t.dataLabelsGroup].forEach((function(t){t&&(t.addClass("highcharts-tracker").on("mouseover",l).on("mouseout",(function(t){s.onTrackerMouseOut(t)})),e.cursor&&!r.styledMode&&t.css({cursor:e.cursor}),g)&&t.on("touchstart",l)}))),A(this,"afterDrawTracker")},t.prototype.addPoint=function(t,e,n,i,r){var s=this.options,o=this.data,a=this.chart,c=this.xAxis;c=c&&c.hasNames&&c.names;var l,h=s.data,u=this.xData;e=L(e,!0);var d={series:this};this.pointClass.prototype.applyOptions.apply(d,[t]);var p=d.x,f=u.length;if(this.requireSorting&&p<u[f-1])for(l=!0;f&&u[f-1]>p;)f--;this.updateParallelArrays(d,"splice",f,0,0),this.updateParallelArrays(d,f),c&&d.name&&(c[p]=d.name),h.splice(f,0,t),l&&(this.data.splice(f,0,null),this.processData()),"point"===s.legendType&&this.generatePoints(),n&&(o[0]&&o[0].remove?o[0].remove(!1):(o.shift(),this.updateParallelArrays(d,"shift"),h.shift())),!1!==r&&A(this,"addPoint",{point:d}),this.isDirtyData=this.isDirty=!0,e&&a.redraw(i)},t.prototype.removePoint=function(t,e,n){var i=this,r=i.data,s=r[t],o=i.points,a=i.chart,c=function(){o&&o.length===r.length&&o.splice(t,1),r.splice(t,1),i.options.data.splice(t,1),i.updateParallelArrays(s||{series:i},"splice",t,1),s&&s.destroy(),i.isDirty=!0,i.isDirtyData=!0,e&&a.redraw()};d(n,a),e=L(e,!0),s?s.firePointEvent("remove",null,c):c()},t.prototype.remove=function(t,e,n,i){function r(){s.destroy(i),o.isDirtyLegend=o.isDirtyBox=!0,o.linkSeries(),L(t,!0)&&o.redraw(e)}var s=this,o=s.chart;!1!==n?A(s,"remove",null,r):r()},t.prototype.update=function(t,e){t=T(t,this.userOptions),A(this,"update",{options:t});var n,i=this,r=i.chart,s=i.userOptions,o=i.initialType||i.type,a=r.options.plotOptions,c=v[o].prototype,l=i.finishedAnimating&&{animation:!1},h={},u=["eventOptions","navigatorSeries","baseSeries"],d=t.type||s.type||r.options.chart.type,p=!(this.hasDerivedData||d&&d!==this.type||"undefined"!==typeof t.pointStart||"undefined"!==typeof t.pointInterval||"undefined"!==typeof t.relativeXValue||i.hasOptionChanged("dataGrouping")||i.hasOptionChanged("pointStart")||i.hasOptionChanged("pointInterval")||i.hasOptionChanged("pointIntervalUnit")||i.hasOptionChanged("keys"));if(d=d||o,p&&(u.push("data","isDirtyData","points","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","_hasPointLabels","clips","nodes","layout","mapMap","mapData","minY","maxY","minX","maxX"),!1!==t.visible&&u.push("area","graph"),i.parallelArrays.forEach((function(t){u.push(t+"Data")})),t.data&&(t.dataSorting&&I(i.options.dataSorting,t.dataSorting),this.setData(t.data,!1))),t=M(s,l,{index:"undefined"===typeof s.index?i.index:s.index,pointStart:L(a&&a.series&&a.series.pointStart,s.pointStart,i.xData[0])},!p&&{data:i.options.data},t),p&&t.data&&(t.data=i.options.data),u=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(u),u.forEach((function(t){u[t]=i[t],delete i[t]})),a=!1,v[d]){if(a=d!==i.type,i.remove(!1,!1,!1,!0),a)if(Object.setPrototypeOf)Object.setPrototypeOf(i,v[d].prototype);else{for(n in l=Object.hasOwnProperty.call(i,"hcEvents")&&i.hcEvents,c)i[n]=void 0;I(i,v[d].prototype),l?i.hcEvents=l:delete i.hcEvents}}else O(17,!0,r,{missingModuleFor:d});if(u.forEach((function(t){i[t]=u[t]})),i.init(r,t),p&&this.points){var f=i.options;!1===f.visible?(h.graphic=1,h.dataLabel=1):i._hasPointLabels||(t=f.marker,c=f.dataLabels,!t||!1!==t.enabled&&(s.marker&&s.marker.symbol)===t.symbol||(h.graphic=1),c&&!1===c.enabled&&(h.dataLabel=1)),this.points.forEach((function(t){t&&t.series&&(t.resolveColor(),Object.keys(h).length&&t.destroyElements(h),!1===f.showInLegend&&t.legendItem&&r.legend.destroyItem(t))}),this)}i.initialType=o,r.linkSeries(),a&&i.linkedSeries.length&&(i.isDirtyData=!0),A(this,"afterUpdate"),L(e,!0)&&r.redraw(!!p&&void 0)},t.prototype.setName=function(t){this.name=this.options.name=this.userOptions.name=t,this.chart.isDirtyLegend=!0},t.prototype.hasOptionChanged=function(t){var e=this.options[t],n=this.chart.options.plotOptions,i=this.userOptions[t];return i?e!==i:e!==L(n&&n[this.type]&&n[this.type][t],n&&n.series&&n.series[t],e)},t.prototype.onMouseOver=function(){var t=this.chart,e=t.hoverSeries;t.pointer.setHoverChartIndex(),e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&A(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},t.prototype.onMouseOut=function(){var t=this.options,e=this.chart,n=e.tooltip,i=e.hoverPoint;e.hoverSeries=null,i&&i.onMouseOut(),this&&t.events.mouseOut&&A(this,"mouseOut"),!n||this.stickyTracking||n.shared&&!this.noSharedTooltip||n.hide(),e.series.forEach((function(t){t.setState("",!0)}))},t.prototype.setState=function(t,e){var n=this,i=n.options,r=n.graph,s=i.inactiveOtherPoints,o=i.states,a=L(o[t||"normal"]&&o[t||"normal"].animation,n.chart.options.chart.animation),c=i.lineWidth,l=0,h=i.opacity;if(t=t||"",n.state!==t&&([n.group,n.markerGroup,n.dataLabelsGroup].forEach((function(e){e&&(n.state&&e.removeClass("highcharts-series-"+n.state),t&&e.addClass("highcharts-series-"+t))})),n.state=t,!n.chart.styledMode)){if(o[t]&&!1===o[t].enabled)return;if(t&&(c=o[t].lineWidth||c+(o[t].lineWidthPlus||0),h=L(o[t].opacity,h)),r&&!r.dashstyle)for(i={"stroke-width":c},r.animate(i,a);n["zone-graph-"+l];)n["zone-graph-"+l].animate(i,a),l+=1;s||[n.group,n.markerGroup,n.dataLabelsGroup,n.labelBySeries].forEach((function(t){t&&t.animate({opacity:h},a)}))}e&&s&&n.points&&n.setAllPointsToState(t||void 0)},t.prototype.setAllPointsToState=function(t){this.points.forEach((function(e){e.setState&&e.setState(t)}))},t.prototype.setVisible=function(t,e){var n=this,i=n.chart,r=n.legendItem,s=i.options.chart.ignoreHiddenSeries,o=n.visible,a=(n.visible=t=n.options.visible=n.userOptions.visible="undefined"===typeof t?!o:t)?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach((function(t){n[t]&&n[t][a]()})),i.hoverSeries!==n&&(i.hoverPoint&&i.hoverPoint.series)!==n||n.onMouseOut(),r&&i.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&i.series.forEach((function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)})),n.linkedSeries.forEach((function(e){e.setVisible(t,!1)})),s&&(i.isDirtyBox=!0),A(n,a),!1!==e&&i.redraw()},t.prototype.show=function(){this.setVisible(!0)},t.prototype.hide=function(){this.setVisible(!1)},t.prototype.select=function(t){this.selected=t=this.options.selected="undefined"===typeof t?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),A(this,t?"select":"unselect")},t.prototype.shouldShowTooltip=function(t,e,n){return void 0===n&&(n={}),n.series=this,n.visiblePlotOnly=!0,this.chart.isInsidePlot(t,e,n)},t.defaultOptions=a,t}(),I(t.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,cropShoulder:1,directTouch:!1,drawLegendSymbol:r.drawLineMarker,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:o,requireSorting:!0,sorted:!0}),c.series=t,t})),e(n,"Extensions/ScrollablePlotArea.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/Axis.js"],n["Core/Chart/Chart.js"],n["Core/Series/Series.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s){var o=t.stop,a=s.addEvent,c=s.createElement,l=s.merge,h=s.pick;a(n,"afterSetChartSize",(function(t){var n=this.options.chart.scrollablePlotArea,i=n&&n.minWidth;if(n=n&&n.minHeight,!this.renderer.forExport){if(i){if(this.scrollablePixelsX=i=Math.max(0,i-this.chartWidth)){this.scrollablePlotBox=this.renderer.scrollablePlotBox=l(this.plotBox),this.plotBox.width=this.plotWidth+=i,this.inverted?this.clipBox.height+=i:this.clipBox.width+=i;var r={1:{name:"right",value:i}}}}else n&&(this.scrollablePixelsY=i=Math.max(0,n-this.chartHeight))&&(this.scrollablePlotBox=this.renderer.scrollablePlotBox=l(this.plotBox),this.plotBox.height=this.plotHeight+=i,this.inverted?this.clipBox.width+=i:this.clipBox.height+=i,r={2:{name:"bottom",value:i}});r&&!t.skipAxes&&this.axes.forEach((function(t){r[t.side]?t.getPlotLinePath=function(){var n=r[t.side].name,i=this[n];this[n]=i-r[t.side].value;var s=e.prototype.getPlotLinePath.apply(this,arguments);return this[n]=i,s}:(t.setAxisSize(),t.setAxisTranslation())}))}})),a(n,"render",(function(){this.scrollablePixelsX||this.scrollablePixelsY?(this.setUpScrolling&&this.setUpScrolling(),this.applyFixed()):this.fixedDiv&&this.applyFixed()})),n.prototype.setUpScrolling=function(){var t=this,e={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};this.scrollablePixelsX&&(e.overflowX="auto"),this.scrollablePixelsY&&(e.overflowY="auto"),this.scrollingParent=c("div",{className:"highcharts-scrolling-parent"},{position:"relative"},this.renderTo),this.scrollingContainer=c("div",{className:"highcharts-scrolling"},e,this.scrollingParent),a(this.scrollingContainer,"scroll",(function(){t.pointer&&delete t.pointer.chartPosition})),this.innerContainer=c("div",{className:"highcharts-inner-container"},null,this.scrollingContainer),this.innerContainer.appendChild(this.container),this.setUpScrolling=null},n.prototype.moveFixedElements=function(){var t,e=this.container,n=this.fixedRenderer,i=".highcharts-contextbutton .highcharts-credits .highcharts-legend .highcharts-legend-checkbox .highcharts-navigator-series .highcharts-navigator-xaxis .highcharts-navigator-yaxis .highcharts-navigator .highcharts-reset-zoom .highcharts-drillup-button .highcharts-scrollbar .highcharts-subtitle .highcharts-title".split(" ");this.scrollablePixelsX&&!this.inverted?t=".highcharts-yaxis":this.scrollablePixelsX&&this.inverted||this.scrollablePixelsY&&!this.inverted?t=".highcharts-xaxis":this.scrollablePixelsY&&this.inverted&&(t=".highcharts-yaxis"),t&&i.push(t+":not(.highcharts-radial-axis)",t+"-labels:not(.highcharts-radial-axis-labels)"),i.forEach((function(t){[].forEach.call(e.querySelectorAll(t),(function(t){(t.namespaceURI===n.SVG_NS?n.box:n.box.parentNode).appendChild(t),t.style.pointerEvents="auto"}))}))},n.prototype.applyFixed=function(){var t=!this.fixedDiv,e=this.options.chart,n=e.scrollablePlotArea,i=r.getRendererType();t?(this.fixedDiv=c("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(e.style&&e.style.zIndex||0)+2,top:0},null,!0),this.scrollingContainer&&this.scrollingContainer.parentNode.insertBefore(this.fixedDiv,this.scrollingContainer),this.renderTo.style.overflow="visible",this.fixedRenderer=e=new i(this.fixedDiv,this.chartWidth,this.chartHeight,this.options.chart.style),this.scrollableMask=e.path().attr({fill:this.options.chart.backgroundColor||"#fff","fill-opacity":h(n.opacity,.85),zIndex:-1}).addClass("highcharts-scrollable-mask").add(),a(this,"afterShowResetZoom",this.moveFixedElements),a(this,"afterDrilldown",this.moveFixedElements),a(this,"afterLayOutTitles",this.moveFixedElements)):this.fixedRenderer.setSize(this.chartWidth,this.chartHeight),(this.scrollableDirty||t)&&(this.scrollableDirty=!1,this.moveFixedElements()),e=this.chartWidth+(this.scrollablePixelsX||0),i=this.chartHeight+(this.scrollablePixelsY||0),o(this.container),this.container.style.width=e+"px",this.container.style.height=i+"px",this.renderer.boxWrapper.attr({width:e,height:i,viewBox:[0,0,e,i].join(" ")}),this.chartBackground.attr({width:e,height:i}),this.scrollingContainer.style.height=this.chartHeight+"px",t&&(n.scrollPositionX&&(this.scrollingContainer.scrollLeft=this.scrollablePixelsX*n.scrollPositionX),n.scrollPositionY&&(this.scrollingContainer.scrollTop=this.scrollablePixelsY*n.scrollPositionY)),i=this.axisOffset,t=this.plotTop-i[0]-1,n=this.plotLeft-i[3]-1,e=this.plotTop+this.plotHeight+i[2]+1,i=this.plotLeft+this.plotWidth+i[1]+1;var s=this.plotLeft+this.plotWidth-(this.scrollablePixelsX||0),l=this.plotTop+this.plotHeight-(this.scrollablePixelsY||0);t=this.scrollablePixelsX?[["M",0,t],["L",this.plotLeft-1,t],["L",this.plotLeft-1,e],["L",0,e],["Z"],["M",s,t],["L",this.chartWidth,t],["L",this.chartWidth,e],["L",s,e],["Z"]]:this.scrollablePixelsY?[["M",n,0],["L",n,this.plotTop-1],["L",i,this.plotTop-1],["L",i,0],["Z"],["M",n,l],["L",n,this.chartHeight],["L",i,this.chartHeight],["L",i,l],["Z"]]:[["M",0,0]],"adjustHeight"!==this.redrawTrigger&&this.scrollableMask.attr({d:t})},a(e,"afterInit",(function(){this.chart.scrollableDirty=!0})),a(i,"show",(function(){this.chart.scrollableDirty=!0}))})),e(n,"Core/Axis/StackingAxis.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/Axis.js"],n["Core/Utilities.js"]],(function(t,e,n){var i,r=t.getDeferredAnimation,s=n.addEvent,o=n.destroyObjectProperties,a=n.fireEvent,c=n.isNumber,l=n.objectEach;return function(t){function e(){var t=this.stacking;if(t){var e=t.stacks;l(e,(function(t,n){o(t),e[n]=null})),t&&t.stackTotalGroup&&t.stackTotalGroup.destroy()}}function n(){this.stacking||(this.stacking=new h(this))}var i=[];t.compose=function(t){return-1===i.indexOf(t)&&(i.push(t),s(t,"init",n),s(t,"destroy",e)),t};var h=function(){function t(t){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=t}return t.prototype.buildStacks=function(){var t,e=this.axis,n=e.series,i=e.options.reversedStacks,r=n.length;if(!e.isXAxis){for(this.usePercentage=!1,t=r;t--;){var s=n[i?t:r-t-1];s.setStackedPoints(),s.setGroupedPoints()}for(t=0;t<r;t++)n[t].modifyStacks();a(e,"afterBuildStacks")}},t.prototype.cleanStacks=function(){if(!this.axis.isXAxis){if(this.oldStacks)var t=this.stacks=this.oldStacks;l(t,(function(t){l(t,(function(t){t.cumulative=t.total}))}))}},t.prototype.resetStacks=function(){var t=this,e=t.stacks;t.axis.isXAxis||l(e,(function(e){l(e,(function(n,i){c(n.touched)&&n.touched<t.stacksTouched?(n.destroy(),delete e[i]):(n.total=null,n.cumulative=null)}))}))},t.prototype.renderStackTotals=function(){var t=this.axis,e=t.chart,n=e.renderer,i=this.stacks;t=r(e,t.options.stackLabels&&t.options.stackLabels.animation||!1);var s=this.stackTotalGroup=this.stackTotalGroup||n.g("stack-labels").attr({visibility:"visible",zIndex:6,opacity:0}).add();s.translate(e.plotLeft,e.plotTop),l(i,(function(t){l(t,(function(t){t.render(s)}))})),s.animate({opacity:1},t)},t}();t.Additions=h}(i||(i={})),i})),e(n,"Extensions/Stacking.js",[n["Core/Axis/Axis.js"],n["Core/Chart/Chart.js"],n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Series/Series.js"],n["Core/Axis/StackingAxis.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s,o){var a=n.format,c=o.correctFloat,l=o.defined,h=o.destroyObjectProperties,u=o.isArray,d=o.isNumber,p=o.objectEach,f=o.pick,g=function(){function t(t,e,n,i,r){var s=t.chart.inverted;this.axis=t,this.isNegative=n,this.options=e=e||{},this.x=i,this.total=null,this.points={},this.hasValidPoints=!1,this.stack=r,this.rightCliff=this.leftCliff=0,this.alignOptions={align:e.align||(s?n?"left":"right":"center"),verticalAlign:e.verticalAlign||(s?"middle":n?"bottom":"top"),y:e.y,x:e.x},this.textAlign=e.textAlign||(s?n?"right":"left":"center")}return t.prototype.destroy=function(){h(this,this.axis)},t.prototype.render=function(t){var e=this.axis.chart,n=this.options,i=n.format;i=i?a(i,this,e):n.formatter.call(this),this.label?this.label.attr({text:i,visibility:"hidden"}):(this.label=e.renderer.label(i,null,null,n.shape,null,null,n.useHTML,!1,"stack-labels"),i={r:n.borderRadius||0,text:i,rotation:n.rotation,padding:f(n.padding,5),visibility:"hidden"},e.styledMode||(i.fill=n.backgroundColor,i.stroke=n.borderColor,i["stroke-width"]=n.borderWidth,this.label.css(n.style)),this.label.attr(i),this.label.added||this.label.add(t)),this.label.labelrank=e.plotSizeY},t.prototype.setOffset=function(t,e,n,i,s){var o=this.axis,a=o.chart;i=o.translate(o.stacking.usePercentage?100:i||this.total,0,0,0,1),n=o.translate(n||0),n=l(i)&&Math.abs(i-n),t=f(s,a.xAxis[0].translate(this.x))+t,o=l(i)&&this.getStackBox(a,this,t,i,e,n,o),e=this.label,n=this.isNegative,t="justify"===f(this.options.overflow,"justify");var c=this.textAlign;e&&o&&(s=e.getBBox(),i=e.padding,c="left"===c?a.inverted?-i:i:"right"===c?s.width:a.inverted&&"center"===c?s.width/2:a.inverted?n?s.width+i:-i:s.width/2,n=a.inverted?s.height/2:n?-i:s.height,this.alignOptions.x=f(this.options.x,0),this.alignOptions.y=f(this.options.y,0),o.x-=c,o.y-=n,e.align(this.alignOptions,null,o),a.isInsidePlot(e.alignAttr.x+c-this.alignOptions.x,e.alignAttr.y+n-this.alignOptions.y)?e.show():(e.alignAttr.y=-9999,t=!1),t&&r.prototype.justifyDataLabel.call(this.axis,e,this.alignOptions,e.alignAttr,s,o),e.attr({x:e.alignAttr.x,y:e.alignAttr.y}),f(!t&&this.options.crop,!0)&&((a=d(e.x)&&d(e.y)&&a.isInsidePlot(e.x-i+e.width,e.y)&&a.isInsidePlot(e.x+i,e.y))||e.hide()))},t.prototype.getStackBox=function(t,e,n,i,r,s,o){var a=e.axis.reversed,c=t.inverted,l=o.height+o.pos-(c?t.plotLeft:t.plotTop);return e=e.isNegative&&!a||!e.isNegative&&a,{x:c?e?i-o.right:i-s+o.pos-t.plotLeft:n+t.xAxis[0].transB-t.plotLeft,y:c?o.height-n-r:e?l-i-s:l-i,width:c?s:r,height:c?r:s}},t}();return e.prototype.getStacks=function(){var t=this,e=t.inverted;t.yAxis.forEach((function(t){t.stacking&&t.stacking.stacks&&t.hasVisibleSeries&&(t.stacking.oldStacks=t.stacking.stacks)})),t.series.forEach((function(n){var i=n.xAxis&&n.xAxis.options||{};!n.options.stacking||!0!==n.visible&&!1!==t.options.chart.ignoreHiddenSeries||(n.stackKey=[n.type,f(n.options.stack,""),e?i.top:i.left,e?i.height:i.width].join())}))},s.compose(t),r.prototype.setGroupedPoints=function(){var t=this.yAxis.stacking;this.options.centerInCategory&&(this.is("column")||this.is("columnrange"))&&!this.options.stacking&&1<this.chart.series.length?r.prototype.setStackedPoints.call(this,"group"):t&&p(t.stacks,(function(e,n){"group"===n.slice(-5)&&(p(e,(function(t){return t.destroy()})),delete t.stacks[n])}))},r.prototype.setStackedPoints=function(t){var e=t||this.options.stacking;if(e&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var n=this.processedXData,i=this.processedYData,r=[],s=i.length,o=this.options,a=o.threshold,h=f(o.startFromThreshold&&a,0);o=o.stack,t=t?this.type+","+e:this.stackKey;var d,p,m="-"+t,y=this.negStacks,v=this.yAxis,b=v.stacking.stacks,w=v.stacking.oldStacks;for(v.stacking.stacksTouched+=1,p=0;p<s;p++){var _=n[p],x=i[p],T=this.getStackIndicator(T,_,this.index),S=T.key,C=(d=y&&x<(h?0:a))?m:t;b[C]||(b[C]={}),b[C][_]||(w[C]&&w[C][_]?(b[C][_]=w[C][_],b[C][_].total=null):b[C][_]=new g(v,v.options.stackLabels,d,_,o)),C=b[C][_],null!==x?(C.points[S]=C.points[this.index]=[f(C.cumulative,h)],l(C.cumulative)||(C.base=S),C.touched=v.stacking.stacksTouched,0<T.index&&!1===this.singleStacks&&(C.points[S][0]=C.points[this.index+","+_+",0"][0])):C.points[S]=C.points[this.index]=null,"percent"===e?(d=d?t:m,y&&b[d]&&b[d][_]?(d=b[d][_],C.total=d.total=Math.max(d.total,C.total)+Math.abs(x)||0):C.total=c(C.total+(Math.abs(x)||0))):"group"===e?(u(x)&&(x=x[0]),null!==x&&(C.total=(C.total||0)+1)):C.total=c(C.total+(x||0)),C.cumulative="group"===e?(C.total||1)-1:f(C.cumulative,h)+(x||0),null!==x&&(C.points[S].push(C.cumulative),r[p]=C.cumulative,C.hasValidPoints=!0)}"percent"===e&&(v.stacking.usePercentage=!0),"group"!==e&&(this.stackedYData=r),v.stacking.oldStacks={}}},r.prototype.modifyStacks=function(){var t,e=this,n=e.stackKey,i=e.yAxis.stacking.stacks,r=e.processedXData,s=e.options.stacking;e[s+"Stacker"]&&[n,"-"+n].forEach((function(n){for(var o,a,c=r.length;c--;)o=r[c],t=e.getStackIndicator(t,o,e.index,n),(a=(o=i[n]&&i[n][o])&&o.points[t.key])&&e[s+"Stacker"](a,o,c)}))},r.prototype.percentStacker=function(t,e,n){e=e.total?100/e.total:0,t[0]=c(t[0]*e),t[1]=c(t[1]*e),this.stackedYData[n]=t[1]},r.prototype.getStackIndicator=function(t,e,n,i){return!l(t)||t.x!==e||i&&t.key!==i?t={x:e,index:0,key:i}:t.index++,t.key=[n,e,t.index].join(),t},i.StackItem=g,i.StackItem})),e(n,"Series/Line/LineSeries.js",[n["Core/Color/Palette.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=i.defined,o=i.merge;return i=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return r(i,n),i.prototype.drawGraph=function(){var e=this,n=this.options,i=(this.gappedPath||this.getGraphPath).call(this),r=this.chart.styledMode,s=[["graph","highcharts-graph"]];r||s[0].push(n.lineColor||this.color||t.neutralColor20,n.dashStyle),s=e.getZonesGraphs(s),s.forEach((function(t,s){var o=t[0],a=e[o],c=a?"animate":"attr";a?(a.endX=e.preventGraphAnimation?null:i.xMap,a.animate({d:i})):i.length&&(e[o]=a=e.chart.renderer.path(i).addClass(t[1]).attr({zIndex:1}).add(e.group)),a&&!r&&(o={stroke:t[2],"stroke-width":n.lineWidth,fill:e.fillGraph&&e.color||"none"},t[3]?o.dashstyle=t[3]:"square"!==n.linecap&&(o["stroke-linecap"]=o["stroke-linejoin"]="round"),a[c](o).shadow(2>s&&n.shadow)),a&&(a.startX=i.xMap,a.isArea=i.isArea)}))},i.prototype.getGraphPath=function(t,e,n){var i,r=this,o=r.options,a=[],c=[],l=o.step;t=t||r.points;var h=t.reversed;return h&&t.reverse(),(l={right:1,center:2}[l]||l&&3)&&h&&(l=4-l),t=this.getValidPoints(t,!1,!(o.connectNulls&&!e&&!n)),t.forEach((function(h,u){var d=h.plotX,p=h.plotY,f=t[u-1];(h.leftCliff||f&&f.rightCliff)&&!n&&(i=!0),h.isNull&&!s(e)&&0<u?i=!o.connectNulls:h.isNull&&!e?i=!0:(0===u||i?u=[["M",h.plotX,h.plotY]]:r.getPointSpline?u=[r.getPointSpline(t,h,u)]:l?(u=1===l?[["L",f.plotX,p]]:2===l?[["L",(f.plotX+d)/2,f.plotY],["L",(f.plotX+d)/2,p]]:[["L",d,f.plotY]],u.push(["L",d,p])):u=[["L",d,p]],c.push(h.x),l&&(c.push(h.x),2===l&&c.push(h.x)),a.push.apply(a,u),i=!1)})),a.xMap=c,r.graphPath=a},i.prototype.getZonesGraphs=function(t){return this.zones.forEach((function(e,n){n=["zone-graph-"+n,"highcharts-graph highcharts-zone-graph-"+n+" "+(e.className||"")],this.chart.styledMode||n.push(e.color||this.color,e.dashStyle||this.options.dashStyle),t.push(n)}),this),t},i.defaultOptions=o(e.defaultOptions,{}),i}(e),n.registerSeriesType("line",i),i})),e(n,"Series/Area/AreaSeries.js",[n["Core/Color/Color.js"],n["Core/Legend/LegendSymbol.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=t.parse,o=n.seriesTypes.line;t=i.extend;var a=i.merge,c=i.objectEach,l=i.pick;return i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return r(e,t),e.prototype.drawGraph=function(){this.areaPath=[],t.prototype.drawGraph.apply(this);var e=this,n=this.areaPath,i=this.options,r=[["area","highcharts-area",this.color,i.fillColor]];this.zones.forEach((function(t,n){r.push(["zone-area-"+n,"highcharts-area highcharts-zone-area-"+n+" "+t.className,t.color||e.color,t.fillColor||i.fillColor])})),r.forEach((function(t){var r=t[0],o=e[r],a=o?"animate":"attr",c={};o?(o.endX=e.preventGraphAnimation?null:n.xMap,o.animate({d:n})):(c.zIndex=0,o=e[r]=e.chart.renderer.path(n).addClass(t[1]).add(e.group),o.isArea=!0),e.chart.styledMode||(c.fill=l(t[3],s(t[2]).setOpacity(l(i.fillOpacity,.75)).get())),o[a](c),o.startX=n.xMap,o.shiftUnit=i.step?2:1}))},e.prototype.getGraphPath=function(t){var e,n=o.prototype.getGraphPath,i=this.options,r=i.stacking,s=this.yAxis,a=[],c=[],h=this.index,u=s.stacking.stacks[this.stackKey],d=i.threshold,p=Math.round(s.getThreshold(i.threshold));i=l(i.connectNulls,"percent"===r);var f=function(e,n,i){var o=t[e];e=r&&u[o.x].points[h];var l=o[i+"Null"]||0;if(i=o[i+"Cliff"]||0,o=!0,i||l){var f=(l?e[0]:e[1])+i,g=e[0]+i;o=!!l}else!r&&t[n]&&t[n].isNull&&(f=g=d);"undefined"!==typeof f&&(c.push({plotX:m,plotY:null===f?p:s.getThreshold(f),isNull:o,isCliff:!0}),a.push({plotX:m,plotY:null===g?p:s.getThreshold(g),doCurve:!1}))};for(t=t||this.points,r&&(t=this.getStackPoints(t)),e=0;e<t.length;e++){r||(t[e].leftCliff=t[e].rightCliff=t[e].leftNull=t[e].rightNull=void 0);var g=t[e].isNull,m=l(t[e].rectPlotX,t[e].plotX),y=r?l(t[e].yBottom,p):p;g&&!i||(i||f(e,e-1,"left"),g&&!r&&i||(c.push(t[e]),a.push({x:e,plotX:m,plotY:y})),i||f(e,e+1,"right"))}return e=n.call(this,c,!0,!0),a.reversed=!0,g=n.call(this,a,!0,!0),(y=g[0])&&"M"===y[0]&&(g[0]=["L",y[1],y[2]]),g=e.concat(g),g.length&&g.push(["Z"]),n=n.call(this,c,!1,i),g.xMap=e.xMap,this.areaPath=g,n},e.prototype.getStackPoints=function(t){var e=this,n=[],i=[],r=this.xAxis,s=this.yAxis,o=s.stacking.stacks[this.stackKey],a={},h=s.series,u=h.length,d=s.options.reversedStacks?1:-1,p=h.indexOf(e);if(t=t||this.points,this.options.stacking){for(var f=0;f<t.length;f++)t[f].leftNull=t[f].rightNull=void 0,a[t[f].x]=t[f];c(o,(function(t,e){null!==t.total&&i.push(e)})),i.sort((function(t,e){return t-e}));var g=h.map((function(t){return t.visible}));i.forEach((function(t,c){var f,m,y=0;if(a[t]&&!a[t].isNull)n.push(a[t]),[-1,1].forEach((function(n){var r=1===n?"rightNull":"leftNull",s=0,l=o[i[c+n]];if(l)for(var y=p;0<=y&&y<u;){var v=h[y].index;f=l.points[v],f||(v===e.index?a[t][r]=!0:g[y]&&(m=o[t].points[v])&&(s-=m[1]-m[0])),y+=d}a[t][1===n?"rightCliff":"leftCliff"]=s}));else{for(var v=p;0<=v&&v<u;){if(f=o[t].points[h[v].index]){y=f[1];break}v+=d}y=l(y,0),y=s.translate(y,0,1,0,1),n.push({isNull:!0,plotX:r.translate(t,0,0,0,1),x:t,plotY:y,yBottom:y})}}))}return n},e.defaultOptions=a(o.defaultOptions,{threshold:0}),e}(o),t(i.prototype,{singleStacks:!1,drawLegendSymbol:e.drawRectangle}),n.registerSeriesType("area",i),i})),e(n,"Series/Spline/SplineSeries.js",[n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e){var n=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),i=t.seriesTypes.line,r=e.merge,s=e.pick;return e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return n(e,t),e.prototype.getPointSpline=function(t,e,n){var i=e.plotX||0,r=e.plotY||0,o=t[n-1];if(n=t[n+1],o&&!o.isNull&&!1!==o.doCurve&&!e.isCliff&&n&&!n.isNull&&!1!==n.doCurve&&!e.isCliff){t=o.plotY||0;var a=n.plotX||0;n=n.plotY||0;var c=0,l=(1.5*i+(o.plotX||0))/2.5,h=(1.5*r+t)/2.5;a=(1.5*i+a)/2.5;var u=(1.5*r+n)/2.5;a!==l&&(c=(u-h)*(a-i)/(a-l)+r-u),h+=c,u+=c,h>t&&h>r?(h=Math.max(t,r),u=2*r-h):h<t&&h<r&&(h=Math.min(t,r),u=2*r-h),u>n&&u>r?(u=Math.max(n,r),h=2*r-u):u<n&&u<r&&(u=Math.min(n,r),h=2*r-u),e.rightContX=a,e.rightContY=u}return e=["C",s(o.rightContX,o.plotX,0),s(o.rightContY,o.plotY,0),s(l,i,0),s(h,r,0),i,r],o.rightContX=o.rightContY=void 0,e},e.defaultOptions=r(i.defaultOptions),e}(i),t.registerSeriesType("spline",e),e})),e(n,"Series/AreaSpline/AreaSplineSeries.js",[n["Series/Area/AreaSeries.js"],n["Series/Spline/SplineSeries.js"],n["Core/Legend/LegendSymbol.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r){var s=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=t.prototype,a=r.extend,c=r.merge;return r=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.data=void 0,t.points=void 0,t.options=void 0,t}return s(i,n),i.defaultOptions=c(e.defaultOptions,t.defaultOptions),i}(e),a(r.prototype,{getGraphPath:o.getGraphPath,getStackPoints:o.getStackPoints,drawGraph:o.drawGraph,drawLegendSymbol:n.drawRectangle}),i.registerSeriesType("areaspline",r),r})),e(n,"Series/Column/ColumnSeries.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Legend/LegendSymbol.js"],n["Core/Color/Palette.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s,o,a){var c=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l=t.animObject,h=e.parse,u=n.hasTouch;t=n.noop;var d=a.clamp,p=a.css,f=a.defined,g=a.extend,m=a.fireEvent,y=a.isArray,v=a.isNumber,b=a.merge,w=a.pick,_=a.objectEach;return a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.borderWidth=void 0,e.data=void 0,e.group=void 0,e.options=void 0,e.points=void 0,e}return c(e,t),e.prototype.animate=function(t){var e=this,n=this.yAxis,i=e.options,r=this.chart.inverted,s={},o=r?"translateX":"translateY";if(t)s.scaleY=.001,t=d(n.toPixels(i.threshold),n.pos,n.pos+n.len),r?s.translateX=t-n.len:s.translateY=t,e.clipBox&&e.setClip(),e.group.attr(s);else{var a=Number(e.group.attr(o));e.group.animate({scaleY:1},g(l(e.options.animation),{step:function(t,i){e.group&&(s[o]=a+i.pos*(n.pos-a),e.group.attr(s))}}))}},e.prototype.init=function(e,n){t.prototype.init.apply(this,arguments);var i=this;e=i.chart,e.hasRendered&&e.series.forEach((function(t){t.type===i.type&&(t.isDirty=!0)}))},e.prototype.getColumnMetrics=function(){var t=this,e=t.options,n=t.xAxis,i=t.yAxis,r=n.options.reversedStacks;r=n.reversed&&!r||!n.reversed&&r;var s,o={},a=0;!1===e.grouping?a=1:t.chart.series.forEach((function(e){var n=e.yAxis,r=e.options;if(e.type===t.type&&(e.visible||!t.chart.options.chart.ignoreHiddenSeries)&&i.len===n.len&&i.pos===n.pos){if(r.stacking&&"group"!==r.stacking){s=e.stackKey,"undefined"===typeof o[s]&&(o[s]=a++);var c=o[s]}else!1!==r.grouping&&(c=a++);e.columnIndex=c}}));var c=Math.min(Math.abs(n.transA)*(n.ordinal&&n.ordinal.slope||e.pointRange||n.closestPointRange||n.tickInterval||1),n.len),l=c*e.groupPadding,h=(c-2*l)/(a||1);return e=Math.min(e.maxPointWidth||n.len,w(e.pointWidth,h*(1-2*e.pointPadding))),t.columnMetrics={width:e,offset:(h-e)/2+(l+((t.columnIndex||0)+(r?1:0))*h-c/2)*(r?-1:1),paddedWidth:h,columnCount:a},t.columnMetrics},e.prototype.crispCol=function(t,e,n,i){var r=this.chart,s=this.borderWidth,o=-(s%2?.5:0);return s=s%2?.5:1,r.inverted&&r.renderer.isVML&&(s+=1),this.options.crisp&&(n=Math.round(t+n)+o,t=Math.round(t)+o,n-=t),i=Math.round(e+i)+s,o=.5>=Math.abs(e)&&.5<i,e=Math.round(e)+s,i-=e,o&&i&&(--e,i+=1),{x:t,y:e,width:n,height:i}},e.prototype.adjustForMissingColumns=function(t,e,n,i){var r=this,s=this.options.stacking;if(!n.isNull&&1<i.columnCount){var o=0,a=0;_(this.yAxis.stacking&&this.yAxis.stacking.stacks,(function(t){if("number"===typeof n.x&&(t=t[n.x.toString()])){var e=t.points[r.index],i=t.total;s?(e&&(o=a),t.hasValidPoints&&a++):y(e)&&(o=e[1],a=i||0)}})),t=(n.plotX||0)+((a-1)*i.paddedWidth+e)/2-e-o*i.paddedWidth}return t},e.prototype.translate=function(){var t=this,e=t.chart,n=t.options,i=t.dense=2>t.closestPointRange*t.xAxis.transA;i=t.borderWidth=w(n.borderWidth,i?0:1);var r=t.xAxis,o=t.yAxis,a=n.threshold,c=t.translatedThreshold=o.getThreshold(a),l=w(n.minPointLength,5),h=t.getColumnMetrics(),u=h.width,p=t.pointXOffset=h.offset,g=t.dataMin,m=t.dataMax,y=t.barW=Math.max(u,1+2*i);e.inverted&&(c-=.5),n.pointPadding&&(y=Math.ceil(y)),s.prototype.translate.apply(t),t.points.forEach((function(i){var s=w(i.yBottom,c),b=999+Math.abs(s),_=i.plotX||0;b=d(i.plotY,-b,o.len+b);var x=Math.min(b,s),T=Math.max(b,s)-x,S=u,C=_+p,k=y;l&&Math.abs(T)<l&&(T=l,_=!o.reversed&&!i.negative||o.reversed&&i.negative,v(a)&&v(m)&&i.y===a&&m<=a&&(o.min||0)<a&&(g!==m||(o.max||0)<=a)&&(_=!_),x=Math.abs(x-c)>l?s-l:c-(_?l:0)),f(i.options.pointWidth)&&(S=k=Math.ceil(i.options.pointWidth),C-=Math.round((S-u)/2)),n.centerInCategory&&(C=t.adjustForMissingColumns(C,S,i,h)),i.barX=C,i.pointWidth=S,i.tooltipPos=e.inverted?[d(o.len+o.pos-e.plotLeft-b,o.pos-e.plotLeft,o.len+o.pos-e.plotLeft),r.len+r.pos-e.plotTop-C-k/2,T]:[r.left-e.plotLeft+C+k/2,d(b+o.pos-e.plotTop,o.pos-e.plotTop,o.len+o.pos-e.plotTop),T],i.shapeType=t.pointClass.prototype.shapeType||"rect",i.shapeArgs=t.crispCol.apply(t,i.isNull?[C,c,k,0]:[C,x,k,T])}))},e.prototype.drawGraph=function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},e.prototype.pointAttribs=function(t,e){var n=this.options,i=this.pointAttrToOptions||{},r=i.stroke||"borderColor",s=i["stroke-width"]||"borderWidth",o=t&&t.color||this.color,a=t&&t[r]||n[r]||o;i=t&&t.options.dashStyle||n.dashStyle;var c=t&&t[s]||n[s]||this[s]||0,l=w(t&&t.opacity,n.opacity,1);if(t&&this.zones.length){var u=t.getZone();o=t.options.color||u&&(u.color||t.nonZonedColor)||this.color,u&&(a=u.borderColor||a,i=u.dashStyle||i,c=u.borderWidth||c)}return e&&t&&(t=b(n.states[e],t.options.states&&t.options.states[e]||{}),e=t.brightness,o=t.color||"undefined"!==typeof e&&h(o).brighten(t.brightness).get()||o,a=t[r]||a,c=t[s]||c,i=t.dashStyle||i,l=w(t.opacity,l)),r={fill:o,stroke:a,"stroke-width":c,opacity:l},i&&(r.dashstyle=i),r},e.prototype.drawPoints=function(){var t,e=this,n=this.chart,i=e.options,r=n.renderer,s=i.animationLimit||250;e.points.forEach((function(o){var a=o.graphic,c=!!a,l=a&&n.pointCount<s?"animate":"attr";v(o.plotY)&&null!==o.y?(t=o.shapeArgs,a&&o.hasNewShapeType()&&(a=a.destroy()),e.enabledDataSorting&&(o.startXPos=e.xAxis.reversed?-(t&&t.width||0):e.xAxis.width),a||(o.graphic=a=r[o.shapeType](t).add(o.group||e.group))&&e.enabledDataSorting&&n.hasRendered&&n.pointCount<s&&(a.attr({x:o.startXPos}),c=!0,l="animate"),a&&c&&a[l](b(t)),i.borderRadius&&a[l]({r:i.borderRadius}),n.styledMode||a[l](e.pointAttribs(o,o.selected&&"select")).shadow(!1!==o.allowShadow&&i.shadow,null,i.stacking&&!i.borderRadius),a&&(a.addClass(o.getClassName(),!0),a.attr({visibility:o.visible?"inherit":"hidden"}))):a&&(o.graphic=a.destroy())}))},e.prototype.drawTracker=function(){var t,e=this,n=e.chart,i=n.pointer,r=function(t){var e=i.getPointFromEvent(t);"undefined"!==typeof e&&(i.isDirectTouch=!0,e.onMouseOver(t))};e.points.forEach((function(e){t=y(e.dataLabels)?e.dataLabels:e.dataLabel?[e.dataLabel]:[],e.graphic&&(e.graphic.element.point=e),t.forEach((function(t){t.div?t.div.point=e:t.element.point=e}))})),e._hasTracking||(e.trackerGroups.forEach((function(t){e[t]&&(e[t].addClass("highcharts-tracker").on("mouseover",r).on("mouseout",(function(t){i.onTrackerMouseOut(t)})),u&&e[t].on("touchstart",r),!n.styledMode&&e.options.cursor&&e[t].css(p).css({cursor:e.options.cursor}))})),e._hasTracking=!0),m(this,"afterDrawTracker")},e.prototype.remove=function(){var t=this,e=t.chart;e.hasRendered&&e.series.forEach((function(e){e.type===t.type&&(e.isDirty=!0)})),s.prototype.remove.apply(t,arguments)},e.defaultOptions=b(s.defaultOptions,{borderRadius:0,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:r.neutralColor20,borderColor:r.neutralColor100}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:r.backgroundColor}),e}(s),g(a.prototype,{cropShoulder:0,directTouch:!0,drawLegendSymbol:i.drawRectangle,getSymbol:t,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),o.registerSeriesType("column",a),a})),e(n,"Core/Series/DataLabel.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/FormatUtilities.js"],n["Core/Color/Palette.js"],n["Core/Utilities.js"]],(function(t,e,n,i){var r,s=t.getDeferredAnimation,o=e.format,a=i.defined,c=i.extend,l=i.fireEvent,h=i.isArray,u=i.merge,d=i.objectEach,p=i.pick,f=i.splat;return function(t){function e(t,e,n,i,r){var s=this,o=this.chart,a=this.isCartesian&&o.inverted,l=this.enabledDataSorting,h=p(t.dlBox&&t.dlBox.centerX,t.plotX,-9999),u=p(t.plotY,-9999),d=e.getBBox(),f=n.rotation,g=n.align,m=o.isInsidePlot(h,Math.round(u),{inverted:a,paneCoordinates:!0,series:s}),y=function(n){l&&s.xAxis&&!v&&s.setDataLabelStartPos(t,e,r,m,n)},v="justify"===p(n.overflow,l?"none":"justify"),b=this.visible&&!1!==t.visible&&(t.series.forceDL||l&&!v||m||p(n.inside,!!this.options.stacking)&&i&&o.isInsidePlot(h,a?i.x+1:i.y+i.height-1,{inverted:a,paneCoordinates:!0,series:s}));if(b){var w=o.renderer.fontMetrics(o.styledMode?void 0:n.style.fontSize,e).b;i=c({x:a?this.yAxis.len-u:h,y:Math.round(a?this.xAxis.len-h:u),width:0,height:0},i),c(n,{width:d.width,height:d.height}),f?(v=!1,h=o.renderer.rotCorr(w,f),h={x:i.x+(n.x||0)+i.width/2+h.x,y:i.y+(n.y||0)+{top:0,middle:.5,bottom:1}[n.verticalAlign]*i.height},y(h),e[r?"attr":"animate"](h).attr({align:g}),y=(f+720)%360,y=180<y&&360>y,"left"===g?h.y-=y?d.height:0:"center"===g?(h.x-=d.width/2,h.y-=d.height/2):"right"===g&&(h.x-=d.width,h.y-=y?0:d.height),e.placed=!0,e.alignAttr=h):(y(i),e.align(n,void 0,i),h=e.alignAttr),v&&0<=i.height?this.justifyDataLabel(e,n,h,d,i,r):p(n.crop,!0)&&(b=o.isInsidePlot(h.x,h.y,{paneCoordinates:!0,series:s})&&o.isInsidePlot(h.x+d.width,h.y+d.height,{paneCoordinates:!0,series:s})),n.shape&&!f&&e[r?"attr":"animate"]({anchorX:a?o.plotWidth-t.plotY:t.plotX,anchorY:a?o.plotHeight-t.plotX:t.plotY})}r&&l&&(e.placed=!1),b||l&&!v||(e.hide(!0),e.placed=!1)}function i(t,e){var n=e.filter;return!n||(e=n.operator,t=t[n.property],n=n.value,">"===e&&t>n||"<"===e&&t<n||">="===e&&t>=n||"<="===e&&t<=n||"=="===e&&t==n||"==="===e&&t===n)}function r(){var t,e=this,r=e.chart,c=e.options,u=e.points,g=e.hasRendered||0,y=r.renderer,v=c.dataLabels,b=v.animation;if(b=v.defer?s(r,b,e):{defer:0,duration:0},v=m(m(r.options.plotOptions&&r.options.plotOptions.series&&r.options.plotOptions.series.dataLabels,r.options.plotOptions&&r.options.plotOptions[e.type]&&r.options.plotOptions[e.type].dataLabels),v),l(this,"drawDataLabels"),h(v)||v.enabled||e._hasPointLabels){var w=e.plotGroup("dataLabelsGroup","data-labels",g?"inherit":"hidden",v.zIndex||6);w.attr({opacity:+g}),!g&&(g=e.dataLabelsGroup)&&(e.visible&&w.show(!0),g[c.animation?"animate":"attr"]({opacity:1},b)),u.forEach((function(s){t=f(m(v,s.dlOptions||s.options&&s.options.dataLabels)),t.forEach((function(t,l){var h=t.enabled&&(!s.isNull||s.dataLabelOnNull)&&i(s,t),u=s.connectors?s.connectors[l]:s.connector,f=s.dataLabels?s.dataLabels[l]:s.dataLabel,g=p(t.distance,s.labelDistance),m=!f;if(h){var v=s.getLabelConfig(),b=p(t[s.formatPrefix+"Format"],t.format);v=a(b)?o(b,v,r):(t[s.formatPrefix+"Formatter"]||t.formatter).call(v,t),b=t.style;var _=t.rotation;r.styledMode||(b.color=p(t.color,b.color,e.color,n.neutralColor100),"contrast"===b.color?(s.contrastColor=y.getContrast(s.color||e.color),b.color=!a(g)&&t.inside||0>g||c.stacking?s.contrastColor:n.neutralColor100):delete s.contrastColor,c.cursor&&(b.cursor=c.cursor));var x={r:t.borderRadius||0,rotation:_,padding:t.padding,zIndex:1};r.styledMode||(x.fill=t.backgroundColor,x.stroke=t.borderColor,x["stroke-width"]=t.borderWidth),d(x,(function(t,e){"undefined"===typeof t&&delete x[e]}))}!f||h&&a(v)?h&&a(v)&&(f?x.text=v:(s.dataLabels=s.dataLabels||[],f=s.dataLabels[l]=_?y.text(v,0,-9999,t.useHTML).addClass("highcharts-data-label"):y.label(v,0,-9999,t.shape,null,null,t.useHTML,null,"data-label"),l||(s.dataLabel=f),f.addClass(" highcharts-data-label-color-"+s.colorIndex+" "+(t.className||"")+(t.useHTML?" highcharts-tracker":""))),f.options=t,f.attr(x),r.styledMode||f.css(b).shadow(t.shadow),f.added||f.add(w),t.textPath&&!t.useHTML&&(f.setTextPath(s.getDataLabelPath&&s.getDataLabelPath(f)||s.graphic,t.textPath),s.dataLabelPath&&!t.textPath.enabled&&(s.dataLabelPath=s.dataLabelPath.destroy())),e.alignDataLabel(s,f,t,null,m)):(s.dataLabel=s.dataLabel&&s.dataLabel.destroy(),s.dataLabels&&(1===s.dataLabels.length?delete s.dataLabels:delete s.dataLabels[l]),l||delete s.dataLabel,u&&(s.connector=s.connector.destroy(),s.connectors&&(1===s.connectors.length?delete s.connectors:delete s.connectors[l])))}))}))}l(this,"afterDrawDataLabels")}function g(t,e,n,i,r,s){var o=this.chart,a=e.align,c=e.verticalAlign,l=t.box?0:t.padding||0,h=e.x;h=void 0===h?0:h;var u=e.y;u=void 0===u?0:u;var d=(n.x||0)+l;if(0>d){"right"===a&&0<=h?(e.align="left",e.inside=!0):h-=d;var p=!0}return d=(n.x||0)+i.width-l,d>o.plotWidth&&("left"===a&&0>=h?(e.align="right",e.inside=!0):h+=o.plotWidth-d,p=!0),d=n.y+l,0>d&&("bottom"===c&&0<=u?(e.verticalAlign="top",e.inside=!0):u-=d,p=!0),d=(n.y||0)+i.height-l,d>o.plotHeight&&("top"===c&&0>=u?(e.verticalAlign="bottom",e.inside=!0):u+=o.plotHeight-d,p=!0),p&&(e.x=h,e.y=u,t.placed=!s,t.align(e,void 0,r)),p}function m(t,e){var n,i=[];if(h(t)&&!h(e))i=t.map((function(t){return u(t,e)}));else if(h(e)&&!h(t))i=e.map((function(e){return u(t,e)}));else if(h(t)||h(e))for(n=Math.max(t.length,e.length);n--;)i[n]=u(t[n],e[n]);else i=u(t,e);return i}function y(t,e,n,i,r){var s=this.chart,o=s.inverted,a=this.xAxis,c=a.reversed,l=o?e.height/2:e.width/2;t=(t=t.pointWidth)?t/2:0,e.startXPos=o?r.x:c?-l-t:a.width-l+t,e.startYPos=o?c?this.yAxis.height-l+t:-l-t:r.y,i?"hidden"===e.visibility&&(e.show(),e.attr({opacity:0}).animate({opacity:1})):e.attr({opacity:1}).animate({opacity:0},void 0,e.hide),s.hasRendered&&(n&&e.attr({x:e.startXPos,y:e.startYPos}),e.placed=!0)}var v=[];t.compose=function(t){if(-1===v.indexOf(t)){var n=t.prototype;v.push(t),n.alignDataLabel=e,n.drawDataLabels=r,n.justifyDataLabel=g,n.setDataLabelStartPos=y}}}(r||(r={})),r})),e(n,"Series/Column/ColumnDataLabel.js",[n["Core/Series/DataLabel.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n){var i,r=e.series,s=n.merge,o=n.pick;return function(e){function n(t,e,n,i,a){var c=this.chart.inverted,l=t.series,h=t.dlBox||t.shapeArgs,u=o(t.below,t.plotY>o(this.translatedThreshold,l.yAxis.len)),d=o(n.inside,!!this.options.stacking);h&&(i=s(h),0>i.y&&(i.height+=i.y,i.y=0),h=i.y+i.height-l.yAxis.len,0<h&&h<i.height&&(i.height-=h),c&&(i={x:l.yAxis.len-i.y-i.height,y:l.xAxis.len-i.x-i.width,width:i.height,height:i.width}),d||(c?(i.x+=u?0:i.width,i.width=0):(i.y+=u?i.height:0,i.height=0))),n.align=o(n.align,!c||d?"center":u?"right":"left"),n.verticalAlign=o(n.verticalAlign,c||d?"middle":u?"top":"bottom"),r.prototype.alignDataLabel.call(this,t,e,n,i,a),n.inside&&t.contrastColor&&e.css({color:t.contrastColor})}var i=[];e.compose=function(e){t.compose(r),-1===i.indexOf(e)&&(i.push(e),e.prototype.alignDataLabel=n)}}(i||(i={})),i})),e(n,"Series/Bar/BarSeries.js",[n["Series/Column/ColumnSeries.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n){var i=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=n.extend,s=n.merge;return n=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return i(n,e),n.defaultOptions=s(t.defaultOptions,{}),n}(t),r(n.prototype,{inverted:!0}),e.registerSeriesType("bar",n),n})),e(n,"Series/Scatter/ScatterSeries.js",[n["Series/Column/ColumnSeries.js"],n["Series/Line/LineSeries.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i){var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=i.addEvent,o=i.extend,a=i.merge;return i=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return r(n,t),n.prototype.applyJitter=function(){var t=this,e=this.options.jitter,n=this.points.length;e&&this.points.forEach((function(i,r){["x","y"].forEach((function(s,o){var a="plot"+s.toUpperCase();if(e[s]&&!i.isNull){var c=t[s+"Axis"],l=e[s]*c.transA;if(c&&!c.isLog){var h=Math.max(0,i[a]-l);c=Math.min(c.len,i[a]+l),o=1e4*Math.sin(r+o*n),i[a]=h+(c-h)*(o-Math.floor(o)),"x"===s&&(i.clientX=i.plotX)}}}))}))},n.prototype.drawGraph=function(){this.options.lineWidth?t.prototype.drawGraph.call(this):this.graph&&(this.graph=this.graph.destroy())},n.defaultOptions=a(e.defaultOptions,{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}"></span> <span style="font-size: 10px"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),n}(e),o(i.prototype,{drawTracker:t.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1}),s(i,"afterTranslate",(function(){this.applyJitter()})),n.registerSeriesType("scatter",i),i})),e(n,"Mixins/CenteredSeries.js",[n["Core/Globals.js"],n["Core/Series/Series.js"],n["Core/Utilities.js"]],(function(t,e,n){var i=n.isNumber,r=n.pick,s=n.relativeLength,o=t.deg2rad;return t.CenteredSeriesMixin={getCenter:function(){var t=this.options,n=this.chart,i=2*(t.slicedOffset||0),o=n.plotWidth-2*i,a=n.plotHeight-2*i,c=t.center,l=Math.min(o,a),h=t.size,u=t.innerSize||0;for("string"===typeof h&&(h=parseFloat(h)),"string"===typeof u&&(u=parseFloat(u)),t=[r(c[0],"50%"),r(c[1],"50%"),r(h&&0>h?void 0:t.size,"100%"),r(u&&0>u?void 0:t.innerSize||0,"0%")],!n.angular||this instanceof e||(t[3]=0),c=0;4>c;++c)h=t[c],n=2>c||2===c&&/%$/.test(h),t[c]=s(h,[o,a,l,t[2]][c])+(n?i:0);return t[3]>t[2]&&(t[3]=t[2]),t},getStartAndEndRadians:function(t,e){return t=i(t)?t:0,e=i(e)&&e>t&&360>e-t?e:t+360,{start:o*(t+-90),end:o*(e+-90)}}}})),e(n,"Series/Pie/PiePoint.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Series/Point.js"],n["Core/Utilities.js"]],(function(t,e,n){var i=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=t.setAnimation,s=n.addEvent,o=n.defined;t=n.extend;var a=n.isNumber,c=n.pick,l=n.relativeLength;return e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelDistance=void 0,e.options=void 0,e.series=void 0,e}return i(e,t),e.prototype.getConnectorPath=function(){var t=this.labelPosition,e=this.series.options.dataLabels,n=this.connectorShapes,i=e.connectorShape;return n[i]&&(i=n[i]),i.call(this,{x:t.final.x,y:t.final.y,alignment:t.alignment},t.connectorPosition,e)},e.prototype.getTranslate=function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},e.prototype.haloPath=function(t){var e=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(e.x,e.y,e.r+t,e.r+t,{innerR:e.r-1,start:e.start,end:e.end})},e.prototype.init=function(){var e=this;t.prototype.init.apply(this,arguments),this.name=c(this.name,"Slice");var n=function(t){e.slice("select"===t.type)};return s(this,"select",n),s(this,"unselect",n),this},e.prototype.isValid=function(){return a(this.y)&&0<=this.y},e.prototype.setVisible=function(t,e){var n=this,i=this.series,r=i.chart,s=i.options.ignoreHiddenPoint;e=c(e,s),t!==this.visible&&(this.visible=this.options.visible=t="undefined"===typeof t?!this.visible:t,i.options.data[i.data.indexOf(this)]=this.options,["graphic","dataLabel","connector","shadowGroup"].forEach((function(e){n[e]&&n[e][t?"show":"hide"](t)})),this.legendItem&&r.legend.colorizeItem(this,t),t||"hover"!==this.state||this.setState(""),s&&(i.isDirty=!0),e&&r.redraw())},e.prototype.slice=function(t,e,n){var i=this.series;r(n,i.chart),c(e,!0),this.sliced=this.options.sliced=o(t)?t:!this.sliced,i.options.data[i.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},e}(e),t(e.prototype,{connectorShapes:{fixedOffset:function(t,e,n){var i=e.breakAt;return e=e.touchingSliceAt,[["M",t.x,t.y],n.softConnector?["C",t.x+("left"===t.alignment?-5:5),t.y,2*i.x-e.x,2*i.y-e.y,i.x,i.y]:["L",i.x,i.y],["L",e.x,e.y]]},straight:function(t,e){return e=e.touchingSliceAt,[["M",t.x,t.y],["L",e.x,e.y]]},crookedLine:function(t,e,n){e=e.touchingSliceAt;var i=this.series,r=i.center[0],s=i.chart.plotWidth,o=i.chart.plotLeft;i=t.alignment;var a=this.shapeArgs.r;return n=l(n.crookDistance,1),s="left"===i?r+a+(s+o-r-a)*(1-n):o+(r-a)*n,n=["L",s,t.y],r=!0,("left"===i?s>t.x||s<e.x:s<t.x||s>e.x)&&(r=!1),t=[["M",t.x,t.y]],r&&t.push(n),t.push(["L",e.x,e.y]),t}}}),e})),e(n,"Series/Pie/PieSeries.js",[n["Mixins/CenteredSeries.js"],n["Series/Column/ColumnSeries.js"],n["Core/Globals.js"],n["Core/Legend/LegendSymbol.js"],n["Core/Color/Palette.js"],n["Series/Pie/PiePoint.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Renderer/SVG/Symbols.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s,o,a,c,l){var h=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u=t.getStartAndEndRadians;n=n.noop;var d=l.clamp,p=l.extend,f=l.fireEvent,g=l.merge,m=l.pick,y=l.relativeLength;return l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=void 0,e.data=void 0,e.maxLabelDistance=void 0,e.options=void 0,e.points=void 0,e}return h(e,t),e.prototype.animate=function(t){var e=this,n=e.points,i=e.startAngleRad;t||n.forEach((function(t){var n=t.graphic,r=t.shapeArgs;n&&r&&(n.attr({r:m(t.startR,e.center&&e.center[3]/2),start:i,end:i}),n.animate({r:r.r,start:r.start,end:r.end},e.options.animation))}))},e.prototype.drawEmpty=function(){var t=this.startAngleRad,e=this.endAngleRad,n=this.options;if(0===this.total&&this.center){var i=this.center[0],s=this.center[1];this.graph||(this.graph=this.chart.renderer.arc(i,s,this.center[1]/2,0,t,e).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:c.arc(i,s,this.center[2]/2,0,{start:t,end:e,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":n.borderWidth,fill:n.fillColor||"none",stroke:n.color||r.neutralColor20})}else this.graph&&(this.graph=this.graph.destroy())},e.prototype.drawPoints=function(){var t=this.chart.renderer;this.points.forEach((function(e){e.graphic&&e.hasNewShapeType()&&(e.graphic=e.graphic.destroy()),e.graphic||(e.graphic=t[e.shapeType](e.shapeArgs).add(e.series.group),e.delayedRendering=!0)}))},e.prototype.generatePoints=function(){t.prototype.generatePoints.call(this),this.updateTotals()},e.prototype.getX=function(t,e,n){var i=this.center,r=this.radii?this.radii[n.index]||0:i[2]/2;return t=Math.asin(d((t-i[1])/(r+n.labelDistance),-1,1)),i[0]+(e?-1:1)*Math.cos(t)*(r+n.labelDistance)+(0<n.labelDistance?(e?-1:1)*this.options.dataLabels.padding:0)},e.prototype.hasData=function(){return!!this.processedXData.length},e.prototype.redrawPoints=function(){var t,e,n,i,r=this,s=r.chart,o=s.renderer,a=r.options.shadow;this.drawEmpty(),!a||r.shadowGroup||s.styledMode||(r.shadowGroup=o.g("shadow").attr({zIndex:-1}).add(r.group)),r.points.forEach((function(c){var l={};if(e=c.graphic,!c.isNull&&e){var h=void 0;i=c.shapeArgs,t=c.getTranslate(),s.styledMode||(h=c.shadowGroup,a&&!h&&(h=c.shadowGroup=o.g("shadow").add(r.shadowGroup)),h&&h.attr(t),n=r.pointAttribs(c,c.selected&&"select")),c.delayedRendering?(e.setRadialReference(r.center).attr(i).attr(t),s.styledMode||e.attr(n).attr({"stroke-linejoin":"round"}).shadow(a,h),c.delayedRendering=!1):(e.setRadialReference(r.center),s.styledMode||g(!0,l,n),g(!0,l,i,t),e.animate(l)),e.attr({visibility:c.visible?"inherit":"hidden"}),e.addClass(c.getClassName(),!0)}else e&&(c.graphic=e.destroy())}))},e.prototype.sortByAngle=function(t,e){t.sort((function(t,n){return"undefined"!==typeof t.angle&&(n.angle-t.angle)*e}))},e.prototype.translate=function(t){this.generatePoints();var e=this.options,n=e.slicedOffset,i=n+(e.borderWidth||0),r=u(e.startAngle,e.endAngle),s=this.startAngleRad=r.start;r=(this.endAngleRad=r.end)-s;var o=this.points,a=e.dataLabels.distance;e=e.ignoreHiddenPoint;var c,l=o.length,h=0;for(t||(this.center=t=this.getCenter()),c=0;c<l;c++){var d=o[c],p=s+h*r;!d.isValid()||e&&!d.visible||(h+=d.percentage/100);var g=s+h*r,v={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:Math.round(1e3*p)/1e3,end:Math.round(1e3*g)/1e3};d.shapeType="arc",d.shapeArgs=v,d.labelDistance=m(d.options.dataLabels&&d.options.dataLabels.distance,a),d.labelDistance=y(d.labelDistance,v.r),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,d.labelDistance),g=(g+p)/2,g>1.5*Math.PI?g-=2*Math.PI:g<-Math.PI/2&&(g+=2*Math.PI),d.slicedTranslation={translateX:Math.round(Math.cos(g)*n),translateY:Math.round(Math.sin(g)*n)},v=Math.cos(g)*t[2]/2;var b=Math.sin(g)*t[2]/2;d.tooltipPos=[t[0]+.7*v,t[1]+.7*b],d.half=g<-Math.PI/2||g>Math.PI/2?1:0,d.angle=g,p=Math.min(i,d.labelDistance/5),d.labelPosition={natural:{x:t[0]+v+Math.cos(g)*d.labelDistance,y:t[1]+b+Math.sin(g)*d.labelDistance},final:{},alignment:0>d.labelDistance?"center":d.half?"right":"left",connectorPosition:{breakAt:{x:t[0]+v+Math.cos(g)*p,y:t[1]+b+Math.sin(g)*p},touchingSliceAt:{x:t[0]+v,y:t[1]+b}}}}f(this,"afterTranslate")},e.prototype.updateTotals=function(){var t,e=this.points,n=e.length,i=this.options.ignoreHiddenPoint,r=0;for(t=0;t<n;t++){var s=e[t];!s.isValid()||i&&!s.visible||(r+=s.y)}for(this.total=r,t=0;t<n;t++)s=e[t],s.percentage=0<r&&(s.visible||!i)?s.y/r*100:0,s.total=r},e.defaultOptions=g(o.defaultOptions,{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{allowOverlap:!0,connectorPadding:5,connectorShape:"fixedOffset",crookDistance:"70%",distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:r.backgroundColor,borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}),e}(o),p(l.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawLegendSymbol:i.drawRectangle,drawTracker:e.prototype.drawTracker,getCenter:t.getCenter,getSymbol:n,isCartesian:!1,noSharedTooltip:!0,pointAttribs:e.prototype.pointAttribs,pointClass:s,requireSorting:!1,searchPoint:n,trackerGroups:["group","dataLabelsGroup"]}),a.registerSeriesType("pie",l),l})),e(n,"Series/Pie/PieDataLabel.js",[n["Core/Series/DataLabel.js"],n["Core/Globals.js"],n["Core/Color/Palette.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i,r,s){var o,a=e.noop,c=i.distribute,l=r.series,h=s.arrayMax,u=s.clamp,d=s.defined,p=s.merge,f=s.pick,g=s.relativeLength;return function(e){function i(){var t,e,i,r,s,o,a,u,g,m,y,v,b=this,w=b.data,_=b.chart,x=b.options.dataLabels||{},T=x.connectorPadding,S=_.plotWidth,C=_.plotHeight,k=_.plotLeft,O=Math.round(_.chartWidth/3),I=b.center,E=I[2]/2,A=I[1],P=[[],[]],N=[0,0,0,0],j=b.dataLabelPositioners;b.visible&&(x.enabled||b._hasPointLabels)&&(w.forEach((function(t){t.dataLabel&&t.visible&&t.dataLabel.shortened&&(t.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),t.dataLabel.shortened=!1)})),l.prototype.drawDataLabels.apply(b),w.forEach((function(t){t.dataLabel&&(t.visible?(P[t.half].push(t),t.dataLabel._pos=null,!d(x.style.width)&&!d(t.options.dataLabels&&t.options.dataLabels.style&&t.options.dataLabels.style.width)&&t.dataLabel.getBBox().width>O&&(t.dataLabel.css({width:Math.round(.7*O)+"px"}),t.dataLabel.shortened=!0)):(t.dataLabel=t.dataLabel.destroy(),t.dataLabels&&1===t.dataLabels.length&&delete t.dataLabels))})),P.forEach((function(e,n){var i,l=e.length,h=[];if(l){if(b.sortByAngle(e,n-.5),0<b.maxLabelDistance){var p=Math.max(0,A-E-b.maxLabelDistance),w=Math.min(A+E+b.maxLabelDistance,_.plotHeight);e.forEach((function(t){0<t.labelDistance&&t.dataLabel&&(t.top=Math.max(0,A-E-t.labelDistance),t.bottom=Math.min(A+E+t.labelDistance,_.plotHeight),i=t.dataLabel.getBBox().height||21,t.distributeBox={target:t.labelPosition.natural.y-t.top+i/2,size:i,rank:t.y},h.push(t.distributeBox))})),p=w+i-p,c(h,p,p/5)}for(y=0;y<l;y++){if(t=e[y],o=t.labelPosition,r=t.dataLabel,m=!1===t.visible?"hidden":"inherit",g=p=o.natural.y,h&&d(t.distributeBox)&&("undefined"===typeof t.distributeBox.pos?m="hidden":(a=t.distributeBox.size,g=j.radialDistributionY(t))),delete t.positionIndex,x.justify)u=j.justify(t,E,I);else switch(x.alignTo){case"connectors":u=j.alignToConnectors(e,n,S,k);break;case"plotEdges":u=j.alignToPlotEdges(r,n,S,k);break;default:u=j.radialDistributionX(b,t,g,p)}r._attr={visibility:m,align:o.alignment},v=t.options.dataLabels||{},r._pos={x:u+f(v.x,x.x)+({left:T,right:-T}[o.alignment]||0),y:g+f(v.y,x.y)-10},o.final.x=u,o.final.y=g,f(x.crop,!0)&&(s=r.getBBox().width,p=null,u-s<T&&1===n?(p=Math.round(s-u+T),N[3]=Math.max(p,N[3])):u+s>S-T&&0===n&&(p=Math.round(u+s-S+T),N[1]=Math.max(p,N[1])),0>g-a/2?N[0]=Math.max(Math.round(a/2-g),N[0]):g+a/2>C&&(N[2]=Math.max(Math.round(g+a/2-C),N[2])),r.sideOverflow=p)}}})),0===h(N)||this.verifyDataLabelOverflow(N))&&(this.placeDataLabels(),this.points.forEach((function(t){var s;(v=p(x,t.options.dataLabels),e=f(v.connectorWidth,1))&&(i=t.connector,(r=t.dataLabel)&&r._pos&&t.visible&&0<t.labelDistance?(m=r._attr.visibility,(s=!i)&&(t.connector=i=_.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+t.colorIndex+(t.className?" "+t.className:"")).add(b.dataLabelsGroup),_.styledMode||i.attr({"stroke-width":e,stroke:v.connectorColor||t.color||n.neutralColor60})),i[s?"attr":"animate"]({d:t.getConnectorPath()}),i.attr("visibility",m)):i&&(t.connector=i.destroy()))})))}function r(){this.points.forEach((function(t){var e,n=t.dataLabel;n&&t.visible&&((e=n._pos)?(n.sideOverflow&&(n._attr.width=Math.max(n.getBBox().width-n.sideOverflow,0),n.css({width:n._attr.width+"px",textOverflow:(this.options.dataLabels.style||{}).textOverflow||"ellipsis"}),n.shortened=!0),n.attr(n._attr),n[n.moved?"animate":"attr"](e),n.moved=!0):n&&n.attr({y:-9999})),delete t.distributeBox}),this)}function s(t){var e=this.center,n=this.options,i=n.center,r=n.minSize||80,s=null!==n.size;if(!s){if(null!==i[0])var o=Math.max(e[2]-Math.max(t[1],t[3]),r);else o=Math.max(e[2]-t[1]-t[3],r),e[0]+=(t[3]-t[1])/2;null!==i[1]?o=u(o,r,e[2]-Math.max(t[0],t[2])):(o=u(o,r,e[2]-t[0]-t[2]),e[1]+=(t[0]-t[2])/2),o<e[2]?(e[2]=o,e[3]=Math.min(g(n.innerSize||0,o),o),this.translate(e),this.drawDataLabels&&this.drawDataLabels()):s=!0}return s}var o=[],m={radialDistributionY:function(t){return t.top+t.distributeBox.pos},radialDistributionX:function(t,e,n,i){return t.getX(n<e.top+2||n>e.bottom-2?i:n,e.half,e)},justify:function(t,e,n){return n[0]+(t.half?-1:1)*(e+t.labelDistance)},alignToPlotEdges:function(t,e,n,i){return t=t.getBBox().width,e?t+i:n-t-i},alignToConnectors:function(t,e,n,i){var r,s=0;return t.forEach((function(t){r=t.dataLabel.getBBox().width,r>s&&(s=r)})),e?s+i:n-s-i}};e.compose=function(e){t.compose(l),-1===o.indexOf(e)&&(o.push(e),e=e.prototype,e.dataLabelPositioners=m,e.alignDataLabel=a,e.drawDataLabels=i,e.placeDataLabels=r,e.verifyDataLabelOverflow=s)}}(o||(o={})),o})),e(n,"Extensions/OverlappingDataLabels.js",[n["Core/Chart/Chart.js"],n["Core/Utilities.js"]],(function(t,e){function n(t,e){var n=!1;if(t){var i=t.newOpacity;t.oldOpacity!==i&&(t.alignAttr&&t.placed?(t[i?"removeClass":"addClass"]("highcharts-data-label-hidden"),n=!0,t.alignAttr.opacity=i,t[t.isOld?"animate":"attr"](t.alignAttr,null,(function(){e.styledMode||t.css({pointerEvents:i?"auto":"none"})})),r(e,"afterHideOverlappingLabel")):t.attr({opacity:i})),t.isOld=!0}return n}var i=e.addEvent,r=e.fireEvent,s=e.isArray,o=e.isNumber,a=e.objectEach,c=e.pick;i(t,"render",(function(){var t=this,e=[];(this.labelCollectors||[]).forEach((function(t){e=e.concat(t())})),(this.yAxis||[]).forEach((function(t){t.stacking&&t.options.stackLabels&&!t.options.stackLabels.allowOverlap&&a(t.stacking.stacks,(function(t){a(t,(function(t){t.label&&"hidden"!==t.label.visibility&&e.push(t.label)}))}))})),(this.series||[]).forEach((function(i){var r=i.options.dataLabels;i.visible&&(!1!==r.enabled||i._hasPointLabels)&&(r=function(i){return i.forEach((function(i){i.visible&&(s(i.dataLabels)?i.dataLabels:i.dataLabel?[i.dataLabel]:[]).forEach((function(r){var s=r.options;r.labelrank=c(s.labelrank,i.labelrank,i.shapeArgs&&i.shapeArgs.height),s.allowOverlap?(r.oldOpacity=r.opacity,r.newOpacity=1,n(r,t)):e.push(r)}))}))},r(i.nodes||[]),r(i.points))})),this.hideOverlappingLabels(e)})),t.prototype.hideOverlappingLabels=function(t){var e,i,s,a=this,c=t.length,l=a.renderer,h=!1,u=function(t){var e,n,i=t.box?0:t.padding||0,r=e=0;if(t&&(!t.alignAttr||t.placed)){var s=t.alignAttr||{x:t.attr("x"),y:t.attr("y")},a=t.parentGroup;t.width||(e=t.getBBox(),t.width=e.width,t.height=e.height,e=l.fontMetrics(null,t.element).h);var c=t.width-2*i;return(n={left:"0",center:"0.5",right:"1"}[t.alignValue])?r=+n*c:o(t.x)&&Math.round(t.x)!==t.translateX&&(r=t.x-t.translateX),{x:s.x+(a.translateX||0)+i-(r||0),y:s.y+(a.translateY||0)+i-e,width:t.width-2*i,height:t.height-2*i}}};for(i=0;i<c;i++)(e=t[i])&&(e.oldOpacity=e.opacity,e.newOpacity=1,e.absoluteBox=u(e));for(t.sort((function(t,e){return(e.labelrank||0)-(t.labelrank||0)})),i=0;i<c;i++){var d=(u=t[i])&&u.absoluteBox;for(e=i+1;e<c;++e){var p=(s=t[e])&&s.absoluteBox;!d||!p||u===s||0===u.newOpacity||0===s.newOpacity||p.x>=d.x+d.width||p.x+p.width<=d.x||p.y>=d.y+d.height||p.y+p.height<=d.y||((u.labelrank<s.labelrank?u:s).newOpacity=0)}}t.forEach((function(t){n(t,a)&&(h=!0)})),h&&r(a,"afterHideAllOverlappingLabels")}})),e(n,"Core/Responsive.js",[n["Core/Utilities.js"]],(function(t){var e,n=t.extend,i=t.find,r=t.isArray,s=t.isObject,o=t.merge,a=t.objectEach,c=t.pick,l=t.splat,h=t.uniqueKey;return function(t){var e=[];t.compose=function(t){return-1===e.indexOf(t)&&(e.push(t),n(t.prototype,u.prototype)),t};var u=function(){function t(){}return t.prototype.currentOptions=function(t){function e(t,i,o,c){var h;a(t,(function(t,a){if(!c&&-1<n.collectionsWithUpdate.indexOf(a)&&i[a])for(t=l(t),o[a]=[],h=0;h<Math.max(t.length,i[a].length);h++)i[a][h]&&(void 0===t[h]?o[a][h]=i[a][h]:(o[a][h]={},e(t[h],i[a][h],o[a][h],c+1)));else s(t)?(o[a]=r(t)?[]:{},e(t,i[a]||{},o[a],c+1)):o[a]="undefined"===typeof i[a]?null:i[a]}))}var n=this,i={};return e(t,this.options,i,0),i},t.prototype.matchResponsiveRule=function(t,e){var n=t.condition;(n.callback||function(){return this.chartWidth<=c(n.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=c(n.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=c(n.minWidth,0)&&this.chartHeight>=c(n.minHeight,0)}).call(this)&&e.push(t._id)},t.prototype.setResponsive=function(t,e){var n=this,r=this.options.responsive,s=this.currentResponsive,a=[];!e&&r&&r.rules&&r.rules.forEach((function(t){"undefined"===typeof t._id&&(t._id=h()),n.matchResponsiveRule(t,a)}),this),e=o.apply(void 0,a.map((function(t){return i((r||{}).rules||[],(function(e){return e._id===t}))})).map((function(t){return t&&t.chartOptions}))),e.isResponsiveOptions=!0,a=a.toString()||void 0,a!==(s&&s.ruleIds)&&(s&&this.update(s.undoOptions,t,!0),a?(s=this.currentOptions(e),s.isResponsiveOptions=!0,this.currentResponsive={ruleIds:a,mergedOptions:e,undoOptions:s},this.update(e,t,!0)):this.currentResponsive=void 0)},t}()}(e||(e={})),e})),e(n,"masters/highcharts.src.js",[n["Core/Globals.js"],n["Core/Utilities.js"],n["Core/DefaultOptions.js"],n["Core/Animation/Fx.js"],n["Core/Animation/AnimationUtilities.js"],n["Core/Renderer/HTML/AST.js"],n["Core/FormatUtilities.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Renderer/SVG/SVGRenderer.js"],n["Core/Renderer/HTML/HTMLElement.js"],n["Core/Renderer/HTML/HTMLRenderer.js"],n["Core/Axis/Axis.js"],n["Core/Axis/DateTimeAxis.js"],n["Core/Axis/LogarithmicAxis.js"],n["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],n["Core/Axis/Tick.js"],n["Core/Tooltip.js"],n["Core/Series/Point.js"],n["Core/Pointer.js"],n["Core/MSPointer.js"],n["Core/Legend/Legend.js"],n["Core/Chart/Chart.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Series/Column/ColumnSeries.js"],n["Series/Column/ColumnDataLabel.js"],n["Series/Pie/PieSeries.js"],n["Series/Pie/PieDataLabel.js"],n["Core/Series/DataLabel.js"],n["Core/Responsive.js"],n["Core/Color/Color.js"],n["Core/Time.js"]],(function(t,e,n,i,r,s,o,a,c,l,h,u,d,p,f,g,m,y,v,b,w,_,x,T,S,C,k,O,I,E,A,P,N){return t.animate=r.animate,t.animObject=r.animObject,t.getDeferredAnimation=r.getDeferredAnimation,t.setAnimation=r.setAnimation,t.stop=r.stop,t.timers=i.timers,t.AST=s,t.Axis=d,t.Chart=x,t.chart=x.chart,t.Fx=i,t.Legend=_,t.PlotLineOrBand=g,t.Point=v,t.Pointer=w.isRequired()?w:b,t.Series=T,t.SVGElement=c,t.SVGRenderer=l,t.Tick=m,t.Time=N,t.Tooltip=y,t.Color=P,t.color=P.parse,u.compose(l),h.compose(c),t.defaultOptions=n.defaultOptions,t.getOptions=n.getOptions,t.time=n.defaultTime,t.setOptions=n.setOptions,t.dateFormat=o.dateFormat,t.format=o.format,t.numberFormat=o.numberFormat,t.addEvent=e.addEvent,t.arrayMax=e.arrayMax,t.arrayMin=e.arrayMin,t.attr=e.attr,t.clearTimeout=e.clearTimeout,t.correctFloat=e.correctFloat,t.createElement=e.createElement,t.css=e.css,t.defined=e.defined,t.destroyObjectProperties=e.destroyObjectProperties,t.discardElement=e.discardElement,t.distribute=a.distribute,t.erase=e.erase,t.error=e.error,t.extend=e.extend,t.extendClass=e.extendClass,t.find=e.find,t.fireEvent=e.fireEvent,t.getMagnitude=e.getMagnitude,t.getStyle=e.getStyle,t.inArray=e.inArray,t.isArray=e.isArray,t.isClass=e.isClass,t.isDOMElement=e.isDOMElement,t.isFunction=e.isFunction,t.isNumber=e.isNumber,t.isObject=e.isObject,t.isString=e.isString,t.keys=e.keys,t.merge=e.merge,t.normalizeTickInterval=e.normalizeTickInterval,t.objectEach=e.objectEach,t.offset=e.offset,t.pad=e.pad,t.pick=e.pick,t.pInt=e.pInt,t.relativeLength=e.relativeLength,t.removeEvent=e.removeEvent,t.seriesType=S.seriesType,t.splat=e.splat,t.stableSort=e.stableSort,t.syncTimeout=e.syncTimeout,t.timeUnits=e.timeUnits,t.uniqueKey=e.uniqueKey,t.useSerialIds=e.useSerialIds,t.wrap=e.wrap,k.compose(C),E.compose(T),p.compose(d),f.compose(d),I.compose(O),g.compose(d),A.compose(x),t})),n["masters/highcharts.src.js"]._modules=n,n["masters/highcharts.src.js"]}))},f069:function(t,e,n){"use strict";var i=n("59ed"),r=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new r(t)}},f30a:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("b774");class r{constructor(t,e){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=e;const n={};if(t.settings)for(const i in t.settings){const e=t.settings[i];n[i]=e.defaultValue}const r="__vue-devtools-plugin-settings__"+t.id;let s={...n};try{const t=localStorage.getItem(r),e=JSON.parse(t);Object.assign(s,e)}catch(o){}this.fallbacks={getSettings(){return s},setSettings(t){try{localStorage.setItem(r,JSON.stringify(t))}catch(o){}s=t}},e.on(i["a"],(t,e)=>{t===this.plugin.id&&this.fallbacks.setSettings(e)}),this.proxiedOn=new Proxy({},{get:(t,e)=>this.target?this.target.on[e]:(...t)=>{this.onQueue.push({method:e,args:t})}}),this.proxiedTarget=new Proxy({},{get:(t,e)=>this.target?this.target[e]:"on"===e?this.proxiedOn:Object.keys(this.fallbacks).includes(e)?(...t)=>(this.targetQueue.push({method:e,args:t,resolve:()=>{}}),this.fallbacks[e](...t)):(...t)=>new Promise(n=>{this.targetQueue.push({method:e,args:t,resolve:n})})})}async setRealTarget(t){this.target=t;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}},f5df:function(t,e,n){var i=n("00ee"),r=n("1626"),s=n("c6b6"),o=n("b622"),a=o("toStringTag"),c="Arguments"==s(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(n){}};t.exports=i?s:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=l(e=Object(t),a))?n:c?s(e):"Object"==(i=s(e))&&r(e.callee)?"Arguments":i}},f772:function(t,e,n){var i=n("5692"),r=n("90e3"),s=i("keys");t.exports=function(t){return s[t]||(s[t]=r(t))}},fb6a:function(t,e,n){"use strict";var i=n("23e7"),r=n("e8b5"),s=n("68ee"),o=n("861d"),a=n("23cb"),c=n("50c4"),l=n("fc6a"),h=n("8418"),u=n("b622"),d=n("1dde"),p=d("slice"),f=u("species"),g=[].slice,m=Math.max;i({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var n,i,u,d=l(this),p=c(d.length),y=a(t,p),v=a(void 0===e?p:e,p);if(r(d)&&(n=d.constructor,s(n)&&(n===Array||r(n.prototype))?n=void 0:o(n)&&(n=n[f],null===n&&(n=void 0)),n===Array||void 0===n))return g.call(d,y,v);for(i=new(void 0===n?Array:n)(m(v-y,0)),u=0;y<v;y++,u++)y in d&&h(i,u,d[y]);return i.length=u,i}})},fc6a:function(t,e,n){var i=n("44ad"),r=n("1d80");t.exports=function(t){return i(r(t))}},fce3:function(t,e,n){var i=n("d039"),r=n("da84"),s=r.RegExp;t.exports=i((function(){var t=s(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var i=n("4930");t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(t,e,n){var i=n("da84");t.exports=i.Promise},ffa6:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return u}));function i(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{c(i.next(t))}catch(e){s(e)}}function a(t){try{c(i["throw"](t))}catch(e){s(e)}}function c(t){t.done?n(t.value):r(t.value).then(o,a)}c((i=i.apply(t,e||[])).next())}))}function r(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return c([t,e])}}function c(s){if(n)throw new TypeError("Generator is already executing.");while(o)try{if(n=1,i&&(r=2&s[0]?i["return"]:s[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;function s(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,s=n.call(t),o=[];try{while((void 0===e||e-- >0)&&!(i=s.next()).done)o.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s["return"])&&n.call(s)}finally{if(r)throw r.error}}return o}function a(t,e,n){if(n||2===arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}Object.create;var c=n("1fd5"),l=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),h="[DEFAULT]",u=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new c["a"];if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:e});i&&n.resolve(i)}catch(r){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(p(t))try{this.getOrInitializeService({instanceIdentifier:h})}catch(f){}try{for(var i=s(this.instancesDeferred.entries()),r=i.next();!r.done;r=i.next()){var a=o(r.value,2),c=a[0],l=a[1],u=this.normalizeInstanceIdentifier(c);try{var d=this.getOrInitializeService({instanceIdentifier:u});l.resolve(d)}catch(f){}}}catch(g){e={error:g}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=h),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i(this,void 0,void 0,(function(){var t;return r(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(a(a([],o(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),o(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=h),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=h),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,r=void 0===i?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:a,options:r});try{for(var l=s(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var u=o(h.value,2),d=u[0],p=u[1],f=this.normalizeInstanceIdentifier(d);a===f&&p.resolve(c)}}catch(g){e={error:g}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return c},t.prototype.onInit=function(t,e){var n,i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);var s=this.instances.get(i);return s&&t(s,i),function(){r.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,r=this.onInitCallbacks.get(e);if(r)try{for(var o=s(r),a=o.next();!a.done;a=o.next()){var c=a.value;try{c(t,e)}catch(l){}}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,i=void 0===n?{}:n,r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:d(e),options:i}),this.instances.set(e,r),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(s){}return r||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=h),this.component?this.component.multipleInstances?t:h:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();function d(t){return t===h?void 0:t}function p(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new u(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()}}]);
//# sourceMappingURL=chunk-vendors.4b998855.js.map